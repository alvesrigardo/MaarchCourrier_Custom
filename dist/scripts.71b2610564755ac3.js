!function(R,At){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=R.document?At(R,!0):function(en){if(!en.document)throw new Error("jQuery requires a window with a document");return At(en)}:At(R)}(typeof window<"u"?window:this,function(R,At){"use strict";var en=[],gn=Object.getPrototypeOf,nn=en.slice,mn=en.flat?function(h){return en.flat.call(h)}:function(h){return en.concat.apply([],h)},st=en.push,Le=en.indexOf,xt={},ln=xt.toString,dn=xt.hasOwnProperty,H=dn.toString,W=H.call(Object),M={},ae=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},u=function(h){return null!=h&&h===h.window},k=R.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function x(h,v,E){var A,L,$=(E=E||k).createElement("script");if($.text=h,v)for(A in g)(L=v[A]||v.getAttribute&&v.getAttribute(A))&&$.setAttribute(A,L);E.head.appendChild($).parentNode.removeChild($)}function C(h){return null==h?h+"":"object"==typeof h||"function"==typeof h?xt[ln.call(h)]||"object":typeof h}var N="3.7.1",P=/HTML$/i,m=function(h,v){return new m.fn.init(h,v)};function q(h){var v=!!h&&"length"in h&&h.length,E=C(h);return!ae(h)&&!u(h)&&("array"===E||0===v||"number"==typeof v&&0<v&&v-1 in h)}function I(h,v){return h.nodeName&&h.nodeName.toLowerCase()===v.toLowerCase()}m.fn=m.prototype={jquery:N,constructor:m,length:0,toArray:function(){return nn.call(this)},get:function(h){return null==h?nn.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var v=m.merge(this.constructor(),h);return v.prevObject=this,v},each:function(h){return m.each(this,h)},map:function(h){return this.pushStack(m.map(this,function(v,E){return h.call(v,E,v)}))},slice:function(){return this.pushStack(nn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(h,v){return(v+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(h,v){return v%2}))},eq:function(h){var v=this.length,E=+h+(h<0?v:0);return this.pushStack(0<=E&&E<v?[this[E]]:[])},end:function(){return this.prevObject||this.constructor()},push:st,sort:en.sort,splice:en.splice},m.extend=m.fn.extend=function(){var h,v,E,A,L,$,V=arguments[0]||{},le=1,oe=arguments.length,_e=!1;for("boolean"==typeof V&&(_e=V,V=arguments[le]||{},le++),"object"==typeof V||ae(V)||(V={}),le===oe&&(V=this,le--);le<oe;le++)if(null!=(h=arguments[le]))for(v in h)A=h[v],"__proto__"!==v&&V!==A&&(_e&&A&&(m.isPlainObject(A)||(L=Array.isArray(A)))?(E=V[v],$=L&&!Array.isArray(E)?[]:L||m.isPlainObject(E)?E:{},L=!1,V[v]=m.extend(_e,$,A)):void 0!==A&&(V[v]=A));return V},m.extend({expando:"jQuery"+(N+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var v,E;return!(!h||"[object Object]"!==ln.call(h)||(v=gn(h))&&("function"!=typeof(E=dn.call(v,"constructor")&&v.constructor)||H.call(E)!==W))},isEmptyObject:function(h){var v;for(v in h)return!1;return!0},globalEval:function(h,v,E){x(h,{nonce:v&&v.nonce},E)},each:function(h,v){var E,A=0;if(q(h))for(E=h.length;A<E&&!1!==v.call(h[A],A,h[A]);A++);else for(A in h)if(!1===v.call(h[A],A,h[A]))break;return h},text:function(h){var v,E="",A=0,L=h.nodeType;if(!L)for(;v=h[A++];)E+=m.text(v);return 1===L||11===L?h.textContent:9===L?h.documentElement.textContent:3===L||4===L?h.nodeValue:E},makeArray:function(h,v){var E=v||[];return null!=h&&(q(Object(h))?m.merge(E,"string"==typeof h?[h]:h):st.call(E,h)),E},inArray:function(h,v,E){return null==v?-1:Le.call(v,h,E)},isXMLDoc:function(h){var E=h&&(h.ownerDocument||h).documentElement;return!P.test(h&&h.namespaceURI||E&&E.nodeName||"HTML")},merge:function(h,v){for(var E=+v.length,A=0,L=h.length;A<E;A++)h[L++]=v[A];return h.length=L,h},grep:function(h,v,E){for(var A=[],L=0,$=h.length,V=!E;L<$;L++)!v(h[L],L)!==V&&A.push(h[L]);return A},map:function(h,v,E){var A,L,$=0,V=[];if(q(h))for(A=h.length;$<A;$++)null!=(L=v(h[$],$,E))&&V.push(L);else for($ in h)null!=(L=v(h[$],$,E))&&V.push(L);return mn(V)},guid:1,support:M}),"function"==typeof Symbol&&(m.fn[Symbol.iterator]=en[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,v){xt["[object "+v+"]"]=v.toLowerCase()});var B=en.pop,ne=en.sort,J=en.splice,K="[\\x20\\t\\r\\n\\f]",Ce=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g");m.contains=function(h,v){var E=v&&v.parentNode;return h===E||!(!E||1!==E.nodeType||!(h.contains?h.contains(E):h.compareDocumentPosition&&16&h.compareDocumentPosition(E)))};var ge=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function kt(h,v){return v?"\0"===h?"\ufffd":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}m.escapeSelector=function(h){return(h+"").replace(ge,kt)};var l=k,ct=st;!function(){var h,v,E,A,L,$,V,le,oe,_e,Te=ct,Pe=m.expando,xe=0,je=0,mt=Tn(),X=Tn(),jt=Tn(),Cn=Tn(),on=function(G,fe){return G===fe&&(L=!0),0},Ir="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Dt="(?:\\\\[\\da-fA-F]{1,6}"+K+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Lt="\\["+K+"*("+Dt+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Dt+"))|)"+K+"*\\]",Po=":("+Dt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Lt+")*)|.*)\\)|)",It=new RegExp(K+"+","g"),cn=new RegExp("^"+K+"*,"+K+"*"),rr=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),wi=new RegExp(K+"|>"),zr=new RegExp(Po),Fr=new RegExp("^"+Dt+"$"),kr={ID:new RegExp("^#("+Dt+")"),CLASS:new RegExp("^\\.("+Dt+")"),TAG:new RegExp("^("+Dt+"|[*])"),ATTR:new RegExp("^"+Lt),PSEUDO:new RegExp("^"+Po),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+Ir+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},_o=/^(?:input|select|textarea|button)$/i,ti=/^h\d$/i,Qt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bn=/[+~]/,kn=new RegExp("\\\\[\\da-fA-F]{1,6}"+K+"?|\\\\([^\\r\\n\\f])","g"),Yn=function(G,fe){var Se="0x"+G.slice(1)-65536;return fe||(Se<0?String.fromCharCode(Se+65536):String.fromCharCode(Se>>10|55296,1023&Se|56320))},ao=function(){or()},Gn=co(function(G){return!0===G.disabled&&I(G,"fieldset")},{dir:"parentNode",next:"legend"});try{Te.apply(en=nn.call(l.childNodes),l.childNodes)}catch{Te={apply:function(fe,Se){ct.apply(fe,nn.call(Se))},call:function(fe){ct.apply(fe,nn.call(arguments,1))}}}function Tt(G,fe,Se,Re){var $e,nt,it,bt,Qe,Kt,Ot,Rt=fe&&fe.ownerDocument,_t=fe?fe.nodeType:9;if(Se=Se||[],"string"!=typeof G||!G||1!==_t&&9!==_t&&11!==_t)return Se;if(!Re&&(or(fe),fe=fe||$,le)){if(11!==_t&&(Qe=Qt.exec(G)))if($e=Qe[1]){if(9===_t){if(!(it=fe.getElementById($e)))return Se;if(it.id===$e)return Te.call(Se,it),Se}else if(Rt&&(it=Rt.getElementById($e))&&Tt.contains(fe,it)&&it.id===$e)return Te.call(Se,it),Se}else{if(Qe[2])return Te.apply(Se,fe.getElementsByTagName(G)),Se;if(($e=Qe[3])&&fe.getElementsByClassName)return Te.apply(Se,fe.getElementsByClassName($e)),Se}if(!(Cn[G+" "]||oe&&oe.test(G))){if(Ot=G,Rt=fe,1===_t&&(wi.test(G)||rr.test(G))){for((Rt=bn.test(G)&&$s(fe.parentNode)||fe)==fe&&M.scope||((bt=fe.getAttribute("id"))?bt=m.escapeSelector(bt):fe.setAttribute("id",bt=Pe)),nt=(Kt=yo(G)).length;nt--;)Kt[nt]=(bt?"#"+bt:":scope")+" "+Lo(Kt[nt]);Ot=Kt.join(",")}try{return Te.apply(Se,Rt.querySelectorAll(Ot)),Se}catch{Cn(G,!0)}finally{bt===Pe&&fe.removeAttribute("id")}}}return Qi(G.replace(Ce,"$1"),fe,Se,Re)}function Tn(){var G=[];return function fe(Se,Re){return G.push(Se+" ")>v.cacheLength&&delete fe[G.shift()],fe[Se+" "]=Re}}function sn(G){return G[Pe]=!0,G}function an(G){var fe=$.createElement("fieldset");try{return!!G(fe)}catch{return!1}finally{fe.parentNode&&fe.parentNode.removeChild(fe),fe=null}}function lo(G){return function(fe){return I(fe,"input")&&fe.type===G}}function ni(G){return function(fe){return(I(fe,"input")||I(fe,"button"))&&fe.type===G}}function Fs(G){return function(fe){return"form"in fe?fe.parentNode&&!1===fe.disabled?"label"in fe?"label"in fe.parentNode?fe.parentNode.disabled===G:fe.disabled===G:fe.isDisabled===G||fe.isDisabled!==!G&&Gn(fe)===G:fe.disabled===G:"label"in fe&&fe.disabled===G}}function Dr(G){return sn(function(fe){return fe=+fe,sn(function(Se,Re){for(var $e,nt=G([],Se.length,fe),it=nt.length;it--;)Se[$e=nt[it]]&&(Se[$e]=!(Re[$e]=Se[$e]))})})}function $s(G){return G&&typeof G.getElementsByTagName<"u"&&G}function or(G){var fe,Se=G?G.ownerDocument||G:l;return Se!=$&&9===Se.nodeType&&Se.documentElement&&(V=($=Se).documentElement,le=!m.isXMLDoc($),_e=V.matches||V.webkitMatchesSelector||V.msMatchesSelector,V.msMatchesSelector&&l!=$&&(fe=$.defaultView)&&fe.top!==fe&&fe.addEventListener("unload",ao),M.getById=an(function(Re){return V.appendChild(Re).id=m.expando,!$.getElementsByName||!$.getElementsByName(m.expando).length}),M.disconnectedMatch=an(function(Re){return _e.call(Re,"*")}),M.scope=an(function(){return $.querySelectorAll(":scope")}),M.cssHas=an(function(){try{return $.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),M.getById?(v.filter.ID=function(Re){var $e=Re.replace(kn,Yn);return function(nt){return nt.getAttribute("id")===$e}},v.find.ID=function(Re,$e){if(typeof $e.getElementById<"u"&&le){var nt=$e.getElementById(Re);return nt?[nt]:[]}}):(v.filter.ID=function(Re){var $e=Re.replace(kn,Yn);return function(nt){var it=typeof nt.getAttributeNode<"u"&&nt.getAttributeNode("id");return it&&it.value===$e}},v.find.ID=function(Re,$e){if(typeof $e.getElementById<"u"&&le){var nt,it,bt,Qe=$e.getElementById(Re);if(Qe){if((nt=Qe.getAttributeNode("id"))&&nt.value===Re)return[Qe];for(bt=$e.getElementsByName(Re),it=0;Qe=bt[it++];)if((nt=Qe.getAttributeNode("id"))&&nt.value===Re)return[Qe]}return[]}}),v.find.TAG=function(Re,$e){return typeof $e.getElementsByTagName<"u"?$e.getElementsByTagName(Re):$e.querySelectorAll(Re)},v.find.CLASS=function(Re,$e){if(typeof $e.getElementsByClassName<"u"&&le)return $e.getElementsByClassName(Re)},oe=[],an(function(Re){var $e;V.appendChild(Re).innerHTML="<a id='"+Pe+"' href='' disabled='disabled'></a><select id='"+Pe+"-\r\\' disabled='disabled'><option selected=''></option></select>",Re.querySelectorAll("[selected]").length||oe.push("\\["+K+"*(?:value|"+Ir+")"),Re.querySelectorAll("[id~="+Pe+"-]").length||oe.push("~="),Re.querySelectorAll("a#"+Pe+"+*").length||oe.push(".#.+[+~]"),Re.querySelectorAll(":checked").length||oe.push(":checked"),($e=$.createElement("input")).setAttribute("type","hidden"),Re.appendChild($e).setAttribute("name","D"),V.appendChild(Re).disabled=!0,2!==Re.querySelectorAll(":disabled").length&&oe.push(":enabled",":disabled"),($e=$.createElement("input")).setAttribute("name",""),Re.appendChild($e),Re.querySelectorAll("[name='']").length||oe.push("\\["+K+"*name"+K+"*="+K+"*(?:''|\"\")")}),M.cssHas||oe.push(":has"),oe=oe.length&&new RegExp(oe.join("|")),on=function(Re,$e){if(Re===$e)return L=!0,0;var nt=!Re.compareDocumentPosition-!$e.compareDocumentPosition;return nt||(1&(nt=(Re.ownerDocument||Re)==($e.ownerDocument||$e)?Re.compareDocumentPosition($e):1)||!M.sortDetached&&$e.compareDocumentPosition(Re)===nt?Re===$||Re.ownerDocument==l&&Tt.contains(l,Re)?-1:$e===$||$e.ownerDocument==l&&Tt.contains(l,$e)?1:A?Le.call(A,Re)-Le.call(A,$e):0:4&nt?-1:1)}),$}for(h in Tt.matches=function(G,fe){return Tt(G,null,null,fe)},Tt.matchesSelector=function(G,fe){if(or(G),le&&!Cn[fe+" "]&&(!oe||!oe.test(fe)))try{var Se=_e.call(G,fe);if(Se||M.disconnectedMatch||G.document&&11!==G.document.nodeType)return Se}catch{Cn(fe,!0)}return 0<Tt(fe,$,null,[G]).length},Tt.contains=function(G,fe){return(G.ownerDocument||G)!=$&&or(G),m.contains(G,fe)},Tt.attr=function(G,fe){(G.ownerDocument||G)!=$&&or(G);var Se=v.attrHandle[fe.toLowerCase()],Re=Se&&dn.call(v.attrHandle,fe.toLowerCase())?Se(G,fe,!le):void 0;return void 0!==Re?Re:G.getAttribute(fe)},Tt.error=function(G){throw new Error("Syntax error, unrecognized expression: "+G)},m.uniqueSort=function(G){var fe,Se=[],Re=0,$e=0;if(L=!M.sortStable,A=!M.sortStable&&nn.call(G,0),ne.call(G,on),L){for(;fe=G[$e++];)fe===G[$e]&&(Re=Se.push($e));for(;Re--;)J.call(G,Se[Re],1)}return A=null,G},m.fn.uniqueSort=function(){return this.pushStack(m.uniqueSort(nn.apply(this)))},(v=m.expr={cacheLength:50,createPseudo:sn,match:kr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(G){return G[1]=G[1].replace(kn,Yn),G[3]=(G[3]||G[4]||G[5]||"").replace(kn,Yn),"~="===G[2]&&(G[3]=" "+G[3]+" "),G.slice(0,4)},CHILD:function(G){return G[1]=G[1].toLowerCase(),"nth"===G[1].slice(0,3)?(G[3]||Tt.error(G[0]),G[4]=+(G[4]?G[5]+(G[6]||1):2*("even"===G[3]||"odd"===G[3])),G[5]=+(G[7]+G[8]||"odd"===G[3])):G[3]&&Tt.error(G[0]),G},PSEUDO:function(G){var fe,Se=!G[6]&&G[2];return kr.CHILD.test(G[0])?null:(G[3]?G[2]=G[4]||G[5]||"":Se&&zr.test(Se)&&(fe=yo(Se,!0))&&(fe=Se.indexOf(")",Se.length-fe)-Se.length)&&(G[0]=G[0].slice(0,fe),G[2]=Se.slice(0,fe)),G.slice(0,3))}},filter:{TAG:function(G){var fe=G.replace(kn,Yn).toLowerCase();return"*"===G?function(){return!0}:function(Se){return I(Se,fe)}},CLASS:function(G){var fe=mt[G+" "];return fe||(fe=new RegExp("(^|"+K+")"+G+"("+K+"|$)"))&&mt(G,function(Se){return fe.test("string"==typeof Se.className&&Se.className||typeof Se.getAttribute<"u"&&Se.getAttribute("class")||"")})},ATTR:function(G,fe,Se){return function(Re){var $e=Tt.attr(Re,G);return null==$e?"!="===fe:!fe||($e+="","="===fe?$e===Se:"!="===fe?$e!==Se:"^="===fe?Se&&0===$e.indexOf(Se):"*="===fe?Se&&-1<$e.indexOf(Se):"$="===fe?Se&&$e.slice(-Se.length)===Se:"~="===fe?-1<(" "+$e.replace(It," ")+" ").indexOf(Se):"|="===fe&&($e===Se||$e.slice(0,Se.length+1)===Se+"-"))}},CHILD:function(G,fe,Se,Re,$e){var nt="nth"!==G.slice(0,3),it="last"!==G.slice(-4),bt="of-type"===fe;return 1===Re&&0===$e?function(Qe){return!!Qe.parentNode}:function(Qe,Kt,Ot){var Rt,_t,St,Nn,Jn,An=nt!==it?"nextSibling":"previousSibling",vr=Qe.parentNode,Sr=bt&&Qe.nodeName.toLowerCase(),Pr=!Ot&&!bt,Zt=!1;if(vr){if(nt){for(;An;){for(St=Qe;St=St[An];)if(bt?I(St,Sr):1===St.nodeType)return!1;Jn=An="only"===G&&!Jn&&"nextSibling"}return!0}if(Jn=[it?vr.firstChild:vr.lastChild],it&&Pr){for(Zt=(Nn=(Rt=(_t=vr[Pe]||(vr[Pe]={}))[G]||[])[0]===xe&&Rt[1])&&Rt[2],St=Nn&&vr.childNodes[Nn];St=++Nn&&St&&St[An]||(Zt=Nn=0)||Jn.pop();)if(1===St.nodeType&&++Zt&&St===Qe){_t[G]=[xe,Nn,Zt];break}}else if(Pr&&(Zt=Nn=(Rt=(_t=Qe[Pe]||(Qe[Pe]={}))[G]||[])[0]===xe&&Rt[1]),!1===Zt)for(;(St=++Nn&&St&&St[An]||(Zt=Nn=0)||Jn.pop())&&(!(bt?I(St,Sr):1===St.nodeType)||!++Zt||(Pr&&((_t=St[Pe]||(St[Pe]={}))[G]=[xe,Zt]),St!==Qe)););return(Zt-=$e)===Re||Zt%Re==0&&0<=Zt/Re}}},PSEUDO:function(G,fe){var Se,Re=v.pseudos[G]||v.setFilters[G.toLowerCase()]||Tt.error("unsupported pseudo: "+G);return Re[Pe]?Re(fe):1<Re.length?(Se=[G,G,"",fe],v.setFilters.hasOwnProperty(G.toLowerCase())?sn(function($e,nt){for(var it,bt=Re($e,fe),Qe=bt.length;Qe--;)$e[it=Le.call($e,bt[Qe])]=!(nt[it]=bt[Qe])}):function($e){return Re($e,0,Se)}):Re}},pseudos:{not:sn(function(G){var fe=[],Se=[],Re=Us(G.replace(Ce,"$1"));return Re[Pe]?sn(function($e,nt,it,bt){for(var Qe,Kt=Re($e,null,bt,[]),Ot=$e.length;Ot--;)(Qe=Kt[Ot])&&($e[Ot]=!(nt[Ot]=Qe))}):function($e,nt,it){return fe[0]=$e,Re(fe,null,it,Se),fe[0]=null,!Se.pop()}}),has:sn(function(G){return function(fe){return 0<Tt(G,fe).length}}),contains:sn(function(G){return G=G.replace(kn,Yn),function(fe){return-1<(fe.textContent||m.text(fe)).indexOf(G)}}),lang:sn(function(G){return Fr.test(G||"")||Tt.error("unsupported lang: "+G),G=G.replace(kn,Yn).toLowerCase(),function(fe){var Se;do{if(Se=le?fe.lang:fe.getAttribute("xml:lang")||fe.getAttribute("lang"))return(Se=Se.toLowerCase())===G||0===Se.indexOf(G+"-")}while((fe=fe.parentNode)&&1===fe.nodeType);return!1}}),target:function(G){var fe=R.location&&R.location.hash;return fe&&fe.slice(1)===G.id},root:function(G){return G===V},focus:function(G){return G===function(){try{return $.activeElement}catch{}}()&&$.hasFocus()&&!!(G.type||G.href||~G.tabIndex)},enabled:Fs(!1),disabled:Fs(!0),checked:function(G){return I(G,"input")&&!!G.checked||I(G,"option")&&!!G.selected},selected:function(G){return!0===G.selected},empty:function(G){for(G=G.firstChild;G;G=G.nextSibling)if(G.nodeType<6)return!1;return!0},parent:function(G){return!v.pseudos.empty(G)},header:function(G){return ti.test(G.nodeName)},input:function(G){return _o.test(G.nodeName)},button:function(G){return I(G,"input")&&"button"===G.type||I(G,"button")},text:function(G){var fe;return I(G,"input")&&"text"===G.type&&(null==(fe=G.getAttribute("type"))||"text"===fe.toLowerCase())},first:Dr(function(){return[0]}),last:Dr(function(G,fe){return[fe-1]}),eq:Dr(function(G,fe,Se){return[Se<0?Se+fe:Se]}),even:Dr(function(G,fe){for(var Se=0;Se<fe;Se+=2)G.push(Se);return G}),odd:Dr(function(G,fe){for(var Se=1;Se<fe;Se+=2)G.push(Se);return G}),lt:Dr(function(G,fe,Se){var Re;for(Re=Se<0?Se+fe:fe<Se?fe:Se;0<=--Re;)G.push(Re);return G}),gt:Dr(function(G,fe,Se){for(var Re=Se<0?Se+fe:Se;++Re<fe;)G.push(Re);return G})}}).pseudos.nth=v.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[h]=lo(h);for(h in{submit:!0,reset:!0})v.pseudos[h]=ni(h);function Bo(){}function yo(G,fe){var Se,Re,$e,nt,it,bt,Qe,Kt=X[G+" "];if(Kt)return fe?0:Kt.slice(0);for(it=G,bt=[],Qe=v.preFilter;it;){for(nt in Se&&!(Re=cn.exec(it))||(Re&&(it=it.slice(Re[0].length)||it),bt.push($e=[])),Se=!1,(Re=rr.exec(it))&&(Se=Re.shift(),$e.push({value:Se,type:Re[0].replace(Ce," ")}),it=it.slice(Se.length)),v.filter)!(Re=kr[nt].exec(it))||Qe[nt]&&!(Re=Qe[nt](Re))||(Se=Re.shift(),$e.push({value:Se,type:nt,matches:Re}),it=it.slice(Se.length));if(!Se)break}return fe?it.length:it?Tt.error(G):X(G,bt).slice(0)}function Lo(G){for(var fe=0,Se=G.length,Re="";fe<Se;fe++)Re+=G[fe].value;return Re}function co(G,fe,Se){var Re=fe.dir,$e=fe.next,nt=$e||Re,it=Se&&"parentNode"===nt,bt=je++;return fe.first?function(Qe,Kt,Ot){for(;Qe=Qe[Re];)if(1===Qe.nodeType||it)return G(Qe,Kt,Ot);return!1}:function(Qe,Kt,Ot){var Rt,_t,St=[xe,bt];if(Ot){for(;Qe=Qe[Re];)if((1===Qe.nodeType||it)&&G(Qe,Kt,Ot))return!0}else for(;Qe=Qe[Re];)if(1===Qe.nodeType||it)if(_t=Qe[Pe]||(Qe[Pe]={}),$e&&I(Qe,$e))Qe=Qe[Re]||Qe;else{if((Rt=_t[nt])&&Rt[0]===xe&&Rt[1]===bt)return St[2]=Rt[2];if((_t[nt]=St)[2]=G(Qe,Kt,Ot))return!0}return!1}}function bo(G){return 1<G.length?function(fe,Se,Re){for(var $e=G.length;$e--;)if(!G[$e](fe,Se,Re))return!1;return!0}:G[0]}function Hs(G,fe,Se,Re,$e){for(var nt,it=[],bt=0,Qe=G.length,Kt=null!=fe;bt<Qe;bt++)(nt=G[bt])&&(Se&&!Se(nt,Re,$e)||(it.push(nt),Kt&&fe.push(bt)));return it}function ri(G,fe,Se,Re,$e,nt){return Re&&!Re[Pe]&&(Re=ri(Re)),$e&&!$e[Pe]&&($e=ri($e,nt)),sn(function(it,bt,Qe,Kt){var Ot,Rt,_t,St,Nn=[],Jn=[],An=bt.length,vr=it||function(Pr,Zt,uo){for(var Er=0,xi=Zt.length;Er<xi;Er++)Tt(Pr,Zt[Er],uo);return uo}(fe||"*",Qe.nodeType?[Qe]:Qe,[]),Sr=!G||!it&&fe?vr:Hs(vr,Nn,G,Qe,Kt);if(Se?Se(Sr,St=$e||(it?G:An||Re)?[]:bt,Qe,Kt):St=Sr,Re)for(Ot=Hs(St,Jn),Re(Ot,[],Qe,Kt),Rt=Ot.length;Rt--;)(_t=Ot[Rt])&&(St[Jn[Rt]]=!(Sr[Jn[Rt]]=_t));if(it){if($e||G){if($e){for(Ot=[],Rt=St.length;Rt--;)(_t=St[Rt])&&Ot.push(Sr[Rt]=_t);$e(null,St=[],Ot,Kt)}for(Rt=St.length;Rt--;)(_t=St[Rt])&&-1<(Ot=$e?Le.call(it,_t):Nn[Rt])&&(it[Ot]=!(bt[Ot]=_t))}}else St=Hs(St===bt?St.splice(An,St.length):St),$e?$e(null,bt,St,Kt):Te.apply(bt,St)})}function qs(G){for(var fe,Se,Re,$e=G.length,nt=v.relative[G[0].type],it=nt||v.relative[" "],bt=nt?1:0,Qe=co(function(Rt){return Rt===fe},it,!0),Kt=co(function(Rt){return-1<Le.call(fe,Rt)},it,!0),Ot=[function(Rt,_t,St){var Nn=!nt&&(St||_t!=E)||((fe=_t).nodeType?Qe(Rt,_t,St):Kt(Rt,_t,St));return fe=null,Nn}];bt<$e;bt++)if(Se=v.relative[G[bt].type])Ot=[co(bo(Ot),Se)];else{if((Se=v.filter[G[bt].type].apply(null,G[bt].matches))[Pe]){for(Re=++bt;Re<$e&&!v.relative[G[Re].type];Re++);return ri(1<bt&&bo(Ot),1<bt&&Lo(G.slice(0,bt-1).concat({value:" "===G[bt-2].type?"*":""})).replace(Ce,"$1"),Se,bt<Re&&qs(G.slice(bt,Re)),Re<$e&&qs(G=G.slice(Re)),Re<$e&&Lo(G))}Ot.push(Se)}return bo(Ot)}function Us(G,fe){var Se,Re,$e,nt,it,bt,Qe=[],Kt=[],Ot=jt[G+" "];if(!Ot){for(fe||(fe=yo(G)),Se=fe.length;Se--;)(Ot=qs(fe[Se]))[Pe]?Qe.push(Ot):Kt.push(Ot);(Ot=jt(G,(Re=Kt,nt=0<($e=Qe).length,it=0<Re.length,bt=function(Rt,_t,St,Nn,Jn){var An,vr,Sr,Pr=0,Zt="0",uo=Rt&&[],Er=[],xi=E,za=Rt||it&&v.find.TAG("*",Jn),Fa=xe+=null==xi?1:Math.random()||.1,cc=za.length;for(Jn&&(E=_t==$||_t||Jn);Zt!==cc&&null!=(An=za[Zt]);Zt++){if(it&&An){for(vr=0,_t||An.ownerDocument==$||(or(An),St=!le);Sr=Re[vr++];)if(Sr(An,_t||$,St)){Te.call(Nn,An);break}Jn&&(xe=Fa)}nt&&((An=!Sr&&An)&&Pr--,Rt&&uo.push(An))}if(Pr+=Zt,nt&&Zt!==Pr){for(vr=0;Sr=$e[vr++];)Sr(uo,Er,_t,St);if(Rt){if(0<Pr)for(;Zt--;)uo[Zt]||Er[Zt]||(Er[Zt]=B.call(Nn));Er=Hs(Er)}Te.apply(Nn,Er),Jn&&!Rt&&0<Er.length&&1<Pr+$e.length&&m.uniqueSort(Nn)}return Jn&&(xe=Fa,E=xi),uo},nt?sn(bt):bt))).selector=G}return Ot}function Qi(G,fe,Se,Re){var $e,nt,it,bt,Qe,Kt="function"==typeof G&&G,Ot=!Re&&yo(G=Kt.selector||G);if(Se=Se||[],1===Ot.length){if(2<(nt=Ot[0]=Ot[0].slice(0)).length&&"ID"===(it=nt[0]).type&&9===fe.nodeType&&le&&v.relative[nt[1].type]){if(!(fe=(v.find.ID(it.matches[0].replace(kn,Yn),fe)||[])[0]))return Se;Kt&&(fe=fe.parentNode),G=G.slice(nt.shift().value.length)}for($e=kr.needsContext.test(G)?0:nt.length;$e--&&!v.relative[bt=(it=nt[$e]).type];)if((Qe=v.find[bt])&&(Re=Qe(it.matches[0].replace(kn,Yn),bn.test(nt[0].type)&&$s(fe.parentNode)||fe))){if(nt.splice($e,1),!(G=Re.length&&Lo(nt)))return Te.apply(Se,Re),Se;break}}return(Kt||Us(G,Ot))(Re,fe,!le,Se,!fe||bn.test(G)&&$s(fe.parentNode)||fe),Se}Bo.prototype=v.filters=v.pseudos,v.setFilters=new Bo,M.sortStable=Pe.split("").sort(on).join("")===Pe,or(),M.sortDetached=an(function(G){return 1&G.compareDocumentPosition($.createElement("fieldset"))}),m.find=Tt,m.expr[":"]=m.expr.pseudos,m.unique=m.uniqueSort,Tt.compile=Us,Tt.select=Qi,Tt.setDocument=or,Tt.tokenize=yo,Tt.escape=m.escapeSelector,Tt.getText=m.text,Tt.isXML=m.isXMLDoc,Tt.selectors=m.expr,Tt.support=m.support,Tt.uniqueSort=m.uniqueSort}();var ue=function(h,v,E){for(var A=[],L=void 0!==E;(h=h[v])&&9!==h.nodeType;)if(1===h.nodeType){if(L&&m(h).is(E))break;A.push(h)}return A},Et=function(h,v){for(var E=[];h;h=h.nextSibling)1===h.nodeType&&h!==v&&E.push(h);return E},ft=m.expr.match.needsContext,O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ae(h,v,E){return ae(v)?m.grep(h,function(A,L){return!!v.call(A,L,A)!==E}):v.nodeType?m.grep(h,function(A){return A===v!==E}):"string"!=typeof v?m.grep(h,function(A){return-1<Le.call(v,A)!==E}):m.filter(v,h,E)}m.filter=function(h,v,E){var A=v[0];return E&&(h=":not("+h+")"),1===v.length&&1===A.nodeType?m.find.matchesSelector(A,h)?[A]:[]:m.find.matches(h,m.grep(v,function(L){return 1===L.nodeType}))},m.fn.extend({find:function(h){var v,E,A=this.length,L=this;if("string"!=typeof h)return this.pushStack(m(h).filter(function(){for(v=0;v<A;v++)if(m.contains(L[v],this))return!0}));for(E=this.pushStack([]),v=0;v<A;v++)m.find(h,L[v],E);return 1<A?m.uniqueSort(E):E},filter:function(h){return this.pushStack(Ae(this,h||[],!1))},not:function(h){return this.pushStack(Ae(this,h||[],!0))},is:function(h){return!!Ae(this,"string"==typeof h&&ft.test(h)?m(h):h||[],!1).length}});var Wt,xn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(m.fn.init=function(h,v,E){var A,L;if(!h)return this;if(E=E||Wt,"string"==typeof h){if(!(A="<"===h[0]&&">"===h[h.length-1]&&3<=h.length?[null,h,null]:xn.exec(h))||!A[1]&&v)return!v||v.jquery?(v||E).find(h):this.constructor(v).find(h);if(A[1]){if(m.merge(this,m.parseHTML(A[1],(v=v instanceof m?v[0]:v)&&v.nodeType?v.ownerDocument||v:k,!0)),O.test(A[1])&&m.isPlainObject(v))for(A in v)ae(this[A])?this[A](v[A]):this.attr(A,v[A]);return this}return(L=k.getElementById(A[2]))&&(this[0]=L,this.length=1),this}return h.nodeType?(this[0]=h,this.length=1,this):ae(h)?void 0!==E.ready?E.ready(h):h(m):m.makeArray(h,this)}).prototype=m.fn,Wt=m(k);var Wn=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};function Ht(h,v){for(;(h=h[v])&&1!==h.nodeType;);return h}m.fn.extend({has:function(h){var v=m(h,this),E=v.length;return this.filter(function(){for(var A=0;A<E;A++)if(m.contains(this,v[A]))return!0})},closest:function(h,v){var E,A=0,L=this.length,$=[],V="string"!=typeof h&&m(h);if(!ft.test(h))for(;A<L;A++)for(E=this[A];E&&E!==v;E=E.parentNode)if(E.nodeType<11&&(V?-1<V.index(E):1===E.nodeType&&m.find.matchesSelector(E,h))){$.push(E);break}return this.pushStack(1<$.length?m.uniqueSort($):$)},index:function(h){return h?"string"==typeof h?Le.call(m(h),this[0]):Le.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,v){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(h,v))))},addBack:function(h){return this.add(null==h?this.prevObject:this.prevObject.filter(h))}}),m.each({parent:function(h){var v=h.parentNode;return v&&11!==v.nodeType?v:null},parents:function(h){return ue(h,"parentNode")},parentsUntil:function(h,v,E){return ue(h,"parentNode",E)},next:function(h){return Ht(h,"nextSibling")},prev:function(h){return Ht(h,"previousSibling")},nextAll:function(h){return ue(h,"nextSibling")},prevAll:function(h){return ue(h,"previousSibling")},nextUntil:function(h,v,E){return ue(h,"nextSibling",E)},prevUntil:function(h,v,E){return ue(h,"previousSibling",E)},siblings:function(h){return Et((h.parentNode||{}).firstChild,h)},children:function(h){return Et(h.firstChild)},contents:function(h){return null!=h.contentDocument&&gn(h.contentDocument)?h.contentDocument:(I(h,"template")&&(h=h.content||h),m.merge([],h.childNodes))}},function(h,v){m.fn[h]=function(E,A){var L=m.map(this,v,E);return"Until"!==h.slice(-5)&&(A=E),A&&"string"==typeof A&&(L=m.filter(A,L)),1<this.length&&(Oe[h]||m.uniqueSort(L),Wn.test(h)&&L.reverse()),this.pushStack(L)}});var pt=/[^\x20\t\r\n\f]+/g;function ke(h){return h}function Ct(h){throw h}function er(h,v,E,A){var L;try{h&&ae(L=h.promise)?L.call(h).done(v).fail(E):h&&ae(L=h.then)?L.call(h,v,E):v.apply(void 0,[h].slice(A))}catch($){E.apply(void 0,[$])}}m.Callbacks=function(h){var E;h="string"==typeof h?(E={},m.each(h.match(pt)||[],function(xe,je){E[je]=!0}),E):m.extend({},h);var A,L,$,V,le=[],oe=[],_e=-1,Te=function(){for(V=V||h.once,$=A=!0;oe.length;_e=-1)for(L=oe.shift();++_e<le.length;)!1===le[_e].apply(L[0],L[1])&&h.stopOnFalse&&(_e=le.length,L=!1);h.memory||(L=!1),A=!1,V&&(le=L?[]:"")},Pe={add:function(){return le&&(L&&!A&&(_e=le.length-1,oe.push(L)),function xe(je){m.each(je,function(mt,X){ae(X)?h.unique&&Pe.has(X)||le.push(X):X&&X.length&&"string"!==C(X)&&xe(X)})}(arguments),L&&!A&&Te()),this},remove:function(){return m.each(arguments,function(xe,je){for(var mt;-1<(mt=m.inArray(je,le,mt));)le.splice(mt,1),mt<=_e&&_e--}),this},has:function(xe){return xe?-1<m.inArray(xe,le):0<le.length},empty:function(){return le&&(le=[]),this},disable:function(){return V=oe=[],le=L="",this},disabled:function(){return!le},lock:function(){return V=oe=[],L||A||(le=L=""),this},locked:function(){return!!V},fireWith:function(xe,je){return V||(je=[xe,(je=je||[]).slice?je.slice():je],oe.push(je),A||Te()),this},fire:function(){return Pe.fireWith(this,arguments),this},fired:function(){return!!$}};return Pe},m.extend({Deferred:function(h){var v=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],E="pending",A={state:function(){return E},always:function(){return L.done(arguments).fail(arguments),this},catch:function($){return A.then(null,$)},pipe:function(){var $=arguments;return m.Deferred(function(V){m.each(v,function(le,oe){var _e=ae($[oe[4]])&&$[oe[4]];L[oe[1]](function(){var Te=_e&&_e.apply(this,arguments);Te&&ae(Te.promise)?Te.promise().progress(V.notify).done(V.resolve).fail(V.reject):V[oe[0]+"With"](this,_e?[Te]:arguments)})}),$=null}).promise()},then:function($,V,le){var oe=0;function _e(Te,Pe,xe,je){return function(){var mt=this,X=arguments,jt=function(){var on,Ir;if(!(Te<oe)){if((on=xe.apply(mt,X))===Pe.promise())throw new TypeError("Thenable self-resolution");ae(Ir=on&&("object"==typeof on||"function"==typeof on)&&on.then)?je?Ir.call(on,_e(oe,Pe,ke,je),_e(oe,Pe,Ct,je)):(oe++,Ir.call(on,_e(oe,Pe,ke,je),_e(oe,Pe,Ct,je),_e(oe,Pe,ke,Pe.notifyWith))):(xe!==ke&&(mt=void 0,X=[on]),(je||Pe.resolveWith)(mt,X))}},Cn=je?jt:function(){try{jt()}catch(on){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(on,Cn.error),oe<=Te+1&&(xe!==Ct&&(mt=void 0,X=[on]),Pe.rejectWith(mt,X))}};Te?Cn():(m.Deferred.getErrorHook?Cn.error=m.Deferred.getErrorHook():m.Deferred.getStackHook&&(Cn.error=m.Deferred.getStackHook()),R.setTimeout(Cn))}}return m.Deferred(function(Te){v[0][3].add(_e(0,Te,ae(le)?le:ke,Te.notifyWith)),v[1][3].add(_e(0,Te,ae($)?$:ke)),v[2][3].add(_e(0,Te,ae(V)?V:Ct))}).promise()},promise:function($){return null!=$?m.extend($,A):A}},L={};return m.each(v,function($,V){var le=V[2],oe=V[5];A[V[1]]=le.add,oe&&le.add(function(){E=oe},v[3-$][2].disable,v[3-$][3].disable,v[0][2].lock,v[0][3].lock),le.add(V[3].fire),L[V[0]]=function(){return L[V[0]+"With"](this===L?void 0:this,arguments),this},L[V[0]+"With"]=le.fireWith}),A.promise(L),h&&h.call(L,L),L},when:function(h){var v=arguments.length,E=v,A=Array(E),L=nn.call(arguments),$=m.Deferred(),V=function(le){return function(oe){A[le]=this,L[le]=1<arguments.length?nn.call(arguments):oe,--v||$.resolveWith(A,L)}};if(v<=1&&(er(h,$.done(V(E)).resolve,$.reject,!v),"pending"===$.state()||ae(L[E]&&L[E].then)))return $.then();for(;E--;)er(L[E],V(E),$.reject);return $.promise()}});var ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(h,v){R.console&&R.console.warn&&h&&ot.test(h.name)&&R.console.warn("jQuery.Deferred exception: "+h.message,h.stack,v)},m.readyException=function(h){R.setTimeout(function(){throw h})};var Mn=m.Deferred();function et(){k.removeEventListener("DOMContentLoaded",et),R.removeEventListener("load",et),m.ready()}m.fn.ready=function(h){return Mn.then(h).catch(function(v){m.readyException(v)}),this},m.extend({isReady:!1,readyWait:1,ready:function(h){(!0===h?--m.readyWait:m.isReady)||(m.isReady=!0)!==h&&0<--m.readyWait||Mn.resolveWith(k,[m])}}),m.ready.then=Mn.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?R.setTimeout(m.ready):(k.addEventListener("DOMContentLoaded",et),R.addEventListener("load",et));var U=function(h,v,E,A,L,$,V){var le=0,oe=h.length,_e=null==E;if("object"===C(E))for(le in L=!0,E)U(h,v,le,E[le],!0,$,V);else if(void 0!==A&&(L=!0,ae(A)||(V=!0),_e&&(V?(v.call(h,A),v=null):(_e=v,v=function(Te,Pe,xe){return _e.call(m(Te),xe)})),v))for(;le<oe;le++)v(h[le],E,V?A:A.call(h[le],le,v(h[le],E)));return L?h:_e?v.call(h):oe?v(h[0],E):$},Z=/^-ms-/,Ee=/-([a-z])/g;function qe(h,v){return v.toUpperCase()}function We(h){return h.replace(Z,"ms-").replace(Ee,qe)}var tt=function(h){return 1===h.nodeType||9===h.nodeType||!+h.nodeType};function Pt(){this.expando=m.expando+Pt.uid++}Pt.uid=1,Pt.prototype={cache:function(h){var v=h[this.expando];return v||(v={},tt(h)&&(h.nodeType?h[this.expando]=v:Object.defineProperty(h,this.expando,{value:v,configurable:!0}))),v},set:function(h,v,E){var A,L=this.cache(h);if("string"==typeof v)L[We(v)]=E;else for(A in v)L[We(A)]=v[A];return L},get:function(h,v){return void 0===v?this.cache(h):h[this.expando]&&h[this.expando][We(v)]},access:function(h,v,E){return void 0===v||v&&"string"==typeof v&&void 0===E?this.get(h,v):(this.set(h,v,E),void 0!==E?E:v)},remove:function(h,v){var E,A=h[this.expando];if(void 0!==A){if(void 0!==v)for((E=(v=Array.isArray(v)?v.map(We):(v=We(v))in A?[v]:v.match(pt)||[]).length);E--;)delete A[v[E]];(void 0===v||m.isEmptyObject(A))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var v=h[this.expando];return void 0!==v&&!m.isEmptyObject(v)}};var Ze=new Pt,Vt=new Pt,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mr=/[A-Z]/g;function jn(h,v,E){var A,L;if(void 0===E&&1===h.nodeType)if(A="data-"+v.replace(Mr,"-$&").toLowerCase(),"string"==typeof(E=h.getAttribute(A))){try{E="true"===(L=E)||"false"!==L&&("null"===L?null:L===+L+""?+L:Mt.test(L)?JSON.parse(L):L)}catch{}Vt.set(h,v,E)}else E=void 0;return E}m.extend({hasData:function(h){return Vt.hasData(h)||Ze.hasData(h)},data:function(h,v,E){return Vt.access(h,v,E)},removeData:function(h,v){Vt.remove(h,v)},_data:function(h,v,E){return Ze.access(h,v,E)},_removeData:function(h,v){Ze.remove(h,v)}}),m.fn.extend({data:function(h,v){var E,A,L,$=this[0],V=$&&$.attributes;if(void 0===h){if(this.length&&(L=Vt.get($),1===$.nodeType&&!Ze.get($,"hasDataAttrs"))){for(E=V.length;E--;)V[E]&&0===(A=V[E].name).indexOf("data-")&&(A=We(A.slice(5)),jn($,A,L[A]));Ze.set($,"hasDataAttrs",!0)}return L}return"object"==typeof h?this.each(function(){Vt.set(this,h)}):U(this,function(le){var oe;if($&&void 0===le)return void 0!==(oe=Vt.get($,h))||void 0!==(oe=jn($,h))?oe:void 0;this.each(function(){Vt.set(this,h,le)})},null,v,1<arguments.length,null,!0)},removeData:function(h){return this.each(function(){Vt.remove(this,h)})}}),m.extend({queue:function(h,v,E){var A;if(h)return A=Ze.get(h,v=(v||"fx")+"queue"),E&&(!A||Array.isArray(E)?A=Ze.access(h,v,m.makeArray(E)):A.push(E)),A||[]},dequeue:function(h,v){var E=m.queue(h,v=v||"fx"),A=E.length,L=E.shift(),$=m._queueHooks(h,v);"inprogress"===L&&(L=E.shift(),A--),L&&("fx"===v&&E.unshift("inprogress"),delete $.stop,L.call(h,function(){m.dequeue(h,v)},$)),!A&&$&&$.empty.fire()},_queueHooks:function(h,v){var E=v+"queueHooks";return Ze.get(h,E)||Ze.access(h,E,{empty:m.Callbacks("once memory").add(function(){Ze.remove(h,[v+"queue",E])})})}}),m.fn.extend({queue:function(h,v){var E=2;return"string"!=typeof h&&(v=h,h="fx",E--),arguments.length<E?m.queue(this[0],h):void 0===v?this:this.each(function(){var A=m.queue(this,h,v);m._queueHooks(this,h),"fx"===h&&"inprogress"!==A[0]&&m.dequeue(this,h)})},dequeue:function(h){return this.each(function(){m.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,v){var E,A=1,L=m.Deferred(),$=this,V=this.length,le=function(){--A||L.resolveWith($,[$])};for("string"!=typeof h&&(v=h,h=void 0),h=h||"fx";V--;)(E=Ze.get($[V],h+"queueHooks"))&&E.empty&&(A++,E.empty.add(le));return le(),L.promise(v)}});var Zr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vn=new RegExp("^(?:([+-])=|)("+Zr+")([a-z%]*)$","i"),Kn=["Top","Right","Bottom","Left"],_n=k.documentElement,jo=function(h){return m.contains(h.ownerDocument,h)},Ft={composed:!0};_n.getRootNode&&(jo=function(h){return m.contains(h.ownerDocument,h)||h.getRootNode(Ft)===h.ownerDocument});var eo=function(h,v){return"none"===(h=v||h).style.display||""===h.style.display&&jo(h)&&"none"===m.css(h,"display")};function ve(h,v,E,A){var L,$,V=20,le=A?function(){return A.cur()}:function(){return m.css(h,v,"")},oe=le(),_e=E&&E[3]||(m.cssNumber[v]?"":"px"),Te=h.nodeType&&(m.cssNumber[v]||"px"!==_e&&+oe)&&vn.exec(m.css(h,v));if(Te&&Te[3]!==_e){for(_e=_e||Te[3],Te=+(oe/=2)||1;V--;)m.style(h,v,Te+_e),(1-$)*(1-($=le()/oe||.5))<=0&&(V=0),Te/=$;m.style(h,v,(Te*=2)+_e),E=E||[]}return E&&(Te=+Te||+oe||0,L=E[1]?Te+(E[1]+1)*E[2]:+E[2],A&&(A.unit=_e,A.start=Te,A.end=L)),L}var Nt={};function $t(h,v){for(var E,A,L,$,V,le,oe,_e=[],Te=0,Pe=h.length;Te<Pe;Te++)(A=h[Te]).style&&(E=A.style.display,v?("none"===E&&(_e[Te]=Ze.get(A,"display")||null,_e[Te]||(A.style.display="")),""===A.style.display&&eo(A)&&(_e[Te]=(oe=V=$=void 0,V=(L=A).ownerDocument,(oe=Nt[le=L.nodeName])||($=V.body.appendChild(V.createElement(le)),oe=m.css($,"display"),$.parentNode.removeChild($),"none"===oe&&(oe="block"),Nt[le]=oe)))):"none"!==E&&(_e[Te]="none",Ze.set(A,"display",E)));for(Te=0;Te<Pe;Te++)null!=_e[Te]&&(h[Te].style.display=_e[Te]);return h}m.fn.extend({show:function(){return $t(this,!0)},hide:function(){return $t(this)},toggle:function(h){return"boolean"==typeof h?h?this.show():this.hide():this.each(function(){eo(this)?m(this).show():m(this).hide()})}});var un,fr,rn=/^(?:checkbox|radio)$/i,qt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ut=/^$|^module$|\/(?:java|ecma)script/i;un=k.createDocumentFragment().appendChild(k.createElement("div")),(fr=k.createElement("input")).setAttribute("type","radio"),fr.setAttribute("checked","checked"),fr.setAttribute("name","t"),un.appendChild(fr),M.checkClone=un.cloneNode(!0).cloneNode(!0).lastChild.checked,un.innerHTML="<textarea>x</textarea>",M.noCloneChecked=!!un.cloneNode(!0).lastChild.defaultValue,un.innerHTML="<option></option>",M.option=!!un.lastChild;var fn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Xt(h,v){var E;return E=typeof h.getElementsByTagName<"u"?h.getElementsByTagName(v||"*"):typeof h.querySelectorAll<"u"?h.querySelectorAll(v||"*"):[],void 0===v||v&&I(h,v)?m.merge([h],E):E}function In(h,v){for(var E=0,A=h.length;E<A;E++)Ze.set(h[E],"globalEval",!v||Ze.get(v[E],"globalEval"))}fn.tbody=fn.tfoot=fn.colgroup=fn.caption=fn.thead,fn.th=fn.td,M.option||(fn.optgroup=fn.option=[1,"<select multiple='multiple'>","</select>"]);var to=/<|&#?\w+;/;function Or(h,v,E,A,L){for(var $,V,le,oe,_e,Te,Pe=v.createDocumentFragment(),xe=[],je=0,mt=h.length;je<mt;je++)if(($=h[je])||0===$)if("object"===C($))m.merge(xe,$.nodeType?[$]:$);else if(to.test($)){for(V=V||Pe.appendChild(v.createElement("div")),le=(qt.exec($)||["",""])[1].toLowerCase(),V.innerHTML=(oe=fn[le]||fn._default)[1]+m.htmlPrefilter($)+oe[2],Te=oe[0];Te--;)V=V.lastChild;m.merge(xe,V.childNodes),(V=Pe.firstChild).textContent=""}else xe.push(v.createTextNode($));for(Pe.textContent="",je=0;$=xe[je++];)if(A&&-1<m.inArray($,A))L&&L.push($);else if(_e=jo($),V=Xt(Pe.appendChild($),"script"),_e&&In(V),E)for(Te=0;$=V[Te++];)ut.test($.type||"")&&E.push($);return Pe}var xr=/^([^.]*)(?:\.(.+)|)/;function no(){return!0}function go(){return!1}function js(h,v,E,A,L,$){var V,le;if("object"==typeof v){for(le in"string"!=typeof E&&(A=A||E,E=void 0),v)js(h,le,E,A,v[le],$);return h}if(null==A&&null==L?(L=E,A=E=void 0):null==L&&("string"==typeof E?(L=A,A=void 0):(L=A,A=E,E=void 0)),!1===L)L=go;else if(!L)return h;return 1===$&&(V=L,(L=function(oe){return m().off(oe),V.apply(this,arguments)}).guid=V.guid||(V.guid=m.guid++)),h.each(function(){m.event.add(this,v,L,A,E)})}function ro(h,v,E){E?(Ze.set(h,v,!1),m.event.add(h,v,{namespace:!1,handler:function(A){var L,$=Ze.get(this,v);if(1&A.isTrigger&&this[v]){if($)(m.event.special[v]||{}).delegateType&&A.stopPropagation();else if($=nn.call(arguments),Ze.set(this,v,$),this[v](),L=Ze.get(this,v),Ze.set(this,v,!1),$!==L)return A.stopImmediatePropagation(),A.preventDefault(),L}else $&&(Ze.set(this,v,m.event.trigger($[0],$.slice(1),this)),A.stopPropagation(),A.isImmediatePropagationStopped=no)}})):void 0===Ze.get(h,v)&&m.event.add(h,v,no)}m.event={global:{},add:function(h,v,E,A,L){var $,V,le,oe,_e,Te,Pe,xe,je,mt,X,jt=Ze.get(h);if(tt(h))for(E.handler&&(E=($=E).handler,L=$.selector),L&&m.find.matchesSelector(_n,L),E.guid||(E.guid=m.guid++),(oe=jt.events)||(oe=jt.events=Object.create(null)),(V=jt.handle)||(V=jt.handle=function(Cn){return typeof m<"u"&&m.event.triggered!==Cn.type?m.event.dispatch.apply(h,arguments):void 0}),_e=(v=(v||"").match(pt)||[""]).length;_e--;)je=X=(le=xr.exec(v[_e])||[])[1],mt=(le[2]||"").split(".").sort(),je&&(Pe=m.event.special[je]||{},Pe=m.event.special[je=(L?Pe.delegateType:Pe.bindType)||je]||{},Te=m.extend({type:je,origType:X,data:A,handler:E,guid:E.guid,selector:L,needsContext:L&&m.expr.match.needsContext.test(L),namespace:mt.join(".")},$),(xe=oe[je])||((xe=oe[je]=[]).delegateCount=0,Pe.setup&&!1!==Pe.setup.call(h,A,mt,V)||h.addEventListener&&h.addEventListener(je,V)),Pe.add&&(Pe.add.call(h,Te),Te.handler.guid||(Te.handler.guid=E.guid)),L?xe.splice(xe.delegateCount++,0,Te):xe.push(Te),m.event.global[je]=!0)},remove:function(h,v,E,A,L){var $,V,le,oe,_e,Te,Pe,xe,je,mt,X,jt=Ze.hasData(h)&&Ze.get(h);if(jt&&(oe=jt.events)){for(_e=(v=(v||"").match(pt)||[""]).length;_e--;)if(je=X=(le=xr.exec(v[_e])||[])[1],mt=(le[2]||"").split(".").sort(),je){for(Pe=m.event.special[je]||{},xe=oe[je=(A?Pe.delegateType:Pe.bindType)||je]||[],le=le[2]&&new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),V=$=xe.length;$--;)Te=xe[$],!L&&X!==Te.origType||E&&E.guid!==Te.guid||le&&!le.test(Te.namespace)||A&&A!==Te.selector&&("**"!==A||!Te.selector)||(xe.splice($,1),Te.selector&&xe.delegateCount--,Pe.remove&&Pe.remove.call(h,Te));V&&!xe.length&&(Pe.teardown&&!1!==Pe.teardown.call(h,mt,jt.handle)||m.removeEvent(h,je,jt.handle),delete oe[je])}else for(je in oe)m.event.remove(h,je+v[_e],E,A,!0);m.isEmptyObject(oe)&&Ze.remove(h,"handle events")}},dispatch:function(h){var v,E,A,L,$,V,le=new Array(arguments.length),oe=m.event.fix(h),_e=(Ze.get(this,"events")||Object.create(null))[oe.type]||[],Te=m.event.special[oe.type]||{};for(le[0]=oe,v=1;v<arguments.length;v++)le[v]=arguments[v];if(oe.delegateTarget=this,!Te.preDispatch||!1!==Te.preDispatch.call(this,oe)){for(V=m.event.handlers.call(this,oe,_e),v=0;(L=V[v++])&&!oe.isPropagationStopped();)for(oe.currentTarget=L.elem,E=0;($=L.handlers[E++])&&!oe.isImmediatePropagationStopped();)oe.rnamespace&&!1!==$.namespace&&!oe.rnamespace.test($.namespace)||(oe.handleObj=$,oe.data=$.data,void 0!==(A=((m.event.special[$.origType]||{}).handle||$.handler).apply(L.elem,le))&&!1===(oe.result=A)&&(oe.preventDefault(),oe.stopPropagation()));return Te.postDispatch&&Te.postDispatch.call(this,oe),oe.result}},handlers:function(h,v){var E,A,L,$,V,le=[],oe=v.delegateCount,_e=h.target;if(oe&&_e.nodeType&&!("click"===h.type&&1<=h.button))for(;_e!==this;_e=_e.parentNode||this)if(1===_e.nodeType&&("click"!==h.type||!0!==_e.disabled)){for($=[],V={},E=0;E<oe;E++)void 0===V[L=(A=v[E]).selector+" "]&&(V[L]=A.needsContext?-1<m(L,this).index(_e):m.find(L,this,null,[_e]).length),V[L]&&$.push(A);$.length&&le.push({elem:_e,handlers:$})}return _e=this,oe<v.length&&le.push({elem:_e,handlers:v.slice(oe)}),le},addProp:function(h,v){Object.defineProperty(m.Event.prototype,h,{enumerable:!0,configurable:!0,get:ae(v)?function(){if(this.originalEvent)return v(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(E){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:E})}})},fix:function(h){return h[m.expando]?h:new m.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var v=this||h;return rn.test(v.type)&&v.click&&I(v,"input")&&ro(v,"click",!0),!1},trigger:function(h){var v=this||h;return rn.test(v.type)&&v.click&&I(v,"input")&&ro(v,"click"),!0},_default:function(h){var v=h.target;return rn.test(v.type)&&v.click&&I(v,"input")&&Ze.get(v,"click")||I(v,"a")}},beforeunload:{postDispatch:function(h){void 0!==h.result&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}},m.removeEvent=function(h,v,E){h.removeEventListener&&h.removeEventListener(v,E)},m.Event=function(h,v){if(!(this instanceof m.Event))return new m.Event(h,v);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||void 0===h.defaultPrevented&&!1===h.returnValue?no:go,this.target=h.target&&3===h.target.nodeType?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,v&&m.extend(this,v),this.timeStamp=h&&h.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:go,isPropagationStopped:go,isImmediatePropagationStopped:go,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=no,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=no,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=no,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(h,v){function E(A){if(k.documentMode){var L=Ze.get(this,"handle"),$=m.event.fix(A);$.type="focusin"===A.type?"focus":"blur",$.isSimulated=!0,L(A),$.target===$.currentTarget&&L($)}else m.event.simulate(v,A.target,m.event.fix(A))}m.event.special[h]={setup:function(){var A;if(ro(this,h,!0),!k.documentMode)return!1;(A=Ze.get(this,v))||this.addEventListener(v,E),Ze.set(this,v,(A||0)+1)},trigger:function(){return ro(this,h),!0},teardown:function(){var A;if(!k.documentMode)return!1;(A=Ze.get(this,v)-1)?Ze.set(this,v,A):(this.removeEventListener(v,E),Ze.remove(this,v))},_default:function(A){return Ze.get(A.target,h)},delegateType:v},m.event.special[v]={setup:function(){var A=this.ownerDocument||this.document||this,L=k.documentMode?this:A,$=Ze.get(L,v);$||(k.documentMode?this.addEventListener(v,E):A.addEventListener(h,E,!0)),Ze.set(L,v,($||0)+1)},teardown:function(){var A=this.ownerDocument||this.document||this,L=k.documentMode?this:A,$=Ze.get(L,v)-1;$?Ze.set(L,v,$):(k.documentMode?this.removeEventListener(v,E):A.removeEventListener(h,E,!0),Ze.remove(L,v))}}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,v){m.event.special[h]={delegateType:v,bindType:v,handle:function(E){var A,L=E.relatedTarget,$=E.handleObj;return L&&(L===this||m.contains(this,L))||(E.type=$.origType,A=$.handler.apply(this,arguments),E.type=v),A}}}),m.fn.extend({on:function(h,v,E,A){return js(this,h,v,E,A)},one:function(h,v,E,A){return js(this,h,v,E,A,1)},off:function(h,v,E){var A,L;if(h&&h.preventDefault&&h.handleObj)return A=h.handleObj,m(h.delegateTarget).off(A.namespace?A.origType+"."+A.namespace:A.origType,A.selector,A.handler),this;if("object"==typeof h){for(L in h)this.off(L,v,h[L]);return this}return!1!==v&&"function"!=typeof v||(E=v,v=void 0),!1===E&&(E=go),this.each(function(){m.event.remove(this,h,E,v)})}});var Jo=/<script|<style|<link/i,Jl=/checked\s*(?:[^=]|=\s*.checked.)/i,Ea=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function mi(h,v){return I(h,"table")&&I(11!==v.nodeType?v:v.firstChild,"tr")&&m(h).children("tbody")[0]||h}function Ql(h){return h.type=(null!==h.getAttribute("type"))+"/"+h.type,h}function Zl(h){return"true/"===(h.type||"").slice(0,5)?h.type=h.type.slice(5):h.removeAttribute("type"),h}function Ta(h,v){var E,A,L,$,V,le;if(1===v.nodeType){if(Ze.hasData(h)&&(le=Ze.get(h).events))for(L in Ze.remove(v,"handle events"),le)for(E=0,A=le[L].length;E<A;E++)m.event.add(v,L,le[L][E]);Vt.hasData(h)&&($=Vt.access(h),V=m.extend({},$),Vt.set(v,V))}}function yn(h,v,E,A){v=mn(v);var L,$,V,le,oe,_e,Te=0,Pe=h.length,xe=Pe-1,je=v[0],mt=ae(je);if(mt||1<Pe&&"string"==typeof je&&!M.checkClone&&Jl.test(je))return h.each(function(X){var jt=h.eq(X);mt&&(v[0]=je.call(this,X,jt.html())),yn(jt,v,E,A)});if(Pe&&($=(L=Or(v,h[0].ownerDocument,!1,h,A)).firstChild,1===L.childNodes.length&&(L=$),$||A)){for(le=(V=m.map(Xt(L,"script"),Ql)).length;Te<Pe;Te++)oe=L,Te!==xe&&(oe=m.clone(oe,!0,!0),le&&m.merge(V,Xt(oe,"script"))),E.call(h[Te],oe,Te);if(le)for(_e=V[V.length-1].ownerDocument,m.map(V,Zl),Te=0;Te<le;Te++)ut.test((oe=V[Te]).type||"")&&!Ze.access(oe,"globalEval")&&m.contains(_e,oe)&&(oe.src&&"module"!==(oe.type||"").toLowerCase()?m._evalUrl&&!oe.noModule&&m._evalUrl(oe.src,{nonce:oe.nonce||oe.getAttribute("nonce")},_e):x(oe.textContent.replace(Ea,""),oe,_e))}return h}function Dn(h,v,E){for(var A,L=v?m.filter(v,h):h,$=0;null!=(A=L[$]);$++)E||1!==A.nodeType||m.cleanData(Xt(A)),A.parentNode&&(E&&jo(A)&&In(Xt(A,"script")),A.parentNode.removeChild(A));return h}m.extend({htmlPrefilter:function(h){return h},clone:function(h,v,E){var A,L,$,V,le,oe,_e,Te=h.cloneNode(!0),Pe=jo(h);if(!(M.noCloneChecked||1!==h.nodeType&&11!==h.nodeType||m.isXMLDoc(h)))for(V=Xt(Te),A=0,L=($=Xt(h)).length;A<L;A++)le=$[A],"input"===(_e=(oe=V[A]).nodeName.toLowerCase())&&rn.test(le.type)?oe.checked=le.checked:"input"!==_e&&"textarea"!==_e||(oe.defaultValue=le.defaultValue);if(v)if(E)for($=$||Xt(h),V=V||Xt(Te),A=0,L=$.length;A<L;A++)Ta($[A],V[A]);else Ta(h,Te);return 0<(V=Xt(Te,"script")).length&&In(V,!Pe&&Xt(h,"script")),Te},cleanData:function(h){for(var v,E,A,L=m.event.special,$=0;void 0!==(E=h[$]);$++)if(tt(E)){if(v=E[Ze.expando]){if(v.events)for(A in v.events)L[A]?m.event.remove(E,A):m.removeEvent(E,A,v.handle);E[Ze.expando]=void 0}E[Vt.expando]&&(E[Vt.expando]=void 0)}}}),m.fn.extend({detach:function(h){return Dn(this,h,!0)},remove:function(h){return Dn(this,h)},text:function(h){return U(this,function(v){return void 0===v?m.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=v)})},null,h,arguments.length)},append:function(){return yn(this,arguments,function(h){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||mi(this,h).appendChild(h)})},prepend:function(){return yn(this,arguments,function(h){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var v=mi(this,h);v.insertBefore(h,v.firstChild)}})},before:function(){return yn(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return yn(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,v=0;null!=(h=this[v]);v++)1===h.nodeType&&(m.cleanData(Xt(h,!1)),h.textContent="");return this},clone:function(h,v){return h=null!=h&&h,v=v??h,this.map(function(){return m.clone(this,h,v)})},html:function(h){return U(this,function(v){var E=this[0]||{},A=0,L=this.length;if(void 0===v&&1===E.nodeType)return E.innerHTML;if("string"==typeof v&&!Jo.test(v)&&!fn[(qt.exec(v)||["",""])[1].toLowerCase()]){v=m.htmlPrefilter(v);try{for(;A<L;A++)1===(E=this[A]||{}).nodeType&&(m.cleanData(Xt(E,!1)),E.innerHTML=v);E=0}catch{}}E&&this.empty().append(v)},null,h,arguments.length)},replaceWith:function(){var h=[];return yn(this,arguments,function(v){var E=this.parentNode;m.inArray(this,h)<0&&(m.cleanData(Xt(this)),E&&E.replaceChild(v,this))},h)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,v){m.fn[h]=function(E){for(var A,L=[],$=m(E),V=$.length-1,le=0;le<=V;le++)A=le===V?this:this.clone(!0),m($[le])[v](A),st.apply(L,A.get());return this.pushStack(L)}});var Ui=new RegExp("^("+Zr+")(?!px)[a-z%]+$","i"),Wi=/^--/,mo=function(h){var v=h.ownerDocument.defaultView;return v&&v.opener||(v=R),v.getComputedStyle(h)},ec=function(h,v,E){var A,L,$={};for(L in v)$[L]=h.style[L],h.style[L]=v[L];for(L in A=E.call(h),v)h.style[L]=$[L];return A},tc=new RegExp(Kn.join("|"),"i");function pr(h,v,E){var A,L,$,V,le=Wi.test(v),oe=h.style;return(E=E||mo(h))&&(V=E.getPropertyValue(v)||E[v],le&&V&&(V=V.replace(Ce,"$1")||void 0),""!==V||jo(h)||(V=m.style(h,v)),!M.pixelBoxStyles()&&Ui.test(V)&&tc.test(v)&&(A=oe.width,L=oe.minWidth,$=oe.maxWidth,oe.minWidth=oe.maxWidth=oe.width=V,V=E.width,oe.width=A,oe.minWidth=L,oe.maxWidth=$)),void 0!==V?V+"":V}function vi(h,v){return{get:function(){if(!h())return(this.get=v).apply(this,arguments);delete this.get}}}!function(){function h(){if(_e){oe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",_e.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_n.appendChild(oe).appendChild(_e);var Te=R.getComputedStyle(_e);E="1%"!==Te.top,le=12===v(Te.marginLeft),_e.style.right="60%",$=36===v(Te.right),A=36===v(Te.width),_e.style.position="absolute",L=12===v(_e.offsetWidth/3),_n.removeChild(oe),_e=null}}function v(Te){return Math.round(parseFloat(Te))}var E,A,L,$,V,le,oe=k.createElement("div"),_e=k.createElement("div");_e.style&&(_e.style.backgroundClip="content-box",_e.cloneNode(!0).style.backgroundClip="",M.clearCloneStyle="content-box"===_e.style.backgroundClip,m.extend(M,{boxSizingReliable:function(){return h(),A},pixelBoxStyles:function(){return h(),$},pixelPosition:function(){return h(),E},reliableMarginLeft:function(){return h(),le},scrollboxSize:function(){return h(),L},reliableTrDimensions:function(){var Te,Pe,xe,je;return null==V&&(Te=k.createElement("table"),Pe=k.createElement("tr"),xe=k.createElement("div"),Te.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Pe.style.cssText="box-sizing:content-box;border:1px solid",Pe.style.height="1px",xe.style.height="9px",xe.style.display="block",_n.appendChild(Te).appendChild(Pe).appendChild(xe),je=R.getComputedStyle(Pe),V=parseInt(je.height,10)+parseInt(je.borderTopWidth,10)+parseInt(je.borderBottomWidth,10)===Pe.offsetHeight,_n.removeChild(Te)),V}}))}();var Vi=["Webkit","Moz","ms"],Ds=k.createElement("div").style,oo={};function Na(h){return m.cssProps[h]||oo[h]||(h in Ds?h:oo[h]=function(E){for(var A=E[0].toUpperCase()+E.slice(1),L=Vi.length;L--;)if((E=Vi[L]+A)in Ds)return E}(h)||h)}var iu=/^(none|table(?!-c[ea]).+)/,nc={position:"absolute",visibility:"hidden",display:"block"},Aa={letterSpacing:"0",fontWeight:"400"};function Oa(h,v,E){var A=vn.exec(v);return A?Math.max(0,A[2]-(E||0))+(A[3]||"px"):v}function Ps(h,v,E,A,L,$){var V="width"===v?1:0,le=0,oe=0,_e=0;if(E===(A?"border":"content"))return 0;for(;V<4;V+=2)"margin"===E&&(_e+=m.css(h,E+Kn[V],!0,L)),A?("content"===E&&(oe-=m.css(h,"padding"+Kn[V],!0,L)),"margin"!==E&&(oe-=m.css(h,"border"+Kn[V]+"Width",!0,L))):(oe+=m.css(h,"padding"+Kn[V],!0,L),"padding"!==E?oe+=m.css(h,"border"+Kn[V]+"Width",!0,L):le+=m.css(h,"border"+Kn[V]+"Width",!0,L));return!A&&0<=$&&(oe+=Math.max(0,Math.ceil(h["offset"+v[0].toUpperCase()+v.slice(1)]-$-oe-le-.5))||0),oe+_e}function Ra(h,v,E){var A=mo(h),L=(!M.boxSizingReliable()||E)&&"border-box"===m.css(h,"boxSizing",!1,A),$=L,V=pr(h,v,A),le="offset"+v[0].toUpperCase()+v.slice(1);if(Ui.test(V)){if(!E)return V;V="auto"}return(!M.boxSizingReliable()&&L||!M.reliableTrDimensions()&&I(h,"tr")||"auto"===V||!parseFloat(V)&&"inline"===m.css(h,"display",!1,A))&&h.getClientRects().length&&(L="border-box"===m.css(h,"boxSizing",!1,A),($=le in h)&&(V=h[le])),(V=parseFloat(V)||0)+Ps(h,v,E||(L?"border":"content"),$,A,V)+"px"}function Rr(h,v,E,A,L){return new Rr.prototype.init(h,v,E,A,L)}m.extend({cssHooks:{opacity:{get:function(h,v){if(v){var E=pr(h,"opacity");return""===E?"1":E}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,v,E,A){if(h&&3!==h.nodeType&&8!==h.nodeType&&h.style){var L,$,V,le=We(v),oe=Wi.test(v),_e=h.style;if(oe||(v=Na(le)),V=m.cssHooks[v]||m.cssHooks[le],void 0===E)return V&&"get"in V&&void 0!==(L=V.get(h,!1,A))?L:_e[v];"string"==($=typeof E)&&(L=vn.exec(E))&&L[1]&&(E=ve(h,v,L),$="number"),null!=E&&E==E&&("number"!==$||oe||(E+=L&&L[3]||(m.cssNumber[le]?"":"px")),M.clearCloneStyle||""!==E||0!==v.indexOf("background")||(_e[v]="inherit"),V&&"set"in V&&void 0===(E=V.set(h,E,A))||(oe?_e.setProperty(v,E):_e[v]=E))}},css:function(h,v,E,A){var L,$,V,le=We(v);return Wi.test(v)||(v=Na(le)),(V=m.cssHooks[v]||m.cssHooks[le])&&"get"in V&&(L=V.get(h,!0,E)),void 0===L&&(L=pr(h,v,A)),"normal"===L&&v in Aa&&(L=Aa[v]),""===E||E?($=parseFloat(L),!0===E||isFinite($)?$||0:L):L}}),m.each(["height","width"],function(h,v){m.cssHooks[v]={get:function(E,A,L){if(A)return!iu.test(m.css(E,"display"))||E.getClientRects().length&&E.getBoundingClientRect().width?Ra(E,v,L):ec(E,nc,function(){return Ra(E,v,L)})},set:function(E,A,L){var $,V=mo(E),le=!M.scrollboxSize()&&"absolute"===V.position,oe=(le||L)&&"border-box"===m.css(E,"boxSizing",!1,V),_e=L?Ps(E,v,L,oe,V):0;return oe&&le&&(_e-=Math.ceil(E["offset"+v[0].toUpperCase()+v.slice(1)]-parseFloat(V[v])-Ps(E,v,"border",!1,V)-.5)),_e&&($=vn.exec(A))&&"px"!==($[3]||"px")&&(E.style[v]=A,A=m.css(E,v)),Oa(0,A,_e)}}}),m.cssHooks.marginLeft=vi(M.reliableMarginLeft,function(h,v){if(v)return(parseFloat(pr(h,"marginLeft"))||h.getBoundingClientRect().left-ec(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(h,v){m.cssHooks[h+v]={expand:function(E){for(var A=0,L={},$="string"==typeof E?E.split(" "):[E];A<4;A++)L[h+Kn[A]+v]=$[A]||$[A-2]||$[0];return L}},"margin"!==h&&(m.cssHooks[h+v].set=Oa)}),m.fn.extend({css:function(h,v){return U(this,function(E,A,L){var $,V,le={},oe=0;if(Array.isArray(A)){for($=mo(E),V=A.length;oe<V;oe++)le[A[oe]]=m.css(E,A[oe],!1,$);return le}return void 0!==L?m.style(E,A,L):m.css(E,A)},h,v,1<arguments.length)}}),((m.Tween=Rr).prototype={constructor:Rr,init:function(h,v,E,A,L,$){this.elem=h,this.prop=E,this.easing=L||m.easing._default,this.options=v,this.start=this.now=this.cur(),this.end=A,this.unit=$||(m.cssNumber[E]?"":"px")},cur:function(){var h=Rr.propHooks[this.prop];return h&&h.get?h.get(this):Rr.propHooks._default.get(this)},run:function(h){var v,E=Rr.propHooks[this.prop];return this.pos=v=this.options.duration?m.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):h,this.now=(this.end-this.start)*v+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),E&&E.set?E.set(this):Rr.propHooks._default.set(this),this}}).init.prototype=Rr.prototype,(Rr.propHooks={_default:{get:function(h){var v;return 1!==h.elem.nodeType||null!=h.elem[h.prop]&&null==h.elem.style[h.prop]?h.elem[h.prop]:(v=m.css(h.elem,h.prop,""))&&"auto"!==v?v:0},set:function(h){m.fx.step[h.prop]?m.fx.step[h.prop](h):1!==h.elem.nodeType||!m.cssHooks[h.prop]&&null==h.elem.style[Na(h.prop)]?h.elem[h.prop]=h.now:m.style(h.elem,h.prop,h.now+h.unit)}}}).scrollTop=Rr.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},m.easing={linear:function(h){return h},swing:function(h){return.5-Math.cos(h*Math.PI)/2},_default:"swing"},m.fx=Rr.prototype.init,m.fx.step={};var Qo,Bs,_i,ja,rc=/^(?:toggle|show|hide)$/,oc=/queueHooks$/;function Ls(){Bs&&(!1===k.hidden&&R.requestAnimationFrame?R.requestAnimationFrame(Ls):R.setTimeout(Ls,m.fx.interval),m.fx.tick())}function Da(){return R.setTimeout(function(){Qo=void 0}),Qo=Date.now()}function Ki(h,v){var E,A=0,L={height:h};for(v=v?1:0;A<4;A+=2-v)L["margin"+(E=Kn[A])]=L["padding"+E]=h;return v&&(L.opacity=L.width=h),L}function Pa(h,v,E){for(var A,L=(jr.tweeners[v]||[]).concat(jr.tweeners["*"]),$=0,V=L.length;$<V;$++)if(A=L[$].call(E,v,h))return A}function jr(h,v,E){var A,L,$=0,V=jr.prefilters.length,le=m.Deferred().always(function(){delete oe.elem}),oe=function(){if(L)return!1;for(var Pe=Qo||Da(),xe=Math.max(0,_e.startTime+_e.duration-Pe),je=1-(xe/_e.duration||0),mt=0,X=_e.tweens.length;mt<X;mt++)_e.tweens[mt].run(je);return le.notifyWith(h,[_e,je,xe]),je<1&&X?xe:(X||le.notifyWith(h,[_e,1,0]),le.resolveWith(h,[_e]),!1)},_e=le.promise({elem:h,props:m.extend({},v),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},E),originalProperties:v,originalOptions:E,startTime:Qo||Da(),duration:E.duration,tweens:[],createTween:function(Pe,xe){var je=m.Tween(h,_e.opts,Pe,xe,_e.opts.specialEasing[Pe]||_e.opts.easing);return _e.tweens.push(je),je},stop:function(Pe){var xe=0,je=Pe?_e.tweens.length:0;if(L)return this;for(L=!0;xe<je;xe++)_e.tweens[xe].run(1);return Pe?(le.notifyWith(h,[_e,1,0]),le.resolveWith(h,[_e,Pe])):le.rejectWith(h,[_e,Pe]),this}}),Te=_e.props;for(function(Pe,xe){var je,mt,X,jt,Cn;for(je in Pe)if(X=xe[mt=We(je)],jt=Pe[je],Array.isArray(jt)&&(X=jt[1],jt=Pe[je]=jt[0]),je!==mt&&(Pe[mt]=jt,delete Pe[je]),(Cn=m.cssHooks[mt])&&"expand"in Cn)for(je in jt=Cn.expand(jt),delete Pe[mt],jt)je in Pe||(Pe[je]=jt[je],xe[je]=X);else xe[mt]=X}(Te,_e.opts.specialEasing);$<V;$++)if(A=jr.prefilters[$].call(_e,h,Te,_e.opts))return ae(A.stop)&&(m._queueHooks(_e.elem,_e.opts.queue).stop=A.stop.bind(A)),A;return m.map(Te,Pa,_e),ae(_e.opts.start)&&_e.opts.start.call(h,_e),_e.progress(_e.opts.progress).done(_e.opts.done,_e.opts.complete).fail(_e.opts.fail).always(_e.opts.always),m.fx.timer(m.extend(oe,{elem:h,anim:_e,queue:_e.opts.queue})),_e}m.Animation=m.extend(jr,{tweeners:{"*":[function(h,v){var E=this.createTween(h,v);return ve(E.elem,h,vn.exec(v),E),E}]},tweener:function(h,v){ae(h)?(v=h,h=["*"]):h=h.match(pt);for(var E,A=0,L=h.length;A<L;A++)(jr.tweeners[E=h[A]]=jr.tweeners[E]||[]).unshift(v)},prefilters:[function(h,v,E){var A,L,$,V,le,oe,_e,Te,Pe="width"in v||"height"in v,xe=this,je={},mt=h.style,X=h.nodeType&&eo(h),jt=Ze.get(h,"fxshow");for(A in E.queue||(null==(V=m._queueHooks(h,"fx")).unqueued&&(V.unqueued=0,le=V.empty.fire,V.empty.fire=function(){V.unqueued||le()}),V.unqueued++,xe.always(function(){xe.always(function(){V.unqueued--,m.queue(h,"fx").length||V.empty.fire()})})),v)if(rc.test(L=v[A])){if(delete v[A],$=$||"toggle"===L,L===(X?"hide":"show")){if("show"!==L||!jt||void 0===jt[A])continue;X=!0}je[A]=jt&&jt[A]||m.style(h,A)}if((oe=!m.isEmptyObject(v))||!m.isEmptyObject(je))for(A in Pe&&1===h.nodeType&&(E.overflow=[mt.overflow,mt.overflowX,mt.overflowY],null==(_e=jt&&jt.display)&&(_e=Ze.get(h,"display")),"none"===(Te=m.css(h,"display"))&&(_e?Te=_e:($t([h],!0),_e=h.style.display||_e,Te=m.css(h,"display"),$t([h]))),("inline"===Te||"inline-block"===Te&&null!=_e)&&"none"===m.css(h,"float")&&(oe||(xe.done(function(){mt.display=_e}),null==_e&&(_e="none"===(Te=mt.display)?"":Te)),mt.display="inline-block")),E.overflow&&(mt.overflow="hidden",xe.always(function(){mt.overflow=E.overflow[0],mt.overflowX=E.overflow[1],mt.overflowY=E.overflow[2]})),oe=!1,je)oe||(jt?"hidden"in jt&&(X=jt.hidden):jt=Ze.access(h,"fxshow",{display:_e}),$&&(jt.hidden=!X),X&&$t([h],!0),xe.done(function(){for(A in X||$t([h]),Ze.remove(h,"fxshow"),je)m.style(h,A,je[A])})),oe=Pa(X?jt[A]:0,A,xe),A in jt||(jt[A]=oe.start,X&&(oe.end=oe.start,oe.start=0))}],prefilter:function(h,v){v?jr.prefilters.unshift(h):jr.prefilters.push(h)}}),m.speed=function(h,v,E){var A=h&&"object"==typeof h?m.extend({},h):{complete:E||!E&&v||ae(h)&&h,duration:h,easing:E&&v||v&&!ae(v)&&v};return m.fx.off?A.duration=0:"number"!=typeof A.duration&&(A.duration=A.duration in m.fx.speeds?m.fx.speeds[A.duration]:m.fx.speeds._default),null!=A.queue&&!0!==A.queue||(A.queue="fx"),A.old=A.complete,A.complete=function(){ae(A.old)&&A.old.call(this),A.queue&&m.dequeue(this,A.queue)},A},m.fn.extend({fadeTo:function(h,v,E,A){return this.filter(eo).css("opacity",0).show().end().animate({opacity:v},h,E,A)},animate:function(h,v,E,A){var L=m.isEmptyObject(h),$=m.speed(v,E,A),V=function(){var le=jr(this,m.extend({},h),$);(L||Ze.get(this,"finish"))&&le.stop(!0)};return V.finish=V,L||!1===$.queue?this.each(V):this.queue($.queue,V)},stop:function(h,v,E){var A=function(L){var $=L.stop;delete L.stop,$(E)};return"string"!=typeof h&&(E=v,v=h,h=void 0),v&&this.queue(h||"fx",[]),this.each(function(){var L=!0,$=null!=h&&h+"queueHooks",V=m.timers,le=Ze.get(this);if($)le[$]&&le[$].stop&&A(le[$]);else for($ in le)le[$]&&le[$].stop&&oc.test($)&&A(le[$]);for($=V.length;$--;)V[$].elem!==this||null!=h&&V[$].queue!==h||(V[$].anim.stop(E),L=!1,V.splice($,1));!L&&E||m.dequeue(this,h)})},finish:function(h){return!1!==h&&(h=h||"fx"),this.each(function(){var v,E=Ze.get(this),A=E[h+"queue"],L=E[h+"queueHooks"],$=m.timers,V=A?A.length:0;for(E.finish=!0,m.queue(this,h,[]),L&&L.stop&&L.stop.call(this,!0),v=$.length;v--;)$[v].elem===this&&$[v].queue===h&&($[v].anim.stop(!0),$.splice(v,1));for(v=0;v<V;v++)A[v]&&A[v].finish&&A[v].finish.call(this);delete E.finish})}}),m.each(["toggle","show","hide"],function(h,v){var E=m.fn[v];m.fn[v]=function(A,L,$){return null==A||"boolean"==typeof A?E.apply(this,arguments):this.animate(Ki(v,!0),A,L,$)}}),m.each({slideDown:Ki("show"),slideUp:Ki("hide"),slideToggle:Ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,v){m.fn[h]=function(E,A,L){return this.animate(v,E,A,L)}}),m.timers=[],m.fx.tick=function(){var h,v=0,E=m.timers;for(Qo=Date.now();v<E.length;v++)(h=E[v])()||E[v]!==h||E.splice(v--,1);E.length||m.fx.stop(),Qo=void 0},m.fx.timer=function(h){m.timers.push(h),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Bs||(Bs=!0,Ls())},m.fx.stop=function(){Bs=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(h,v){return h=m.fx&&m.fx.speeds[h]||h,this.queue(v=v||"fx",function(E,A){var L=R.setTimeout(E,h);A.stop=function(){R.clearTimeout(L)}})},_i=k.createElement("input"),ja=k.createElement("select").appendChild(k.createElement("option")),_i.type="checkbox",M.checkOn=""!==_i.value,M.optSelected=ja.selected,(_i=k.createElement("input")).value="t",_i.type="radio",M.radioValue="t"===_i.value;var ic,Xi=m.expr.attrHandle;m.fn.extend({attr:function(h,v){return U(this,m.attr,h,v,1<arguments.length)},removeAttr:function(h){return this.each(function(){m.removeAttr(this,h)})}}),m.extend({attr:function(h,v,E){var A,L,$=h.nodeType;if(3!==$&&8!==$&&2!==$)return typeof h.getAttribute>"u"?m.prop(h,v,E):(1===$&&m.isXMLDoc(h)||(L=m.attrHooks[v.toLowerCase()]||(m.expr.match.bool.test(v)?ic:void 0)),void 0!==E?null===E?void m.removeAttr(h,v):L&&"set"in L&&void 0!==(A=L.set(h,E,v))?A:(h.setAttribute(v,E+""),E):L&&"get"in L&&null!==(A=L.get(h,v))?A:null==(A=m.find.attr(h,v))?void 0:A)},attrHooks:{type:{set:function(h,v){if(!M.radioValue&&"radio"===v&&I(h,"input")){var E=h.value;return h.setAttribute("type",v),E&&(h.value=E),v}}}},removeAttr:function(h,v){var E,A=0,L=v&&v.match(pt);if(L&&1===h.nodeType)for(;E=L[A++];)h.removeAttribute(E)}}),ic={set:function(h,v,E){return!1===v?m.removeAttr(h,E):h.setAttribute(E,E),E}},m.each(m.expr.match.bool.source.match(/\w+/g),function(h,v){var E=Xi[v]||m.find.attr;Xi[v]=function(A,L,$){var V,le,oe=L.toLowerCase();return $||(le=Xi[oe],Xi[oe]=V,V=null!=E(A,L,$)?oe:null,Xi[oe]=le),V}});var su=/^(?:input|select|textarea|button)$/i,au=/^(?:a|area)$/i;function tr(h){return(h.match(pt)||[]).join(" ")}function Zo(h){return h.getAttribute&&h.getAttribute("class")||""}function Yi(h){return Array.isArray(h)?h:"string"==typeof h&&h.match(pt)||[]}m.fn.extend({prop:function(h,v){return U(this,m.prop,h,v,1<arguments.length)},removeProp:function(h){return this.each(function(){delete this[m.propFix[h]||h]})}}),m.extend({prop:function(h,v,E){var A,L,$=h.nodeType;if(3!==$&&8!==$&&2!==$)return 1===$&&m.isXMLDoc(h)||(L=m.propHooks[v=m.propFix[v]||v]),void 0!==E?L&&"set"in L&&void 0!==(A=L.set(h,E,v))?A:h[v]=E:L&&"get"in L&&null!==(A=L.get(h,v))?A:h[v]},propHooks:{tabIndex:{get:function(h){var v=m.find.attr(h,"tabindex");return v?parseInt(v,10):su.test(h.nodeName)||au.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),M.optSelected||(m.propHooks.selected={get:function(h){return null},set:function(h){}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),m.fn.extend({addClass:function(h){var v,E,A,L,$,V;return ae(h)?this.each(function(le){m(this).addClass(h.call(this,le,Zo(this)))}):(v=Yi(h)).length?this.each(function(){if(A=Zo(this),E=1===this.nodeType&&" "+tr(A)+" "){for($=0;$<v.length;$++)E.indexOf(" "+(L=v[$])+" ")<0&&(E+=L+" ");V=tr(E),A!==V&&this.setAttribute("class",V)}}):this},removeClass:function(h){var v,E,A,L,$,V;return ae(h)?this.each(function(le){m(this).removeClass(h.call(this,le,Zo(this)))}):arguments.length?(v=Yi(h)).length?this.each(function(){if(A=Zo(this),E=1===this.nodeType&&" "+tr(A)+" "){for($=0;$<v.length;$++)for(L=v[$];-1<E.indexOf(" "+L+" ");)E=E.replace(" "+L+" "," ");V=tr(E),A!==V&&this.setAttribute("class",V)}}):this:this.attr("class","")},toggleClass:function(h,v){var E,A,L,$,V=typeof h,le="string"===V||Array.isArray(h);return ae(h)?this.each(function(oe){m(this).toggleClass(h.call(this,oe,Zo(this),v),v)}):"boolean"==typeof v&&le?v?this.addClass(h):this.removeClass(h):(E=Yi(h),this.each(function(){if(le)for($=m(this),L=0;L<E.length;L++)$.hasClass(A=E[L])?$.removeClass(A):$.addClass(A);else void 0!==h&&"boolean"!==V||((A=Zo(this))&&Ze.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||!1===h?"":Ze.get(this,"__className__")||""))}))},hasClass:function(h){var v,E,A=0;for(v=" "+h+" ";E=this[A++];)if(1===E.nodeType&&-1<(" "+tr(Zo(E))+" ").indexOf(v))return!0;return!1}});var io=/\r/g;m.fn.extend({val:function(h){var v,E,A,L=this[0];return arguments.length?(A=ae(h),this.each(function($){var V;1===this.nodeType&&(null==(V=A?h.call(this,$,m(this).val()):h)?V="":"number"==typeof V?V+="":Array.isArray(V)&&(V=m.map(V,function(le){return null==le?"":le+""})),(v=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in v&&void 0!==v.set(this,V,"value")||(this.value=V))})):L?(v=m.valHooks[L.type]||m.valHooks[L.nodeName.toLowerCase()])&&"get"in v&&void 0!==(E=v.get(L,"value"))?E:"string"==typeof(E=L.value)?E.replace(io,""):E??"":void 0}}),m.extend({valHooks:{option:{get:function(h){return m.find.attr(h,"value")??tr(m.text(h))}},select:{get:function(h){var v,E,A,L=h.options,$=h.selectedIndex,V="select-one"===h.type,le=V?null:[],oe=V?$+1:L.length;for(A=$<0?oe:V?$:0;A<oe;A++)if(((E=L[A]).selected||A===$)&&!E.disabled&&(!E.parentNode.disabled||!I(E.parentNode,"optgroup"))){if(v=m(E).val(),V)return v;le.push(v)}return le},set:function(h,v){for(var E,A,L=h.options,$=m.makeArray(v),V=L.length;V--;)((A=L[V]).selected=-1<m.inArray(m.valHooks.option.get(A),$))&&(E=!0);return E||(h.selectedIndex=-1),$}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(h,v){if(Array.isArray(v))return h.checked=-1<m.inArray(m(h).val(),v)}},M.checkOn||(m.valHooks[this].get=function(h){return null===h.getAttribute("value")?"on":h.value})});var gr=R.location,Do={guid:Date.now()},Ba=/\?/;m.parseXML=function(h){var v,E;if(!h||"string"!=typeof h)return null;try{v=(new R.DOMParser).parseFromString(h,"text/xml")}catch{}return E=v&&v.getElementsByTagName("parsererror")[0],v&&!E||m.error("Invalid XML: "+(E?m.map(E.childNodes,function(A){return A.textContent}).join("\n"):h)),v};var Bt=/^(?:focusinfocus|focusoutblur)$/,sc=function(h){h.stopPropagation()};m.extend(m.event,{trigger:function(h,v,E,A){var L,$,V,le,oe,_e,Te,Pe,xe=[E||k],je=dn.call(h,"type")?h.type:h,mt=dn.call(h,"namespace")?h.namespace.split("."):[];if($=Pe=V=E=E||k,3!==E.nodeType&&8!==E.nodeType&&!Bt.test(je+m.event.triggered)&&(-1<je.indexOf(".")&&(je=(mt=je.split(".")).shift(),mt.sort()),oe=je.indexOf(":")<0&&"on"+je,(h=h[m.expando]?h:new m.Event(je,"object"==typeof h&&h)).isTrigger=A?2:3,h.namespace=mt.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=E),v=null==v?[h]:m.makeArray(v,[h]),Te=m.event.special[je]||{},A||!Te.trigger||!1!==Te.trigger.apply(E,v))){if(!A&&!Te.noBubble&&!u(E)){for(Bt.test((le=Te.delegateType||je)+je)||($=$.parentNode);$;$=$.parentNode)xe.push($),V=$;V===(E.ownerDocument||k)&&xe.push(V.defaultView||V.parentWindow||R)}for(L=0;($=xe[L++])&&!h.isPropagationStopped();)Pe=$,h.type=1<L?le:Te.bindType||je,(_e=(Ze.get($,"events")||Object.create(null))[h.type]&&Ze.get($,"handle"))&&_e.apply($,v),(_e=oe&&$[oe])&&_e.apply&&tt($)&&(h.result=_e.apply($,v),!1===h.result&&h.preventDefault());return h.type=je,A||h.isDefaultPrevented()||Te._default&&!1!==Te._default.apply(xe.pop(),v)||!tt(E)||oe&&ae(E[je])&&!u(E)&&((V=E[oe])&&(E[oe]=null),m.event.triggered=je,h.isPropagationStopped()&&Pe.addEventListener(je,sc),E[je](),h.isPropagationStopped()&&Pe.removeEventListener(je,sc),m.event.triggered=void 0,V&&(E[oe]=V)),h.result}},simulate:function(h,v,E){var A=m.extend(new m.Event,E,{type:h,isSimulated:!0});m.event.trigger(A,null,v)}}),m.fn.extend({trigger:function(h,v){return this.each(function(){m.event.trigger(h,v,this)})},triggerHandler:function(h,v){var E=this[0];if(E)return m.event.trigger(h,v,E,!0)}});var ac=/\[\]$/,La=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,yi=/^(?:input|select|textarea|keygen)/i;function Ms(h,v,E,A){var L;if(Array.isArray(v))m.each(v,function($,V){E||ac.test(h)?A(h,V):Ms(h+"["+("object"==typeof V&&null!=V?$:"")+"]",V,E,A)});else if(E||"object"!==C(v))A(h,v);else for(L in v)Ms(h+"["+L+"]",v[L],E,A)}m.param=function(h,v){var E,A=[],L=function($,V){var le=ae(V)?V():V;A[A.length]=encodeURIComponent($)+"="+encodeURIComponent(le??"")};if(null==h)return"";if(Array.isArray(h)||h.jquery&&!m.isPlainObject(h))m.each(h,function(){L(this.name,this.value)});else for(E in h)Ms(E,h[E],v,L);return A.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=m.prop(this,"elements");return h?m.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!m(this).is(":disabled")&&yi.test(this.nodeName)&&!Ie.test(h)&&(this.checked||!rn.test(h))}).map(function(h,v){var E=m(this).val();return null==E?null:Array.isArray(E)?m.map(E,function(A){return{name:v.name,value:A.replace(La,"\r\n")}}):{name:v.name,value:E.replace(La,"\r\n")}}).get()}});var Xn=/%20/g,bi=/#.*$/,lu=/([?&])_=[^&]*/,lc=/^(.*?):[ \t]*([^\r\n]*)$/gm,cu=/^(?:GET|HEAD)$/,du=/^\/\//,Yt={},Is={},Gi="*/".concat("*"),Ji=k.createElement("a");function nr(h){return function(v,E){"string"!=typeof v&&(E=v,v="*");var A,L=0,$=v.toLowerCase().match(pt)||[];if(ae(E))for(;A=$[L++];)"+"===A[0]?(A=A.slice(1)||"*",(h[A]=h[A]||[]).unshift(E)):(h[A]=h[A]||[]).push(E)}}function mr(h,v,E,A){var L={},$=h===Is;function V(le){var oe;return L[le]=!0,m.each(h[le]||[],function(_e,Te){var Pe=Te(v,E,A);return"string"!=typeof Pe||$||L[Pe]?$?!(oe=Pe):void 0:(v.dataTypes.unshift(Pe),V(Pe),!1)}),oe}return V(v.dataTypes[0])||!L["*"]&&V("*")}function Ma(h,v){var E,A,L=m.ajaxSettings.flatOptions||{};for(E in v)void 0!==v[E]&&((L[E]?h:A||(A={}))[E]=v[E]);return A&&m.extend(!0,h,A),h}Ji.href=gr.href,m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(gr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,v){return v?Ma(Ma(h,m.ajaxSettings),v):Ma(m.ajaxSettings,h)},ajaxPrefilter:nr(Yt),ajaxTransport:nr(Is),ajax:function(h,v){"object"==typeof h&&(v=h,h=void 0);var E,A,L,$,V,le,oe,_e,Te,Pe,xe=m.ajaxSetup({},v=v||{}),je=xe.context||xe,mt=xe.context&&(je.nodeType||je.jquery)?m(je):m.event,X=m.Deferred(),jt=m.Callbacks("once memory"),Cn=xe.statusCode||{},on={},Ir={},Dt="canceled",Lt={readyState:0,getResponseHeader:function(It){var cn;if(oe){if(!$)for($={};cn=lc.exec(L);)$[cn[1].toLowerCase()+" "]=($[cn[1].toLowerCase()+" "]||[]).concat(cn[2]);cn=$[It.toLowerCase()+" "]}return null==cn?null:cn.join(", ")},getAllResponseHeaders:function(){return oe?L:null},setRequestHeader:function(It,cn){return null==oe&&(It=Ir[It.toLowerCase()]=Ir[It.toLowerCase()]||It,on[It]=cn),this},overrideMimeType:function(It){return null==oe&&(xe.mimeType=It),this},statusCode:function(It){var cn;if(It)if(oe)Lt.always(It[Lt.status]);else for(cn in It)Cn[cn]=[Cn[cn],It[cn]];return this},abort:function(It){var cn=It||Dt;return E&&E.abort(cn),Po(0,cn),this}};if(X.promise(Lt),xe.url=((h||xe.url||gr.href)+"").replace(du,gr.protocol+"//"),xe.type=v.method||v.type||xe.method||xe.type,xe.dataTypes=(xe.dataType||"*").toLowerCase().match(pt)||[""],null==xe.crossDomain){le=k.createElement("a");try{le.href=xe.url,le.href=le.href,xe.crossDomain=Ji.protocol+"//"+Ji.host!=le.protocol+"//"+le.host}catch{xe.crossDomain=!0}}if(xe.data&&xe.processData&&"string"!=typeof xe.data&&(xe.data=m.param(xe.data,xe.traditional)),mr(Yt,xe,v,Lt),oe)return Lt;for(Te in(_e=m.event&&xe.global)&&0==m.active++&&m.event.trigger("ajaxStart"),xe.type=xe.type.toUpperCase(),xe.hasContent=!cu.test(xe.type),A=xe.url.replace(bi,""),xe.hasContent?xe.data&&xe.processData&&0===(xe.contentType||"").indexOf("application/x-www-form-urlencoded")&&(xe.data=xe.data.replace(Xn,"+")):(Pe=xe.url.slice(A.length),xe.data&&(xe.processData||"string"==typeof xe.data)&&(A+=(Ba.test(A)?"&":"?")+xe.data,delete xe.data),!1===xe.cache&&(A=A.replace(lu,"$1"),Pe=(Ba.test(A)?"&":"?")+"_="+Do.guid+++Pe),xe.url=A+Pe),xe.ifModified&&(m.lastModified[A]&&Lt.setRequestHeader("If-Modified-Since",m.lastModified[A]),m.etag[A]&&Lt.setRequestHeader("If-None-Match",m.etag[A])),(xe.data&&xe.hasContent&&!1!==xe.contentType||v.contentType)&&Lt.setRequestHeader("Content-Type",xe.contentType),Lt.setRequestHeader("Accept",xe.dataTypes[0]&&xe.accepts[xe.dataTypes[0]]?xe.accepts[xe.dataTypes[0]]+("*"!==xe.dataTypes[0]?", "+Gi+"; q=0.01":""):xe.accepts["*"]),xe.headers)Lt.setRequestHeader(Te,xe.headers[Te]);if(xe.beforeSend&&(!1===xe.beforeSend.call(je,Lt,xe)||oe))return Lt.abort();if(Dt="abort",jt.add(xe.complete),Lt.done(xe.success),Lt.fail(xe.error),E=mr(Is,xe,v,Lt)){if(Lt.readyState=1,_e&&mt.trigger("ajaxSend",[Lt,xe]),oe)return Lt;xe.async&&0<xe.timeout&&(V=R.setTimeout(function(){Lt.abort("timeout")},xe.timeout));try{oe=!1,E.send(on,Po)}catch(It){if(oe)throw It;Po(-1,It)}}else Po(-1,"No Transport");function Po(It,cn,rr,wi){var zr,Fr,kr,_o,ti,Qt=cn;oe||(oe=!0,V&&R.clearTimeout(V),E=void 0,L=wi||"",Lt.readyState=0<It?4:0,zr=200<=It&&It<300||304===It,rr&&(_o=function(bn,kn,Yn){for(var ao,Gn,Tt,Tn,sn=bn.contents,an=bn.dataTypes;"*"===an[0];)an.shift(),void 0===ao&&(ao=bn.mimeType||kn.getResponseHeader("Content-Type"));if(ao)for(Gn in sn)if(sn[Gn]&&sn[Gn].test(ao)){an.unshift(Gn);break}if(an[0]in Yn)Tt=an[0];else{for(Gn in Yn){if(!an[0]||bn.converters[Gn+" "+an[0]]){Tt=Gn;break}Tn||(Tn=Gn)}Tt=Tt||Tn}if(Tt)return Tt!==an[0]&&an.unshift(Tt),Yn[Tt]}(xe,Lt,rr)),!zr&&-1<m.inArray("script",xe.dataTypes)&&m.inArray("json",xe.dataTypes)<0&&(xe.converters["text script"]=function(){}),_o=function(bn,kn,Yn,ao){var Gn,Tt,Tn,sn,an,lo={},ni=bn.dataTypes.slice();if(ni[1])for(Tn in bn.converters)lo[Tn.toLowerCase()]=bn.converters[Tn];for(Tt=ni.shift();Tt;)if(bn.responseFields[Tt]&&(Yn[bn.responseFields[Tt]]=kn),!an&&ao&&bn.dataFilter&&(kn=bn.dataFilter(kn,bn.dataType)),an=Tt,Tt=ni.shift())if("*"===Tt)Tt=an;else if("*"!==an&&an!==Tt){if(!(Tn=lo[an+" "+Tt]||lo["* "+Tt]))for(Gn in lo)if((sn=Gn.split(" "))[1]===Tt&&(Tn=lo[an+" "+sn[0]]||lo["* "+sn[0]])){!0===Tn?Tn=lo[Gn]:!0!==lo[Gn]&&(Tt=sn[0],ni.unshift(sn[1]));break}if(!0!==Tn)if(Tn&&bn.throws)kn=Tn(kn);else try{kn=Tn(kn)}catch(Fs){return{state:"parsererror",error:Tn?Fs:"No conversion from "+an+" to "+Tt}}}return{state:"success",data:kn}}(xe,_o,Lt,zr),zr?(xe.ifModified&&((ti=Lt.getResponseHeader("Last-Modified"))&&(m.lastModified[A]=ti),(ti=Lt.getResponseHeader("etag"))&&(m.etag[A]=ti)),204===It||"HEAD"===xe.type?Qt="nocontent":304===It?Qt="notmodified":(Qt=_o.state,Fr=_o.data,zr=!(kr=_o.error))):(kr=Qt,!It&&Qt||(Qt="error",It<0&&(It=0))),Lt.status=It,Lt.statusText=(cn||Qt)+"",zr?X.resolveWith(je,[Fr,Qt,Lt]):X.rejectWith(je,[Lt,Qt,kr]),Lt.statusCode(Cn),Cn=void 0,_e&&mt.trigger(zr?"ajaxSuccess":"ajaxError",[Lt,xe,zr?Fr:kr]),jt.fireWith(je,[Lt,Qt]),_e&&(mt.trigger("ajaxComplete",[Lt,xe]),--m.active||m.event.trigger("ajaxStop")))}return Lt},getJSON:function(h,v,E){return m.get(h,v,E,"json")},getScript:function(h,v){return m.get(h,void 0,v,"script")}}),m.each(["get","post"],function(h,v){m[v]=function(E,A,L,$){return ae(A)&&($=$||L,L=A,A=void 0),m.ajax(m.extend({url:E,type:v,dataType:$,data:A,success:L},m.isPlainObject(E)&&E))}}),m.ajaxPrefilter(function(h){var v;for(v in h.headers)"content-type"===v.toLowerCase()&&(h.contentType=h.headers[v]||"")}),m._evalUrl=function(h,v,E){return m.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(A){m.globalEval(A,v,E)}})},m.fn.extend({wrapAll:function(h){var v;return this[0]&&(ae(h)&&(h=h.call(this[0])),v=m(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&v.insertBefore(this[0]),v.map(function(){for(var E=this;E.firstElementChild;)E=E.firstElementChild;return E}).append(this)),this},wrapInner:function(h){return ae(h)?this.each(function(v){m(this).wrapInner(h.call(this,v))}):this.each(function(){var v=m(this),E=v.contents();E.length?E.wrapAll(h):v.append(h)})},wrap:function(h){var v=ae(h);return this.each(function(E){m(this).wrapAll(v?h.call(this,E):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(h){return!m.expr.pseudos.visible(h)},m.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new R.XMLHttpRequest}catch{}};var uu={0:200,1223:204},ei=m.ajaxSettings.xhr();M.cors=!!ei&&"withCredentials"in ei,M.ajax=ei=!!ei,m.ajaxTransport(function(h){var v,E;if(M.cors||ei&&!h.crossDomain)return{send:function(A,L){var $,V=h.xhr();if(V.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for($ in h.xhrFields)V[$]=h.xhrFields[$];for($ in h.mimeType&&V.overrideMimeType&&V.overrideMimeType(h.mimeType),h.crossDomain||A["X-Requested-With"]||(A["X-Requested-With"]="XMLHttpRequest"),A)V.setRequestHeader($,A[$]);v=function(le){return function(){v&&(v=E=V.onload=V.onerror=V.onabort=V.ontimeout=V.onreadystatechange=null,"abort"===le?V.abort():"error"===le?"number"!=typeof V.status?L(0,"error"):L(V.status,V.statusText):L(uu[V.status]||V.status,V.statusText,"text"!==(V.responseType||"text")||"string"!=typeof V.responseText?{binary:V.response}:{text:V.responseText},V.getAllResponseHeaders()))}},V.onload=v(),E=V.onerror=V.ontimeout=v("error"),void 0!==V.onabort?V.onabort=E:V.onreadystatechange=function(){4===V.readyState&&R.setTimeout(function(){v&&E()})},v=v("abort");try{V.send(h.hasContent&&h.data||null)}catch(le){if(v)throw le}},abort:function(){v&&v()}}}),m.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return m.globalEval(h),h}}}),m.ajaxPrefilter("script",function(h){void 0===h.cache&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),m.ajaxTransport("script",function(h){var v,E;if(h.crossDomain||h.scriptAttrs)return{send:function(A,L){v=m("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",E=function($){v.remove(),E=null,$&&L("error"===$.type?404:200,$.type)}),k.head.appendChild(v[0])},abort:function(){E&&E()}}});var Ia,En=[],so=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=En.pop()||m.expando+"_"+Do.guid++;return this[h]=!0,h}}),m.ajaxPrefilter("json jsonp",function(h,v,E){var A,L,$,V=!1!==h.jsonp&&(so.test(h.url)?"url":"string"==typeof h.data&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&so.test(h.data)&&"data");if(V||"jsonp"===h.dataTypes[0])return A=h.jsonpCallback=ae(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,V?h[V]=h[V].replace(so,"$1"+A):!1!==h.jsonp&&(h.url+=(Ba.test(h.url)?"&":"?")+h.jsonp+"="+A),h.converters["script json"]=function(){return $||m.error(A+" was not called"),$[0]},h.dataTypes[0]="json",L=R[A],R[A]=function(){$=arguments},E.always(function(){void 0===L?m(R).removeProp(A):R[A]=L,h[A]&&(h.jsonpCallback=v.jsonpCallback,En.push(A)),$&&ae(L)&&L($[0]),$=L=void 0}),"script"}),M.createHTMLDocument=((Ia=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ia.childNodes.length),m.parseHTML=function(h,v,E){return"string"!=typeof h?[]:("boolean"==typeof v&&(E=v,v=!1),v||(M.createHTMLDocument?((A=(v=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,v.head.appendChild(A)):v=k),$=!E&&[],(L=O.exec(h))?[v.createElement(L[1])]:(L=Or([h],v,$),$&&$.length&&m($).remove(),m.merge([],L.childNodes)));var A,L,$},m.fn.load=function(h,v,E){var A,L,$,V=this,le=h.indexOf(" ");return-1<le&&(A=tr(h.slice(le)),h=h.slice(0,le)),ae(v)?(E=v,v=void 0):v&&"object"==typeof v&&(L="POST"),0<V.length&&m.ajax({url:h,type:L||"GET",dataType:"html",data:v}).done(function(oe){$=arguments,V.html(A?m("<div>").append(m.parseHTML(oe)).find(A):oe)}).always(E&&function(oe,_e){V.each(function(){E.apply(this,$||[oe.responseText,_e,oe])})}),this},m.expr.pseudos.animated=function(h){return m.grep(m.timers,function(v){return h===v.elem}).length},m.offset={setOffset:function(h,v,E){var A,L,$,V,le,oe,_e=m.css(h,"position"),Te=m(h),Pe={};"static"===_e&&(h.style.position="relative"),le=Te.offset(),$=m.css(h,"top"),oe=m.css(h,"left"),("absolute"===_e||"fixed"===_e)&&-1<($+oe).indexOf("auto")?(V=(A=Te.position()).top,L=A.left):(V=parseFloat($)||0,L=parseFloat(oe)||0),ae(v)&&(v=v.call(h,E,m.extend({},le))),null!=v.top&&(Pe.top=v.top-le.top+V),null!=v.left&&(Pe.left=v.left-le.left+L),"using"in v?v.using.call(h,Pe):Te.css(Pe)}},m.fn.extend({offset:function(h){if(arguments.length)return void 0===h?this:this.each(function(L){m.offset.setOffset(this,h,L)});var v,E,A=this[0];return A?A.getClientRects().length?{top:(v=A.getBoundingClientRect()).top+(E=A.ownerDocument.defaultView).pageYOffset,left:v.left+E.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var h,v,E,A=this[0],L={top:0,left:0};if("fixed"===m.css(A,"position"))v=A.getBoundingClientRect();else{for(v=this.offset(),E=A.ownerDocument,h=A.offsetParent||E.documentElement;h&&(h===E.body||h===E.documentElement)&&"static"===m.css(h,"position");)h=h.parentNode;h&&h!==A&&1===h.nodeType&&((L=m(h).offset()).top+=m.css(h,"borderTopWidth",!0),L.left+=m.css(h,"borderLeftWidth",!0))}return{top:v.top-L.top-m.css(A,"marginTop",!0),left:v.left-L.left-m.css(A,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&"static"===m.css(h,"position");)h=h.offsetParent;return h||_n})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,v){var E="pageYOffset"===v;m.fn[h]=function(A){return U(this,function(L,$,V){var le;if(u(L)?le=L:9===L.nodeType&&(le=L.defaultView),void 0===V)return le?le[v]:L[$];le?le.scrollTo(E?le.pageXOffset:V,E?V:le.pageYOffset):L[$]=V},h,A,arguments.length)}}),m.each(["top","left"],function(h,v){m.cssHooks[v]=vi(M.pixelPosition,function(E,A){if(A)return A=pr(E,v),Ui.test(A)?m(E).position()[v]+"px":A})}),m.each({Height:"height",Width:"width"},function(h,v){m.each({padding:"inner"+h,content:v,"":"outer"+h},function(E,A){m.fn[A]=function(L,$){var V=arguments.length&&(E||"boolean"!=typeof L),le=E||(!0===L||!0===$?"margin":"border");return U(this,function(oe,_e,Te){var Pe;return u(oe)?0===A.indexOf("outer")?oe["inner"+h]:oe.document.documentElement["client"+h]:9===oe.nodeType?(Pe=oe.documentElement,Math.max(oe.body["scroll"+h],Pe["scroll"+h],oe.body["offset"+h],Pe["offset"+h],Pe["client"+h])):void 0===Te?m.css(oe,_e,le):m.style(oe,_e,Te,le)},v,V?L:void 0,V)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,v){m.fn[v]=function(E){return this.on(v,E)}}),m.fn.extend({bind:function(h,v,E){return this.on(h,null,v,E)},unbind:function(h,v){return this.off(h,null,v)},delegate:function(h,v,E,A){return this.on(v,h,E,A)},undelegate:function(h,v,E){return 1===arguments.length?this.off(h,"**"):this.off(v,h||"**",E)},hover:function(h,v){return this.on("mouseenter",h).on("mouseleave",v||h)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,v){m.fn[v]=function(E,A){return 0<arguments.length?this.on(v,null,E,A):this.trigger(v)}});var Cr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(h,v){var E,A,L;if("string"==typeof v&&(E=h[v],v=h,h=E),ae(h))return A=nn.call(arguments,2),(L=function(){return h.apply(v||this,A.concat(nn.call(arguments)))}).guid=h.guid=h.guid||m.guid++,L},m.holdReady=function(h){h?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=I,m.isFunction=ae,m.isWindow=u,m.camelCase=We,m.type=C,m.now=Date.now,m.isNumeric=function(h){var v=m.type(h);return("number"===v||"string"===v)&&!isNaN(h-parseFloat(h))},m.trim=function(h){return null==h?"":(h+"").replace(Cr,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var vo=R.jQuery,zs=R.$;return m.noConflict=function(h){return R.$===m&&(R.$=zs),h&&R.jQuery===m&&(R.jQuery=vo),m},typeof At>"u"&&(R.jQuery=R.$=m),m}),function(R){"use strict";"function"==typeof define&&define.amd?define(["jquery"],R):R("object"==typeof exports?require("jquery"):jQuery)}(function(R,At){"use strict";if(!R.jstree){var dn,H,en=0,gn=!1,nn=!1,mn=!1,st=[],Le=R("script:last").attr("src"),xt=document,ln=xt.createElement("LI");ln.setAttribute("role","treeitem"),(dn=xt.createElement("I")).className="jstree-icon jstree-ocl",ln.appendChild(dn),(dn=xt.createElement("A")).className="jstree-anchor",dn.setAttribute("href","#"),(H=xt.createElement("I")).className="jstree-icon jstree-themeicon",dn.appendChild(H),ln.appendChild(dn),dn=H=null,R.jstree={version:"3.0.4",defaults:{plugins:[]},plugins:{},path:Le&&-1!==Le.indexOf("/")?Le.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%]/g},R.jstree.create=function(u,k){var g=new R.jstree.core(++en),x=k;return k=R.extend(!0,{},R.jstree.defaults,k),x&&x.plugins&&(k.plugins=x.plugins),R.each(k.plugins,function(C,N){"core"!==C&&(g=g.plugin(N,k[N]))}),g.init(u,k),g},R.jstree.destroy=function(){R(".jstree:jstree").jstree("destroy"),R(document).off(".jstree")},R.jstree.core=function(u){this._id=u,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},R.jstree.reference=function(u){var k=null,g=null;if(u&&u.id&&(u=u.id),!g||!g.length)try{g=R(u)}catch{}if(!g||!g.length)try{g=R("#"+u.replace(R.jstree.idregex,"\\$&"))}catch{}return g&&g.length&&(g=g.closest(".jstree")).length&&(g=g.data("jstree"))?k=g:R(".jstree").each(function(){var x=R(this).data("jstree");return x&&x._model.data[u]?(k=x,!1):void 0}),k},R.fn.jstree=function(u){var k="string"==typeof u,g=Array.prototype.slice.call(arguments,1),x=null;return this.each(function(){var C=R.jstree.reference(this),N=k&&C?C[u]:null;return x=k&&N?N.apply(C,g):null,C||k||u!==At&&!R.isPlainObject(u)||R(this).data("jstree",new R.jstree.create(this,u)),(C&&!k||!0===u)&&(x=C||!1),(null===x||x===At)&&void 0}),null!==x&&x!==At?x:this},R.expr[":"].jstree=R.expr.createPseudo(function(u){return function(k){return R(k).hasClass("jstree")&&R(k).data("jstree")!==At}}),R.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:R.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1},R.jstree.core.prototype={plugin:function(u,k){var g=R.jstree.plugins[u];return g?(this._data[u]={},g.prototype=this,new g(k,this)):this},init:function(u,k){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=R(u).addClass("jstree jstree-"+this._id),this.settings=k,this.element.bind("destroyed",R.proxy(this.teardown,this)),this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this._data.core.li_height=this.get_container_ul().children("li:eq(0)").height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(u){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch{}u||this.element.empty(),this.element.unbind("destroyed",this.teardown),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var u=window.getSelection();try{u.removeAllRanges(),u.collapse()}catch{}}}).on("click.jstree",".jstree-ocl",R.proxy(function(u){this.toggle_node(u.target)},this)).on("click.jstree",".jstree-anchor",R.proxy(function(u){u.preventDefault(),u.currentTarget!==document.activeElement&&R(u.currentTarget).focus(),this.activate_node(u.currentTarget,u)},this)).on("keydown.jstree",".jstree-anchor",R.proxy(function(u){if("INPUT"===u.target.tagName)return!0;var k=null;switch(u.which){case 13:case 32:u.type="click",R(u.currentTarget).trigger(u);break;case 37:u.preventDefault(),this.is_open(u.currentTarget)?this.close_node(u.currentTarget):(k=this.get_prev_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 38:u.preventDefault(),(k=this.get_prev_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 39:u.preventDefault(),this.is_closed(u.currentTarget)?this.open_node(u.currentTarget,function(g){this.get_node(g,!0).children(".jstree-anchor").focus()}):(k=this.get_next_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 40:u.preventDefault(),(k=this.get_next_dom(u.currentTarget))&&k.length&&k.children(".jstree-anchor").focus();break;case 46:u.preventDefault(),(k=this.get_node(u.currentTarget))&&k.id&&"#"!==k.id&&(k=this.is_selected(k)?this.get_selected():k);break;case 113:u.preventDefault(),k=this.get_node(u.currentTarget)}},this)).on("load_node.jstree",R.proxy(function(u,k){if(k.status&&("#"!==k.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this.trigger("loaded")),!this._data.core.ready&&!this.get_container_ul().find(".jstree-loading:eq(0)").length)){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var x,C,g=[];for(x=0,C=this._data.core.selected.length;C>x;x++)g=g.concat(this._model.data[this._data.core.selected[x]].parents);for(x=0,C=(g=R.vakata.array_unique(g)).length;C>x;x++)this.open_node(g[x],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}setTimeout(R.proxy(function(){this.trigger("ready")},this),0)}},this)).on("init.jstree",R.proxy(function(){var u=this.settings.core.themes;this._data.core.themes.dots=u.dots,this._data.core.themes.stripes=u.stripes,this._data.core.themes.icons=u.icons,this.set_theme(u.name||"default",u.url),this.set_theme_variant(u.variant)},this)).on("loading.jstree",R.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",R.proxy(function(u){this._data.core.focused=null,R(u.currentTarget).filter(".jstree-hovered").mouseleave()},this)).on("focus.jstree",".jstree-anchor",R.proxy(function(u){var k=this.get_node(u.currentTarget);k&&k.id&&(this._data.core.focused=k.id),this.element.find(".jstree-hovered").not(u.currentTarget).mouseleave(),R(u.currentTarget).mouseenter()},this)).on("mouseenter.jstree",".jstree-anchor",R.proxy(function(u){this.hover_node(u.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",R.proxy(function(u){this.dehover_node(u.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),R(document).off(".jstree-"+this._id)},trigger:function(u,k){k||(k={}),k.instance=this,this.element.triggerHandler(u.replace(".jstree","")+".jstree",k)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children:eq(0)")},get_string:function(u){var k=this.settings.core.strings;return R.isFunction(k)?k.call(this,u):k&&k[u]?k[u]:u},_firstChild:function(u){for(u=u?u.firstChild:null;null!==u&&1!==u.nodeType;)u=u.nextSibling;return u},_nextSibling:function(u){for(u=u?u.nextSibling:null;null!==u&&1!==u.nodeType;)u=u.nextSibling;return u},_previousSibling:function(u){for(u=u?u.previousSibling:null;null!==u&&1!==u.nodeType;)u=u.previousSibling;return u},get_node:function(u,k){var g;u&&u.id&&(u=u.id);try{if(this._model.data[u])u=this._model.data[u];else if(((g=R(u,this.element)).length||(g=R("#"+u.replace(R.jstree.idregex,"\\$&"),this.element)).length)&&this._model.data[g.closest(".jstree-node").attr("id")])u=this._model.data[g.closest(".jstree-node").attr("id")];else{if(!(g=R(u,this.element)).length||!g.hasClass("jstree"))return!1;u=this._model.data["#"]}return k&&(u="#"===u.id?this.element:R("#"+u.id.replace(R.jstree.idregex,"\\$&"),this.element)),u}catch{return!1}},get_path:function(u,k,g){if(!(u=u.parents?u:this.get_node(u))||"#"===u.id||!u.parents)return!1;var x,C,N=[];for(N.push(g?u.id:u.text),x=0,C=u.parents.length;C>x;x++)N.push(g?u.parents[x]:this.get_text(u.parents[x]));return N=N.reverse().slice(1),k?N.join(k):N},get_next_dom:function(u,k){var g;if((u=this.get_node(u,!0))[0]===this.element[0]){for(g=this._firstChild(this.get_container_ul()[0]);g&&0===g.offsetHeight;)g=this._nextSibling(g);return!!g&&R(g)}if(!u||!u.length)return!1;if(k){g=u[0];do{g=this._nextSibling(g)}while(g&&0===g.offsetHeight);return!!g&&R(g)}if(u.hasClass("jstree-open")){for(g=this._firstChild(u.children(".jstree-children")[0]);g&&0===g.offsetHeight;)g=this._nextSibling(g);if(null!==g)return R(g)}g=u[0];do{g=this._nextSibling(g)}while(g&&0===g.offsetHeight);return null!==g?R(g):u.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").eq(0)},get_prev_dom:function(u,k){var g;if((u=this.get_node(u,!0))[0]===this.element[0]){for(g=this.get_container_ul()[0].lastChild;g&&0===g.offsetHeight;)g=this._previousSibling(g);return!!g&&R(g)}if(!u||!u.length)return!1;if(k){g=u[0];do{g=this._previousSibling(g)}while(g&&0===g.offsetHeight);return!!g&&R(g)}g=u[0];do{g=this._previousSibling(g)}while(g&&0===g.offsetHeight);if(null!==g){for(u=R(g);u.hasClass("jstree-open");)u=u.children(".jstree-children:eq(0)").children(".jstree-node:visible:last");return u}return!(!(g=u[0].parentNode.parentNode)||!g.className||-1===g.className.indexOf("jstree-node"))&&R(g)},get_parent:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.parent},get_children_dom:function(u){return(u=this.get_node(u,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!u||!u.length)&&u.children(".jstree-children").children(".jstree-node")},is_parent:function(u){return(u=this.get_node(u))&&(!1===u.state.loaded||u.children.length>0)},is_loaded:function(u){return(u=this.get_node(u))&&u.state.loaded},is_loading:function(u){return(u=this.get_node(u))&&u.state&&u.state.loading},is_open:function(u){return(u=this.get_node(u))&&u.state.opened},is_closed:function(u){return(u=this.get_node(u))&&this.is_parent(u)&&!u.state.opened},is_leaf:function(u){return!this.is_parent(u)},load_node:function(u,k){var g,x,C,N,P;if(R.isArray(u))return this._load_nodes(u.slice(),k),!0;if(!(u=this.get_node(u)))return k&&k.call(this,u,!1),!1;if(u.state.loaded){for(u.state.loaded=!1,g=0,x=u.children_d.length;x>g;g++){for(C=0,N=u.parents.length;N>C;C++)this._model.data[u.parents[C]].children_d=R.vakata.array_remove_item(this._model.data[u.parents[C]].children_d,u.children_d[g]);this._model.data[u.children_d[g]].state.selected&&(P=!0,this._data.core.selected=R.vakata.array_remove_item(this._data.core.selected,u.children_d[g])),delete this._model.data[u.children_d[g]]}u.children=[],u.children_d=[],P&&this.trigger("changed",{action:"load_node",node:u,selected:this._data.core.selected})}return u.state.loading=!0,this.get_node(u,!0).addClass("jstree-loading"),this._load_node(u,R.proxy(function(m){(u=this._model.data[u.id]).state.loading=!1,u.state.loaded=m;var q=this.get_node(u,!0);u.state.loaded&&!u.children.length&&q&&q.length&&!q.hasClass("jstree-leaf")&&q.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),q.removeClass("jstree-loading"),this.trigger("load_node",{node:u,status:m}),k&&k.call(this,u,m)},this)),!0},_load_nodes:function(u,k,g){var P,m,x=!0,C=function(){this._load_nodes(u,k,!0)},N=this._model.data;for(P=0,m=u.length;m>P;P++)!N[u[P]]||N[u[P]].state.loaded&&g||(this.is_loading(u[P])||this.load_node(u[P],C),x=!1);x&&k&&!k.done&&(k.call(this,u),k.done=!0)},_load_node:function(u,k){var x,g=this.settings.core.data;return g?R.isFunction(g)?g.call(this,u,R.proxy(function(C){!1===C&&k.call(this,!1),this["string"==typeof C?"_append_html_data":"_append_json_data"](u,"string"==typeof C?R(C):C,function(N){k.call(this,N)})},this)):"object"==typeof g?g.url?(g=R.extend(!0,{},g),R.isFunction(g.url)&&(g.url=g.url.call(this,u)),R.isFunction(g.data)&&(g.data=g.data.call(this,u)),R.ajax(g).done(R.proxy(function(C,N,P){var m=P.getResponseHeader("Content-Type");return-1!==m.indexOf("json")||"object"==typeof C?this._append_json_data(u,C,function(q){k.call(this,q)}):-1!==m.indexOf("html")||"string"==typeof C?this._append_html_data(u,R(C),function(q){k.call(this,q)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:P})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1))},this)).fail(R.proxy(function(C){k.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:C})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(x=R.isArray(g)||R.isPlainObject(g)?JSON.parse(JSON.stringify(g)):g,"#"===u.id?this._append_json_data(u,x,function(C){k.call(this,C)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:u.id})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1))):"string"==typeof g?"#"===u.id?this._append_html_data(u,R(g),function(C){k.call(this,C)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:u.id})},this.settings.core.error.call(this,this._data.core.last_error),k.call(this,!1)):k.call(this,!1):"#"===u.id?this._append_html_data(u,this._data.core.original_container_html.clone(!0),function(C){k.call(this,C)}):k.call(this,!1)},_node_changed:function(u){(u=this.get_node(u))&&this._model.changed.push(u.id)},_append_html_data:function(u,k,g){(u=this.get_node(u)).children=[],u.children_d=[];var B,ne,J,x=k.is("ul")?k.children():k,C=u.id,N=[],P=[],m=this._model.data,q=m[C],I=this._data.core.selected.length;for(x.each(R.proxy(function(K,Ce){(B=this._parse_model_from_html(R(Ce),C,q.parents.concat()))&&(N.push(B),P.push(B),m[B].children_d.length&&(P=P.concat(m[B].children_d)))},this)),q.children=N,q.children_d=P,ne=0,J=q.parents.length;J>ne;ne++)m[q.parents[ne]].children_d=m[q.parents[ne]].children_d.concat(P);this.trigger("model",{nodes:P,parent:C}),"#"!==C?(this._node_changed(C),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==I&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),g.call(this,!0)},_append_json_data:function(u,k,g,x){(u=this.get_node(u)).children=[],u.children_d=[],k.d&&"string"==typeof(k=k.d)&&(k=JSON.parse(k)),R.isArray(k)||(k=[k]);var C=null,N={df:this._model.default_state,dat:k,par:u.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},P=function(q,I){q.data&&(q=q.data);var ft,O,Ae,Wt,B=q.dat,ne=q.par,J=[],K=[],Ce=[],ge=q.df,kt=q.t_id,l=q.t_cnt,ct=q.m,ue=ct[ne],Et=q.sel,xn=function(Oe,Ht,pt){pt=pt?pt.concat():[],Ht&&pt.unshift(Ht);var Ct,er,ot,Mn,ke=Oe.id.toString(),et={id:ke,text:Oe.text||"",icon:Oe.icon===I||Oe.icon,parent:Ht,parents:pt,children:Oe.children||[],children_d:Oe.children_d||[],data:Oe.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(Ct in ge)ge.hasOwnProperty(Ct)&&(et.state[Ct]=ge[Ct]);if(Oe&&Oe.data&&Oe.data.jstree&&Oe.data.jstree.icon&&(et.icon=Oe.data.jstree.icon),Oe&&Oe.data&&(et.data=Oe.data,Oe.data.jstree))for(Ct in Oe.data.jstree)Oe.data.jstree.hasOwnProperty(Ct)&&(et.state[Ct]=Oe.data.jstree[Ct]);if(Oe&&"object"==typeof Oe.state)for(Ct in Oe.state)Oe.state.hasOwnProperty(Ct)&&(et.state[Ct]=Oe.state[Ct]);if(Oe&&"object"==typeof Oe.li_attr)for(Ct in Oe.li_attr)Oe.li_attr.hasOwnProperty(Ct)&&(et.li_attr[Ct]=Oe.li_attr[Ct]);if(et.li_attr.id||(et.li_attr.id=ke),Oe&&"object"==typeof Oe.a_attr)for(Ct in Oe.a_attr)Oe.a_attr.hasOwnProperty(Ct)&&(et.a_attr[Ct]=Oe.a_attr[Ct]);for(Oe&&Oe.children&&!0===Oe.children&&(et.state.loaded=!1,et.children=[],et.children_d=[]),ct[et.id]=et,Ct=0,er=et.children.length;er>Ct;Ct++)ot=xn(ct[et.children[Ct]],et.id,pt),Mn=ct[ot],et.children_d.push(ot),Mn.children_d.length&&(et.children_d=et.children_d.concat(Mn.children_d));return delete Oe.data,delete Oe.children,ct[et.id].original=Oe,et.state.selected&&Ce.push(et.id),et.id},Wn=function(Oe,Ht,pt){pt=pt?pt.concat():[],Ht&&pt.unshift(Ht);var Ct,er,ot,Mn,et,ke=!1;do{ke="j"+kt+"_"+ ++l}while(ct[ke]);for(Ct in et={id:!1,text:"string"==typeof Oe?Oe:"",icon:"object"!=typeof Oe||Oe.icon===I||Oe.icon,parent:Ht,parents:pt,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},ge)ge.hasOwnProperty(Ct)&&(et.state[Ct]=ge[Ct]);if(Oe&&Oe.id&&(et.id=Oe.id.toString()),Oe&&Oe.text&&(et.text=Oe.text),Oe&&Oe.data&&Oe.data.jstree&&Oe.data.jstree.icon&&(et.icon=Oe.data.jstree.icon),Oe&&Oe.data&&(et.data=Oe.data,Oe.data.jstree))for(Ct in Oe.data.jstree)Oe.data.jstree.hasOwnProperty(Ct)&&(et.state[Ct]=Oe.data.jstree[Ct]);if(Oe&&"object"==typeof Oe.state)for(Ct in Oe.state)Oe.state.hasOwnProperty(Ct)&&(et.state[Ct]=Oe.state[Ct]);if(Oe&&"object"==typeof Oe.li_attr)for(Ct in Oe.li_attr)Oe.li_attr.hasOwnProperty(Ct)&&(et.li_attr[Ct]=Oe.li_attr[Ct]);if(et.li_attr.id&&!et.id&&(et.id=et.li_attr.id.toString()),et.id||(et.id=ke),et.li_attr.id||(et.li_attr.id=et.id),Oe&&"object"==typeof Oe.a_attr)for(Ct in Oe.a_attr)Oe.a_attr.hasOwnProperty(Ct)&&(et.a_attr[Ct]=Oe.a_attr[Ct]);if(Oe&&Oe.children&&Oe.children.length){for(Ct=0,er=Oe.children.length;er>Ct;Ct++)ot=Wn(Oe.children[Ct],et.id,pt),Mn=ct[ot],et.children.push(ot),Mn.children_d.length&&(et.children_d=et.children_d.concat(Mn.children_d));et.children_d=et.children_d.concat(et.children)}return Oe&&Oe.children&&!0===Oe.children&&(et.state.loaded=!1,et.children=[],et.children_d=[]),delete Oe.data,delete Oe.children,et.original=Oe,ct[et.id]=et,et.state.selected&&Ce.push(et.id),et.id};if(B.length&&B[0].id!==I&&B[0].parent!==I){for(O=0,Ae=B.length;Ae>O;O++)B[O].children||(B[O].children=[]),ct[B[O].id.toString()]=B[O];for(O=0,Ae=B.length;Ae>O;O++)ct[B[O].parent.toString()].children.push(B[O].id.toString()),ue.children_d.push(B[O].id.toString());for(O=0,Ae=ue.children.length;Ae>O;O++)ft=xn(ct[ue.children[O]],ne,ue.parents.concat()),K.push(ft),ct[ft].children_d.length&&(K=K.concat(ct[ft].children_d));for(O=0,Ae=ue.parents.length;Ae>O;O++)ct[ue.parents[O]].children_d=ct[ue.parents[O]].children_d.concat(K);Wt={cnt:l,mod:ct,sel:Et,par:ne,dpc:K,add:Ce}}else{for(O=0,Ae=B.length;Ae>O;O++)(ft=Wn(B[O],ne,ue.parents.concat()))&&(J.push(ft),K.push(ft),ct[ft].children_d.length&&(K=K.concat(ct[ft].children_d)));for(ue.children=J,ue.children_d=K,O=0,Ae=ue.parents.length;Ae>O;O++)ct[ue.parents[O]].children_d=ct[ue.parents[O]].children_d.concat(K);Wt={cnt:l,mod:ct,sel:Et,par:ne,dpc:K,add:Ce}}return Wt},m=function(q,I){if(this._cnt=q.cnt,this._model.data=q.mod,I){var B,ne,J=q.add,K=q.sel,Ce=this._data.core.selected.slice(),ge=this._model.data;if(K.length!==Ce.length||R.vakata.array_unique(K.concat(Ce)).length!==K.length){for(B=0,ne=K.length;ne>B;B++)-1===R.inArray(K[B],J)&&-1===R.inArray(K[B],Ce)&&(ge[K[B]].state.selected=!1);for(B=0,ne=Ce.length;ne>B;B++)-1===R.inArray(Ce[B],K)&&(ge[Ce[B]].state.selected=!0)}}q.add.length&&(this._data.core.selected=this._data.core.selected.concat(q.add)),this.trigger("model",{nodes:q.dpc,parent:q.par}),"#"!==q.par?(this._node_changed(q.par),this.redraw()):this.redraw(!0),q.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),g.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+P.toString().replace(/return ([^;}]+)[\s;}]+$/,"postMessage($1);}")],{type:"text/javascript"}))),!this._data.core.working||x?(this._data.core.working=!0,(C=new window.Worker(this._wrk)).onmessage=R.proxy(function(q){m.call(this,q.data,!0);try{C.terminate(),C=null}catch{}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),N.par?C.postMessage(N):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([u,k,g,!0])}catch{m.call(this,P(N),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else m.call(this,P(N),!1)},_parse_model_from_html:function(u,k,g){g=g?[].concat(g):[],k&&g.unshift(k);var x,C,m,q,I,N=this._model.data,P={id:!1,text:!1,icon:!0,parent:k,parents:g,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(m in this._model.default_state)this._model.default_state.hasOwnProperty(m)&&(P.state[m]=this._model.default_state[m]);if(q=R.vakata.attributes(u,!0),R.each(q,function(B,ne){return!(ne=R.trim(ne)).length||(P.li_attr[B]=ne,void("id"===B&&(P.id=ne.toString())))}),(q=u.children("a").eq(0)).length&&(q=R.vakata.attributes(q,!0),R.each(q,function(B,ne){(ne=R.trim(ne)).length&&(P.a_attr[B]=ne)})),(q=u.children("a:eq(0)").length?u.children("a:eq(0)").clone():u.clone()).children("ins, i, ul").remove(),q=q.html(),q=R("<div />").html(q),P.text=this.settings.core.force_text?q.text():q.html(),q=u.data(),P.data=q?R.extend(!0,{},q):null,P.state.opened=u.hasClass("jstree-open"),P.state.selected=u.children("a").hasClass("jstree-clicked"),P.state.disabled=u.children("a").hasClass("jstree-disabled"),P.data&&P.data.jstree)for(m in P.data.jstree)P.data.jstree.hasOwnProperty(m)&&(P.state[m]=P.data.jstree[m]);(q=u.children("a").children(".jstree-themeicon")).length&&(P.icon=!q.hasClass("jstree-themeicon-hidden")&&q.attr("rel")),P.state.icon&&(P.icon=P.state.icon),q=u.children("ul").children("li");do{I="j"+this._id+"_"+ ++this._cnt}while(N[I]);return P.id=P.li_attr.id?P.li_attr.id.toString():I,q.length?(q.each(R.proxy(function(B,ne){x=this._parse_model_from_html(R(ne),P.id,g),C=this._model.data[x],P.children.push(x),C.children_d.length&&(P.children_d=P.children_d.concat(C.children_d))},this)),P.children_d=P.children_d.concat(P.children)):u.hasClass("jstree-closed")&&(P.state.loaded=!1),P.li_attr.class&&(P.li_attr.class=P.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),P.a_attr.class&&(P.a_attr.class=P.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),N[P.id]=P,P.state.selected&&this._data.core.selected.push(P.id),P.id},_parse_model_from_flat_json:function(u,k,g){g=g?g.concat():[],k&&g.unshift(k);var P,m,q,I,x=u.id.toString(),C=this._model.data,N=this._model.default_state,B={id:x,text:u.text||"",icon:u.icon===At||u.icon,parent:k,parents:g,children:u.children||[],children_d:u.children_d||[],data:u.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(P in N)N.hasOwnProperty(P)&&(B.state[P]=N[P]);if(u&&u.data&&u.data.jstree&&u.data.jstree.icon&&(B.icon=u.data.jstree.icon),u&&u.data&&(B.data=u.data,u.data.jstree))for(P in u.data.jstree)u.data.jstree.hasOwnProperty(P)&&(B.state[P]=u.data.jstree[P]);if(u&&"object"==typeof u.state)for(P in u.state)u.state.hasOwnProperty(P)&&(B.state[P]=u.state[P]);if(u&&"object"==typeof u.li_attr)for(P in u.li_attr)u.li_attr.hasOwnProperty(P)&&(B.li_attr[P]=u.li_attr[P]);if(B.li_attr.id||(B.li_attr.id=x),u&&"object"==typeof u.a_attr)for(P in u.a_attr)u.a_attr.hasOwnProperty(P)&&(B.a_attr[P]=u.a_attr[P]);for(u&&u.children&&!0===u.children&&(B.state.loaded=!1,B.children=[],B.children_d=[]),C[B.id]=B,P=0,m=B.children.length;m>P;P++)I=C[q=this._parse_model_from_flat_json(C[B.children[P]],B.id,g)],B.children_d.push(q),I.children_d.length&&(B.children_d=B.children_d.concat(I.children_d));return delete u.data,delete u.children,C[B.id].original=u,B.state.selected&&this._data.core.selected.push(B.id),B.id},_parse_model_from_json:function(u,k,g){g=g?g.concat():[],k&&g.unshift(k);var C,N,P,m,B,x=!1,q=this._model.data,I=this._model.default_state;do{x="j"+this._id+"_"+ ++this._cnt}while(q[x]);for(C in B={id:!1,text:"string"==typeof u?u:"",icon:"object"!=typeof u||u.icon===At||u.icon,parent:k,parents:g,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},I)I.hasOwnProperty(C)&&(B.state[C]=I[C]);if(u&&u.id&&(B.id=u.id.toString()),u&&u.text&&(B.text=u.text),u&&u.data&&u.data.jstree&&u.data.jstree.icon&&(B.icon=u.data.jstree.icon),u&&u.data&&(B.data=u.data,u.data.jstree))for(C in u.data.jstree)u.data.jstree.hasOwnProperty(C)&&(B.state[C]=u.data.jstree[C]);if(u&&"object"==typeof u.state)for(C in u.state)u.state.hasOwnProperty(C)&&(B.state[C]=u.state[C]);if(u&&"object"==typeof u.li_attr)for(C in u.li_attr)u.li_attr.hasOwnProperty(C)&&(B.li_attr[C]=u.li_attr[C]);if(B.li_attr.id&&!B.id&&(B.id=B.li_attr.id.toString()),B.id||(B.id=x),B.li_attr.id||(B.li_attr.id=B.id),u&&"object"==typeof u.a_attr)for(C in u.a_attr)u.a_attr.hasOwnProperty(C)&&(B.a_attr[C]=u.a_attr[C]);if(u&&u.children&&u.children.length){for(C=0,N=u.children.length;N>C;C++)m=q[P=this._parse_model_from_json(u.children[C],B.id,g)],B.children.push(P),m.children_d.length&&(B.children_d=B.children_d.concat(m.children_d));B.children_d=B.children_d.concat(B.children)}return u&&u.children&&!0===u.children&&(B.state.loaded=!1,B.children=[],B.children_d=[]),delete u.data,delete u.children,B.original=u,q[B.id]=B,B.state.selected&&this._data.core.selected.push(B.id),B.id},_redraw:function(){var g,x,C,u=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),k=document.createElement("UL"),N=this._data.core.focused;for(x=0,C=u.length;C>x;x++)(g=this.redraw_node(u[x],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&k.appendChild(g);this._model.force_full_redraw&&(k.className=this.get_container_ul()[0].className,this.element.empty().append(k)),null!==N&&((g=this.get_node(N,!0))&&g.length&&g.children(".jstree-anchor")[0]!==document.activeElement?g.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:u})},redraw:function(u){u&&(this._model.force_full_redraw=!0),this._redraw()},redraw_node:function(u,k,g){var x=this.get_node(u),C=!1,N=!1,P=!1,m=!1,q=!1,I=!1,B="",ne=document,J=this._model.data,K=!1,Ce=!1,ge=null;if(!x)return!1;if("#"===x.id)return this.redraw(!0);if(k=k||0===x.children.length,u=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(x.id[0])?"\\3"+x.id[0]+" "+x.id.substr(1).replace(R.jstree.idregex,"\\$&"):x.id.replace(R.jstree.idregex,"\\$&"))):document.getElementById(x.id))u=R(u),g||((C=u.parent().parent()[0])===this.element[0]&&(C=null),N=u.index()),k||!x.children.length||u.children(".jstree-children").length||(k=!0),k||(P=u.children(".jstree-children")[0]),Ce=u.attr("aria-selected"),K=u.children(".jstree-anchor")[0]===document.activeElement,u.remove();else if(k=!0,!g){if(!(null===(C="#"!==x.parent?R("#"+x.parent.replace(R.jstree.idregex,"\\$&"),this.element)[0]:null)||C&&J[x.parent].state.opened))return!1;N=R.inArray(x.id,null===C?J["#"].children:J[x.parent].children)}for(m in u=ln.cloneNode(!0),B="jstree-node ",x.li_attr)if(x.li_attr.hasOwnProperty(m)){if("id"===m)continue;"class"!==m?u.setAttribute(m,x.li_attr[m]):B+=x.li_attr[m]}for(q in Ce&&"false"!==Ce&&u.setAttribute("aria-selected",!0),x.state.loaded&&!x.children.length?B+=" jstree-leaf":(B+=x.state.opened&&x.state.loaded?" jstree-open":" jstree-closed",u.setAttribute("aria-expanded",x.state.opened&&x.state.loaded)),null!==x.parent&&J[x.parent].children[J[x.parent].children.length-1]===x.id&&(B+=" jstree-last"),u.id=x.id,u.className=B,B=(x.state.selected?" jstree-clicked":"")+(x.state.disabled?" jstree-disabled":""),x.a_attr)if(x.a_attr.hasOwnProperty(q)){if("href"===q&&"#"===x.a_attr[q])continue;"class"!==q?u.childNodes[1].setAttribute(q,x.a_attr[q]):B+=" "+x.a_attr[q]}if(B.length&&(u.childNodes[1].className="jstree-anchor "+B),(x.icon&&!0!==x.icon||!1===x.icon)&&(!1===x.icon?u.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===x.icon.indexOf("/")&&-1===x.icon.indexOf(".")?u.childNodes[1].childNodes[0].className+=" "+x.icon+" jstree-themeicon-custom":(u.childNodes[1].childNodes[0].style.backgroundImage="url("+x.icon+")",u.childNodes[1].childNodes[0].style.backgroundPosition="center center",u.childNodes[1].childNodes[0].style.backgroundSize="auto",u.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?u.childNodes[1].appendChild(ne.createTextNode(x.text)):u.childNodes[1].innerHTML+=x.text,k&&x.children.length&&x.state.opened&&x.state.loaded){for((I=ne.createElement("UL")).setAttribute("role","group"),I.className="jstree-children",m=0,q=x.children.length;q>m;m++)I.appendChild(this.redraw_node(x.children[m],k,!0));u.appendChild(I)}if(P&&u.appendChild(P),!g){for(C||(C=this.element[0]),m=0,q=C.childNodes.length;q>m;m++)if(C.childNodes[m]&&C.childNodes[m].className&&-1!==C.childNodes[m].className.indexOf("jstree-children")){ge=C.childNodes[m];break}ge||((ge=ne.createElement("UL")).setAttribute("role","group"),ge.className="jstree-children",C.appendChild(ge)),N<(C=ge).childNodes.length?C.insertBefore(u,C.childNodes[N]):C.appendChild(u),K&&u.childNodes[1].focus()}return x.state.opened&&!x.state.loaded&&(x.state.opened=!1,setTimeout(R.proxy(function(){this.open_node(x.id,!1,0)},this),0)),u},open_node:function(u,k,g){var x,C,N,P;if(R.isArray(u)){for(x=0,C=(u=u.slice()).length;C>x;x++)this.open_node(u[x],k,g);return!0}if(!(u=this.get_node(u))||"#"===u.id)return!1;if(g=g===At?this.settings.core.animation:g,!this.is_closed(u))return k&&k.call(this,u,!1),!1;if(this.is_loaded(u))N=this.get_node(u,!0),P=this,N.length&&(u.children.length&&!this._firstChild(N.children(".jstree-children")[0])&&(u.state.opened=!0,this.redraw_node(u,!0),N=this.get_node(u,!0)),g?(this.trigger("before_open",{node:u}),N.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(g,function(){this.style.display="",P.trigger("after_open",{node:u})})):(this.trigger("before_open",{node:u}),N[0].className=N[0].className.replace("jstree-closed","jstree-open"),N[0].setAttribute("aria-expanded",!0))),u.state.opened=!0,k&&k.call(this,u,!0),N.length||this.trigger("before_open",{node:u}),this.trigger("open_node",{node:u}),g&&N.length||this.trigger("after_open",{node:u});else{if(this.is_loading(u))return setTimeout(R.proxy(function(){this.open_node(u,k,g)},this),500);this.load_node(u,function(m,q){return q?this.open_node(m,k,g):!!k&&k.call(this,m,!1)})}},_open_to:function(u){if(!(u=this.get_node(u))||"#"===u.id)return!1;var k,g,x=u.parents;for(k=0,g=x.length;g>k;k+=1)"#"!==k&&this.open_node(x[k],!1,0);return R("#"+u.id.replace(R.jstree.idregex,"\\$&"),this.element)},close_node:function(u,k){var g,x,C,N;if(R.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.close_node(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&!this.is_closed(u)&&(k=k===At?this.settings.core.animation:k,C=this,(N=this.get_node(u,!0)).length&&(k?N.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(k,function(){this.style.display="",N.children(".jstree-children").remove(),C.trigger("after_close",{node:u})}):(N[0].className=N[0].className.replace("jstree-open","jstree-closed"),N.attr("aria-expanded",!1).children(".jstree-children").remove())),u.state.opened=!1,this.trigger("close_node",{node:u}),void(k&&N.length||this.trigger("after_close",{node:u})))},toggle_node:function(u){var k,g;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.toggle_node(u[k]);return!0}return this.is_closed(u)?this.open_node(u):this.is_open(u)?this.close_node(u):void 0},open_all:function(u,k,g){if(u||(u="#"),!(u=this.get_node(u)))return!1;var C,N,P,x="#"===u.id?this.get_container_ul():this.get_node(u,!0);if(!x.length){for(C=0,N=u.children_d.length;N>C;C++)this.is_closed(this._model.data[u.children_d[C]])&&(this._model.data[u.children_d[C]].state.opened=!0);return this.trigger("open_all",{node:u})}g=g||x,P=this,(x=this.is_closed(u)?x.find(".jstree-closed").addBack():x.find(".jstree-closed")).each(function(){P.open_node(this,function(m,q){q&&this.is_parent(m)&&this.open_all(m,k,g)},k||0)}),0===g.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(g)})},close_all:function(u,k){if(u||(u="#"),!(u=this.get_node(u)))return!1;var C,N,g="#"===u.id?this.get_container_ul():this.get_node(u,!0),x=this;if(!g.length){for(C=0,N=u.children_d.length;N>C;C++)this._model.data[u.children_d[C]].state.opened=!1;return this.trigger("close_all",{node:u})}g=this.is_open(u)?g.find(".jstree-open").addBack():g.find(".jstree-open"),R(g.get().reverse()).each(function(){x.close_node(this,k||0)}),this.trigger("close_all",{node:u})},is_disabled:function(u){return(u=this.get_node(u))&&u.state&&u.state.disabled},enable_node:function(u){var k,g;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.enable_node(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(u.state.disabled=!1,this.get_node(u,!0).children(".jstree-anchor").removeClass("jstree-disabled"),void this.trigger("enable_node",{node:u}))},disable_node:function(u){var k,g;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.disable_node(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(u.state.disabled=!0,this.get_node(u,!0).children(".jstree-anchor").addClass("jstree-disabled"),void this.trigger("disable_node",{node:u}))},activate_node:function(u,k){if(this.is_disabled(u))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==At?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(k.metaKey||k.ctrlKey||k.shiftKey)&&(!k.shiftKey||this._data.core.last_clicked&&this.get_parent(u)&&this.get_parent(u)===this._data.core.last_clicked.parent))if(k.shiftKey){var P,m,g=this.get_node(u).id,x=this._data.core.last_clicked.id,C=this.get_node(this._data.core.last_clicked.parent).children,N=!1;for(P=0,m=C.length;m>P;P+=1)C[P]===g&&(N=!N),C[P]===x&&(N=!N),N||C[P]===g||C[P]===x?this.select_node(C[P],!1,!1,k):this.deselect_node(C[P],!1,k)}else this.is_selected(u)?this.deselect_node(u,!1,k):this.select_node(u,!1,!1,k);else!this.settings.core.multiple&&(k.metaKey||k.ctrlKey||k.shiftKey)&&this.is_selected(u)?this.deselect_node(u,!1,k):(this.deselect_all(!0),this.select_node(u,!1,!1,k),this._data.core.last_clicked=this.get_node(u));this.trigger("activate_node",{node:this.get_node(u)})},hover_node:function(u){if(!(u=this.get_node(u,!0))||!u.length||u.children(".jstree-hovered").length)return!1;var k=this.element.find(".jstree-hovered"),g=this.element;k&&k.length&&this.dehover_node(k),u.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(u)}),setTimeout(function(){g.attr("aria-activedescendant",u[0].id),u.attr("aria-selected",!0)},0)},dehover_node:function(u){return!!((u=this.get_node(u,!0))&&u.length&&u.children(".jstree-hovered").length)&&(u.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(u)}))},select_node:function(u,k,g,x){var C,N,P;if(R.isArray(u)){for(N=0,P=(u=u.slice()).length;P>N;N++)this.select_node(u[N],k,g,x);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(C=this.get_node(u,!0),void(u.state.selected||(u.state.selected=!0,this._data.core.selected.push(u.id),g||(C=this._open_to(u)),C&&C.length&&C.children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:u,selected:this._data.core.selected,event:x}),k||this.trigger("changed",{action:"select_node",node:u,selected:this._data.core.selected,event:x}))))},deselect_node:function(u,k,g){var x,C,N;if(R.isArray(u)){for(x=0,C=(u=u.slice()).length;C>x;x++)this.deselect_node(u[x],k,g);return!0}return!(!(u=this.get_node(u))||"#"===u.id)&&(N=this.get_node(u,!0),void(u.state.selected&&(u.state.selected=!1,this._data.core.selected=R.vakata.array_remove_item(this._data.core.selected,u.id),N.length&&N.children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:u,selected:this._data.core.selected,event:g}),k||this.trigger("changed",{action:"deselect_node",node:u,selected:this._data.core.selected,event:g}))))},select_all:function(u){var g,x,k=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),g=0,x=this._data.core.selected.length;x>g;g++)this._model.data[this._data.core.selected[g]]&&(this._model.data[this._data.core.selected[g]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),u||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:k})},deselect_all:function(u){var g,x,k=this._data.core.selected.concat([]);for(g=0,x=this._data.core.selected.length;x>g;g++)this._model.data[this._data.core.selected[g]]&&(this._model.data[this._data.core.selected[g]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked"),this.trigger("deselect_all",{selected:this._data.core.selected,node:k}),u||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:k})},is_selected:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.state.selected},get_selected:function(u){return u?R.map(this._data.core.selected,R.proxy(function(k){return this.get_node(k)},this)):this._data.core.selected.slice()},get_top_selected:function(u){var x,C,N,P,k=this.get_selected(!0),g={};for(x=0,C=k.length;C>x;x++)g[k[x].id]=k[x];for(x=0,C=k.length;C>x;x++)for(N=0,P=k[x].children_d.length;P>N;N++)g[k[x].children_d[N]]&&delete g[k[x].children_d[N]];for(x in k=[],g)g.hasOwnProperty(x)&&k.push(x);return u?R.map(k,R.proxy(function(m){return this.get_node(m)},this)):k},get_bottom_selected:function(u){var x,C,k=this.get_selected(!0),g=[];for(x=0,C=k.length;C>x;x++)k[x].children.length||g.push(k[x].id);return u?R.map(g,R.proxy(function(N){return this.get_node(N)},this)):g},get_state:function(){var k,u={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(k in this._model.data)this._model.data.hasOwnProperty(k)&&"#"!==k&&(this._model.data[k].state.opened&&u.core.open.push(k),this._model.data[k].state.selected&&u.core.selected.push(k));return u},set_state:function(u,k){if(u){if(u.core){var g,C,N;if(u.core.open)return R.isArray(u.core.open)?(g=!0,C=this,R.each(u.core.open.concat([]),function(P,m){C.get_node(m)&&(C.is_loaded(m)?(C.is_closed(m)&&C.open_node(m,!1,0),u&&u.core&&u.core.open&&R.vakata.array_remove_item(u.core.open,m)):(C.is_loading(m)||C.open_node(m,R.proxy(function(q,I){!I&&u&&u.core&&u.core.open&&R.vakata.array_remove_item(u.core.open,q.id),this.set_state(u,k)},C),0),g=!1))}),g&&(delete u.core.open,this.set_state(u,k)),!1):(delete u.core.open,this.set_state(u,k),!1);if(u.core.scroll)return u.core.scroll&&u.core.scroll.left!==At&&this.element.scrollLeft(u.core.scroll.left),u.core.scroll&&u.core.scroll.top!==At&&this.element.scrollTop(u.core.scroll.top),delete u.core.scroll,this.set_state(u,k),!1;if(u.core.selected)return N=this,this.deselect_all(),R.each(u.core.selected,function(P,m){N.select_node(m)}),delete u.core.selected,this.set_state(u,k),!1;if(R.isEmptyObject(u.core))return delete u.core,this.set_state(u,k),!1}return!R.isEmptyObject(u)||(u=null,k&&k.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(u,k){this._data.core.state=!0===k?{}:this.get_state(),k&&R.isFunction(k)&&(this._data.core.state=k.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var g=this.get_container_ul()[0].className;u||this.element.html("<ul class='"+g+"'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.load_node("#",function(x,C){C&&(this.get_container_ul()[0].className=g,this.set_state(R.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(u){if(!(u=this.get_node(u))||"#"===u.id)return!1;var k=[],g=[];this._data.core.selected.concat([]),g.push(u.id),!0===u.state.opened&&k.push(u.id),this.get_node(u,!0).find(".jstree-open").each(function(){k.push(this.id)}),this._load_nodes(g,R.proxy(function(C){this.open_node(k,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:u,nodes:C})},this))},set_id:function(u,k){if(!(u=this.get_node(u))||"#"===u.id)return!1;var g,x,C=this._model.data;for(k=k.toString(),C[u.parent].children[R.inArray(u.id,C[u.parent].children)]=k,g=0,x=u.parents.length;x>g;g++)C[u.parents[g]].children_d[R.inArray(u.id,C[u.parents[g]].children_d)]=k;for(g=0,x=u.children.length;x>g;g++)C[u.children[g]].parent=k;for(g=0,x=u.children_d.length;x>g;g++)C[u.children_d[g]].parents[R.inArray(u.id,C[u.children_d[g]].parents)]=k;return-1!==(g=R.inArray(u.id,this._data.core.selected))&&(this._data.core.selected[g]=k),(g=this.get_node(u.id,!0))&&g.attr("id",k),delete C[u.id],u.id=k,C[k]=u,!0},get_text:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.text},set_text:function(u,k){var g,x;if(R.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.set_text(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(u.text=k,this.get_node(u,!0).length&&this.redraw_node(u.id),this.trigger("set_text",{obj:u,text:k}),0))},get_json:function(u,k,g){if(!(u=this.get_node(u||"#")))return!1;k&&k.flat&&!g&&(g=[]);var C,N,x={id:u.id,text:u.text,icon:this.get_icon(u),li_attr:R.extend(!0,{},u.li_attr),a_attr:R.extend(!0,{},u.a_attr),state:{},data:(!k||!k.no_data)&&R.extend(!0,{},u.data)};if(k&&k.flat?x.parent=u.parent:x.children=[],!k||!k.no_state)for(C in u.state)u.state.hasOwnProperty(C)&&(x.state[C]=u.state[C]);if(k&&k.no_id&&(delete x.id,x.li_attr&&x.li_attr.id&&delete x.li_attr.id),k&&k.flat&&"#"!==u.id&&g.push(x),!k||!k.no_children)for(C=0,N=u.children.length;N>C;C++)k&&k.flat?this.get_json(u.children[C],k,g):x.children.push(this.get_json(u.children[C],k));return k&&k.flat?g:"#"===u.id?x.children:x},create_node:function(u,k,g,x,C){if(null===u&&(u="#"),!(u=this.get_node(u)))return!1;if(!(g=g===At?"last":g).toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(u))return this.load_node(u,function(){this.create_node(u,k,g,x,!0)});var N,P,m,q;switch(k||(k={text:this.get_string("New node")}),k.text===At&&(k.text=this.get_string("New node")),"#"===u.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":N=this.get_node(u.parent),g=R.inArray(u.id,N.children),u=N;break;case"after":N=this.get_node(u.parent),g=R.inArray(u.id,N.children)+1,u=N;break;case"inside":case"first":g=0;break;case"last":g=u.children.length;break;default:g||(g=0)}if(g>u.children.length&&(g=u.children.length),k.id||(k.id=!0),!this.check("create_node",k,u,g))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===k.id&&delete k.id,!(k=this._parse_model_from_json(k,u.id,u.parents.concat())))return!1;for(N=this.get_node(k),(P=[]).push(k),P=P.concat(N.children_d),this.trigger("model",{nodes:P,parent:u.id}),u.children_d=u.children_d.concat(P),m=0,q=u.parents.length;q>m;m++)this._model.data[u.parents[m]].children_d=this._model.data[u.parents[m]].children_d.concat(P);for(k=N,N=[],m=0,q=u.children.length;q>m;m++)N[m>=g?m+1:m]=u.children[m];return N[g]=k.id,u.children=N,this.redraw_node(u,!0),x&&x.call(this,this.get_node(k)),this.trigger("create_node",{node:this.get_node(k),parent:u.id,position:g}),k.id},rename_node:function(u,k){var g,x,C;if(R.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.rename_node(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(C=u.text,this.check("rename_node",u,this.get_parent(u),k)?(this.set_text(u,k),this.trigger("rename_node",{node:u,text:k,old:C}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(u){var k,g,x,C,N,P,m,q,I,B;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.delete_node(u[k]);return!0}if(!(u=this.get_node(u))||"#"===u.id)return!1;if(x=this.get_node(u.parent),C=R.inArray(u.id,x.children),B=!1,!this.check("delete_node",u,x,C))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==C&&(x.children=R.vakata.array_remove(x.children,C)),(N=u.children_d.concat([])).push(u.id),q=0,I=N.length;I>q;q++){for(P=0,m=u.parents.length;m>P;P++)-1!==(C=R.inArray(N[q],this._model.data[u.parents[P]].children_d))&&(this._model.data[u.parents[P]].children_d=R.vakata.array_remove(this._model.data[u.parents[P]].children_d,C));this._model.data[N[q]].state.selected&&(B=!0,-1!==(C=R.inArray(N[q],this._data.core.selected))&&(this._data.core.selected=R.vakata.array_remove(this._data.core.selected,C)))}for(this.trigger("delete_node",{node:u,parent:x.id}),B&&this.trigger("changed",{action:"delete_node",node:u,selected:this._data.core.selected,parent:x.id}),q=0,I=N.length;I>q;q++)delete this._model.data[N[q]];return this.redraw_node(x,!0),!0},check:function(u,k,g,x,C){k=k&&k.id?k:this.get_node(k),g=g&&g.id?g:this.get_node(g);var N=u.match(/^move_node|copy_node|create_node$/i)?g:k,P=this.settings.core.check_callback;return"move_node"!==u&&"copy_node"!==u||C&&C.is_multi||k.id!==g.id&&R.inArray(k.id,g.children)!==x&&-1===R.inArray(g.id,k.children_d)?(N&&N.data&&(N=N.data),N&&N.functions&&(!1===N.functions[u]||!0===N.functions[u])?(!1===N.functions[u]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+u,data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})}),N.functions[u]):!(!1===P||R.isFunction(P)&&!1===P.call(this,u,k,g,x,C)||P&&!1===P[u])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+u,data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:u,pos:x,obj:!(!k||!k.id)&&k.id,par:!(!g||!g.id)&&g.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(u,k,g,x,C){var N,P,m,q,I,B,ne,J,K,Ce,ge,kt,l,ct;if(k=this.get_node(k),g=g===At?0:g,!k)return!1;if(!g.toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(k))return this.load_node(k,function(){this.move_node(u,k,g,x,!0)});if(R.isArray(u)){for(N=0,P=(u=u.reverse().slice()).length;P>N;N++)this.move_node(u[N],k,g,x,C);return!0}if(!(u=u&&u.id?u:this.get_node(u))||"#"===u.id)return!1;if(m=(u.parent||"#").toString(),I=g.toString().match(/^(before|after)$/)&&"#"!==k.id?this.get_node(k.parent):k,ne=!(B=u.instance?u.instance:this._model.data[u.id]?this:R.jstree.reference(u.id))||!B._id||this._id!==B._id,q=B&&B._id&&m&&B._model.data[m]&&B._model.data[m].children?R.inArray(u.id,B._model.data[m].children):-1,ne)return!!this.copy_node(u,k,g,x,C)&&(B&&B.delete_node(u),!0);switch("#"===I.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":g=R.inArray(k.id,I.children);break;case"after":g=R.inArray(k.id,I.children)+1;break;case"inside":case"first":g=0;break;case"last":g=I.children.length;break;default:g||(g=0)}if(g>I.children.length&&(g=I.children.length),!this.check("move_node",u,I,g,{core:!0,is_multi:B&&B._id&&B._id!==this._id,is_foreign:!B||!B._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(u.parent===I.id){for(J=I.children.concat(),-1!==(K=R.inArray(u.id,J))&&(J=R.vakata.array_remove(J,K),g>K&&g--),K=[],Ce=0,ge=J.length;ge>Ce;Ce++)K[Ce>=g?Ce+1:Ce]=J[Ce];K[g]=u.id,I.children=K,this._node_changed(I.id),this.redraw("#"===I.id)}else{for((K=u.children_d.concat()).push(u.id),Ce=0,ge=u.parents.length;ge>Ce;Ce++){for(J=[],kt=0,l=(ct=B._model.data[u.parents[Ce]].children_d).length;l>kt;kt++)-1===R.inArray(ct[kt],K)&&J.push(ct[kt]);B._model.data[u.parents[Ce]].children_d=J}for(B._model.data[m].children=R.vakata.array_remove_item(B._model.data[m].children,u.id),Ce=0,ge=I.parents.length;ge>Ce;Ce++)this._model.data[I.parents[Ce]].children_d=this._model.data[I.parents[Ce]].children_d.concat(K);for(J=[],Ce=0,ge=I.children.length;ge>Ce;Ce++)J[Ce>=g?Ce+1:Ce]=I.children[Ce];for(J[g]=u.id,I.children=J,I.children_d.push(u.id),I.children_d=I.children_d.concat(u.children_d),u.parent=I.id,(K=I.parents.concat()).unshift(I.id),ct=u.parents.length,u.parents=K,K=K.concat(),Ce=0,ge=u.children_d.length;ge>Ce;Ce++)this._model.data[u.children_d[Ce]].parents=this._model.data[u.children_d[Ce]].parents.slice(0,-1*ct),Array.prototype.push.apply(this._model.data[u.children_d[Ce]].parents,K);this._node_changed(m),this._node_changed(I.id),this.redraw("#"===m||"#"===I.id)}return x&&x.call(this,u,I,g),this.trigger("move_node",{node:u,parent:I.id,position:g,old_parent:m,old_position:q,is_multi:B&&B._id&&B._id!==this._id,is_foreign:!B||!B._id,old_instance:B,new_instance:this}),!0},copy_node:function(u,k,g,x,C){var N,P,m,q,I,B,ne,J,K,Ce;if(k=this.get_node(k),g=g===At?0:g,!k)return!1;if(!g.toString().match(/^(before|after)$/)&&!C&&!this.is_loaded(k))return this.load_node(k,function(){this.copy_node(u,k,g,x,!0)});if(R.isArray(u)){for(N=0,P=(u=u.reverse().slice()).length;P>N;N++)this.copy_node(u[N],k,g,x,C);return!0}if(!(u=u&&u.id?u:this.get_node(u))||"#"===u.id)return!1;switch(J=(u.parent||"#").toString(),K=g.toString().match(/^(before|after)$/)&&"#"!==k.id?this.get_node(k.parent):k,Ce=u.instance?u.instance:this._model.data[u.id]?this:R.jstree.reference(u.id),"#"===K.id&&("before"===g&&(g="first"),"after"===g&&(g="last")),g){case"before":g=R.inArray(k.id,K.children);break;case"after":g=R.inArray(k.id,K.children)+1;break;case"inside":case"first":g=0;break;case"last":g=K.children.length;break;default:g||(g=0)}if(g>K.children.length&&(g=K.children.length),!this.check("copy_node",u,K,g,{core:!0,is_multi:Ce&&Ce._id&&Ce._id!==this._id,is_foreign:!Ce||!Ce._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!((ne=Ce?Ce.get_json(u,{no_id:!0,no_data:!0,no_state:!0}):u)&&(!0===ne.id&&delete ne.id,ne=this._parse_model_from_json(ne,K.id,K.parents.concat()))))return!1;for(q=this.get_node(ne),u&&u.state&&!1===u.state.loaded&&(q.state.loaded=!1),(m=[]).push(ne),m=m.concat(q.children_d),this.trigger("model",{nodes:m,parent:K.id}),I=0,B=K.parents.length;B>I;I++)this._model.data[K.parents[I]].children_d=this._model.data[K.parents[I]].children_d.concat(m);for(m=[],I=0,B=K.children.length;B>I;I++)m[I>=g?I+1:I]=K.children[I];return m[g]=q.id,K.children=m,K.children_d.push(q.id),K.children_d=K.children_d.concat(q.children_d),this._node_changed(K.id),this.redraw("#"===K.id),x&&x.call(this,q,K,g),this.trigger("copy_node",{node:q,original:u,parent:K.id,position:g,old_parent:J,old_position:Ce&&Ce._id&&J&&Ce._model.data[J]&&Ce._model.data[J].children?R.inArray(u.id,Ce._model.data[J].children):-1,is_multi:Ce&&Ce._id&&Ce._id!==this._id,is_foreign:!Ce||!Ce._id,old_instance:Ce,new_instance:this}),q.id},cut:function(u){if(u||(u=this._data.core.selected.concat()),R.isArray(u)||(u=[u]),!u.length)return!1;var g,x,C,k=[];for(x=0,C=u.length;C>x;x++)(g=this.get_node(u[x]))&&g.id&&"#"!==g.id&&k.push(g);return!!k.length&&(gn=k,mn=this,nn="move_node",void this.trigger("cut",{node:u}))},copy:function(u){if(u||(u=this._data.core.selected.concat()),R.isArray(u)||(u=[u]),!u.length)return!1;var g,x,C,k=[];for(x=0,C=u.length;C>x;x++)(g=this.get_node(u[x]))&&g.id&&"#"!==g.id&&k.push(g);return!!k.length&&(gn=k,mn=this,nn="copy_node",void this.trigger("copy",{node:u}))},get_buffer:function(){return{mode:nn,node:gn,inst:mn}},can_paste:function(){return!1!==nn&&!1!==gn},paste:function(u,k){return!!((u=this.get_node(u))&&nn&&nn.match(/^(copy_node|move_node)$/)&&gn)&&(this[nn](gn,u,k)&&this.trigger("paste",{parent:u.id,node:gn,mode:nn}),gn=!1,nn=!1,void(mn=!1))},edit:function(u,k){if(!(u=this.get_node(u)))return!1;if(!1===this.settings.core.check_callback)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;k="string"==typeof k?k:u.text,this.set_text(u,""),u=this._open_to(u);var g=this._data.core.rtl,x=this.element.width(),C=u.children(".jstree-anchor"),N=R("<span>"),P=k,m=R("<div />",{css:{position:"absolute",top:"-200px",left:g?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),q=R("<input />",{value:P,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:R.proxy(function(){var ne=N.children(".jstree-rename-input").val();""===ne&&(ne=P),m.remove(),N.replaceWith(C),N.remove(),this.set_text(u,P),!1===this.rename_node(u,R("<div></div>").text(ne)[this.settings.core.force_text?"text":"html"]())&&this.set_text(u,P)},this),keydown:function(B){var ne=B.which;27===ne&&(this.value=P),(27===ne||13===ne||37===ne||38===ne||39===ne||40===ne||32===ne)&&B.stopImmediatePropagation(),(27===ne||13===ne)&&(B.preventDefault(),this.blur())},click:function(B){B.stopImmediatePropagation()},mousedown:function(B){B.stopImmediatePropagation()},keyup:function(B){q.width(Math.min(m.text("pW"+this.value).width(),x))},keypress:function(B){return 13!==B.which&&void 0}}),I={fontFamily:C.css("fontFamily")||"",fontSize:C.css("fontSize")||"",fontWeight:C.css("fontWeight")||"",fontStyle:C.css("fontStyle")||"",fontStretch:C.css("fontStretch")||"",fontVariant:C.css("fontVariant")||"",letterSpacing:C.css("letterSpacing")||"",wordSpacing:C.css("wordSpacing")||""};N.attr("class",C.attr("class")).append(C.contents().clone()).append(q),C.replaceWith(N),m.css(I),q.css(I).width(Math.min(m.text("pW"+q[0].value).width(),x))[0].select()},set_theme:function(u,k){if(!u)return!1;if(!0===k){var g=this.settings.core.themes.dir;g||(g=R.jstree.path+"/themes"),k=g+"/"+u+"/style.css"}k&&-1===R.inArray(k,st)&&(R("head").append('<link rel="stylesheet" href="'+k+'" type="text/css" />'),st.push(k)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=u,this.element.addClass("jstree-"+u),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+u+"-responsive"),this.trigger("set_theme",{theme:u})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(u){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=u,u&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(u,k){var g,x,C,N;if(R.isArray(u)){for(g=0,x=(u=u.slice()).length;x>g;g++)this.set_icon(u[g],k);return!0}return!(!(u=this.get_node(u))||"#"===u.id||(N=u.icon,u.icon=k,C=this.get_node(u,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===k?this.hide_icon(u):!0===k?C.removeClass("jstree-themeicon-custom "+N).css("background","").removeAttr("rel"):-1===k.indexOf("/")&&-1===k.indexOf(".")?(C.removeClass(N).css("background",""),C.addClass(k+" jstree-themeicon-custom").attr("rel",k)):(C.removeClass(N).css("background",""),C.addClass("jstree-themeicon-custom").css("background","url('"+k+"') center center no-repeat").attr("rel",k)),0))},get_icon:function(u){return!(!(u=this.get_node(u))||"#"===u.id)&&u.icon},hide_icon:function(u){var k,g;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.hide_icon(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u||(u.icon=!1,this.get_node(u,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(u){var k,g,x;if(R.isArray(u)){for(k=0,g=(u=u.slice()).length;g>k;k++)this.show_icon(u[k]);return!0}return!(!(u=this.get_node(u))||"#"===u||(x=this.get_node(u,!0),u.icon=!x.length||x.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),u.icon||(u.icon=!0),x.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},R.vakata={},R.vakata.attributes=function(u,k){u=R(u)[0];var g=k?{}:[];return u&&u.attributes&&R.each(u.attributes,function(x,C){-1===R.inArray(C.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==C.value&&""!==R.trim(C.value)&&(k?g[C.name]=C.value:g.push(C.name))}),g},R.vakata.array_unique=function(u){var g,x,C,k=[];for(g=0,C=u.length;C>g;g++){for(x=0;g>=x&&u[g]!==u[x];x++);x===g&&k.push(u[g])}return k},R.vakata.array_remove=function(u,k,g){var x=u.slice((g||k)+1||u.length);return u.length=0>k?u.length+k:k,u.push.apply(u,x),u},R.vakata.array_remove_item=function(u,k){var g=R.inArray(k,u);return-1!==g?R.vakata.array_remove(u,g):u};var W=document.createElement("I");W.className="jstree-icon jstree-checkbox",R.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},R.jstree.plugins.checkbox=function(u,k){this.bind=function(){k.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",R.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",R.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",R.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(R.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",R.proxy(function(g,x){var m,q,C=this._model.data,P=x.nodes;for(m=0,q=P.length;q>m;m++)C[P[m]].state.checked=C[P[m]].original&&C[P[m]].original.state&&C[P[m]].original.state.checked,C[P[m]].state.checked&&this._data.checkbox.selected.push(P[m])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",R.proxy(function(g,x){var q,I,B,ne,J,K,C=this._model.data,N=C[x.parent],P=x.nodes,m=[],Ce=this.settings.checkbox.cascade,ge=this.settings.checkbox.tie_selection;if(-1!==Ce.indexOf("down"))if(N.state[ge?"selected":"checked"]){for(I=0,B=P.length;B>I;I++)C[P[I]].state[ge?"selected":"checked"]=!0;this._data[ge?"core":"checkbox"].selected=this._data[ge?"core":"checkbox"].selected.concat(P)}else for(I=0,B=P.length;B>I;I++)if(C[P[I]].state[ge?"selected":"checked"]){for(ne=0,J=C[P[I]].children_d.length;J>ne;ne++)C[C[P[I]].children_d[ne]].state[ge?"selected":"checked"]=!0;this._data[ge?"core":"checkbox"].selected=this._data[ge?"core":"checkbox"].selected.concat(C[P[I]].children_d)}if(-1!==Ce.indexOf("up")){for(I=0,B=N.children_d.length;B>I;I++)C[N.children_d[I]].children.length||m.push(C[N.children_d[I]].parent);for(ne=0,J=(m=R.vakata.array_unique(m)).length;J>ne;ne++)for(N=C[m[ne]];N&&"#"!==N.id;){for(q=0,I=0,B=N.children.length;B>I;I++)q+=C[N.children[I]].state[ge?"selected":"checked"];if(q!==B)break;N.state[ge?"selected":"checked"]=!0,this._data[ge?"core":"checkbox"].selected.push(N.id),(K=this.get_node(N,!0))&&K.length&&K.children(".jstree-anchor").addClass(ge?"jstree-clicked":"jstree-checked"),N=this.get_node(N.parent)}}this._data[ge?"core":"checkbox"].selected=R.vakata.array_unique(this._data[ge?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",R.proxy(function(g,x){var q,I,B,ne,C=x.node,N=this._model.data,P=this.get_node(C.parent),m=this.get_node(C,!0),J=this.settings.checkbox.cascade,K=this.settings.checkbox.tie_selection;if(-1!==J.indexOf("down"))for(this._data[K?"core":"checkbox"].selected=R.vakata.array_unique(this._data[K?"core":"checkbox"].selected.concat(C.children_d)),q=0,I=C.children_d.length;I>q;q++)(ne=N[C.children_d[q]]).state[K?"selected":"checked"]=!0,ne&&ne.original&&ne.original.state&&ne.original.state.undetermined&&(ne.original.state.undetermined=!1);if(-1!==J.indexOf("up"))for(;P&&"#"!==P.id;){for(B=0,q=0,I=P.children.length;I>q;q++)B+=N[P.children[q]].state[K?"selected":"checked"];if(B!==I)break;P.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(P.id),(ne=this.get_node(P,!0))&&ne.length&&ne.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"),P=this.get_node(P.parent)}-1!==J.indexOf("down")&&m.length&&m.find(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked")},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",R.proxy(function(g,x){var P,m,q,C=this.get_node("#"),N=this._model.data;for(P=0,m=C.children_d.length;m>P;P++)(q=N[C.children_d[P]])&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",R.proxy(function(g,x){var P,m,q,C=x.node,N=this.get_node(C,!0),I=this.settings.checkbox.cascade,B=this.settings.checkbox.tie_selection;if(C&&C.original&&C.original.state&&C.original.state.undetermined&&(C.original.state.undetermined=!1),-1!==I.indexOf("down"))for(P=0,m=C.children_d.length;m>P;P++)(q=this._model.data[C.children_d[P]]).state[B?"selected":"checked"]=!1,q&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1);if(-1!==I.indexOf("up"))for(P=0,m=C.parents.length;m>P;P++)(q=this._model.data[C.parents[P]]).state[B?"selected":"checked"]=!1,q&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1),(q=this.get_node(C.parents[P],!0))&&q.length&&q.children(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked");for(q=[],P=0,m=this._data[B?"core":"checkbox"].selected.length;m>P;P++)-1!==I.indexOf("down")&&-1!==R.inArray(this._data[B?"core":"checkbox"].selected[P],C.children_d)||-1!==I.indexOf("up")&&-1!==R.inArray(this._data[B?"core":"checkbox"].selected[P],C.parents)||q.push(this._data[B?"core":"checkbox"].selected[P]);this._data[B?"core":"checkbox"].selected=R.vakata.array_unique(q),-1!==I.indexOf("down")&&N.length&&N.find(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked")},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",R.proxy(function(g,x){for(var P,m,q,I,C=this.get_node(x.parent),N=this._model.data,B=this.settings.checkbox.tie_selection;C&&"#"!==C.id;){for(q=0,P=0,m=C.children.length;m>P;P++)q+=N[C.children[P]].state[B?"selected":"checked"];if(q!==m)break;C.state[B?"selected":"checked"]=!0,this._data[B?"core":"checkbox"].selected.push(C.id),(I=this.get_node(C,!0))&&I.length&&I.children(".jstree-anchor").addClass(B?"jstree-clicked":"jstree-checked"),C=this.get_node(C.parent)}},this)).on("move_node.jstree",R.proxy(function(g,x){var q,I,B,ne,J,C=x.is_multi,N=x.old_parent,P=this.get_node(x.parent),m=this._model.data,K=this.settings.checkbox.tie_selection;if(!C)for(q=this.get_node(N);q&&"#"!==q.id;){for(I=0,B=0,ne=q.children.length;ne>B;B++)I+=m[q.children[B]].state[K?"selected":"checked"];if(I!==ne)break;q.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(q.id),(J=this.get_node(q,!0))&&J.length&&J.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"),q=this.get_node(q.parent)}for(q=P;q&&"#"!==q.id;){for(I=0,B=0,ne=q.children.length;ne>B;B++)I+=m[q.children[B]].state[K?"selected":"checked"];if(I===ne)q.state[K?"selected":"checked"]||(q.state[K?"selected":"checked"]=!0,this._data[K?"core":"checkbox"].selected.push(q.id),(J=this.get_node(q,!0))&&J.length&&J.children(".jstree-anchor").addClass(K?"jstree-clicked":"jstree-checked"));else{if(!q.state[K?"selected":"checked"])break;q.state[K?"selected":"checked"]=!1,this._data[K?"core":"checkbox"].selected=R.vakata.array_remove_item(this._data[K?"core":"checkbox"].selected,q.id),(J=this.get_node(q,!0))&&J.length&&J.children(".jstree-anchor").removeClass(K?"jstree-clicked":"jstree-checked")}q=this.get_node(q.parent)}},this))},this._undetermined=function(){var g,x,C=this._model.data,N=this.settings.checkbox.tie_selection,P=this._data[N?"core":"checkbox"].selected,m=[],q=this;for(g=0,x=P.length;x>g;g++)C[P[g]]&&C[P[g]].parents&&(m=m.concat(C[P[g]].parents));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var B,I=q.get_node(this);if(I.state.loaded)for(g=0,x=I.children_d.length;x>g;g++)!(B=C[I.children_d[g]]).state.loaded&&B.original&&B.original.state&&B.original.state.undetermined&&!0===B.original.state.undetermined&&(m.push(B.id),m=m.concat(B.parents));else I.original&&I.original.state&&I.original.state.undetermined&&!0===I.original.state.undetermined&&(m.push(I.id),m=m.concat(I.parents))}),m=R.vakata.array_unique(m),m=R.vakata.array_remove_item(m,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),g=0,x=m.length;x>g;g++)C[m[g]].state[N?"selected":"checked"]||(P=this.get_node(m[g],!0))&&P.length&&P.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")},this.redraw_node=function(g,x,C){if(g=k.redraw_node.call(this,g,x,C)){var N,P,m=null;for(N=0,P=g.childNodes.length;P>N;N++)if(g.childNodes[N]&&g.childNodes[N].className&&-1!==g.childNodes[N].className.indexOf("jstree-anchor")){m=g.childNodes[N];break}m&&(!this.settings.checkbox.tie_selection&&this._model.data[g.id].state.checked&&(m.className+=" jstree-checked"),m.insertBefore(W.cloneNode(!1),m.childNodes[0]))}return C||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(R.proxy(this._undetermined,this),50)),g},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(g){g=this.get_node(g);var C,N,x=this.settings.checkbox.cascade,P=this.settings.checkbox.tie_selection,m=this._data[P?"core":"checkbox"].selected,q=this._model.data;if(!g||!0===g.state[P?"selected":"checked"]||-1===x.indexOf("undetermined")||-1===x.indexOf("down")&&-1===x.indexOf("up"))return!1;if(!g.state.loaded&&!0===g.original.state.undetermined)return!0;for(C=0,N=g.children_d.length;N>C;C++)if(-1!==R.inArray(g.children_d[C],m)||!q[g.children_d[C]].state.loaded&&q[g.children_d[C]].original.state.undetermined)return!0;return!1},this.activate_node=function(g,x){return this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||R(x.target).hasClass("jstree-checkbox"))&&(x.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!R(x.target).hasClass("jstree-checkbox")?k.activate_node.call(this,g,x):(this.is_checked(g)?this.uncheck_node(g,x):this.check_node(g,x),void this.trigger("activate_node",{node:this.get_node(g)}))},this.check_node=function(g,x){if(this.settings.checkbox.tie_selection)return this.select_node(g,!1,!0,x);var C,N,P;if(R.isArray(g)){for(N=0,P=(g=g.slice()).length;P>N;N++)this.check_node(g[N],x);return!0}return!(!(g=this.get_node(g))||"#"===g.id)&&(C=this.get_node(g,!0),void(g.state.checked||(g.state.checked=!0,this._data.checkbox.selected.push(g.id),C&&C.length&&C.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:g,selected:this._data.checkbox.selected,event:x}))))},this.uncheck_node=function(g,x){if(this.settings.checkbox.tie_selection)return this.deselect_node(g,!1,x);var C,N,P;if(R.isArray(g)){for(C=0,N=(g=g.slice()).length;N>C;C++)this.uncheck_node(g[C],x);return!0}return!(!(g=this.get_node(g))||"#"===g.id)&&(P=this.get_node(g,!0),void(g.state.checked&&(g.state.checked=!1,this._data.checkbox.selected=R.vakata.array_remove_item(this._data.checkbox.selected,g.id),P.length&&P.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:g,selected:this._data.checkbox.selected,event:x}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var x,C;for(this._data.checkbox.selected.concat([]),this._data.checkbox.selected=this._model.data["#"].children_d.concat(),x=0,C=this._data.checkbox.selected.length;C>x;x++)this._model.data[this._data.checkbox.selected[x]]&&(this._model.data[this._data.checkbox.selected[x]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var x,C,g=this._data.checkbox.selected.concat([]);for(x=0,C=this._data.checkbox.selected.length;C>x;x++)this._model.data[this._data.checkbox.selected[x]]&&(this._model.data[this._data.checkbox.selected[x]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:g})},this.is_checked=function(g){return this.settings.checkbox.tie_selection?this.is_selected(g):!(!(g=this.get_node(g))||"#"===g.id)&&g.state.checked},this.get_checked=function(g){return this.settings.checkbox.tie_selection?this.get_selected(g):g?R.map(this._data.checkbox.selected,R.proxy(function(x){return this.get_node(x)},this)):this._data.checkbox.selected},this.get_top_checked=function(g){if(this.settings.checkbox.tie_selection)return this.get_top_selected(g);var N,P,m,q,x=this.get_checked(!0),C={};for(N=0,P=x.length;P>N;N++)C[x[N].id]=x[N];for(N=0,P=x.length;P>N;N++)for(m=0,q=x[N].children_d.length;q>m;m++)C[x[N].children_d[m]]&&delete C[x[N].children_d[m]];for(N in x=[],C)C.hasOwnProperty(N)&&x.push(N);return g?R.map(x,R.proxy(function(I){return this.get_node(I)},this)):x},this.get_bottom_checked=function(g){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(g);var N,P,x=this.get_checked(!0),C=[];for(N=0,P=x.length;P>N;N++)x[N].children.length||C.push(x[N].id);return g?R.map(C,R.proxy(function(m){return this.get_node(m)},this)):C}},R.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(u,k){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.create_node(C,{},"last",function(N){setTimeout(function(){x.edit(N)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.edit(C)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.delete_node(x.is_selected(C)?x.get_selected():C)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.cut(x.is_selected(C)?x.get_selected():C)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.copy(x.is_selected(C)?x.get_selected():C)}},paste:{separator_before:!1,icon:!1,_disabled:function(g){return!R.jstree.reference(g.reference).can_paste()},separator_after:!1,label:"Paste",action:function(g){var x=R.jstree.reference(g.reference),C=x.get_node(g.reference);x.paste(C)}}}}}}},R.jstree.plugins.contextmenu=function(u,k){this.bind=function(){k.bind.call(this);var g=0;this.element.on("contextmenu.jstree",".jstree-anchor",R.proxy(function(x){x.preventDefault(),g=x.ctrlKey?x.timeStamp:0,this.is_loading(x.currentTarget)||this.show_contextmenu(x.currentTarget,x.pageX,x.pageY,x)},this)).on("click.jstree",".jstree-anchor",R.proxy(function(x){this._data.contextmenu.visible&&(!g||x.timeStamp-g>250)&&R.vakata.context.hide()},this)),R(document).on("context_hide.vakata.jstree",R.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&R.vakata.context.hide(),k.teardown.call(this)},this.show_contextmenu=function(g,x,C,N){if(!(g=this.get_node(g))||"#"===g.id)return!1;var P=this.settings.contextmenu,q=this.get_node(g,!0).children(".jstree-anchor"),I=!1,B=!1;(P.show_at_node||x===At||C===At)&&(I=q.offset(),x=I.left,C=I.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(g)&&this.activate_node(g,N),R.isFunction(B=P.items)&&(B=B.call(this,g,R.proxy(function(ne){this._show_contextmenu(g,x,C,ne)},this))),R.isPlainObject(B)&&this._show_contextmenu(g,x,C,B)},this._show_contextmenu=function(g,x,C,N){var m=this.get_node(g,!0).children(".jstree-anchor");R(document).one("context_show.vakata.jstree",R.proxy(function(q,I){var B="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";R(I.element).addClass(B)},this)),this._data.contextmenu.visible=!0,R.vakata.context.show(m,{x,y:C},N),this.trigger("show_contextmenu",{node:g,x,y:C})}},k=!1,g={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(u=R).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(x){u(document).triggerHandler("context_"+x+".vakata",{reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_execute:function(x){return!(!(x=g.items[x])||x._disabled&&(!u.isFunction(x._disabled)||x._disabled({item:x,reference:g.reference,element:g.element}))||!x.action)&&x.action.call(null,{item:x,reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_parse:function(x,C){if(!x)return!1;C||(g.html="",g.items=[]);var m,N="",P=!1;return C&&(N+="<ul>"),u.each(x,function(q,I){return!I||(g.items.push(I),!P&&I.separator_before&&(N+="<li class='vakata-context-separator'><a href='#' "+(u.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),P=!1,N+="<li class='"+(I._class||"")+(!0===I._disabled||u.isFunction(I._disabled)&&I._disabled({item:I,reference:g.reference,element:g.element})?" vakata-contextmenu-disabled ":"")+"' "+(I.shortcut?" data-shortcut='"+I.shortcut+"' ":"")+">",N+="<a href='#' rel='"+(g.items.length-1)+"'>",u.vakata.context.settings.icons&&(N+="<i ",I.icon&&(N+=-1!==I.icon.indexOf("/")||-1!==I.icon.indexOf(".")?" style='background:url(\""+I.icon+"\") center center no-repeat' ":" class='"+I.icon+"' "),N+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),N+=(u.isFunction(I.label)?I.label({item:q,reference:g.reference,element:g.element}):I.label)+(I.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+I.shortcut+'">'+(I.shortcut_label||"")+"</span>":"")+"</a>",I.submenu&&(m=u.vakata.context._parse(I.submenu,!0))&&(N+=m),N+="</li>",void(I.separator_after&&(N+="<li class='vakata-context-separator'><a href='#' "+(u.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",P=!0)))}),N=N.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),C&&(N+="</ul>"),C||(g.html=N,u.vakata.context._trigger("parse")),N.length>10&&N},_show_submenu:function(x){if((x=u(x)).length&&x.children("ul").length){var C=x.children("ul"),N=x.offset().left+x.outerWidth(),P=x.offset().top,m=C.width(),q=C.height(),I=u(window).width()+u(window).scrollLeft(),B=u(window).height()+u(window).scrollTop();k?x[N-(m+10+x.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):x[N+m+10>I?"addClass":"removeClass"]("vakata-context-right"),P+q+10>B&&C.css("bottom","-1px"),C.show()}},show:function(x,C,N){var P,m,q,I,B,ne,J,K;switch(g.element&&g.element.length&&g.element.width(""),!0){case!C&&!x:return!1;case!!C&&!!x:g.reference=x,g.position_x=C.x,g.position_y=C.y;break;case!C&&!!x:g.reference=x,P=x.offset(),g.position_x=P.left+x.outerHeight(),g.position_y=P.top;break;case!!C&&!x:g.position_x=C.x,g.position_y=C.y}x&&!N&&u(x).data("vakata_contextmenu")&&(N=u(x).data("vakata_contextmenu")),u.vakata.context._parse(N)&&g.element.html(g.html),g.items.length&&(g.element.appendTo("body"),q=g.position_x,I=g.position_y,B=(m=g.element).width(),ne=m.height(),J=u(window).width()+u(window).scrollLeft(),K=u(window).height()+u(window).scrollTop(),k&&(q-=m.outerWidth())<u(window).scrollLeft()+20&&(q=u(window).scrollLeft()+20),q+B+20>J&&(q=J-(B+20)),I+ne+20>K&&(I=K-(ne+20)),g.element.css({left:q,top:I}).show().find("a:eq(0)").focus().parent().addClass("vakata-context-hover"),g.is_visible=!0,u.vakata.context._trigger("show"))},hide:function(){g.is_visible&&(g.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),g.is_visible=!1,u.vakata.context._trigger("hide"))}},u(function(){k="rtl"===u("body").css("direction");var x=!1;g.element=u("<ul class='vakata-context'></ul>"),g.element.on("mouseenter","li",function(C){C.stopImmediatePropagation(),u.contains(this,C.relatedTarget)||(x&&clearTimeout(x),g.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),u(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),u.vakata.context._show_submenu(this))}).on("mouseleave","li",function(C){u.contains(this,C.relatedTarget)||u(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(C){u(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),u.vakata.context.settings.hide_onmouseleave&&(x=setTimeout(function(){u.vakata.context.hide()},u.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(C){C.preventDefault(),u(this).blur().parent().hasClass("vakata-context-disabled")||!1===u.vakata.context._execute(u(this).attr("rel"))||u.vakata.context.hide()}).on("keydown","a",function(C){var N=null;switch(C.which){case 13:case 32:C.type="mouseup",C.preventDefault(),u(C.currentTarget).trigger(C);break;case 37:g.is_visible&&(g.element.find(".vakata-context-hover").last().parents("li:eq(0)").find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 38:g.is_visible&&((N=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(N=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),N.addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 39:g.is_visible&&(g.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 40:g.is_visible&&((N=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(N=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),N.addClass("vakata-context-hover").children("a").focus(),C.stopImmediatePropagation(),C.preventDefault());break;case 27:u.vakata.context.hide(),C.preventDefault()}}).on("keydown",function(C){C.preventDefault();var N=g.element.find(".vakata-contextmenu-shortcut-"+C.which).parent();N.parent().not(".vakata-context-disabled")&&N.click()}),u(document).on("mousedown.vakata.jstree",function(C){g.is_visible&&!u.contains(g.element[0],C.target)&&u.vakata.context.hide()}).on("context_show.vakata.jstree",function(C,N){g.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),k&&g.element.addClass("vakata-context-rtl").css("direction","rtl"),g.element.find("ul").hide().end()})}),R.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0},R.jstree.plugins.dnd=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",R.proxy(function(g){var x=this.get_node(g.target),C=this.is_selected(x)?this.get_selected().length:1;return x&&x.id&&"#"!==x.id&&(1===g.which||"touchstart"===g.type)&&(!0===this.settings.dnd.is_draggable||R.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,C>1?this.get_selected(!0):[x]))?(this.element.trigger("mousedown.jstree"),R.vakata.dnd.start(g,{jstree:!0,origin:this,obj:this.get_node(x,!0),nodes:C>1?this.get_selected():[x.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+(C>1?C+" "+this.get_string("nodes"):this.get_text(g.currentTarget,!0))+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):void 0},this))}},R(function(){var u=!1,k=!1,g=!1,x=R('<div id="jstree-marker">&#160;</div>').hide();R(document).on("dnd_start.vakata.jstree",function(C,N){u=!1,N&&N.data&&N.data.jstree&&x.appendTo("body")}).on("dnd_move.vakata.jstree",function(C,N){if(g&&clearTimeout(g),N&&N.data&&N.data.jstree&&(!N.event.target.id||"jstree-marker"!==N.event.target.id)){var B,ne,J,K,Ce,ge,kt,l,ct,ue,Et,ft,O,Ae,P=R.jstree.reference(N.event.target),m=!1,q=!1,I=!1;if(P&&P._data&&P._data.dnd)if(x.attr("class","jstree-"+P.get_theme()+(P.settings.core.themes.responsive?" jstree-dnd-responsive":"")),N.helper.children().attr("class","jstree-"+P.get_theme()+" jstree-"+P.get_theme()+"-"+P.get_theme_variant()+" "+(P.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy:eq(0)")[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"show":"hide"](),N.event.target!==P.element[0]&&N.event.target!==P.get_container_ul()[0]||0!==P.get_container_ul().children().length){if((m=R(N.event.target).closest(".jstree-anchor"))&&m.length&&m.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(q=m.offset(),I=N.event.pageY-q.top,J=m.height(),R.each(ge=J/3>I?["b","i","a"]:I>J-J/3?["a","i","b"]:I>J/2?["i","a","b"]:["i","b","a"],function(Wt,xn){switch(xn){case"b":B=q.left-6,ne=q.top,K=P.get_parent(m),Ce=m.parent().index();break;case"i":O=P.settings.dnd.inside_pos,Ae=P.get_node(m.parent()),B=q.left-2,ne=q.top+J/2+1,K=Ae.id,Ce="first"===O?0:"last"===O?Ae.children.length:Math.min(O,Ae.children.length);break;case"a":B=q.left-6,ne=q.top+J,K=P.get_parent(m),Ce=m.parent().index()+1}for(kt=!0,l=0,ct=N.data.nodes.length;ct>l;l++)if(Et=Ce,"move_node"==(ue=N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node")&&"a"===xn&&N.data.origin&&N.data.origin===P&&K===P.get_parent(N.data.nodes[l])&&(ft=P.get_node(K),Et>R.inArray(N.data.nodes[l],ft.children)&&(Et-=1)),!(kt=kt&&(P&&P.settings&&P.settings.dnd&&!1===P.settings.dnd.check_while_dragging||P.check(ue,N.data.origin&&N.data.origin!==P?N.data.origin.get_node(N.data.nodes[l]):N.data.nodes[l],K,Et,{dnd:!0,ref:P.get_node(m.parent()),pos:xn,is_multi:N.data.origin&&N.data.origin!==P,is_foreign:!N.data.origin})))){P&&P.last_error&&(k=P.last_error());break}return kt?("i"===xn&&m.parent().is(".jstree-closed")&&P.settings.dnd.open_timeout&&(g=setTimeout((Wn=P,Oe=m,function(){Wn.open_node(Oe)}),P.settings.dnd.open_timeout)),u={ins:P,par:K,pos:"i"!==xn||"last"!==O||0!==Ce||P.is_loaded(Ae)?Ce:"last"},x.css({left:B+"px",top:ne+"px"}).show(),N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok"),k={},ge=!0,!1):void 0;var Wn,Oe}),!0===ge))return}else{for(kt=!0,l=0,ct=N.data.nodes.length;ct>l&&(kt=kt&&P.check(N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node",N.data.origin&&N.data.origin!==P?N.data.origin.get_node(N.data.nodes[l]):N.data.nodes[l],"#","last",{dnd:!0,ref:P.get_node("#"),pos:"i",is_multi:N.data.origin&&N.data.origin!==P,is_foreign:!N.data.origin}));l++);if(kt)return u={ins:P,par:"#",pos:"last"},x.hide(),void N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-er").addClass("jstree-ok")}u=!1,N.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),x.hide()}}).on("dnd_scroll.vakata.jstree",function(C,N){N&&N.data&&N.data.jstree&&(x.hide(),u=!1,N.helper.find(".jstree-icon:eq(0)").removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(C,N){if(g&&clearTimeout(g),N&&N.data&&N.data.jstree){x.hide().detach();var P,m,q=[];if(u){for(P=0,m=N.data.nodes.length;m>P;P++)q[P]=N.data.origin?N.data.origin.get_node(N.data.nodes[P]):N.data.nodes[P],N.data.origin&&(q[P].instance=N.data.origin);for(u.ins[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(N.event.metaKey||N.event.ctrlKey))?"copy_node":"move_node"](q,u.par,u.pos),P=0,m=q.length;m>P;P++)q[P].instance&&(q[P].instance=null)}else(P=R(N.event.target).closest(".jstree")).length&&k&&k.error&&"check"===k.error&&(P=P.jstree(!0))&&P.settings.core.error.call(this,k)}}).on("keyup.jstree keydown.jstree",function(C,N){(N=R.vakata.dnd._get())&&N.data&&N.data.jstree&&N.helper.find(".jstree-copy:eq(0)")[N.data.origin&&(N.data.origin.settings.dnd.always_copy||N.data.origin.settings.dnd.copy&&(C.metaKey||C.ctrlKey))?"show":"hide"]()})}),function(u){var k={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};u.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(g,x){var C=u.vakata.dnd._get();C.event=x,u(document).triggerHandler("dnd_"+g+".vakata",C)},_get:function(){return{data:k.data,element:k.element,helper:k.helper}},_clean:function(){k.helper&&k.helper.remove(),k.scroll_i&&(clearInterval(k.scroll_i),k.scroll_i=!1),k={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},u(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",u.vakata.dnd.drag),u(document).off("mouseup.vakata.jstree touchend.vakata.jstree",u.vakata.dnd.stop)},_scroll:function(g){if(!k.scroll_e||!k.scroll_l&&!k.scroll_t)return k.scroll_i&&(clearInterval(k.scroll_i),k.scroll_i=!1),!1;if(!k.scroll_i)return k.scroll_i=setInterval(u.vakata.dnd._scroll,100),!1;if(!0===g)return!1;var x=k.scroll_e.scrollTop(),C=k.scroll_e.scrollLeft();k.scroll_e.scrollTop(x+k.scroll_t*u.vakata.dnd.settings.scroll_speed),k.scroll_e.scrollLeft(C+k.scroll_l*u.vakata.dnd.settings.scroll_speed),(x!==k.scroll_e.scrollTop()||C!==k.scroll_e.scrollLeft())&&u.vakata.dnd._trigger("scroll",k.scroll_e)},start:function(g,x,C){"touchstart"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_drag&&u.vakata.dnd.stop({});try{g.currentTarget.unselectable="on",g.currentTarget.onselectstart=function(){return!1},g.currentTarget.style&&(g.currentTarget.style.MozUserSelect="none")}catch{}return k.init_x=g.pageX,k.init_y=g.pageY,k.data=x,k.is_down=!0,k.element=g.currentTarget,k.target=g.target,k.is_touch="touchstart"===g.type,!1!==C&&(k.helper=u("<div id='vakata-dnd'></div>").html(C).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),u(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",u.vakata.dnd.drag),u(document).on("mouseup.vakata.jstree touchend.vakata.jstree",u.vakata.dnd.stop),!1},drag:function(g){if("touchmove"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_down){if(!k.is_drag){if(!(Math.abs(g.pageX-k.init_x)>(k.is_touch?u.vakata.dnd.settings.threshold_touch:u.vakata.dnd.settings.threshold)||Math.abs(g.pageY-k.init_y)>(k.is_touch?u.vakata.dnd.settings.threshold_touch:u.vakata.dnd.settings.threshold)))return;k.helper&&(k.helper.appendTo("body"),k.helper_w=k.helper.outerWidth()),k.is_drag=!0,u.vakata.dnd._trigger("start",g)}var x=!1,C=!1,N=!1,P=!1,m=!1,q=!1,I=!1,B=!1,ne=!1,J=!1;return k.scroll_t=0,k.scroll_l=0,k.scroll_e=!1,u(u(g.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(u(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var K=u(this),Ce=K.offset();return this.scrollHeight>this.offsetHeight&&(Ce.top+K.height()-g.pageY<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=1),g.pageY-Ce.top<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(Ce.left+K.width()-g.pageX<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=1),g.pageX-Ce.left<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=-1)),k.scroll_t||k.scroll_l?(k.scroll_e=u(this),!1):void 0}),k.scroll_e||(x=u(document),C=u(window),N=x.height(),P=C.height(),m=x.width(),q=C.width(),I=x.scrollTop(),B=x.scrollLeft(),N>P&&g.pageY-I<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=-1),N>P&&P-(g.pageY-I)<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_t=1),m>q&&g.pageX-B<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=-1),m>q&&q-(g.pageX-B)<u.vakata.dnd.settings.scroll_proximity&&(k.scroll_l=1),(k.scroll_t||k.scroll_l)&&(k.scroll_e=x)),k.scroll_e&&u.vakata.dnd._scroll(!0),k.helper&&(ne=parseInt(g.pageY+u.vakata.dnd.settings.helper_top,10),J=parseInt(g.pageX+u.vakata.dnd.settings.helper_left,10),N&&ne+25>N&&(ne=N-50),m&&J+k.helper_w>m&&(J=m-(k.helper_w+2)),k.helper.css({left:J+"px",top:ne+"px"})),u.vakata.dnd._trigger("move",g),!1}},stop:function(g){if("touchend"===g.type&&g.originalEvent&&g.originalEvent.changedTouches&&g.originalEvent.changedTouches[0]&&(g.pageX=g.originalEvent.changedTouches[0].pageX,g.pageY=g.originalEvent.changedTouches[0].pageY,g.target=document.elementFromPoint(g.originalEvent.changedTouches[0].pageX-window.pageXOffset,g.originalEvent.changedTouches[0].pageY-window.pageYOffset)),k.is_drag)u.vakata.dnd._trigger("stop",g);else if("touchend"===g.type&&g.target===k.target){var x=setTimeout(function(){u(g.target).click()},100);u(g.target).one("click",function(){x&&clearTimeout(x)})}return u.vakata.dnd._clean(),!1}}}(R),R.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},R.jstree.plugins.search=function(u,k){this.bind=function(){k.bind.call(this),this._data.search.str="",this._data.search.dom=R(),this._data.search.res=[],this._data.search.opn=[],this.element.on("before_open.jstree",R.proxy(function(g,x){var C,N,m=this._data.search.res,q=[],I=R();if(m&&m.length&&(this._data.search.dom=R(this.element[0].querySelectorAll("#"+R.map(m,function(B){return-1!=="0123456789".indexOf(B[0])?"\\3"+B[0]+" "+B.substr(1).replace(R.jstree.idregex,"\\$&"):B.replace(R.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this.settings.search.show_only_matches&&this._data.search.res.length)){for(C=0,N=m.length;N>C;C++)q=q.concat(this.get_node(m[C]).parents);I=(q=R.vakata.array_remove_item(R.vakata.array_unique(q),"#")).length?R(this.element[0].querySelectorAll("#"+R.map(q,function(B){return-1!=="0123456789".indexOf(B[0])?"\\3"+B[0]+" "+B.substr(1).replace(R.jstree.idregex,"\\$&"):B.replace(R.jstree.idregex,"\\$&")}).join(", #"))):R(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),(I=I.add(this._data.search.dom)).parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){R(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)),this.settings.search.show_only_matches&&this.element.on("search.jstree",function(g,x){x.nodes.length&&(R(this).find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),x.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){R(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))}).on("clear_search.jstree",function(g,x){x.nodes.length&&R(this).find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")})},this.search=function(g,x){if(!1===g||""===R.trim(g.toString()))return this.clear_search();g=g.toString();var C=this.settings.search,N=!!C.ajax&&C.ajax,P=null,m=[],q=[];return this._data.search.res.length&&this.clear_search(),x||!1===N?(this._data.search.str=g,this._data.search.dom=R(),this._data.search.res=[],this._data.search.opn=[],P=new R.vakata.search(g,!0,{caseSensitive:C.case_sensitive,fuzzy:C.fuzzy}),R.each(this._model.data,function(ne,J){J.text&&(C.search_callback&&C.search_callback.call(this,g,J)||!C.search_callback&&P.search(J.text).isMatch)&&(!C.search_leaves_only||J.state.loaded&&0===J.children.length)&&(m.push(ne),q=q.concat(J.parents))}),m.length&&(q=R.vakata.array_unique(q),this._search_open(q),this._data.search.dom=R(this.element[0].querySelectorAll("#"+R.map(m,function(ne){return-1!=="0123456789".indexOf(ne[0])?"\\3"+ne[0]+" "+ne.substr(1).replace(R.jstree.idregex,"\\$&"):ne.replace(R.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),void this.trigger("search",{nodes:this._data.search.dom,str:g,res:this._data.search.res})):R.isFunction(N)?N.call(this,g,R.proxy(function(ne){ne&&ne.d&&(ne=ne.d),this._load_nodes(R.isArray(ne)?R.vakata.array_unique(ne):[],function(){this.search(g,!0)},!0)},this)):((N=R.extend({},N)).data||(N.data={}),N.data.str=g,R.ajax(N).fail(R.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(N)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(R.proxy(function(ne){ne&&ne.d&&(ne=ne.d),this._load_nodes(R.isArray(ne)?R.vakata.array_unique(ne):[],function(){this.search(g,!0)},!0)},this)))},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=R()},this._search_open=function(g){var x=this;R.each(g.concat([]),function(C,N){if("#"===N)return!0;try{N=R("#"+N.replace(R.jstree.idregex,"\\$&"),x.element)}catch{}N&&N.length&&x.is_closed(N)&&(x._data.search.opn.push(N[0].id),x.open_node(N,function(){x._search_open(g)},0))})}},function(u){u.vakata.search=function(k,g,x){!1!==(x=x||{}).fuzzy&&(x.fuzzy=!0),k=x.caseSensitive?k:k.toLowerCase();var q,I,B,ne,C=x.location||0,N=x.distance||100,P=x.threshold||.6,m=k.length;return m>32&&(x.fuzzy=!1),x.fuzzy&&(q=1<<m-1,I=function(){var J={},K=0;for(K=0;m>K;K++)J[k.charAt(K)]=0;for(K=0;m>K;K++)J[k.charAt(K)]|=1<<m-K-1;return J}(),B=function(J,K){var Ce=J/m,ge=Math.abs(C-K);return N?Ce+ge/N:ge?1:Ce}),ne=function(J){if(J=x.caseSensitive?J:J.toLowerCase(),k===J||-1!==J.indexOf(k))return{isMatch:!0,score:0};if(!x.fuzzy)return{isMatch:!1,score:1};var K,Ce,ct,ue,ft,O,Ae,Wt,xn,ge=J.length,kt=P,l=J.indexOf(k,C),Et=m+ge,Wn=1,Oe=[];for(-1!==l&&(kt=Math.min(B(0,l),kt),-1!==(l=J.lastIndexOf(k,C+m))&&(kt=Math.min(B(0,l),kt))),l=-1,K=0;m>K;K++){for(ct=0,ue=Et;ue>ct;)B(K,C+ue)<=kt?ct=ue:Et=ue,ue=Math.floor((Et-ct)/2+ct);for(Et=ue,O=Math.max(1,C-ue+1),Ae=Math.min(C+ue,ge)+m,(Wt=new Array(Ae+2))[Ae+1]=(1<<K)-1,Ce=Ae;Ce>=O;Ce--)if(xn=I[J.charAt(Ce-1)],Wt[Ce]=0===K?(Wt[Ce+1]<<1|1)&xn:(Wt[Ce+1]<<1|1)&xn|(ft[Ce+1]|ft[Ce])<<1|1|ft[Ce+1],Wt[Ce]&q&&kt>=(Wn=B(K,Ce-1))){if(kt=Wn,Oe.push(l=Ce-1),!(l>C))break;O=Math.max(1,2*C-l)}if(B(K+1,C)>kt)break;ft=Wt}return{isMatch:l>=0,score:Wn}},!0===g?{search:ne}:ne(g)}}(R),R.jstree.defaults.sort=function(u,k){return this.get_text(u)>this.get_text(k)?1:-1},R.jstree.plugins.sort=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("model.jstree",R.proxy(function(g,x){this.sort(x.parent,!0)},this)).on("rename_node.jstree create_node.jstree",R.proxy(function(g,x){this.sort(x.parent||x.node.parent,!1),this.redraw_node(x.parent||x.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",R.proxy(function(g,x){this.sort(x.parent,!1),this.redraw_node(x.parent,!0)},this))},this.sort=function(g,x){var C,N;if((g=this.get_node(g))&&g.children&&g.children.length&&(g.children.sort(R.proxy(this.settings.sort,this)),x))for(C=0,N=g.children_d.length;N>C;C++)this.sort(g.children_d[C],!1)}};var M=!1;R.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree",ttl:!1,filter:!1},R.jstree.plugins.state=function(u,k){this.bind=function(){k.bind.call(this);var g=R.proxy(function(){this.element.on(this.settings.state.events,R.proxy(function(){M&&clearTimeout(M),M=setTimeout(R.proxy(function(){this.save_state()},this),100)},this))},this);this.element.on("ready.jstree",R.proxy(function(x,C){this.element.one("restore_state.jstree",g),this.restore_state()||g()},this))},this.save_state=function(){var g={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};R.vakata.storage.set(this.settings.state.key,JSON.stringify(g))},this.restore_state=function(){var g=R.vakata.storage.get(this.settings.state.key);if(g)try{g=JSON.parse(g)}catch{return!1}return!(g&&g.ttl&&g.sec&&+new Date-g.sec>g.ttl||(g&&g.state&&(g=g.state),g&&R.isFunction(this.settings.state.filter)&&(g=this.settings.state.filter.call(this,g)),!g||(this.element.one("set_state.jstree",function(x,C){C.instance.trigger("restore_state",{state:R.extend(!0,{},g)})}),this.set_state(g),0)))},this.clear_state=function(){return R.vakata.storage.del(this.settings.state.key)}},function(u,k){u.vakata.storage={set:function(g,x){return window.localStorage.setItem(g,x)},get:function(g){return window.localStorage.getItem(g)},del:function(g){return window.localStorage.removeItem(g)}}}(R),R.jstree.defaults.types={"#":{},default:{}},R.jstree.plugins.types=function(u,k){this.init=function(g,x){var C,N;if(x&&x.types&&x.types.default)for(C in x.types)if("default"!==C&&"#"!==C&&x.types.hasOwnProperty(C))for(N in x.types.default)x.types.default.hasOwnProperty(N)&&x.types[C][N]===At&&(x.types[C][N]=x.types.default[N]);k.init.call(this,g,x),this._model.data["#"].type="#"},this.refresh=function(g,x){k.refresh.call(this,g,x),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",R.proxy(function(g,x){var m,q,C=this._model.data,N=x.nodes,P=this.settings.types,I="default";for(m=0,q=N.length;q>m;m++)I="default",C[N[m]].original&&C[N[m]].original.type&&P[C[N[m]].original.type]&&(I=C[N[m]].original.type),C[N[m]].data&&C[N[m]].data.jstree&&C[N[m]].data.jstree.type&&P[C[N[m]].data.jstree.type]&&(I=C[N[m]].data.jstree.type),C[N[m]].type=I,!0===C[N[m]].icon&&P[I].icon!==At&&(C[N[m]].icon=P[I].icon);C["#"].type="#"},this)),k.bind.call(this)},this.get_json=function(g,x,C){var N,P,m=this._model.data,q=x?R.extend(!0,{},x,{no_id:!1}):{},I=k.get_json.call(this,g,q,C);if(!1===I)return!1;if(R.isArray(I))for(N=0,P=I.length;P>N;N++)I[N].type=I[N].id&&m[I[N].id]&&m[I[N].id].type?m[I[N].id].type:"default",x&&x.no_id&&(delete I[N].id,I[N].li_attr&&I[N].li_attr.id&&delete I[N].li_attr.id);else I.type=I.id&&m[I.id]&&m[I.id].type?m[I.id].type:"default",x&&x.no_id&&(I=this._delete_ids(I));return I},this._delete_ids=function(g){if(R.isArray(g)){for(var x=0,C=g.length;C>x;x++)g[x]=this._delete_ids(g[x]);return g}return delete g.id,g.li_attr&&g.li_attr.id&&delete g.li_attr.id,g.children&&R.isArray(g.children)&&(g.children=this._delete_ids(g.children)),g},this.check=function(g,x,C,N,P){if(!1===k.check.call(this,g,x,C,N,P))return!1;x=x&&x.id?x:this.get_node(x),C=C&&C.id?C:this.get_node(C);var q,I,B,ne,m=x&&x.id?R.jstree.reference(x.id):null;switch(m=m&&m._model&&m._model.data?m._model.data:null,g){case"create_node":case"move_node":case"copy_node":if("move_node"!==g||-1===R.inArray(x.id,C.children)){if((q=this.get_rules(C)).max_children!==At&&-1!==q.max_children&&q.max_children===C.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;if(q.valid_children!==At&&-1!==q.valid_children&&-1===R.inArray(x.type||"default",q.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;if(m&&x.children_d&&x.parents){for(I=0,B=0,ne=x.children_d.length;ne>B;B++)I=Math.max(I,m[x.children_d[B]].parents.length);I=I-x.parents.length+1}(0>=I||I===At)&&(I=1);do{if(q.max_depth!==At&&-1!==q.max_depth&&q.max_depth<I)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})},!1;C=this.get_node(C.parent),q=this.get_rules(C),I++}while(C)}}return!0},this.get_rules=function(g){if(!(g=this.get_node(g)))return!1;var x=this.get_type(g,!0);return x.max_depth===At&&(x.max_depth=-1),x.max_children===At&&(x.max_children=-1),x.valid_children===At&&(x.valid_children=-1),x},this.get_type=function(g,x){return!!(g=this.get_node(g))&&(x?R.extend({type:g.type},this.settings.types[g.type]):g.type)},this.set_type=function(g,x){var C,N,P,m,q;if(R.isArray(g)){for(N=0,P=(g=g.slice()).length;P>N;N++)this.set_type(g[N],x);return!0}return C=this.settings.types,g=this.get_node(g),!(!C[x]||!g||(m=g.type,q=this.get_icon(g),g.type=x,(!0===q||C[m]&&C[m].icon&&q===C[m].icon)&&this.set_icon(g,C[x].icon===At||C[x].icon),0))}},R.jstree.defaults.unique={case_sensitive:!1,duplicate:function(u,k){return u+" ("+k+")"}},R.jstree.plugins.unique=function(u,k){this.check=function(g,x,C,N,P){if(!1===k.check.call(this,g,x,C,N,P))return!1;if(x=x&&x.id?x:this.get_node(x),!(C=C&&C.id?C:this.get_node(C))||!C.children)return!0;var ne,J,m="rename_node"===g?N:x.text,q=[],I=this.settings.unique.case_sensitive,B=this._model.data;for(ne=0,J=C.children.length;J>ne;ne++)q.push(I?B[C.children[ne]].text:B[C.children[ne]].text.toLowerCase());switch(I||(m=m.toLowerCase()),g){case"delete_node":return!0;case"rename_node":return(ne=-1===R.inArray(m,q)||x.text&&x.text[I?"toString":"toLowerCase"]()===m)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),ne;case"create_node":return(ne=-1===R.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),ne;case"copy_node":return(ne=-1===R.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),ne;case"move_node":return(ne=x.parent===C.id||-1===R.inArray(m,q))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+m+" already exists. Preventing: "+g,data:JSON.stringify({chk:g,pos:N,obj:!(!x||!x.id)&&x.id,par:!(!C||!C.id)&&C.id})}),ne}return!0},this.create_node=function(g,x,C,N,P){if(!x||x.text===At){if(null===g&&(g="#"),!(g=this.get_node(g)))return k.create_node.call(this,g,x,C,N,P);if(!(C=C===At?"last":C).toString().match(/^(before|after)$/)&&!P&&!this.is_loaded(g))return k.create_node.call(this,g,x,C,N,P);x||(x={});var m,q,I,B,ne,J=this._model.data,K=this.settings.unique.case_sensitive,Ce=this.settings.unique.duplicate;for(q=m=this.get_string("New node"),I=[],B=0,ne=g.children.length;ne>B;B++)I.push(K?J[g.children[B]].text:J[g.children[B]].text.toLowerCase());for(B=1;-1!==R.inArray(K?q:q.toLowerCase(),I);)q=Ce.call(this,m,++B).toString();x.text=q}return k.create_node.call(this,g,x,C,N,P)}};var ae=document.createElement("DIV");ae.setAttribute("unselectable","on"),ae.className="jstree-wholerow",ae.innerHTML="&#160;",R.jstree.plugins.wholerow=function(u,k){this.bind=function(){k.bind.call(this),this.element.on("ready.jstree set_state.jstree",R.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",R.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",R.proxy(function(g,x){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",R.proxy(function(g,x){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var N,P,C=!1;for(N=0,P=x.selected.length;P>N;N++)(C=this.get_node(x.selected[N],!0))&&C.length&&C.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",R.proxy(function(g,x){this.get_node(x.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",R.proxy(function(g,x){this.get_node(x.node,!0).children(".jstree-wholerow")["hover_node"===g.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",R.proxy(function(g){g.preventDefault();var x=R.Event("contextmenu",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,pageX:g.pageX,pageY:g.pageY});R(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x)},this)).on("click.jstree",".jstree-wholerow",function(g){g.stopImmediatePropagation();var x=R.Event("click",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey});R(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",R.proxy(function(g){g.stopImmediatePropagation();var x=R.Event("click",{metaKey:g.metaKey,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey});R(g.currentTarget).closest(".jstree-node").children(".jstree-anchor:eq(0)").trigger(x).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",R.proxy(function(g){return g.stopImmediatePropagation(),this.hover_node(g.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",R.proxy(function(g){this.dehover_node(g.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),k.teardown.call(this)},this.redraw_node=function(g,x,C){if(g=k.redraw_node.call(this,g,x,C)){var N=ae.cloneNode(!0);-1!==R.inArray(g.id,this._data.core.selected)&&(N.className+=" jstree-wholerow-clicked"),g.insertBefore(N,g.childNodes[0])}return g}},function(u){if(document.registerElement){var k=Object.create(HTMLElement.prototype);k.createdCallback=function(){var x,g={core:{},plugins:[]};for(x in u.jstree.plugins)u.jstree.plugins.hasOwnProperty(x)&&this.attributes[x]&&(g.plugins.push(x),this.getAttribute(x)&&JSON.parse(this.getAttribute(x))&&(g[x]=JSON.parse(this.getAttribute(x))));for(x in u.jstree.defaults.core)u.jstree.defaults.core.hasOwnProperty(x)&&this.attributes[x]&&(g.core[x]=JSON.parse(this.getAttribute(x))||this.getAttribute(x));jQuery(this).jstree(g)};try{document.registerElement("vakata-jstree",{prototype:k})}catch{}}}(jQuery)}var u,k,g}),function(R){"function"==typeof define&&define.amd?define(["jquery"],R):"object"==typeof exports?module.exports=R(require("jquery")):R(jQuery)}(function(R){"use strict";var At=!1,en=!1,gn=0,nn=2e3,mn=0,st=R,Le=document,xt=window,ln=st(xt),dn=[],H=xt.requestAnimationFrame||xt.webkitRequestAnimationFrame||xt.mozRequestAnimationFrame||!1,W=xt.cancelAnimationFrame||xt.webkitCancelAnimationFrame||xt.mozCancelAnimationFrame||!1;if(H)xt.cancelAnimationFrame||(W=function(I){});else{var M=0;H=function(I,B){var ne=(new Date).getTime(),J=Math.max(0,16-(ne-M)),K=xt.setTimeout(function(){I(ne+J)},J);return M=ne+J,K},W=function(I){xt.clearTimeout(I)}}var ne,I,B,ae=xt.MutationObserver||xt.WebKitMutationObserver||!1,u=Date.now||function(){return(new Date).getTime()},k={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:40,mousescrollstep:27,touchbehavior:!1,emulatetouch:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:(I=Le.currentScript||!!(ne=Le.getElementsByTagName("script")).length&&ne[ne.length-1],B=I?I.src.split("?")[0]:"",B.split("/").length>0?B.split("/").slice(0,-1).join("/")+"/":""),preventmultitouchscrolling:!0,disablemutationobserver:!1,enableobserver:!0,scrollbarid:!1},g=!1,C=function(I,B){function ne(){var U=l.doc.css(Ae.trstyle);return!(!U||"matrix"!=U.substr(0,6))&&U.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function K(U,Z,Ee){var qe=U.css(Z),We=parseFloat(qe);if(isNaN(We)){var tt=3==(We=Wn[qe]||0)?Ee?l.win.outerHeight()-l.win.innerHeight():l.win.outerWidth()-l.win.innerWidth():1;return l.isie8&&We&&(We+=1),tt?We:0}return We}function Ce(U,Z,Ee,qe){l._bind(U,Z,function(We){var tt={original:We=We||xt.event,target:We.target||We.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==We.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return We.preventDefault?We.preventDefault():We.returnValue=!1,!1},stopImmediatePropagation:function(){We.stopImmediatePropagation?We.stopImmediatePropagation():We.cancelBubble=!0}};return"mousewheel"==Z?(We.wheelDeltaX&&(tt.deltaX=-.025*We.wheelDeltaX),We.wheelDeltaY&&(tt.deltaY=-.025*We.wheelDeltaY),!tt.deltaY&&!tt.deltaX&&(tt.deltaY=-.025*We.wheelDelta)):tt.deltaY=We.detail,Ee.call(U,tt)},qe)}function ge(U,Z,Ee,qe){l.scrollrunning||(l.newscrolly=l.getScrollTop(),l.newscrollx=l.getScrollLeft(),er=u());var We=u()-er;if(er=u(),We>350?ot=1:ot+=(2-ot)/10,Z=Z*ot|0,U=U*ot|0){if(qe)if(U<0){if(l.getScrollLeft()>=l.page.maxw)return!0}else if(l.getScrollLeft()<=0)return!0;var tt=U>0?1:-1;Ct!==tt&&(l.scrollmom&&l.scrollmom.stop(),l.newscrollx=l.getScrollLeft(),Ct=tt),l.lastdeltax-=U}if(Z){if(function(){var Vt=l.getScrollTop();if(Z<0){if(Vt>=l.page.maxh)return!0}else if(Vt<=0)return!0}()){if(ue.nativeparentscrolling&&Ee&&!l.ispage&&!l.zoomactive)return!0;var Pt=l.view.h>>1;l.newscrolly<-Pt?(l.newscrolly=-Pt,Z=-1):l.newscrolly>l.page.maxh+Pt?(l.newscrolly=l.page.maxh+Pt,Z=1):Z=0}var Ze=Z>0?1:-1;ke!==Ze&&(l.scrollmom&&l.scrollmom.stop(),l.newscrolly=l.getScrollTop(),ke=Ze),l.lastdeltay-=Z}(Z||U)&&l.synched("relativexy",function(){var Vt=l.lastdeltay+l.newscrolly;l.lastdeltay=0;var Mt=l.lastdeltax+l.newscrollx;l.lastdeltax=0,l.rail.drag||l.doScrollPos(Mt,Vt)})}function kt(U,Z,Ee){var qe,We;return!(Ee||!Mn)||(0===U.deltaMode?(qe=ue.mousescrollstep/54*-U.deltaX|0,We=ue.mousescrollstep/54*-U.deltaY|0):1===U.deltaMode&&(qe=-U.deltaX*ue.mousescrollstep*50/80|0,We=-U.deltaY*ue.mousescrollstep*50/80|0),Z&&ue.oneaxismousemode&&0===qe&&We&&(qe=We,We=0,Ee&&(qe<0?l.getScrollLeft()>=l.page.maxw:l.getScrollLeft()<=0)&&(We=qe,qe=0)),l.isrtlmode&&(qe=-qe),ge(qe,We,Ee,!0)?void(Ee&&(Mn=!0)):(Mn=!1,U.stopImmediatePropagation(),U.preventDefault()))}var l=this;this.version="3.7.6",this.name="nicescroll",this.me=B;var ct=st("body"),ue=this.opt={doc:ct,win:!1};if(st.extend(ue,k),ue.snapbackspeed=80,I)for(var Et in ue)void 0!==I[Et]&&(ue[Et]=I[Et]);if(ue.disablemutationobserver&&(ae=!1),this.doc=ue.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(ue.win?ue.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==ue.win,this.win=ue.win||(this.ispage?ln:this.doc),this.docscroll=this.ispage&&!this.haswrapper?ln:this.win,this.body=ct,this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=ue.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==ue.rtlmode){var ft=this.win[0]==xt?this.body:this.win,O=ft.css("writing-mode")||ft.css("-webkit-writing-mode")||ft.css("-ms-writing-mode")||ft.css("-moz-writing-mode");"horizontal-tb"==O||"lr-tb"==O||""===O?(this.isrtlmode="rtl"==ft.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==O||"tb"==O||"tb-rl"==O||"rl-tb"==O,this.isvertical="vertical-rl"==O||"tb"==O||"tb-rl"==O)}else this.isrtlmode=!0===ue.rtlmode,this.isvertical=!1;if(this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1,!1!==ue.scrollbarid)this.id=ue.scrollbarid;else do{this.id="ascrail"+nn++}while(Le.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=ue.overflowx,this.overflowy=ue.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=function(){if(g)return g;var I=Le.createElement("DIV"),B=I.style,ne=navigator.userAgent,J=navigator.platform,K={};return K.haspointerlock="pointerLockElement"in Le||"webkitPointerLockElement"in Le||"mozPointerLockElement"in Le,K.isopera="opera"in xt,K.isopera12=K.isopera&&"getUserMedia"in navigator,K.isoperamini="[object OperaMini]"===Object.prototype.toString.call(xt.operamini),K.isie="all"in Le&&"attachEvent"in I&&!K.isopera,K.isieold=K.isie&&!("msInterpolationMode"in B),K.isie7=K.isie&&!K.isieold&&(!("documentMode"in Le)||7===Le.documentMode),K.isie8=K.isie&&"documentMode"in Le&&8===Le.documentMode,K.isie9=K.isie&&"performance"in xt&&9===Le.documentMode,K.isie10=K.isie&&"performance"in xt&&10===Le.documentMode,K.isie11="msRequestFullscreen"in I&&Le.documentMode>=11,K.ismsedge="msCredentials"in xt,K.ismozilla="MozAppearance"in B,K.iswebkit=!K.ismsedge&&"WebkitAppearance"in B,K.ischrome=K.iswebkit&&"chrome"in xt,K.ischrome38=K.ischrome&&"touchAction"in B,K.ischrome22=!K.ischrome38&&K.ischrome&&K.haspointerlock,K.ischrome26=!K.ischrome38&&K.ischrome&&"transition"in B,K.cantouch="ontouchstart"in Le.documentElement||"ontouchstart"in xt,K.hasw3ctouch=!!xt.PointerEvent&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),K.hasmstouch=!K.hasw3ctouch&&(xt.MSPointerEvent||!1),K.ismac=/^mac$/i.test(J),K.isios=K.cantouch&&/iphone|ipad|ipod/i.test(J),K.isios4=K.isios&&!("seal"in Object),K.isios7=K.isios&&"webkitHidden"in Le,K.isios8=K.isios&&"hidden"in Le,K.isios10=K.isios&&xt.Proxy,K.isandroid=/android/i.test(ne),K.haseventlistener="addEventListener"in I,K.trstyle=!1,K.hastransform=!1,K.hastranslate3d=!1,K.transitionstyle=!1,K.hastransition=!1,K.transitionend=!1,K.trstyle="transform",K.hastransform="transform"in B||function(){for(var Ce=["msTransform","webkitTransform","MozTransform","OTransform"],ge=0,kt=Ce.length;ge<kt;ge++)if(void 0!==B[Ce[ge]]){K.trstyle=Ce[ge];break}K.hastransform=!!K.trstyle}(),K.hastransform&&(B[K.trstyle]="translate3d(1px,2px,3px)",K.hastranslate3d=/translate3d/.test(B[K.trstyle])),K.transitionstyle="transition",K.prefixstyle="",K.transitionend="transitionend",K.hastransition="transition"in B||function(){K.transitionend=!1;for(var Ce=["webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"],ge=["-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],kt=["webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"],l=0,ct=Ce.length;l<ct;l++)if(Ce[l]in B){K.transitionstyle=Ce[l],K.prefixstyle=ge[l],K.transitionend=kt[l];break}K.ischrome26&&(K.prefixstyle=ge[1]),K.hastransition=K.transitionstyle}(),K.cursorgrabvalue=function(){var Ce=["grab","-webkit-grab","-moz-grab"];(K.ischrome&&!K.ischrome38||K.isie)&&(Ce=[]);for(var ge=0,kt=Ce.length;ge<kt;ge++){var l=Ce[ge];if(B.cursor=l,B.cursor==l)return l}return"url(https://cdnjs.cloudflare.com/ajax/libs/slider-pro/1.3.0/css/images/openhand.cur),n-resize"}(),K.hasmousecapture="setCapture"in I,K.hasMutationObserver=!1!==ae,I=null,g=K,K}();var Ae=st.extend({},this.detected);this.canhwscroll=Ae.hastransform&&ue.hwacceleration,this.ishwscroll=this.canhwscroll&&l.haswrapper,this.hasreversehr=!(!this.isrtlmode||(this.isvertical?Ae.iswebkit||Ae.isie||Ae.isie11:Ae.iswebkit||Ae.isie&&!Ae.isie10&&!Ae.isie11)),this.istouchcapable=!1,(Ae.cantouch||!Ae.hasw3ctouch&&!Ae.hasmstouch)&&(!Ae.cantouch||Ae.isios||Ae.isandroid||!Ae.iswebkit&&!Ae.ismozilla)||(this.istouchcapable=!0),ue.enablemouselockapi||(Ae.hasmousecapture=!1,Ae.haspointerlock=!1),this.debounced=function(U,Z,Ee){l&&(l.delaylist[U]||(l.delaylist[U]={h:H(function(){l.delaylist[U].fn.call(l),l.delaylist[U]=!1},Ee)},Z.call(l)),l.delaylist[U].fn=Z)},this.synched=function(U,Z){l.synclist[U]?l.synclist[U]=Z:(l.synclist[U]=Z,H(function(){l&&(l.synclist[U]&&l.synclist[U].call(l),l.synclist[U]=null)}))},this.unsynched=function(U){l.synclist[U]&&(l.synclist[U]=!1)},this.css=function(U,Z){for(var Ee in Z)l.saved.css.push([U,Ee,U.css(Ee)]),U.css(Ee,Z[Ee])},this.scrollTop=function(U){return void 0===U?l.getScrollTop():l.setScrollTop(U)},this.scrollLeft=function(U){return void 0===U?l.getScrollLeft():l.setScrollLeft(U)};var Wt=function(U,Z,Ee,qe,We,tt,Pt){this.st=U,this.ed=Z,this.spd=Ee,this.p1=qe||0,this.p2=We||1,this.p3=tt||0,this.p4=Pt||1,this.ts=u(),this.df=Z-U};if(Wt.prototype={B2:function(U){return 3*(1-U)*(1-U)*U},B3:function(U){return 3*(1-U)*U*U},B4:function(U){return U*U*U},getPos:function(){return(u()-this.ts)/this.spd},getNow:function(){var U=(u()-this.ts)/this.spd,Z=this.B2(U)+this.B3(U)+this.B4(U);return U>=1?this.ed:this.st+this.df*Z|0},update:function(U,Z){return this.st=this.getNow(),this.ed=U,this.spd=Z,this.ts=u(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},Ae.hastranslate3d&&Ae.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(U){if(!U){var Z=ne();if(Z)return 16==Z.length?-Z[13]:-Z[5];if(l.timerscroll&&l.timerscroll.bz)return l.timerscroll.bz.getNow()}return l.doc.translate.y},this.getScrollLeft=function(U){if(!U){var Z=ne();if(Z)return 16==Z.length?-Z[12]:-Z[4];if(l.timerscroll&&l.timerscroll.bh)return l.timerscroll.bh.getNow()}return l.doc.translate.x},this.notifyScrollEvent=function(U){var Z=Le.createEvent("UIEvents");Z.initUIEvent("scroll",!1,!1,xt,1),Z.niceevent=!0,U.dispatchEvent(Z)};var xn=this.isrtlmode?1:-1;Ae.hastranslate3d&&ue.enabletranslate3d?(this.setScrollTop=function(U,Z){l.doc.translate.y=U,l.doc.translate.ty=-1*U+"px",l.doc.css(Ae.trstyle,"translate3d("+l.doc.translate.tx+","+l.doc.translate.ty+",0)"),Z||l.notifyScrollEvent(l.win[0])},this.setScrollLeft=function(U,Z){l.doc.translate.x=U,l.doc.translate.tx=U*xn+"px",l.doc.css(Ae.trstyle,"translate3d("+l.doc.translate.tx+","+l.doc.translate.ty+",0)"),Z||l.notifyScrollEvent(l.win[0])}):(this.setScrollTop=function(U,Z){l.doc.translate.y=U,l.doc.translate.ty=-1*U+"px",l.doc.css(Ae.trstyle,"translate("+l.doc.translate.tx+","+l.doc.translate.ty+")"),Z||l.notifyScrollEvent(l.win[0])},this.setScrollLeft=function(U,Z){l.doc.translate.x=U,l.doc.translate.tx=U*xn+"px",l.doc.css(Ae.trstyle,"translate("+l.doc.translate.tx+","+l.doc.translate.ty+")"),Z||l.notifyScrollEvent(l.win[0])})}else this.getScrollTop=function(){return l.docscroll.scrollTop()},this.setScrollTop=function(U){l.docscroll.scrollTop(U)},this.getScrollLeft=function(){return l.hasreversehr?l.detected.ismozilla?l.page.maxw-Math.abs(l.docscroll.scrollLeft()):l.page.maxw-l.docscroll.scrollLeft():l.docscroll.scrollLeft()},this.setScrollLeft=function(U){return setTimeout(function(){if(l)return l.hasreversehr&&(U=l.detected.ismozilla?-(l.page.maxw-U):l.page.maxw-U),l.docscroll.scrollLeft(U)},1)};this.getTarget=function(U){return!!U&&(U.target?U.target:!!U.srcElement&&U.srcElement)},this.hasParent=function(U,Z){if(!U)return!1;for(var Ee=U.target||U.srcElement||U||!1;Ee&&Ee.id!=Z;)Ee=Ee.parentNode||!1;return!1!==Ee};var Wn={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:xt.pageYOffset||Le.documentElement.scrollTop,left:xt.pageXOffset||Le.documentElement.scrollLeft}},this.getOffset=function(){if(l.isfixed){var U=l.win.offset(),Z=l.getDocumentScrollOffset();return U.top-=Z.top,U.left-=Z.left,U}var Ee=l.win.offset();if(!l.viewport)return Ee;var qe=l.viewport.offset();return{top:Ee.top-qe.top,left:Ee.left-qe.left}},this.updateScrollBar=function(U){var Z,Ee;if(l.ishwscroll)l.rail.css({height:l.win.innerHeight()-(ue.railpadding.top+ue.railpadding.bottom)}),l.railh&&l.railh.css({width:l.win.innerWidth()-(ue.railpadding.left+ue.railpadding.right)});else{var qe=l.getOffset();if((Z={top:qe.top,left:qe.left-(ue.railpadding.left+ue.railpadding.right)}).top+=K(l.win,"border-top-width",!0),Z.left+=l.rail.align?l.win.outerWidth()-K(l.win,"border-right-width")-l.rail.width:K(l.win,"border-left-width"),(Ee=ue.railoffset)&&(Ee.top&&(Z.top+=Ee.top),Ee.left&&(Z.left+=Ee.left)),l.railslocked||l.rail.css({top:Z.top,left:Z.left,height:(U?U.h:l.win.innerHeight())-(ue.railpadding.top+ue.railpadding.bottom)}),l.zoom&&l.zoom.css({top:Z.top+1,left:1==l.rail.align?Z.left-20:Z.left+l.rail.width+4}),l.railh&&!l.railslocked){Z={top:qe.top,left:qe.left},(Ee=ue.railhoffset)&&(Ee.top&&(Z.top+=Ee.top),Ee.left&&(Z.left+=Ee.left));var We=l.railh.align?Z.top+K(l.win,"border-top-width",!0)+l.win.innerHeight()-l.railh.height:Z.top+K(l.win,"border-top-width",!0),tt=Z.left+K(l.win,"border-left-width");l.railh.css({top:We-(ue.railpadding.top+ue.railpadding.bottom),left:tt,width:l.railh.width})}}},this.doRailClick=function(U,Z,Ee){var qe,We,tt,Pt;l.railslocked||(l.cancelEvent(U),"pageY"in U||(U.pageX=U.clientX+Le.documentElement.scrollLeft,U.pageY=U.clientY+Le.documentElement.scrollTop),Z?(qe=Ee?l.doScrollLeft:l.doScrollTop,tt=Ee?(U.pageX-l.railh.offset().left-l.cursorwidth/2)*l.scrollratio.x:(U.pageY-l.rail.offset().top-l.cursorheight/2)*l.scrollratio.y,l.unsynched("relativexy"),qe(0|tt)):(qe=Ee?l.doScrollLeftBy:l.doScrollBy,tt=Ee?l.scroll.x:l.scroll.y,Pt=Ee?U.pageX-l.railh.offset().left:U.pageY-l.rail.offset().top,We=Ee?l.view.w:l.view.h,qe(tt>=Pt?We:-We)))},l.newscrolly=l.newscrollx=0,l.hasanimationframe="requestAnimationFrame"in xt,l.hascancelanimationframe="cancelAnimationFrame"in xt,l.hasborderbox=!1,this.init=function(){if(l.saved.css=[],Ae.isoperamini||Ae.isandroid&&!("hidden"in Le))return!0;ue.emulatetouch=ue.emulatetouch||ue.touchbehavior,l.hasborderbox=xt.getComputedStyle&&"border-box"===xt.getComputedStyle(Le.body)["box-sizing"];var U={"overflow-y":"hidden"};if((Ae.isie11||Ae.isie10)&&(U["-ms-overflow-style"]="none"),l.ishwscroll&&(this.doc.css(Ae.transitionstyle,Ae.prefixstyle+"transform 0ms ease-out"),Ae.transitionend&&l.bind(l.doc,Ae.transitionend,l.onScrollTransitionEnd,!1)),l.zindex="auto",l.zindex=l.ispage||"auto"!=ue.zindex?ue.zindex:function J(){var U=l.win;if("zIndex"in U)return U.zIndex();for(;U.length>0;){if(9==U[0].nodeType)return!1;var Z=U.css("zIndex");if(!isNaN(Z)&&0!==Z)return parseInt(Z);U=U.parent()}return!1}()||"auto",!l.ispage&&"auto"!=l.zindex&&l.zindex>mn&&(mn=l.zindex),l.isie&&0===l.zindex&&"auto"==ue.zindex&&(l.zindex="auto"),!l.ispage||!Ae.isieold){var Z=l.docscroll;l.ispage&&(Z=l.haswrapper?l.win:l.doc),l.css(Z,U),l.ispage&&(Ae.isie11||Ae.isie)&&l.css(st("html"),U),!Ae.isios||l.ispage||l.haswrapper||l.css(ct,{"-webkit-overflow-scrolling":"touch"});var Ee=st(Le.createElement("div"));Ee.css({position:"relative",top:0,float:"right",width:ue.cursorwidth,height:0,"background-color":ue.cursorcolor,border:ue.cursorborder,"background-clip":"padding-box","-webkit-border-radius":ue.cursorborderradius,"-moz-border-radius":ue.cursorborderradius,"border-radius":ue.cursorborderradius}),Ee.addClass("nicescroll-cursors"),l.cursor=Ee;var qe=st(Le.createElement("div"));qe.attr("id",l.id),qe.addClass("nicescroll-rails nicescroll-rails-vr");var We,tt,Pt=["left","right","top","bottom"];for(var Ze in Pt)(We=ue.railpadding[tt=Pt[Ze]]||0)&&qe.css("padding-"+tt,We+"px");qe.append(Ee),qe.width=Math.max(parseFloat(ue.cursorwidth),Ee.outerWidth()),qe.css({width:qe.width+"px",zIndex:l.zindex,background:ue.background,cursor:"default"}),qe.visibility=!0,qe.scrollable=!0,qe.align="left"==ue.railalign?0:1,l.rail=qe,l.rail.drag=!1;var Mt,Vt=!1;if(!ue.boxzoom||l.ispage||Ae.isieold||(Vt=Le.createElement("div"),l.bind(Vt,"click",l.doZoom),l.bind(Vt,"mouseenter",function(){l.zoom.css("opacity",ue.cursoropacitymax)}),l.bind(Vt,"mouseleave",function(){l.zoom.css("opacity",ue.cursoropacitymin)}),l.zoom=st(Vt),l.zoom.css({cursor:"pointer",zIndex:l.zindex,backgroundImage:"url("+ue.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0 0"}),ue.dblclickzoom&&l.bind(l.win,"dblclick",l.doZoom),Ae.cantouch&&ue.gesturezoom&&(l.ongesturezoom=function(ve){return ve.scale>1.5&&l.doZoomIn(ve),ve.scale<.8&&l.doZoomOut(ve),l.cancelEvent(ve)},l.bind(l.win,"gestureend",l.ongesturezoom))),l.railh=!1,ue.horizrailenabled&&(l.css(Z,{overflowX:"hidden"}),(Ee=st(Le.createElement("div"))).css({position:"absolute",top:0,height:ue.cursorwidth,width:0,backgroundColor:ue.cursorcolor,border:ue.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":ue.cursorborderradius,"-moz-border-radius":ue.cursorborderradius,"border-radius":ue.cursorborderradius}),Ae.isieold&&Ee.css("overflow","hidden"),Ee.addClass("nicescroll-cursors"),l.cursorh=Ee,(Mt=st(Le.createElement("div"))).attr("id",l.id+"-hr"),Mt.addClass("nicescroll-rails nicescroll-rails-hr"),Mt.height=Math.max(parseFloat(ue.cursorwidth),Ee.outerHeight()),Mt.css({height:Mt.height+"px",zIndex:l.zindex,background:ue.background}),Mt.append(Ee),Mt.visibility=!0,Mt.scrollable=!0,Mt.align="top"==ue.railvalign?0:1,l.railh=Mt,l.railh.drag=!1),l.ispage)qe.css({position:"fixed",top:0,height:"100%"}),qe.css(qe.align?{right:0}:{left:0}),l.body.append(qe),l.railh&&(Mt.css({position:"fixed",left:0,width:"100%"}),Mt.css(Mt.align?{bottom:0}:{top:0}),l.body.append(Mt));else{if(l.ishwscroll){"static"==l.win.css("position")&&l.css(l.win,{position:"relative"});var Mr="HTML"==l.win[0].nodeName?l.body:l.win;st(Mr).scrollTop(0).scrollLeft(0),l.zoom&&(l.zoom.css({position:"absolute",top:1,right:0,"margin-right":qe.width+4}),Mr.append(l.zoom)),qe.css({position:"absolute",top:0}),qe.css(qe.align?{right:0}:{left:0}),Mr.append(qe),Mt&&(Mt.css({position:"absolute",left:0,bottom:0}),Mt.css(Mt.align?{bottom:0}:{top:0}),Mr.append(Mt))}else{l.isfixed="fixed"==l.win.css("position");var jn=l.isfixed?"fixed":"absolute";l.isfixed||(l.viewport=l.getViewport(l.win[0])),l.viewport&&(l.body=l.viewport,/fixed|absolute/.test(l.viewport.css("position"))||l.css(l.viewport,{position:"relative"})),qe.css({position:jn}),l.zoom&&l.zoom.css({position:jn}),l.updateScrollBar(),l.body.append(qe),l.zoom&&l.body.append(l.zoom),l.railh&&(Mt.css({position:jn}),l.body.append(Mt))}Ae.isios&&l.css(l.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),ue.disableoutline&&(Ae.isie&&l.win.attr("hideFocus","true"),Ae.iswebkit&&l.win.css("outline","none"))}if(!1===ue.autohidemode?(l.autohidedom=!1,l.rail.css({opacity:ue.cursoropacitymax}),l.railh&&l.railh.css({opacity:ue.cursoropacitymax})):!0===ue.autohidemode||"leave"===ue.autohidemode?(l.autohidedom=st().add(l.rail),Ae.isie8&&(l.autohidedom=l.autohidedom.add(l.cursor)),l.railh&&(l.autohidedom=l.autohidedom.add(l.railh)),l.railh&&Ae.isie8&&(l.autohidedom=l.autohidedom.add(l.cursorh))):"scroll"==ue.autohidemode?(l.autohidedom=st().add(l.rail),l.railh&&(l.autohidedom=l.autohidedom.add(l.railh))):"cursor"==ue.autohidemode?(l.autohidedom=st().add(l.cursor),l.railh&&(l.autohidedom=l.autohidedom.add(l.cursorh))):"hidden"==ue.autohidemode&&(l.autohidedom=!1,l.hide(),l.railslocked=!1),Ae.cantouch||l.istouchcapable||ue.emulatetouch||Ae.hasmstouch){l.scrollmom=new N(l),l.ontouchstart=function(ve){if(l.locked||ve.pointerType&&("mouse"===ve.pointerType||ve.pointerType===ve.MSPOINTER_TYPE_MOUSE))return!1;if(l.hasmoving=!1,l.scrollmom.timer&&(l.triggerScrollEnd(),l.scrollmom.stop()),!l.railslocked){var Nt=l.getTarget(ve);if(Nt&&/INPUT/i.test(Nt.nodeName)&&/range/i.test(Nt.type))return l.stopPropagation(ve);var $t="mousedown"===ve.type;if(!("clientX"in ve)&&"changedTouches"in ve&&(ve.clientX=ve.changedTouches[0].clientX,ve.clientY=ve.changedTouches[0].clientY),l.forcescreen){var un=ve;(ve={original:ve.original?ve.original:ve}).clientX=un.screenX,ve.clientY=un.screenY}if(l.rail.drag={x:ve.clientX,y:ve.clientY,sx:l.scroll.x,sy:l.scroll.y,st:l.getScrollTop(),sl:l.getScrollLeft(),pt:2,dl:!1,tg:Nt},l.ispage||!ue.directionlockdeadzone)l.rail.drag.dl="f";else{var fr={w:ln.width(),h:ln.height()},rn=l.getContentSize();l.rail.drag.ck=l.rail.scrollable&&!l.railh.scrollable?rn.h-fr.h>0&&"v":!(l.rail.scrollable||!l.railh.scrollable)&&rn.w-fr.w>0&&"h"}if(ue.emulatetouch&&l.isiframe&&Ae.isie){var fn=l.win.position();l.rail.drag.x+=fn.left,l.rail.drag.y+=fn.top}if(l.hasmoving=!1,l.lastmouseup=!1,l.scrollmom.reset(ve.clientX,ve.clientY),Nt&&$t){if(!/INPUT|SELECT|BUTTON|TEXTAREA/i.test(Nt.nodeName))return Ae.hasmousecapture&&Nt.setCapture(),ue.emulatetouch?(Nt.onclick&&!Nt._onclick&&(Nt._onclick=Nt.onclick,Nt.onclick=function(Xt){if(l.hasmoving)return!1;Nt._onclick.call(this,Xt)}),l.cancelEvent(ve)):l.stopPropagation(ve);/SUBMIT|CANCEL|BUTTON/i.test(st(Nt).attr("type"))&&(l.preventclick={tg:Nt,click:!1})}}},l.ontouchend=function(ve){if(!l.rail.drag)return!0;if(2==l.rail.drag.pt){if(ve.pointerType&&("mouse"===ve.pointerType||ve.pointerType===ve.MSPOINTER_TYPE_MOUSE))return!1;l.rail.drag=!1;var Nt="mouseup"===ve.type;if(l.hasmoving&&(l.scrollmom.doMomentum(),l.lastmouseup=!0,l.hideCursor(),Ae.hasmousecapture&&Le.releaseCapture(),Nt))return l.cancelEvent(ve)}else if(1==l.rail.drag.pt)return l.onmouseup(ve)};var Zr=ue.emulatetouch&&l.isiframe&&!Ae.hasmousecapture,vn=.3*ue.directionlockdeadzone|0;l.ontouchmove=function(ve,Nt){if(!l.rail.drag||ve.targetTouches&&ue.preventmultitouchscrolling&&ve.targetTouches.length>1||ve.pointerType&&("mouse"===ve.pointerType||ve.pointerType===ve.MSPOINTER_TYPE_MOUSE))return!0;if(2==l.rail.drag.pt){var $t,un;if("changedTouches"in ve&&(ve.clientX=ve.changedTouches[0].clientX,ve.clientY=ve.changedTouches[0].clientY),un=$t=0,Zr&&!Nt){var fr=l.win.position();un=-fr.left,$t=-fr.top}var rn=ve.clientY+$t,qt=rn-l.rail.drag.y,ut=ve.clientX+un,fn=ut-l.rail.drag.x,Xt=l.rail.drag.st-qt;if(l.ishwscroll&&ue.bouncescroll)Xt<0?Xt=Math.round(Xt/2):Xt>l.page.maxh&&(Xt=l.page.maxh+Math.round((Xt-l.page.maxh)/2));else if(Xt<0?(Xt=0,rn=0):Xt>l.page.maxh&&(Xt=l.page.maxh,rn=0),0===rn&&!l.hasmoving)return l.ispage||(l.rail.drag=!1),!0;var In=l.getScrollLeft();if(l.railh&&l.railh.scrollable&&(In=l.isrtlmode?fn-l.rail.drag.sl:l.rail.drag.sl-fn,l.ishwscroll&&ue.bouncescroll?In<0?In=Math.round(In/2):In>l.page.maxw&&(In=l.page.maxw+Math.round((In-l.page.maxw)/2)):(In<0&&(In=0,ut=0),In>l.page.maxw&&(In=l.page.maxw,ut=0))),!l.hasmoving){if(l.rail.drag.y===ve.clientY&&l.rail.drag.x===ve.clientX)return l.cancelEvent(ve);var to=Math.abs(qt),Or=Math.abs(fn),xr=ue.directionlockdeadzone;if(l.rail.drag.ck?"v"==l.rail.drag.ck?Or>xr&&to<=vn?l.rail.drag=!1:to>xr&&(l.rail.drag.dl="v"):"h"==l.rail.drag.ck&&(to>xr&&Or<=vn?l.rail.drag=!1:Or>xr&&(l.rail.drag.dl="h")):to>xr&&Or>xr?l.rail.drag.dl="f":to>xr?l.rail.drag.dl=Or>vn?"f":"v":Or>xr&&(l.rail.drag.dl=to>vn?"f":"h"),!l.rail.drag.dl)return l.cancelEvent(ve);l.triggerScrollStart(ve.clientX,ve.clientY,0,0,0),l.hasmoving=!0}return l.preventclick&&!l.preventclick.click&&(l.preventclick.click=l.preventclick.tg.onclick||!1,l.preventclick.tg.onclick=l.onpreventclick),l.rail.drag.dl&&("v"==l.rail.drag.dl?In=l.rail.drag.sl:"h"==l.rail.drag.dl&&(Xt=l.rail.drag.st)),l.synched("touchmove",function(){l.rail.drag&&2==l.rail.drag.pt&&(l.prepareTransition&&l.resetTransition(),l.rail.scrollable&&l.setScrollTop(Xt),l.scrollmom.update(ut,rn),l.railh&&l.railh.scrollable?(l.setScrollLeft(In),l.showCursor(Xt,In)):l.showCursor(Xt),Ae.isie10&&Le.selection.clear())}),l.cancelEvent(ve)}return 1==l.rail.drag.pt?l.onmousemove(ve):void 0},l.ontouchstartCursor=function(ve,Nt){if(!l.rail.drag||3==l.rail.drag.pt){if(l.locked)return l.cancelEvent(ve);l.cancelScroll(),l.rail.drag={x:ve.touches[0].clientX,y:ve.touches[0].clientY,sx:l.scroll.x,sy:l.scroll.y,pt:3,hr:!!Nt};var $t=l.getTarget(ve);return!l.ispage&&Ae.hasmousecapture&&$t.setCapture(),l.isiframe&&!Ae.hasmousecapture&&(l.saved.csspointerevents=l.doc.css("pointer-events"),l.css(l.doc,{"pointer-events":"none"})),l.cancelEvent(ve)}},l.ontouchendCursor=function(ve){if(l.rail.drag)return Ae.hasmousecapture&&Le.releaseCapture(),l.isiframe&&!Ae.hasmousecapture&&l.doc.css("pointer-events",l.saved.csspointerevents),3!=l.rail.drag.pt?void 0:(l.rail.drag=!1,l.cancelEvent(ve))},l.ontouchmoveCursor=function(ve){if(l.rail.drag){if(3!=l.rail.drag.pt)return;if(l.cursorfreezed=!0,l.rail.drag.hr){l.scroll.x=l.rail.drag.sx+(ve.touches[0].clientX-l.rail.drag.x),l.scroll.x<0&&(l.scroll.x=0);var Nt=l.scrollvaluemaxw;l.scroll.x>Nt&&(l.scroll.x=Nt)}else{l.scroll.y=l.rail.drag.sy+(ve.touches[0].clientY-l.rail.drag.y),l.scroll.y<0&&(l.scroll.y=0);var $t=l.scrollvaluemax;l.scroll.y>$t&&(l.scroll.y=$t)}return l.synched("touchmove",function(){l.rail.drag&&3==l.rail.drag.pt&&(l.showCursor(),l.rail.drag.hr?l.doScrollLeft(Math.round(l.scroll.x*l.scrollratio.x),ue.cursordragspeed):l.doScrollTop(Math.round(l.scroll.y*l.scrollratio.y),ue.cursordragspeed))}),l.cancelEvent(ve)}}}if(l.onmousedown=function(ve,Nt){if(!l.rail.drag||1==l.rail.drag.pt){if(l.railslocked)return l.cancelEvent(ve);l.cancelScroll(),l.rail.drag={x:ve.clientX,y:ve.clientY,sx:l.scroll.x,sy:l.scroll.y,pt:1,hr:Nt||!1};var $t=l.getTarget(ve);return Ae.hasmousecapture&&$t.setCapture(),l.isiframe&&!Ae.hasmousecapture&&(l.saved.csspointerevents=l.doc.css("pointer-events"),l.css(l.doc,{"pointer-events":"none"})),l.hasmoving=!1,l.cancelEvent(ve)}},l.onmouseup=function(ve){if(l.rail.drag)return 1!=l.rail.drag.pt||(Ae.hasmousecapture&&Le.releaseCapture(),l.isiframe&&!Ae.hasmousecapture&&l.doc.css("pointer-events",l.saved.csspointerevents),l.rail.drag=!1,l.cursorfreezed=!1,l.hasmoving&&l.triggerScrollEnd(),l.cancelEvent(ve))},l.onmousemove=function(ve){if(l.rail.drag){if(1!==l.rail.drag.pt)return;if(Ae.ischrome&&0===ve.which)return l.onmouseup(ve);if(l.cursorfreezed=!0,l.hasmoving||l.triggerScrollStart(ve.clientX,ve.clientY,0,0,0),l.hasmoving=!0,l.rail.drag.hr){l.scroll.x=l.rail.drag.sx+(ve.clientX-l.rail.drag.x),l.scroll.x<0&&(l.scroll.x=0);var Nt=l.scrollvaluemaxw;l.scroll.x>Nt&&(l.scroll.x=Nt)}else{l.scroll.y=l.rail.drag.sy+(ve.clientY-l.rail.drag.y),l.scroll.y<0&&(l.scroll.y=0);var $t=l.scrollvaluemax;l.scroll.y>$t&&(l.scroll.y=$t)}return l.synched("mousemove",function(){l.cursorfreezed&&(l.showCursor(),l.rail.drag.hr?l.scrollLeft(Math.round(l.scroll.x*l.scrollratio.x)):l.scrollTop(Math.round(l.scroll.y*l.scrollratio.y)))}),l.cancelEvent(ve)}l.checkarea=0},Ae.cantouch||ue.emulatetouch)l.onpreventclick=function(ve){if(l.preventclick)return l.preventclick.tg.onclick=l.preventclick.click,l.preventclick=!1,l.cancelEvent(ve)},l.onclick=!Ae.isios&&function(ve){return!l.lastmouseup||(l.lastmouseup=!1,l.cancelEvent(ve))},ue.grabcursorenabled&&Ae.cursorgrabvalue&&(l.css(l.ispage?l.doc:l.win,{cursor:Ae.cursorgrabvalue}),l.css(l.rail,{cursor:Ae.cursorgrabvalue}));else{var Kn=function(ve){if(l.selectiondrag){if(ve){var Nt=l.win.outerHeight(),$t=ve.pageY-l.selectiondrag.top;$t>0&&$t<Nt&&($t=0),$t>=Nt&&($t-=Nt),l.selectiondrag.df=$t}0!==l.selectiondrag.df&&(l.doScrollBy(-2*l.selectiondrag.df/6|0),l.debounced("doselectionscroll",function(){Kn()},50))}};l.hasTextSelected="getSelection"in Le?function(){return Le.getSelection().rangeCount>0}:"selection"in Le?function(){return"None"!=Le.selection.type}:function(){return!1},l.onselectionstart=function(ve){l.ispage||(l.selectiondrag=l.win.offset())},l.onselectionend=function(ve){l.selectiondrag=!1},l.onselectiondrag=function(ve){l.selectiondrag&&l.hasTextSelected()&&l.debounced("selectionscroll",function(){Kn(ve)},250)}}if(Ae.hasw3ctouch?(l.css(l.ispage?st("html"):l.win,{"touch-action":"none"}),l.css(l.rail,{"touch-action":"none"}),l.css(l.cursor,{"touch-action":"none"}),l.bind(l.win,"pointerdown",l.ontouchstart),l.bind(Le,"pointerup",l.ontouchend),l.delegate(Le,"pointermove",l.ontouchmove)):Ae.hasmstouch?(l.css(l.ispage?st("html"):l.win,{"-ms-touch-action":"none"}),l.css(l.rail,{"-ms-touch-action":"none"}),l.css(l.cursor,{"-ms-touch-action":"none"}),l.bind(l.win,"MSPointerDown",l.ontouchstart),l.bind(Le,"MSPointerUp",l.ontouchend),l.delegate(Le,"MSPointerMove",l.ontouchmove),l.bind(l.cursor,"MSGestureHold",function(ve){ve.preventDefault()}),l.bind(l.cursor,"contextmenu",function(ve){ve.preventDefault()})):Ae.cantouch&&(l.bind(l.win,"touchstart",l.ontouchstart,!1,!0),l.bind(Le,"touchend",l.ontouchend,!1,!0),l.bind(Le,"touchcancel",l.ontouchend,!1,!0),l.delegate(Le,"touchmove",l.ontouchmove,!1,!0)),ue.emulatetouch&&(l.bind(l.win,"mousedown",l.ontouchstart,!1,!0),l.bind(Le,"mouseup",l.ontouchend,!1,!0),l.bind(Le,"mousemove",l.ontouchmove,!1,!0)),(ue.cursordragontouch||!Ae.cantouch&&!ue.emulatetouch)&&(l.rail.css({cursor:"default"}),l.railh&&l.railh.css({cursor:"default"}),l.jqbind(l.rail,"mouseenter",function(){if(!l.ispage&&!l.win.is(":visible"))return!1;l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.rail,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}),ue.sensitiverail&&(l.bind(l.rail,"click",function(ve){l.doRailClick(ve,!1,!1)}),l.bind(l.rail,"dblclick",function(ve){l.doRailClick(ve,!0,!1)}),l.bind(l.cursor,"click",function(ve){l.cancelEvent(ve)}),l.bind(l.cursor,"dblclick",function(ve){l.cancelEvent(ve)})),l.railh&&(l.jqbind(l.railh,"mouseenter",function(){if(!l.ispage&&!l.win.is(":visible"))return!1;l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.railh,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}),ue.sensitiverail&&(l.bind(l.railh,"click",function(ve){l.doRailClick(ve,!1,!0)}),l.bind(l.railh,"dblclick",function(ve){l.doRailClick(ve,!0,!0)}),l.bind(l.cursorh,"click",function(ve){l.cancelEvent(ve)}),l.bind(l.cursorh,"dblclick",function(ve){l.cancelEvent(ve)})))),ue.cursordragontouch&&(this.istouchcapable||Ae.cantouch)&&(l.bind(l.cursor,"touchstart",l.ontouchstartCursor),l.bind(l.cursor,"touchmove",l.ontouchmoveCursor),l.bind(l.cursor,"touchend",l.ontouchendCursor),l.cursorh&&l.bind(l.cursorh,"touchstart",function(ve){l.ontouchstartCursor(ve,!0)}),l.cursorh&&l.bind(l.cursorh,"touchmove",l.ontouchmoveCursor),l.cursorh&&l.bind(l.cursorh,"touchend",l.ontouchendCursor)),ue.emulatetouch||Ae.isandroid||Ae.isios?(l.bind(Ae.hasmousecapture?l.win:Le,"mouseup",l.ontouchend),l.onclick&&l.bind(Le,"click",l.onclick),ue.cursordragontouch?(l.bind(l.cursor,"mousedown",l.onmousedown),l.bind(l.cursor,"mouseup",l.onmouseup),l.cursorh&&l.bind(l.cursorh,"mousedown",function(ve){l.onmousedown(ve,!0)}),l.cursorh&&l.bind(l.cursorh,"mouseup",l.onmouseup)):(l.bind(l.rail,"mousedown",function(ve){ve.preventDefault()}),l.railh&&l.bind(l.railh,"mousedown",function(ve){ve.preventDefault()}))):(l.bind(Ae.hasmousecapture?l.win:Le,"mouseup",l.onmouseup),l.bind(Le,"mousemove",l.onmousemove),l.onclick&&l.bind(Le,"click",l.onclick),l.bind(l.cursor,"mousedown",l.onmousedown),l.bind(l.cursor,"mouseup",l.onmouseup),l.railh&&(l.bind(l.cursorh,"mousedown",function(ve){l.onmousedown(ve,!0)}),l.bind(l.cursorh,"mouseup",l.onmouseup)),!l.ispage&&ue.enablescrollonselection&&(l.bind(l.win[0],"mousedown",l.onselectionstart),l.bind(Le,"mouseup",l.onselectionend),l.bind(l.cursor,"mouseup",l.onselectionend),l.cursorh&&l.bind(l.cursorh,"mouseup",l.onselectionend),l.bind(Le,"mousemove",l.onselectiondrag)),l.zoom&&(l.jqbind(l.zoom,"mouseenter",function(){l.canshowonmouseevent&&l.showCursor(),l.rail.active=!0}),l.jqbind(l.zoom,"mouseleave",function(){l.rail.active=!1,l.rail.drag||l.hideCursor()}))),ue.enablemousewheel&&(l.isiframe||l.mousewheel(Ae.isie&&l.ispage?Le:l.win,l.onmousewheel),l.mousewheel(l.rail,l.onmousewheel),l.railh&&l.mousewheel(l.railh,l.onmousewheelhr)),l.ispage||Ae.cantouch||/HTML|^BODY/.test(l.win[0].nodeName)||(l.win.attr("tabindex")||l.win.attr({tabindex:++gn}),l.bind(l.win,"focus",function(ve){At=l.getTarget(ve).id||l.getTarget(ve)||!1,l.hasfocus=!0,l.canshowonmouseevent&&l.noticeCursor()}),l.bind(l.win,"blur",function(ve){At=!1,l.hasfocus=!1}),l.bind(l.win,"mouseenter",function(ve){en=l.getTarget(ve).id||l.getTarget(ve)||!1,l.hasmousefocus=!0,l.canshowonmouseevent&&l.noticeCursor()}),l.bind(l.win,"mouseleave",function(ve){en=!1,l.hasmousefocus=!1,l.rail.drag||l.hideCursor()})),l.onkeypress=function(ve){if(l.railslocked&&0===l.page.maxh)return!0;var Nt=l.getTarget(ve=ve||xt.event);if(Nt&&/INPUT|TEXTAREA|SELECT|OPTION/.test(Nt.nodeName)&&(!Nt.getAttribute("type")&&!Nt.type||!/submit|button|cancel/i.tp)||st(Nt).attr("contenteditable"))return!0;if(l.hasfocus||l.hasmousefocus&&!At||l.ispage&&!At&&!en){var $t=ve.keyCode;if(l.railslocked&&27!=$t)return l.cancelEvent(ve);var un=ve.ctrlKey||!1,fr=ve.shiftKey||!1,rn=!1;switch($t){case 38:case 63233:l.doScrollBy(72),rn=!0;break;case 40:case 63235:l.doScrollBy(-72),rn=!0;break;case 37:case 63232:l.railh&&(un?l.doScrollLeft(0):l.doScrollLeftBy(72),rn=!0);break;case 39:case 63234:l.railh&&(un?l.doScrollLeft(l.page.maxw):l.doScrollLeftBy(-72),rn=!0);break;case 33:case 63276:l.doScrollBy(l.view.h),rn=!0;break;case 34:case 63277:l.doScrollBy(-l.view.h),rn=!0;break;case 36:case 63273:l.railh&&un?l.doScrollPos(0,0):l.doScrollTo(0),rn=!0;break;case 35:case 63275:l.railh&&un?l.doScrollPos(l.page.maxw,l.page.maxh):l.doScrollTo(l.page.maxh),rn=!0;break;case 32:ue.spacebarenabled&&(l.doScrollBy(fr?l.view.h:-l.view.h),rn=!0);break;case 27:l.zoomactive&&(l.doZoom(),rn=!0)}if(rn)return l.cancelEvent(ve)}},ue.enablekeyboard&&l.bind(Le,Ae.isopera&&!Ae.isopera12?"keypress":"keydown",l.onkeypress),l.bind(Le,"keydown",function(ve){ve.ctrlKey&&(l.wheelprevented=!0)}),l.bind(Le,"keyup",function(ve){ve.ctrlKey||(l.wheelprevented=!1)}),l.bind(xt,"blur",function(ve){l.wheelprevented=!1}),l.bind(xt,"resize",l.onscreenresize),l.bind(xt,"orientationchange",l.onscreenresize),l.bind(xt,"load",l.lazyResize),Ae.ischrome&&!l.ispage&&!l.haswrapper){var _n=l.win.attr("style"),jo=parseFloat(l.win.css("width"))+1;l.win.css("width",jo),l.synched("chromefix",function(){l.win.attr("style",_n)})}if(l.onAttributeChange=function(ve){l.lazyResize(l.isieold?250:30)},ue.enableobserver&&(l.isie11||!1===ae||(l.observerbody=new ae(function(ve){if(ve.forEach(function(Nt){if("attributes"==Nt.type)return ct.hasClass("modal-open")&&ct.hasClass("modal-dialog")&&!st.contains(st(".modal-dialog")[0],l.doc[0])?l.hide():l.show()}),l.me.clientWidth!=l.page.width||l.me.clientHeight!=l.page.height)return l.lazyResize(30)}),l.observerbody.observe(Le.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),!l.ispage&&!l.haswrapper)){var Ft=l.win[0];!1!==ae?(l.observer=new ae(function(ve){ve.forEach(l.onAttributeChange)}),l.observer.observe(Ft,{childList:!0,characterData:!1,attributes:!0,subtree:!1}),l.observerremover=new ae(function(ve){ve.forEach(function(Nt){if(Nt.removedNodes.length>0)for(var $t in Nt.removedNodes)if(l&&Nt.removedNodes[$t]===Ft)return l.remove()})}),l.observerremover.observe(Ft.parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(l.bind(Ft,Ae.isie&&!Ae.isie9?"propertychange":"DOMAttrModified",l.onAttributeChange),Ae.isie9&&Ft.attachEvent("onpropertychange",l.onAttributeChange),l.bind(Ft,"DOMNodeRemoved",function(ve){ve.target===Ft&&l.remove()}))}!l.ispage&&ue.boxzoom&&l.bind(xt,"resize",l.resizeZoom),l.istextarea&&(l.bind(l.win,"keydown",l.lazyResize),l.bind(l.win,"mouseup",l.lazyResize)),l.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var eo=function(){var ve;l.iframexd=!1;try{ve="contentDocument"in this?this.contentDocument:this.contentWindow._doc}catch{l.iframexd=!0,ve=!1}if(l.iframexd)return"console"in xt&&console.log("NiceScroll error: policy restriced iframe"),!0;if(l.forcescreen=!0,l.isiframe&&(l.iframe={doc:st(ve),html:l.doc.contents().find("html")[0],body:l.doc.contents().find("body")[0]},l.getContentSize=function(){return{w:Math.max(l.iframe.html.scrollWidth,l.iframe.body.scrollWidth),h:Math.max(l.iframe.html.scrollHeight,l.iframe.body.scrollHeight)}},l.docscroll=st(l.iframe.body)),!Ae.isios&&ue.iframeautoresize&&!l.isiframe){l.win.scrollTop(0),l.doc.height("");var Nt=Math.max(ve.getElementsByTagName("html")[0].scrollHeight,ve.body.scrollHeight);l.doc.height(Nt)}l.lazyResize(30),l.css(st(l.iframe.body),U),Ae.isios&&l.haswrapper&&l.css(st(ve.body),{"-webkit-transform":"translate3d(0,0,0)"}),l.bind("contentWindow"in this?this.contentWindow:ve,"scroll",l.onscroll),ue.enablemousewheel&&l.mousewheel(ve,l.onmousewheel),ue.enablekeyboard&&l.bind(ve,Ae.isopera?"keypress":"keydown",l.onkeypress),Ae.cantouch?(l.bind(ve,"touchstart",l.ontouchstart),l.bind(ve,"touchmove",l.ontouchmove)):ue.emulatetouch&&(l.bind(ve,"mousedown",l.ontouchstart),l.bind(ve,"mousemove",function($t){return l.ontouchmove($t,!0)}),ue.grabcursorenabled&&Ae.cursorgrabvalue&&l.css(st(ve.body),{cursor:Ae.cursorgrabvalue})),l.bind(ve,"mouseup",l.ontouchend),l.zoom&&(ue.dblclickzoom&&l.bind(ve,"dblclick",l.doZoom),l.ongesturezoom&&l.bind(ve,"gestureend",l.ongesturezoom))};this.doc[0].readyState&&"complete"===this.doc[0].readyState&&setTimeout(function(){eo.call(l.doc[0],!1)},500),l.bind(this.doc,"load",eo)}},this.showCursor=function(U,Z){if(l.cursortimeout&&(clearTimeout(l.cursortimeout),l.cursortimeout=0),l.rail){if(l.autohidedom&&(l.autohidedom.stop().css({opacity:ue.cursoropacitymax}),l.cursoractive=!0),l.rail.drag&&1==l.rail.drag.pt||(void 0!==U&&!1!==U&&(l.scroll.y=U/l.scrollratio.y|0),void 0!==Z&&(l.scroll.x=Z/l.scrollratio.x|0)),l.cursor.css({height:l.cursorheight,top:l.scroll.y}),l.cursorh){var Ee=l.hasreversehr?l.scrollvaluemaxw-l.scroll.x:l.scroll.x;l.cursorh.css({width:l.cursorwidth,left:!l.rail.align&&l.rail.visibility?Ee+l.rail.width:Ee}),l.cursoractive=!0}l.zoom&&l.zoom.stop().css({opacity:ue.cursoropacitymax})}},this.hideCursor=function(U){l.cursortimeout||l.rail&&l.autohidedom&&(l.hasmousefocus&&"leave"===ue.autohidemode||(l.cursortimeout=setTimeout(function(){l.rail.active&&l.showonmouseevent||(l.autohidedom.stop().animate({opacity:ue.cursoropacitymin}),l.zoom&&l.zoom.stop().animate({opacity:ue.cursoropacitymin}),l.cursoractive=!1),l.cursortimeout=0},U||ue.hidecursordelay)))},this.noticeCursor=function(U,Z,Ee){l.showCursor(Z,Ee),l.rail.active||l.hideCursor(U)},this.getContentSize=l.ispage?function(){return{w:Math.max(Le.body.scrollWidth,Le.documentElement.scrollWidth),h:Math.max(Le.body.scrollHeight,Le.documentElement.scrollHeight)}}:l.haswrapper?function(){return{w:l.doc[0].offsetWidth,h:l.doc[0].offsetHeight}}:function(){return{w:l.docscroll[0].scrollWidth,h:l.docscroll[0].scrollHeight}},this.onResize=function(U,Z){if(!l||!l.win)return!1;var Ee=l.page.maxh,qe=l.page.maxw,We=l.view.h,tt=l.view.w;if(l.view={w:l.ispage?l.win.width():l.win[0].clientWidth,h:l.ispage?l.win.height():l.win[0].clientHeight},l.page=Z||l.getContentSize(),l.page.maxh=Math.max(0,l.page.h-l.view.h),l.page.maxw=Math.max(0,l.page.w-l.view.w),l.page.maxh==Ee&&l.page.maxw==qe&&l.view.w==tt&&l.view.h==We){if(l.ispage)return l;var Pt=l.win.offset();if(l.lastposition){var Ze=l.lastposition;if(Ze.top==Pt.top&&Ze.left==Pt.left)return l}l.lastposition=Pt}return 0===l.page.maxh?(l.hideRail(),l.scrollvaluemax=0,l.scroll.y=0,l.scrollratio.y=0,l.cursorheight=0,l.setScrollTop(0),l.rail&&(l.rail.scrollable=!1)):(l.page.maxh-=ue.railpadding.top+ue.railpadding.bottom,l.rail.scrollable=!0),0===l.page.maxw?(l.hideRailHr(),l.scrollvaluemaxw=0,l.scroll.x=0,l.scrollratio.x=0,l.cursorwidth=0,l.setScrollLeft(0),l.railh&&(l.railh.scrollable=!1)):(l.page.maxw-=ue.railpadding.left+ue.railpadding.right,l.railh&&(l.railh.scrollable=ue.horizrailenabled)),l.railslocked=l.locked||0===l.page.maxh&&0===l.page.maxw,l.railslocked?(l.ispage||l.updateScrollBar(l.view),!1):(l.hidden||(l.rail.visibility||l.showRail(),l.railh&&!l.railh.visibility&&l.showRailHr()),l.istextarea&&l.win.css("resize")&&"none"!=l.win.css("resize")&&(l.view.h-=20),l.cursorheight=Math.min(l.view.h,Math.round(l.view.h*(l.view.h/l.page.h))),l.cursorheight=ue.cursorfixedheight?ue.cursorfixedheight:Math.max(ue.cursorminheight,l.cursorheight),l.cursorwidth=Math.min(l.view.w,Math.round(l.view.w*(l.view.w/l.page.w))),l.cursorwidth=ue.cursorfixedheight?ue.cursorfixedheight:Math.max(ue.cursorminheight,l.cursorwidth),l.scrollvaluemax=l.view.h-l.cursorheight-(ue.railpadding.top+ue.railpadding.bottom),l.hasborderbox||(l.scrollvaluemax-=l.cursor[0].offsetHeight-l.cursor[0].clientHeight),l.railh&&(l.railh.width=l.page.maxh>0?l.view.w-l.rail.width:l.view.w,l.scrollvaluemaxw=l.railh.width-l.cursorwidth-(ue.railpadding.left+ue.railpadding.right)),l.ispage||l.updateScrollBar(l.view),l.scrollratio={x:l.page.maxw/l.scrollvaluemaxw,y:l.page.maxh/l.scrollvaluemax},l.getScrollTop()>l.page.maxh?l.doScrollTop(l.page.maxh):(l.scroll.y=l.getScrollTop()/l.scrollratio.y|0,l.scroll.x=l.getScrollLeft()/l.scrollratio.x|0,l.cursoractive&&l.noticeCursor()),l.scroll.y&&0===l.getScrollTop()&&l.doScrollTo(l.scroll.y*l.scrollratio.y|0),l)},this.resize=l.onResize;var Oe=0;this.onscreenresize=function(U){clearTimeout(Oe);var Z=!l.ispage&&!l.haswrapper;Z&&l.hideRails(),Oe=setTimeout(function(){l&&(Z&&l.showRails(),l.resize()),Oe=0},120)},this.lazyResize=function(U){return clearTimeout(Oe),U=isNaN(U)?240:U,Oe=setTimeout(function(){l&&l.resize(),Oe=0},U),l},this.jqbind=function(U,Z,Ee){l.events.push({e:U,n:Z,f:Ee,q:!0}),st(U).on(Z,Ee)},this.mousewheel=function(U,Z,Ee){var qe="jquery"in U?U[0]:U;if("onwheel"in Le.createElement("div"))l._bind(qe,"wheel",Z,Ee||!1);else{var We=void 0!==Le.onmousewheel?"mousewheel":"DOMMouseScroll";Ce(qe,We,Z,Ee||!1),"DOMMouseScroll"==We&&Ce(qe,"MozMousePixelScroll",Z,Ee||!1)}};var Ht=!1;if(Ae.haseventlistener){try{var pt=Object.defineProperty({},"passive",{get:function(){Ht=!0}});xt.addEventListener("test",null,pt)}catch{}this.stopPropagation=function(U){return!!U&&((U=U.original?U.original:U).stopPropagation(),!1)},this.cancelEvent=function(U){return U.cancelable&&U.preventDefault(),U.stopImmediatePropagation(),U.preventManipulation&&U.preventManipulation(),!1}}else Event.prototype.preventDefault=function(){this.returnValue=!1},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},xt.constructor.prototype.addEventListener=Le.constructor.prototype.addEventListener=Element.prototype.addEventListener=function(U,Z,Ee){this.attachEvent("on"+U,Z)},xt.constructor.prototype.removeEventListener=Le.constructor.prototype.removeEventListener=Element.prototype.removeEventListener=function(U,Z,Ee){this.detachEvent("on"+U,Z)},this.cancelEvent=function(U){return(U=U||xt.event)&&(U.cancelBubble=!0,U.cancel=!0,U.returnValue=!1),!1},this.stopPropagation=function(U){return(U=U||xt.event)&&(U.cancelBubble=!0),!1};this.delegate=function(U,Z,Ee,qe,We){var tt=dn[Z]||!1;tt||(l.bind(U,Z,(tt={a:[],l:[],f:function(Pt){for(var Ze=tt.l,Vt=!1,Mt=Ze.length-1;Mt>=0;Mt--)if(!1===(Vt=Ze[Mt].call(Pt.target,Pt)))return!1;return Vt}}).f,qe,We),dn[Z]=tt),l.ispage?(tt.a=[l.id].concat(tt.a),tt.l=[Ee].concat(tt.l)):(tt.a.push(l.id),tt.l.push(Ee))},this.undelegate=function(U,Z,Ee,qe,We){var tt=dn[Z]||!1;if(tt&&tt.l)for(var Pt=0,Ze=tt.l.length;Pt<Ze;Pt++)tt.a[Pt]===l.id&&(tt.a.splice(Pt),tt.l.splice(Pt),0===tt.a.length&&(l._unbind(U,Z,tt.l.f),dn[Z]=null))},this.bind=function(U,Z,Ee,qe,We){l._bind("jquery"in U?U[0]:U,Z,Ee,qe||!1,We||!1)},this._bind=function(U,Z,Ee,qe,We){l.events.push({e:U,n:Z,f:Ee,b:qe,q:!1}),U.addEventListener(Z,Ee,Ht&&We?{passive:!1,capture:qe}:qe||!1)},this._unbind=function(U,Z,Ee,qe){dn[Z]?l.undelegate(U,Z,Ee,qe):U.removeEventListener(Z,Ee,qe)},this.unbindAll=function(){for(var U=0;U<l.events.length;U++){var Z=l.events[U];Z.q?Z.e.unbind(Z.n,Z.f):l._unbind(Z.e,Z.n,Z.f,Z.b)}},this.showRails=function(){return l.showRail().showRailHr()},this.showRail=function(){return 0===l.page.maxh||!l.ispage&&"none"==l.win.css("display")||(l.rail.visibility=!0,l.rail.css("display","block")),l},this.showRailHr=function(){return l.railh&&(0===l.page.maxw||!l.ispage&&"none"==l.win.css("display")||(l.railh.visibility=!0,l.railh.css("display","block"))),l},this.hideRails=function(){return l.hideRail().hideRailHr()},this.hideRail=function(){return l.rail.visibility=!1,l.rail.css("display","none"),l},this.hideRailHr=function(){return l.railh&&(l.railh.visibility=!1,l.railh.css("display","none")),l},this.show=function(){return l.hidden=!1,l.railslocked=!1,l.showRails()},this.hide=function(){return l.hidden=!0,l.railslocked=!0,l.hideRails()},this.toggle=function(){return l.hidden?l.show():l.hide()},this.remove=function(){for(var U in l.stop(),l.cursortimeout&&clearTimeout(l.cursortimeout),l.delaylist)l.delaylist[U]&&W(l.delaylist[U].h);l.doZoomOut(),l.unbindAll(),Ae.isie9&&l.win[0].detachEvent("onpropertychange",l.onAttributeChange),!1!==l.observer&&l.observer.disconnect(),!1!==l.observerremover&&l.observerremover.disconnect(),!1!==l.observerbody&&l.observerbody.disconnect(),l.events=null,l.cursor&&l.cursor.remove(),l.cursorh&&l.cursorh.remove(),l.rail&&l.rail.remove(),l.railh&&l.railh.remove(),l.zoom&&l.zoom.remove();for(var Z=0;Z<l.saved.css.length;Z++){var Ee=l.saved.css[Z];Ee[0].css(Ee[1],void 0===Ee[2]?"":Ee[2])}l.saved=!1,l.me.data("__nicescroll","");var qe=st.nicescroll;for(var We in qe.each(function(tt){if(this&&this.id===l.id){delete qe[tt];for(var Pt=++tt;Pt<qe.length;Pt++,tt++)qe[tt]=qe[Pt];--qe.length&&delete qe[qe.length]}}),l)l[We]=null,delete l[We];l=null},this.scrollstart=function(U){return this.onscrollstart=U,l},this.scrollend=function(U){return this.onscrollend=U,l},this.scrollcancel=function(U){return this.onscrollcancel=U,l},this.zoomin=function(U){return this.onzoomin=U,l},this.zoomout=function(U){return this.onzoomout=U,l},this.isScrollable=function(U){var Z=U.target?U.target:U;if("OPTION"==Z.nodeName)return!0;for(;Z&&1==Z.nodeType&&Z!==this.me[0]&&!/^BODY|HTML/.test(Z.nodeName);){var Ee=st(Z),qe=Ee.css("overflowY")||Ee.css("overflowX")||Ee.css("overflow")||"";if(/scroll|auto/.test(qe))return Z.clientHeight!=Z.scrollHeight;Z=!!Z.parentNode&&Z.parentNode}return!1},this.getViewport=function(U){for(var Z=!(!U||!U.parentNode)&&U.parentNode;Z&&1==Z.nodeType&&!/^BODY|HTML/.test(Z.nodeName);){var Ee=st(Z);if(/fixed|absolute/.test(Ee.css("position")))return Ee;var qe=Ee.css("overflowY")||Ee.css("overflowX")||Ee.css("overflow")||"";if(/scroll|auto/.test(qe)&&Z.clientHeight!=Z.scrollHeight||Ee.getNiceScroll().length>0)return Ee;Z=!!Z.parentNode&&Z.parentNode}return!1},this.triggerScrollStart=function(U,Z,Ee,qe,We){l.onscrollstart&&l.onscrollstart.call(l,{type:"scrollstart",current:{x:U,y:Z},request:{x:Ee,y:qe},end:{x:l.newscrollx,y:l.newscrolly},speed:We})},this.triggerScrollEnd=function(){if(l.onscrollend){var U=l.getScrollLeft(),Z=l.getScrollTop();l.onscrollend.call(l,{type:"scrollend",current:{x:U,y:Z},end:{x:U,y:Z}})}};var ke=0,Ct=0,er=0,ot=1,Mn=!1;if(this.onmousewheel=function(U){if(l.wheelprevented||l.locked)return!1;if(l.railslocked)return l.debounced("checkunlock",l.resize,250),!1;if(l.rail.drag)return l.cancelEvent(U);if("auto"===ue.oneaxismousemode&&0!==U.deltaX&&(ue.oneaxismousemode=!1),ue.oneaxismousemode&&0===U.deltaX&&!l.rail.scrollable)return!l.railh||!l.railh.scrollable||l.onmousewheelhr(U);var Z=u(),Ee=!1;if(ue.preservenativescrolling&&l.checkarea+600<Z&&(l.nativescrollingarea=l.isScrollable(U),Ee=!0),l.checkarea=Z,l.nativescrollingarea)return!0;var qe=kt(U,!1,Ee);return qe&&(l.checkarea=0),qe},this.onmousewheelhr=function(U){if(!l.wheelprevented){if(l.railslocked||!l.railh.scrollable)return!0;if(l.rail.drag)return l.cancelEvent(U);var Z=u(),Ee=!1;return ue.preservenativescrolling&&l.checkarea+600<Z&&(l.nativescrollingarea=l.isScrollable(U),Ee=!0),l.checkarea=Z,!!l.nativescrollingarea||(l.railslocked?l.cancelEvent(U):kt(U,!0,Ee))}},this.stop=function(){return l.cancelScroll(),l.scrollmon&&l.scrollmon.stop(),l.cursorfreezed=!1,l.scroll.y=Math.round(l.getScrollTop()*(1/l.scrollratio.y)),l.noticeCursor(),l},this.getTransitionSpeed=function(U){return 80+U/72*ue.scrollspeed|0},ue.smoothscroll)if(l.ishwscroll&&Ae.hastransition&&ue.usetransition&&ue.smoothscroll){var et="";this.resetTransition=function(){et="",l.doc.css(Ae.prefixstyle+"transition-duration","0ms")},this.prepareTransition=function(U,Z){var Ee=Z?U:l.getTransitionSpeed(U),qe=Ee+"ms";return et!==qe&&(et=qe,l.doc.css(Ae.prefixstyle+"transition-duration",qe)),Ee},this.doScrollLeft=function(U,Z){var Ee=l.scrollrunning?l.newscrolly:l.getScrollTop();l.doScrollPos(U,Ee,Z)},this.doScrollTop=function(U,Z){var Ee=l.scrollrunning?l.newscrollx:l.getScrollLeft();l.doScrollPos(Ee,U,Z)},this.cursorupdate={running:!1,start:function(){var U=this;if(!U.running){U.running=!0;var Z=function(){U.running&&H(Z),l.showCursor(l.getScrollTop(),l.getScrollLeft()),l.notifyScrollEvent(l.win[0])};H(Z)}},stop:function(){this.running=!1}},this.doScrollPos=function(U,Z,Ee){var qe=l.getScrollTop(),We=l.getScrollLeft();if(((l.newscrolly-qe)*(Z-qe)<0||(l.newscrollx-We)*(U-We)<0)&&l.cancelScroll(),ue.bouncescroll?(Z<0?Z=Z/2|0:Z>l.page.maxh&&(Z=l.page.maxh+(Z-l.page.maxh)/2|0),U<0?U=U/2|0:U>l.page.maxw&&(U=l.page.maxw+(U-l.page.maxw)/2|0)):(Z<0?Z=0:Z>l.page.maxh&&(Z=l.page.maxh),U<0?U=0:U>l.page.maxw&&(U=l.page.maxw)),l.scrollrunning&&U==l.newscrollx&&Z==l.newscrolly)return!1;l.newscrolly=Z,l.newscrollx=U;var tt=l.getScrollTop(),Pt=l.getScrollLeft(),Ze={};Ze.x=U-Pt,Ze.y=Z-tt;var Vt=0|Math.sqrt(Ze.x*Ze.x+Ze.y*Ze.y),Mt=l.prepareTransition(Vt);l.scrollrunning||(l.scrollrunning=!0,l.triggerScrollStart(Pt,tt,U,Z,Mt),l.cursorupdate.start()),l.scrollendtrapped=!0,Ae.transitionend||(l.scrollendtrapped&&clearTimeout(l.scrollendtrapped),l.scrollendtrapped=setTimeout(l.onScrollTransitionEnd,Mt)),l.setScrollTop(l.newscrolly),l.setScrollLeft(l.newscrollx)},this.cancelScroll=function(){if(!l.scrollendtrapped)return!0;var U=l.getScrollTop(),Z=l.getScrollLeft();return l.scrollrunning=!1,Ae.transitionend||clearTimeout(Ae.transitionend),l.scrollendtrapped=!1,l.resetTransition(),l.setScrollTop(U),l.railh&&l.setScrollLeft(Z),l.timerscroll&&l.timerscroll.tm&&clearInterval(l.timerscroll.tm),l.timerscroll=!1,l.cursorfreezed=!1,l.cursorupdate.stop(),l.showCursor(U,Z),l},this.onScrollTransitionEnd=function(){if(l.scrollendtrapped){var U=l.getScrollTop(),Z=l.getScrollLeft();if(U<0?U=0:U>l.page.maxh&&(U=l.page.maxh),Z<0?Z=0:Z>l.page.maxw&&(Z=l.page.maxw),U!=l.newscrolly||Z!=l.newscrollx)return l.doScrollPos(Z,U,ue.snapbackspeed);l.scrollrunning&&l.triggerScrollEnd(),l.scrollrunning=!1,l.scrollendtrapped=!1,l.resetTransition(),l.timerscroll=!1,l.setScrollTop(U),l.railh&&l.setScrollLeft(Z),l.cursorupdate.stop(),l.noticeCursor(!1,U,Z),l.cursorfreezed=!1}}}else this.doScrollLeft=function(U,Z){var Ee=l.scrollrunning?l.newscrolly:l.getScrollTop();l.doScrollPos(U,Ee,Z)},this.doScrollTop=function(U,Z){var Ee=l.scrollrunning?l.newscrollx:l.getScrollLeft();l.doScrollPos(Ee,U,Z)},this.doScrollPos=function(U,Z,Ee){var qe=l.getScrollTop(),We=l.getScrollLeft();((l.newscrolly-qe)*(Z-qe)<0||(l.newscrollx-We)*(U-We)<0)&&l.cancelScroll();var tt=!1;if(l.bouncescroll&&l.rail.visibility||(Z<0?(Z=0,tt=!0):Z>l.page.maxh&&(Z=l.page.maxh,tt=!0)),l.bouncescroll&&l.railh.visibility||(U<0?(U=0,tt=!0):U>l.page.maxw&&(U=l.page.maxw,tt=!0)),l.scrollrunning&&l.newscrolly===Z&&l.newscrollx===U)return!0;l.newscrolly=Z,l.newscrollx=U,l.dst={},l.dst.x=U-We,l.dst.y=Z-qe,l.dst.px=We,l.dst.py=qe;var Pt=0|Math.sqrt(l.dst.x*l.dst.x+l.dst.y*l.dst.y),Ze=l.getTransitionSpeed(Pt);l.bzscroll={};var Vt=tt?1:.58;l.bzscroll.x=new Wt(We,l.newscrollx,Ze,0,0,Vt,1),l.bzscroll.y=new Wt(qe,l.newscrolly,Ze,0,0,Vt,1),u();var Mt=function(){if(l.scrollrunning){var Mr=l.bzscroll.y.getPos();l.setScrollLeft(l.bzscroll.x.getNow()),l.setScrollTop(l.bzscroll.y.getNow()),Mr<=1?l.timer=H(Mt):(l.scrollrunning=!1,l.timer=0,l.triggerScrollEnd())}};l.scrollrunning||(l.triggerScrollStart(We,qe,U,Z,Ze),l.scrollrunning=!0,l.timer=H(Mt))},this.cancelScroll=function(){return l.timer&&W(l.timer),l.timer=0,l.bzscroll=!1,l.scrollrunning=!1,l};else this.doScrollLeft=function(U,Z){var Ee=l.getScrollTop();l.doScrollPos(U,Ee,Z)},this.doScrollTop=function(U,Z){var Ee=l.getScrollLeft();l.doScrollPos(Ee,U,Z)},this.doScrollPos=function(U,Z,Ee){var qe=U>l.page.maxw?l.page.maxw:U;qe<0&&(qe=0);var We=Z>l.page.maxh?l.page.maxh:Z;We<0&&(We=0),l.synched("scroll",function(){l.setScrollTop(We),l.setScrollLeft(qe)})},this.cancelScroll=function(){};this.doScrollBy=function(U,Z){ge(0,U)},this.doScrollLeftBy=function(U,Z){ge(U,0)},this.doScrollTo=function(U,Z){var Ee=Z?Math.round(U*l.scrollratio.y):U;Ee<0?Ee=0:Ee>l.page.maxh&&(Ee=l.page.maxh),l.cursorfreezed=!1,l.doScrollTop(U)},this.checkContentSize=function(){var U=l.getContentSize();U.h==l.page.h&&U.w==l.page.w||l.resize(!1,U)},l.onscroll=function(U){l.rail.drag||l.cursorfreezed||l.synched("scroll",function(){l.scroll.y=Math.round(l.getScrollTop()/l.scrollratio.y),l.railh&&(l.scroll.x=Math.round(l.getScrollLeft()/l.scrollratio.x)),l.noticeCursor()})},l.bind(l.docscroll,"scroll",l.onscroll),this.doZoomIn=function(U){if(!l.zoomactive){l.zoomactive=!0,l.zoomrestore={style:{}};var Z=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],Ee=l.win[0].style;for(var qe in Z){var We=Z[qe];l.zoomrestore.style[We]=void 0!==Ee[We]?Ee[We]:""}l.zoomrestore.style.width=l.win.css("width"),l.zoomrestore.style.height=l.win.css("height"),l.zoomrestore.padding={w:l.win.outerWidth()-l.win.width(),h:l.win.outerHeight()-l.win.height()},Ae.isios4&&(l.zoomrestore.scrollTop=ln.scrollTop(),ln.scrollTop(0)),l.win.css({position:Ae.isios4?"absolute":"fixed",top:0,left:0,zIndex:mn+100,margin:0});var tt=l.win.css("backgroundColor");return(""===tt||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(tt))&&l.win.css("backgroundColor","#fff"),l.rail.css({zIndex:mn+101}),l.zoom.css({zIndex:mn+102}),l.zoom.css("backgroundPosition","0 -18px"),l.resizeZoom(),l.onzoomin&&l.onzoomin.call(l),l.cancelEvent(U)}},this.doZoomOut=function(U){if(l.zoomactive)return l.zoomactive=!1,l.win.css("margin",""),l.win.css(l.zoomrestore.style),Ae.isios4&&ln.scrollTop(l.zoomrestore.scrollTop),l.rail.css({"z-index":l.zindex}),l.zoom.css({"z-index":l.zindex}),l.zoomrestore=!1,l.zoom.css("backgroundPosition","0 0"),l.onResize(),l.onzoomout&&l.onzoomout.call(l),l.cancelEvent(U)},this.doZoom=function(U){return l.zoomactive?l.doZoomOut(U):l.doZoomIn(U)},this.resizeZoom=function(){if(l.zoomactive){var U=l.getScrollTop();l.win.css({width:ln.width()-l.zoomrestore.padding.w+"px",height:ln.height()-l.zoomrestore.padding.h+"px"}),l.onResize(),l.setScrollTop(Math.min(l.page.maxh,U))}},this.init(),st.nicescroll.push(this)},N=function(I){var B=this;this.nc=I,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.reset=function(ne,J){B.stop(),B.steptime=0,B.lasttime=u(),B.speedx=0,B.speedy=0,B.lastx=ne,B.lasty=J,B.lastscrollx=-1,B.lastscrolly=-1},this.update=function(ne,J){var K=u();B.steptime=K-B.lasttime,B.lasttime=K;var Ce=J-B.lasty,ge=ne-B.lastx,kt=B.nc.getScrollTop()+Ce,l=B.nc.getScrollLeft()+ge;B.snapx=l<0||l>B.nc.page.maxw,B.snapy=kt<0||kt>B.nc.page.maxh,B.speedx=ge,B.speedy=Ce,B.lastx=ne,B.lasty=J},this.stop=function(){B.nc.unsynched("domomentum2d"),B.timer&&clearTimeout(B.timer),B.timer=0,B.lastscrollx=-1,B.lastscrolly=-1},this.doSnapy=function(ne,J){var K=!1;J<0?(J=0,K=!0):J>B.nc.page.maxh&&(J=B.nc.page.maxh,K=!0),ne<0?(ne=0,K=!0):ne>B.nc.page.maxw&&(ne=B.nc.page.maxw,K=!0),K?B.nc.doScrollPos(ne,J,B.nc.opt.snapbackspeed):B.nc.triggerScrollEnd()},this.doMomentum=function(ne){var J=u(),K=ne?J+ne:B.lasttime,Ce=B.nc.getScrollLeft(),ge=B.nc.getScrollTop(),kt=B.nc.page.maxh,l=B.nc.page.maxw;B.speedx=l>0?Math.min(60,B.speedx):0,B.speedy=kt>0?Math.min(60,B.speedy):0;var ct=K&&J-K<=60;if((ge<0||ge>kt||Ce<0||Ce>l)&&(ct=!1),B.speedy&&ct&&B.speedy||B.speedx&&ct&&B.speedx){var ft=Math.max(16,B.steptime);if(ft>50){var O=ft/50;B.speedx*=O,B.speedy*=O,ft=50}B.demulxy=0,B.lastscrollx=B.nc.getScrollLeft(),B.chkx=B.lastscrollx,B.lastscrolly=B.nc.getScrollTop(),B.chky=B.lastscrolly;var Ae=B.lastscrollx,Wt=B.lastscrolly,xn=function(){var Wn=u()-J>600?.04:.02;B.speedx&&(Ae=Math.floor(B.lastscrollx-B.speedx*(1-B.demulxy)),B.lastscrollx=Ae,(Ae<0||Ae>l)&&(Wn=.1)),B.speedy&&(Wt=Math.floor(B.lastscrolly-B.speedy*(1-B.demulxy)),B.lastscrolly=Wt,(Wt<0||Wt>kt)&&(Wn=.1)),B.demulxy=Math.min(1,B.demulxy+Wn),B.nc.synched("domomentum2d",function(){B.speedx&&(B.nc.getScrollLeft(),B.chkx=Ae,B.nc.setScrollLeft(Ae)),B.speedy&&(B.nc.getScrollTop(),B.chky=Wt,B.nc.setScrollTop(Wt)),B.timer||(B.nc.hideCursor(),B.doSnapy(Ae,Wt))}),B.demulxy<1?B.timer=setTimeout(xn,ft):(B.stop(),B.nc.hideCursor(),B.doSnapy(Ae,Wt))};xn()}else B.doSnapy(B.nc.getScrollLeft(),B.nc.getScrollTop())}},P=R.fn.scrollTop;R.cssHooks.pageYOffset={get:function(I,B,ne){var J=st.data(I,"__nicescroll")||!1;return J&&J.ishwscroll?J.getScrollTop():P.call(I)},set:function(I,B){var ne=st.data(I,"__nicescroll")||!1;return ne&&ne.ishwscroll?ne.setScrollTop(parseInt(B)):P.call(I,B),this}},R.fn.scrollTop=function(I){if(void 0===I){var B=!!this[0]&&(st.data(this[0],"__nicescroll")||!1);return B&&B.ishwscroll?B.getScrollTop():P.call(this)}return this.each(function(){var ne=st.data(this,"__nicescroll")||!1;ne&&ne.ishwscroll?ne.setScrollTop(parseInt(I)):P.call(st(this),I)})};var m=R.fn.scrollLeft;st.cssHooks.pageXOffset={get:function(I,B,ne){var J=st.data(I,"__nicescroll")||!1;return J&&J.ishwscroll?J.getScrollLeft():m.call(I)},set:function(I,B){var ne=st.data(I,"__nicescroll")||!1;return ne&&ne.ishwscroll?ne.setScrollLeft(parseInt(B)):m.call(I,B),this}},R.fn.scrollLeft=function(I){if(void 0===I){var B=!!this[0]&&(st.data(this[0],"__nicescroll")||!1);return B&&B.ishwscroll?B.getScrollLeft():m.call(this)}return this.each(function(){var ne=st.data(this,"__nicescroll")||!1;ne&&ne.ishwscroll?ne.setScrollLeft(parseInt(I)):m.call(st(this),I)})};var q=function(I){var B=this;if(this.length=0,this.name="nicescrollarray",this.each=function(K){return st.each(B,K),B},this.push=function(K){B[B.length]=K,B.length++},this.eq=function(K){return B[K]},I)for(var ne=0;ne<I.length;ne++){var J=st.data(I[ne],"__nicescroll")||!1;J&&(this[this.length]=J,this.length++)}return this};(function(I,B,ne){for(var J=0,K=B.length;J<K;J++)ne(I,B[J])})(q.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(I,B){I[B]=function(){var ne=arguments;return this.each(function(){this[B].apply(this,ne)})}}),R.fn.getNiceScroll=function(I){return void 0===I?new q(this):this[I]&&st.data(this[I],"__nicescroll")||!1},(R.expr.pseudos||R.expr[":"]).nicescroll=function(I){return void 0!==st.data(I,"__nicescroll")},st.fn.niceScroll=function(I,B){void 0!==B||"object"!=typeof I||"jquery"in I||(B=I,I=!1);var ne=new q;return this.each(function(){var J=st(this),K=st.extend({},B);if(I){var Ce=st(I);K.doc=Ce.length>1?st(I,J):Ce,K.win=J}!("doc"in K)||"win"in K||(K.win=J);var ge=J.data("__nicescroll")||!1;ge||(K.doc=K.doc||J,ge=new C(K,J),J.data("__nicescroll",ge)),ne.push(ge)}),1===ne.length?ne[0]:ne},xt.NiceScroll={getjQuery:function(){return R}},st.nicescroll||(st.nicescroll=new q,st.nicescroll.options=k)}),function(R,At){"function"==typeof define&&define.amd?define(["jquery"],function(en){return At(en)}):"object"==typeof exports?module.exports=At(require("jquery")):At(jQuery)}(0,function(R){function At(H){this.constraints=null,this.__init(H)}function en(H,W){var M=!0;return R.each(H,function(ae,u){return void 0===W[ae]||H[ae]!==W[ae]?(M=!1,!1):void 0}),M}function gn(H){var W=H.attr("id"),M=W?Le.window.document.getElementById(W):null;return M?M===H[0]:R.contains(Le.window.document.body,H[0])}var mn={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},st=typeof window<"u"?window:null,Le={hasTouchCapability:!(!st||!("ontouchstart"in st||st.DocumentTouch&&st.document instanceof st.DocumentTouch||st.navigator.maxTouchPoints)),hasTransitions:function nn(){if(!st)return!1;var W=(st.document.body||st.document.documentElement).style,M="transition",ae=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof W[M])return!0;M=M.charAt(0).toUpperCase()+M.substr(1);for(var u=0;u<ae.length;u++)if("string"==typeof W[ae[u]+M])return!0;return!1}(),IE:!1,semVer:"4.2.8",window:st},xt=function(){this.__$emitterPrivate=R({}),this.__$emitterPublic=R({}),this.__instancesLatestArr=[],this.__plugins={},this._env=Le};xt.prototype={__bridge:function(H,W,M){if(!W[M]){var ae=function(){};ae.prototype=H;var u=new ae;u.__init&&u.__init(W),R.each(H,function(k,g){0!=k.indexOf("__")&&(W[k]?mn.debug&&console.log("The "+k+" method of the "+M+" plugin conflicts with another plugin or native methods"):(W[k]=function(){return u[k].apply(u,Array.prototype.slice.apply(arguments))},W[k].bridged=u))}),W[M]=u}return this},__setWindow:function(H){return Le.window=H,this},_getRuler:function(H){return new At(H)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(H){var W=this;if("string"==typeof H){var M=H,ae=null;return M.indexOf(".")>0?ae=W.__plugins[M]:R.each(W.__plugins,function(u,k){return k.name.substring(k.name.length-M.length-1)=="."+M?(ae=k,!1):void 0}),ae}if(H.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return W.__plugins[H.name]=H,H.core&&W.__bridge(H.core,W,H.name),this},_trigger:function(){var H=Array.prototype.slice.apply(arguments);return"string"==typeof H[0]&&(H[0]={type:H[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,H),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,H),this},instances:function(H){var W=[];return R(H||".tooltipstered").each(function(){var ae=R(this),u=ae.data("tooltipster-ns");u&&R.each(u,function(k,g){W.push(ae.data(g))})}),W},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(H){return R((H?H+" ":"")+".tooltipstered").toArray()},setDefaults:function(H){return R.extend(mn,H),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},R.tooltipster=new xt,R.Tooltipster=function(H,W){this.__callbacks={close:[],open:[]},this.__destroyed=!1,this.__$emitterPrivate=R({}),this.__$emitterPublic=R({}),this.__enabled=!0,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this.__init(H,W)},R.Tooltipster.prototype={__init:function(H,W){var M=this;if(M._$origin=R(H),M.__options=R.extend(!0,{},mn,W),M.__optionsFormat(),!Le.IE||Le.IE>=M.__options.IEmin){var ae=null;if(void 0===M._$origin.data("tooltipster-initialTitle")&&(void 0===(ae=M._$origin.attr("title"))&&(ae=null),M._$origin.data("tooltipster-initialTitle",ae)),null!==M.__options.content)M.__contentSet(M.__options.content);else{var u,k=M._$origin.attr("data-tooltip-content");k&&(u=R(k)),M.__contentSet(u&&u[0]?u.first():ae)}M._$origin.removeAttr("title").addClass("tooltipstered"),M.__prepareOrigin(),M.__prepareGC(),R.each(M.__options.plugins,function(g,x){M._plug(x)}),Le.hasTouchCapability&&R(Le.window.document.body).on("touchmove."+M.__namespace+"-triggerOpen",function(g){M._touchRecordEvent(g)}),M._on("created",function(){M.__prepareTooltip()})._on("repositioned",function(g){M.__lastPosition=g.position})}else M.__options.disabled=!0},__contentInsert:function(){var H=this,W=H._$tooltip.find(".tooltipster-content"),M=H.__Content;return H._trigger({type:"format",content:H.__Content,format:function(u){M=u}}),H.__options.functionFormat&&(M=H.__options.functionFormat.call(H,H,{origin:H._$origin[0]},H.__Content)),"string"!=typeof M||H.__options.contentAsHTML?W.empty().append(M):W.text(M),H},__contentSet:function(H){return H instanceof R&&this.__options.contentCloning&&(H=H.clone(!0)),this.__Content=H,this._trigger({type:"updated",content:H}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var H=this,W=H._$origin,M=H._$origin.is("area");if(M){var ae=H._$origin.parent().attr("name");W=R('img[usemap="#'+ae+'"]')}var u=W[0].getBoundingClientRect(),k=R(Le.window.document),g=R(Le.window),x=W,C={available:{document:null,window:null},document:{size:{height:k.height(),width:k.width()}},window:{scroll:{left:Le.window.scrollX||Le.window.document.documentElement.scrollLeft,top:Le.window.scrollY||Le.window.document.documentElement.scrollTop},size:{height:g.height(),width:g.width()}},origin:{fixedLineage:!1,offset:{},size:{height:u.bottom-u.top,width:u.right-u.left},usemapImage:M?W[0]:null,windowOffset:{bottom:u.bottom,left:u.left,right:u.right,top:u.top}}};if(M){var N=H._$origin.attr("shape"),P=H._$origin.attr("coords");if(P&&(P=P.split(","),R.map(P,function(Wt,xn){P[xn]=parseInt(Wt)})),"default"!=N)switch(N){case"circle":var I=P[2],B=P[1]-I,ne=P[0]-I;C.origin.size.height=2*I,C.origin.size.width=C.origin.size.height,C.origin.windowOffset.left+=ne,C.origin.windowOffset.top+=B;break;case"rect":var J=P[0],K=P[1],Ce=P[2];C.origin.size.height=P[3]-K,C.origin.size.width=Ce-J,C.origin.windowOffset.left+=J,C.origin.windowOffset.top+=K;break;case"poly":for(var kt=0,l=0,ct=0,ue=0,Et="even",ft=0;ft<P.length;ft++){var O=P[ft];"even"==Et?(O>ct&&(ct=O,0===ft&&(kt=ct)),kt>O&&(kt=O),Et="odd"):(O>ue&&(ue=O,1==ft&&(l=ue)),l>O&&(l=O),Et="even")}C.origin.size.height=ue-l,C.origin.size.width=ct-kt,C.origin.windowOffset.left+=kt,C.origin.windowOffset.top+=l}}for(H._trigger({type:"geometry",edit:function(Wt){C.origin.size.height=Wt.height,C.origin.windowOffset.left=Wt.left,C.origin.windowOffset.top=Wt.top,C.origin.size.width=Wt.width},geometry:{height:C.origin.size.height,left:C.origin.windowOffset.left,top:C.origin.windowOffset.top,width:C.origin.size.width}}),C.origin.windowOffset.right=C.origin.windowOffset.left+C.origin.size.width,C.origin.windowOffset.bottom=C.origin.windowOffset.top+C.origin.size.height,C.origin.offset.left=C.origin.windowOffset.left+C.window.scroll.left,C.origin.offset.top=C.origin.windowOffset.top+C.window.scroll.top,C.origin.offset.bottom=C.origin.offset.top+C.origin.size.height,C.origin.offset.right=C.origin.offset.left+C.origin.size.width,C.available.document={bottom:{height:C.document.size.height-C.origin.offset.bottom,width:C.document.size.width},left:{height:C.document.size.height,width:C.origin.offset.left},right:{height:C.document.size.height,width:C.document.size.width-C.origin.offset.right},top:{height:C.origin.offset.top,width:C.document.size.width}},C.available.window={bottom:{height:Math.max(C.window.size.height-Math.max(C.origin.windowOffset.bottom,0),0),width:C.window.size.width},left:{height:C.window.size.height,width:Math.max(C.origin.windowOffset.left,0)},right:{height:C.window.size.height,width:Math.max(C.window.size.width-Math.max(C.origin.windowOffset.right,0),0)},top:{height:Math.max(C.origin.windowOffset.top,0),width:C.window.size.width}};"html"!=x[0].tagName.toLowerCase();){if("fixed"==x.css("position")){C.origin.fixedLineage=!0;break}x=x.parent()}return C},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=R(Le.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=R(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var H=this;return H.__options.selfDestruction?H.__garbageCollector=setInterval(function(){var W=(new Date).getTime();H.__touchEvents=R.grep(H.__touchEvents,function(M,ae){return W-M.time>6e4}),gn(H._$origin)||H.close(function(){H.destroy()})},2e4):clearInterval(H.__garbageCollector),H},__prepareOrigin:function(){var H=this;if(H._$origin.off("."+H.__namespace+"-triggerOpen"),Le.hasTouchCapability&&H._$origin.on("touchstart."+H.__namespace+"-triggerOpen touchend."+H.__namespace+"-triggerOpen touchcancel."+H.__namespace+"-triggerOpen",function(M){H._touchRecordEvent(M)}),H.__options.triggerOpen.click||H.__options.triggerOpen.tap&&Le.hasTouchCapability){var W="";H.__options.triggerOpen.click&&(W+="click."+H.__namespace+"-triggerOpen "),H.__options.triggerOpen.tap&&Le.hasTouchCapability&&(W+="touchend."+H.__namespace+"-triggerOpen"),H._$origin.on(W,function(M){H._touchIsMeaningfulEvent(M)&&H._open(M)})}return(H.__options.triggerOpen.mouseenter||H.__options.triggerOpen.touchstart&&Le.hasTouchCapability)&&(W="",H.__options.triggerOpen.mouseenter&&(W+="mouseenter."+H.__namespace+"-triggerOpen "),H.__options.triggerOpen.touchstart&&Le.hasTouchCapability&&(W+="touchstart."+H.__namespace+"-triggerOpen"),H._$origin.on(W,function(ae){!H._touchIsTouchEvent(ae)&&H._touchIsEmulatedEvent(ae)||(H.__pointerIsOverOrigin=!0,H._openShortly(ae))})),(H.__options.triggerClose.mouseleave||H.__options.triggerClose.touchleave&&Le.hasTouchCapability)&&(W="",H.__options.triggerClose.mouseleave&&(W+="mouseleave."+H.__namespace+"-triggerOpen "),H.__options.triggerClose.touchleave&&Le.hasTouchCapability&&(W+="touchend."+H.__namespace+"-triggerOpen touchcancel."+H.__namespace+"-triggerOpen"),H._$origin.on(W,function(ae){H._touchIsMeaningfulEvent(ae)&&(H.__pointerIsOverOrigin=!1)})),H},__prepareTooltip:function(){var H=this,W=H.__options.interactive?"auto":"";return H._$tooltip.attr("id",H.__namespace).css({"pointer-events":W,zIndex:H.__options.zIndex}),R.each(H.__previousThemes,function(M,ae){H._$tooltip.removeClass(ae)}),R.each(H.__options.theme,function(M,ae){H._$tooltip.addClass(ae)}),H.__previousThemes=R.merge([],H.__options.theme),H},__scrollHandler:function(H){var W=this;if(W.__options.triggerClose.scroll)W._close(H);else if(gn(W._$origin)&&gn(W._$tooltip)){var M=null;if(H.target===Le.window.document)W.__Geometry.origin.fixedLineage||W.__options.repositionOnScroll&&W.reposition(H);else{M=W.__geometry();var ae=!1;"fixed"!=W._$origin.css("position")&&W.__$originParents.each(function(g,x){var C=R(x),N=C.css("overflow-x"),P=C.css("overflow-y");if("visible"!=N||"visible"!=P){var m=x.getBoundingClientRect();if("visible"!=N&&(M.origin.windowOffset.left<m.left||M.origin.windowOffset.right>m.right)||"visible"!=P&&(M.origin.windowOffset.top<m.top||M.origin.windowOffset.bottom>m.bottom))return ae=!0,!1}return"fixed"!=C.css("position")&&void 0}),ae?W._$tooltip.css("visibility","hidden"):(W._$tooltip.css("visibility","visible"),W.__options.repositionOnScroll?W.reposition(H):W._$tooltip.css({left:W.__lastPosition.coord.left+(M.origin.offset.left-W.__Geometry.origin.offset.left),top:W.__lastPosition.coord.top+(M.origin.offset.top-W.__Geometry.origin.offset.top)}))}W._trigger({type:"scroll",event:H,geo:M})}return W},__stateSet:function(H){return this.__state=H,this._trigger({type:"state",state:H}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,R.each(this.__timeouts.close,function(H,W){clearTimeout(W)}),this.__timeouts.close=[],this},__trackerStart:function(){var H=this,W=H._$tooltip.find(".tooltipster-content");return H.__options.trackTooltip&&(H.__contentBcr=W[0].getBoundingClientRect()),H.__tracker=setInterval(function(){if(gn(H._$origin)&&gn(H._$tooltip)){if(H.__options.trackOrigin){var M=H.__geometry(),ae=!1;en(M.origin.size,H.__Geometry.origin.size)&&(H.__Geometry.origin.fixedLineage?en(M.origin.windowOffset,H.__Geometry.origin.windowOffset)&&(ae=!0):en(M.origin.offset,H.__Geometry.origin.offset)&&(ae=!0)),ae||(H.__options.triggerClose.mouseleave?H._close():H.reposition())}if(H.__options.trackTooltip){var u=W[0].getBoundingClientRect();u.height===H.__contentBcr.height&&u.width===H.__contentBcr.width||(H.reposition(),H.__contentBcr=u)}}else H._close()},H.__options.trackerInterval),H},_close:function(H,W,M){var ae=this,u=!0;if(ae._trigger({type:"close",event:H,stop:function(){u=!1}}),u||M){W&&ae.__callbacks.close.push(W),ae.__callbacks.open=[],ae.__timeoutsClear();var k=function(){R.each(ae.__callbacks.close,function(m,q){q.call(ae,ae,{event:H,origin:ae._$origin[0]})}),ae.__callbacks.close=[]};if("closed"!=ae.__state){var g=!0,N=(new Date).getTime()+ae.__options.animationDuration[1];if("disappearing"==ae.__state&&N>ae.__closingTime&&ae.__options.animationDuration[1]>0&&(g=!1),g){ae.__closingTime=N,"disappearing"!=ae.__state&&ae.__stateSet("disappearing");var P=function(){clearInterval(ae.__tracker),ae._trigger({type:"closing",event:H}),ae._$tooltip.off("."+ae.__namespace+"-triggerClose").removeClass("tooltipster-dying"),R(Le.window).off("."+ae.__namespace+"-triggerClose"),ae.__$originParents.each(function(m,q){R(q).off("scroll."+ae.__namespace+"-triggerClose")}),ae.__$originParents=null,R(Le.window.document.body).off("."+ae.__namespace+"-triggerClose"),ae._$origin.off("."+ae.__namespace+"-triggerClose"),ae._off("dismissable"),ae.__stateSet("closed"),ae._trigger({type:"after",event:H}),ae.__options.functionAfter&&ae.__options.functionAfter.call(ae,ae,{event:H,origin:ae._$origin[0]}),k()};Le.hasTransitions?(ae._$tooltip.css({"-moz-animation-duration":ae.__options.animationDuration[1]+"ms","-ms-animation-duration":ae.__options.animationDuration[1]+"ms","-o-animation-duration":ae.__options.animationDuration[1]+"ms","-webkit-animation-duration":ae.__options.animationDuration[1]+"ms","animation-duration":ae.__options.animationDuration[1]+"ms","transition-duration":ae.__options.animationDuration[1]+"ms"}),ae._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),ae.__options.animationDuration[1]>0&&ae._$tooltip.delay(ae.__options.animationDuration[1]),ae._$tooltip.queue(P)):ae._$tooltip.stop().fadeOut(ae.__options.animationDuration[1],P)}}else k()}return ae},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(H,W){var M=this;if(!M.__destroying&&gn(M._$origin)&&M.__enabled){var ae=!0;if("closed"==M.__state&&(M._trigger({type:"before",event:H,stop:function(){ae=!1}}),ae&&M.__options.functionBefore&&(ae=M.__options.functionBefore.call(M,M,{event:H,origin:M._$origin[0]}))),!1!==ae&&null!==M.__Content){W&&M.__callbacks.open.push(W),M.__callbacks.close=[],M.__timeoutsClear();var u,k=function(){"stable"!=M.__state&&M.__stateSet("stable"),R.each(M.__callbacks.open,function(P,m){m.call(M,M,{origin:M._$origin[0],tooltip:M._$tooltip[0]})}),M.__callbacks.open=[]};if("closed"!==M.__state)u=0,"disappearing"===M.__state?(M.__stateSet("appearing"),Le.hasTransitions?(M._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),M.__options.animationDuration[0]>0&&M._$tooltip.delay(M.__options.animationDuration[0]),M._$tooltip.queue(k)):M._$tooltip.stop().fadeIn(k)):"stable"==M.__state&&k();else{if(M.__stateSet("appearing"),u=M.__options.animationDuration[0],M.__contentInsert(),M.reposition(H,!0),Le.hasTransitions?(M._$tooltip.addClass("tooltipster-"+M.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":M.__options.animationDuration[0]+"ms","-ms-animation-duration":M.__options.animationDuration[0]+"ms","-o-animation-duration":M.__options.animationDuration[0]+"ms","-webkit-animation-duration":M.__options.animationDuration[0]+"ms","animation-duration":M.__options.animationDuration[0]+"ms","transition-duration":M.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=M.__state&&(M._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),M.__options.animationDuration[0]>0&&M._$tooltip.delay(M.__options.animationDuration[0]),M._$tooltip.queue(k))},0)):M._$tooltip.css("display","none").fadeIn(M.__options.animationDuration[0],k),M.__trackerStart(),R(Le.window).on("resize."+M.__namespace+"-triggerClose",function(P){var m=R(document.activeElement);(m.is("input")||m.is("textarea"))&&R.contains(M._$tooltip[0],m[0])||M.reposition(P)}).on("scroll."+M.__namespace+"-triggerClose",function(P){M.__scrollHandler(P)}),M.__$originParents=M._$origin.parents(),M.__$originParents.each(function(P,m){R(m).on("scroll."+M.__namespace+"-triggerClose",function(q){M.__scrollHandler(q)})}),M.__options.triggerClose.mouseleave||M.__options.triggerClose.touchleave&&Le.hasTouchCapability){M._on("dismissable",function(P){P.dismissable?P.delay?(N=setTimeout(function(){M._close(P.event)},P.delay),M.__timeouts.close.push(N)):M._close(P):clearTimeout(N)});var g=M._$origin,x="",C="",N=null;M.__options.interactive&&(g=g.add(M._$tooltip)),M.__options.triggerClose.mouseleave&&(x+="mouseenter."+M.__namespace+"-triggerClose ",C+="mouseleave."+M.__namespace+"-triggerClose "),M.__options.triggerClose.touchleave&&Le.hasTouchCapability&&(x+="touchstart."+M.__namespace+"-triggerClose",C+="touchend."+M.__namespace+"-triggerClose touchcancel."+M.__namespace+"-triggerClose"),g.on(C,function(P){!M._touchIsTouchEvent(P)&&M._touchIsEmulatedEvent(P)||M._trigger({delay:("mouseleave"==P.type?M.__options.delay:M.__options.delayTouch)[1],dismissable:!0,event:P,type:"dismissable"})}).on(x,function(P){!M._touchIsTouchEvent(P)&&M._touchIsEmulatedEvent(P)||M._trigger({dismissable:!1,event:P,type:"dismissable"})})}M.__options.triggerClose.originClick&&M._$origin.on("click."+M.__namespace+"-triggerClose",function(P){M._touchIsTouchEvent(P)||M._touchIsEmulatedEvent(P)||M._close(P)}),(M.__options.triggerClose.click||M.__options.triggerClose.tap&&Le.hasTouchCapability)&&setTimeout(function(){if("closed"!=M.__state){var P="",m=R(Le.window.document.body);M.__options.triggerClose.click&&(P+="click."+M.__namespace+"-triggerClose "),M.__options.triggerClose.tap&&Le.hasTouchCapability&&(P+="touchend."+M.__namespace+"-triggerClose"),m.on(P,function(q){M._touchIsMeaningfulEvent(q)&&(M._touchRecordEvent(q),M.__options.interactive&&R.contains(M._$tooltip[0],q.target)||M._close(q))}),M.__options.triggerClose.tap&&Le.hasTouchCapability&&m.on("touchstart."+M.__namespace+"-triggerClose",function(q){M._touchRecordEvent(q)})}},0),M._trigger("ready"),M.__options.functionReady&&M.__options.functionReady.call(M,M,{origin:M._$origin[0],tooltip:M._$tooltip[0]})}M.__options.timer>0&&(N=setTimeout(function(){M._close()},M.__options.timer+u),M.__timeouts.close.push(N))}}return M},_openShortly:function(H){var W=this,M=!0;if("stable"!=W.__state&&"appearing"!=W.__state&&!W.__timeouts.open&&(W._trigger({type:"start",event:H,stop:function(){M=!1}}),M)){var ae=0==H.type.indexOf("touch")?W.__options.delayTouch:W.__options.delay;ae[0]?W.__timeouts.open=setTimeout(function(){W.__timeouts.open=null,W.__pointerIsOverOrigin&&W._touchIsMeaningfulEvent(H)?(W._trigger("startend"),W._open(H)):W._trigger("startcancel")},ae[0]):(W._trigger("startend"),W._open(H))}return W},_optionsExtract:function(H,W){var M=this,ae=R.extend(!0,{},W),u=M.__options[H];return u||(u={},R.each(W,function(k,g){var x=M.__options[k];void 0!==x&&(u[k]=x)})),R.each(ae,function(k,g){void 0!==u[k]&&("object"!=typeof g||g instanceof Array||null==g||"object"!=typeof u[k]||u[k]instanceof Array||null==u[k]?ae[k]=u[k]:R.extend(ae[k],u[k]))}),ae},_plug:function(H){var W=R.tooltipster._plugin(H);if(!W)throw new Error('The "'+H+'" plugin is not defined');return W.instance&&R.tooltipster.__bridge(W.instance,this,W.name),this},_touchIsEmulatedEvent:function(H){for(var W=!1,M=(new Date).getTime(),ae=this.__touchEvents.length-1;ae>=0;ae--){var u=this.__touchEvents[ae];if(!(M-u.time<500))break;u.target===H.target&&(W=!0)}return W},_touchIsMeaningfulEvent:function(H){return this._touchIsTouchEvent(H)&&!this._touchSwiped(H.target)||!this._touchIsTouchEvent(H)&&!this._touchIsEmulatedEvent(H)},_touchIsTouchEvent:function(H){return 0==H.type.indexOf("touch")},_touchRecordEvent:function(H){return this._touchIsTouchEvent(H)&&(H.time=(new Date).getTime(),this.__touchEvents.push(H)),this},_touchSwiped:function(H){for(var W=!1,M=this.__touchEvents.length-1;M>=0;M--){var ae=this.__touchEvents[M];if("touchmove"==ae.type){W=!0;break}if("touchstart"==ae.type&&H===ae.target)break}return W},_trigger:function(){var H=Array.prototype.slice.apply(arguments);return"string"==typeof H[0]&&(H[0]={type:H[0]}),H[0].instance=this,H[0].origin=this._$origin?this._$origin[0]:null,H[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,H),R.tooltipster._trigger.apply(R.tooltipster,H),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,H),this},_unplug:function(H){var W=this;if(W[H]){var M=R.tooltipster._plugin(H);M.instance&&R.each(M.instance,function(ae,u){W[ae]&&W[ae].bridged===W[H]&&delete W[ae]}),W[H].__destroy&&W[H].__destroy(),delete W[H]}return W},close:function(H){return this.__destroyed?this.__destroyError():this._close(null,H),this},content:function(H){var W=this;if(void 0===H)return W.__Content;if(W.__destroyed)W.__destroyError();else if(W.__contentSet(H),null!==W.__Content){if("closed"!==W.__state&&(W.__contentInsert(),W.reposition(),W.__options.updateAnimation))if(Le.hasTransitions){var M=W.__options.updateAnimation;W._$tooltip.addClass("tooltipster-update-"+M),setTimeout(function(){"closed"!=W.__state&&W._$tooltip.removeClass("tooltipster-update-"+M)},1e3)}else W._$tooltip.fadeTo(200,.5,function(){"closed"!=W.__state&&W._$tooltip.fadeTo(200,1)})}else W._close();return W},destroy:function(){var H=this;if(H.__destroyed)H.__destroyError();else{"closed"!=H.__state?H.option("animationDuration",0)._close(null,null,!0):H.__timeoutsClear(),H._trigger("destroy"),H.__destroyed=!0,H._$origin.removeData(H.__namespace).off("."+H.__namespace+"-triggerOpen"),R(Le.window.document.body).off("."+H.__namespace+"-triggerOpen");var W=H._$origin.data("tooltipster-ns");if(W)if(1===W.length){var M=null;"previous"==H.__options.restoration?M=H._$origin.data("tooltipster-initialTitle"):"current"==H.__options.restoration&&(M="string"==typeof H.__Content?H.__Content:R("<div></div>").append(H.__Content).html()),M&&H._$origin.attr("title",M),H._$origin.removeClass("tooltipstered"),H._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else W=R.grep(W,function(ae,u){return ae!==H.__namespace}),H._$origin.data("tooltipster-ns",W);H._trigger("destroyed"),H._off(),H.off(),H.__Content=null,H.__$emitterPrivate=null,H.__$emitterPublic=null,H.__options.parent=null,H._$origin=null,H._$tooltip=null,R.tooltipster.__instancesLatestArr=R.grep(R.tooltipster.__instancesLatestArr,function(ae,u){return H!==ae}),clearInterval(H.__garbageCollector)}return H},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){return this.__destroyed?void this.__destroyError():this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(H){return this.close(H)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(H){return this.__destroyed?this.__destroyError():this._open(null,H),this},option:function(H,W){return void 0===W?this.__options[H]:(this.__destroyed?this.__destroyError():(this.__options[H]=W,this.__optionsFormat(),R.inArray(H,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===H&&this.__prepareGC()),this)},reposition:function(H,W){var M=this;return M.__destroyed?M.__destroyError():"closed"!=M.__state&&gn(M._$origin)&&(W||gn(M._$tooltip))&&(W||M._$tooltip.detach(),M.__Geometry=M.__geometry(),M._trigger({type:"reposition",event:H,helper:{geo:M.__Geometry}})),M},show:function(H){return this.open(H)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},R.fn.tooltipster=function(){var H=Array.prototype.slice.apply(arguments),W="You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.";if(0===this.length)return this;if("string"==typeof H[0]){var M="#*$~&";return this.each(function(){var m=R(this).data("tooltipster-ns"),q=m?R(this).data(m[0]):null;if(!q)throw new Error("You called Tooltipster's \""+H[0]+'" method on an uninitialized element');if("function"!=typeof q[H[0]])throw new Error('Unknown method "'+H[0]+'"');this.length>1&&"content"==H[0]&&(H[1]instanceof R||"object"==typeof H[1]&&null!=H[1]&&H[1].tagName)&&!q.__options.contentCloning&&q.__options.debug&&console.log(W);var I=q[H[0]](H[1],H[2]);return I!==q||"instance"===H[0]?(M=I,!1):void 0}),"#*$~&"!==M?M:this}R.tooltipster.__instancesLatestArr=[];var ae=H[0]&&void 0!==H[0].multiple,u=ae&&H[0].multiple||!ae&&mn.multiple,k=H[0]&&void 0!==H[0].content,g=k&&H[0].content||!k&&mn.content,x=H[0]&&void 0!==H[0].contentCloning,C=x&&H[0].contentCloning||!x&&mn.contentCloning,N=H[0]&&void 0!==H[0].debug,P=N&&H[0].debug||!N&&mn.debug;return this.length>1&&(g instanceof R||"object"==typeof g&&null!=g&&g.tagName)&&!C&&P&&console.log(W),this.each(function(){var m=!1,q=R(this),I=q.data("tooltipster-ns"),B=null;I?u?m=!0:P&&(console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."),console.log(this)):m=!0,m&&(B=new R.Tooltipster(this,H[0]),I||(I=[]),I.push(B.__namespace),q.data("tooltipster-ns",I),q.data(B.__namespace,B),B.__options.functionInit&&B.__options.functionInit.call(B,B,{origin:this}),B._trigger("init")),R.tooltipster.__instancesLatestArr.push(B)}),this},At.prototype={__init:function(H){this.__$tooltip=H,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=R('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(Le.window.document.body)},__forceRedraw:function(){var H=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(H)},constrain:function(H,W){return this.constraints={width:H,height:W},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:H}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var H=this.__$tooltip[0].getBoundingClientRect(),W={size:{height:H.height||H.bottom-H.top,width:H.width||H.right-H.left}};if(this.constraints){var M=this.__$tooltip.find(".tooltipster-content"),ae=this.__$tooltip.outerHeight(),u=M[0].getBoundingClientRect(),k={height:ae<=this.constraints.height,width:H.width<=this.constraints.width&&u.width>=M[0].scrollWidth-1};W.fits=k.height&&k.width}return Le.IE&&Le.IE<=11&&W.size.width!==Le.window.document.documentElement.clientWidth&&(W.size.width=Math.ceil(W.size.width)+1),W}};var ln=navigator.userAgent.toLowerCase();-1!=ln.indexOf("msie")?Le.IE=parseInt(ln.split("msie")[1]):-1!==ln.toLowerCase().indexOf("trident")&&-1!==ln.indexOf(" rv:11")?Le.IE=11:-1!=ln.toLowerCase().indexOf("edge/")&&(Le.IE=parseInt(ln.toLowerCase().split("edge/")[1]));var dn="tooltipster.sideTip";return R.tooltipster._plugin({name:dn,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(H){var W=this;W.__instance=H,W.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),W.__previousState="closed",W.__optionsFormat(),W.__instance._on("state."+W.__namespace,function(M){"closed"==M.state?W.__close():"appearing"==M.state&&"closed"==W.__previousState&&W.__create(),W.__previousState=M.state}),W.__instance._on("options."+W.__namespace,function(){W.__optionsFormat()}),W.__instance._on("reposition."+W.__namespace,function(M){W.__reposition(M.event,M.helper)})},__close:function(){this.__instance.content()instanceof R&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var H=R('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||H.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&H.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&H.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=H,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var H=this;H.__options=H.__instance._optionsExtract(dn,H.__defaults()),H.__options.position&&(H.__options.side=H.__options.position),"object"!=typeof H.__options.distance&&(H.__options.distance=[H.__options.distance]),H.__options.distance.length<4&&(void 0===H.__options.distance[1]&&(H.__options.distance[1]=H.__options.distance[0]),void 0===H.__options.distance[2]&&(H.__options.distance[2]=H.__options.distance[0]),void 0===H.__options.distance[3]&&(H.__options.distance[3]=H.__options.distance[1])),H.__options.distance={top:H.__options.distance[0],right:H.__options.distance[1],bottom:H.__options.distance[2],left:H.__options.distance[3]},"string"==typeof H.__options.side&&(H.__options.side=[H.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[H.__options.side]],"left"==H.__options.side[0]||"right"==H.__options.side[0]?H.__options.side.push("top","bottom"):H.__options.side.push("right","left")),6===R.tooltipster._env.IE&&!0!==H.__options.arrow&&(H.__options.arrow=!1)},__reposition:function(H,W){var M,ae=this,u=ae.__targetFind(W),k=[];ae.__instance._$tooltip.detach();var g=ae.__instance._$tooltip.clone(),x=R.tooltipster._getRuler(g),C=!1,N=ae.__instance.option("animation");switch(N&&g.removeClass("tooltipster-"+N),R.each(["window","document"],function(ne,J){var K=null;if(ae.__instance._trigger({container:J,helper:W,satisfied:C,takeTest:function(kt){K=kt},results:k,type:"positionTest"}),1==K||0!=K&&0==C&&("window"!=J||ae.__options.viewportAware))for(ne=0;ne<ae.__options.side.length;ne++){var Ce={horizontal:0,vertical:0},ge=ae.__options.side[ne];"top"==ge||"bottom"==ge?Ce.vertical=ae.__options.distance[ge]:Ce.horizontal=ae.__options.distance[ge],ae.__sideChange(g,ge),R.each(["natural","constrained"],function(l,ct){if(K=null,ae.__instance._trigger({container:J,event:H,helper:W,mode:ct,results:k,satisfied:C,side:ge,takeTest:function(O){K=O},type:"positionTest"}),1==K||0!=K&&0==C){var ue={container:J,distance:Ce,fits:null,mode:ct,outerSize:null,side:ge,size:null,target:u[ge],whole:null},ft=("natural"==ct?x.free():x.constrain(W.geo.available[J][ge].width-Ce.horizontal,W.geo.available[J][ge].height-Ce.vertical)).measure();if(ue.size=ft.size,ue.outerSize={height:ft.size.height+Ce.vertical,width:ft.size.width+Ce.horizontal},ue.fits="natural"==ct?W.geo.available[J][ge].width>=ue.outerSize.width&&W.geo.available[J][ge].height>=ue.outerSize.height:ft.fits,"window"==J&&(ue.whole=!!ue.fits&&("top"==ge||"bottom"==ge?W.geo.origin.windowOffset.right>=ae.__options.minIntersection&&W.geo.window.size.width-W.geo.origin.windowOffset.left>=ae.__options.minIntersection:W.geo.origin.windowOffset.bottom>=ae.__options.minIntersection&&W.geo.window.size.height-W.geo.origin.windowOffset.top>=ae.__options.minIntersection)),k.push(ue),ue.whole)C=!0;else if("natural"==ue.mode&&(ue.fits||ue.size.width<=W.geo.available[J][ge].width))return!1}})}}),ae.__instance._trigger({edit:function(ne){k=ne},event:H,helper:W,results:k,type:"positionTested"}),k.sort(function(ne,J){if(ne.whole&&!J.whole)return-1;if(!ne.whole&&J.whole)return 1;if(ne.whole&&J.whole){var K=ae.__options.side.indexOf(ne.side);return(Ce=ae.__options.side.indexOf(J.side))>K?-1:K>Ce?1:"natural"==ne.mode?-1:1}return ne.fits&&!J.fits?-1:!ne.fits&&J.fits?1:ne.fits&&J.fits?(K=ae.__options.side.indexOf(ne.side),(Ce=ae.__options.side.indexOf(J.side))>K?-1:K>Ce?1:"natural"==ne.mode?-1:1):"document"==ne.container&&"bottom"==ne.side&&"natural"==ne.mode?-1:1;var Ce}),(M=k[0]).coord={},M.side){case"left":case"right":M.coord.top=Math.floor(M.target-M.size.height/2);break;case"bottom":case"top":M.coord.left=Math.floor(M.target-M.size.width/2)}switch(M.side){case"left":M.coord.left=W.geo.origin.windowOffset.left-M.outerSize.width;break;case"right":M.coord.left=W.geo.origin.windowOffset.right+M.distance.horizontal;break;case"top":M.coord.top=W.geo.origin.windowOffset.top-M.outerSize.height;break;case"bottom":M.coord.top=W.geo.origin.windowOffset.bottom+M.distance.vertical}"window"==M.container?"top"==M.side||"bottom"==M.side?M.coord.left<0?M.coord.left=W.geo.origin.windowOffset.right-this.__options.minIntersection>=0?0:W.geo.origin.windowOffset.right-this.__options.minIntersection-1:M.coord.left>W.geo.window.size.width-M.size.width&&(M.coord.left=W.geo.origin.windowOffset.left+this.__options.minIntersection<=W.geo.window.size.width?W.geo.window.size.width-M.size.width:W.geo.origin.windowOffset.left+this.__options.minIntersection+1-M.size.width):M.coord.top<0?M.coord.top=W.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?0:W.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:M.coord.top>W.geo.window.size.height-M.size.height&&(M.coord.top=W.geo.origin.windowOffset.top+this.__options.minIntersection<=W.geo.window.size.height?W.geo.window.size.height-M.size.height:W.geo.origin.windowOffset.top+this.__options.minIntersection+1-M.size.height):(M.coord.left>W.geo.window.size.width-M.size.width&&(M.coord.left=W.geo.window.size.width-M.size.width),M.coord.left<0&&(M.coord.left=0)),ae.__sideChange(g,M.side),W.tooltipClone=g[0],W.tooltipParent=ae.__instance.option("parent").parent[0],W.mode=M.mode,W.whole=M.whole,W.origin=ae.__instance._$origin[0],W.tooltip=ae.__instance._$tooltip[0],delete M.container,delete M.fits,delete M.mode,delete M.outerSize,delete M.whole,M.distance=M.distance.horizontal||M.distance.vertical;var q,I,B,P=R.extend(!0,{},M);if(ae.__instance._trigger({edit:function(ne){M=ne},event:H,helper:W,position:P,type:"position"}),ae.__options.functionPosition){var m=ae.__options.functionPosition.call(ae,ae.__instance,W,P);m&&(M=m)}x.destroy(),"top"==M.side||"bottom"==M.side?(q={prop:"left",val:M.target-M.coord.left},I=M.size.width-this.__options.minIntersection):(q={prop:"top",val:M.target-M.coord.top},I=M.size.height-this.__options.minIntersection),q.val<this.__options.minIntersection?q.val=this.__options.minIntersection:q.val>I&&(q.val=I),M.coord={left:(B=W.geo.origin.fixedLineage?W.geo.origin.windowOffset:{left:W.geo.origin.windowOffset.left+W.geo.window.scroll.left,top:W.geo.origin.windowOffset.top+W.geo.window.scroll.top}).left+(M.coord.left-W.geo.origin.windowOffset.left),top:B.top+(M.coord.top-W.geo.origin.windowOffset.top)},ae.__sideChange(ae.__instance._$tooltip,M.side),ae.__instance._$tooltip.css("position",W.geo.origin.fixedLineage?"fixed":""),ae.__instance._$tooltip.css({left:M.coord.left,top:M.coord.top,height:M.size.height,width:M.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(q.prop,q.val),ae.__instance._$tooltip.appendTo(ae.__instance.option("parent")),ae.__instance._trigger({type:"repositioned",event:H,position:M})},__sideChange:function(H,W){H.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+W)},__targetFind:function(H){var W={},M=this.__instance._$origin[0].getClientRects();if(M.length>1&&1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),M=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)),M.length<2)W.top=Math.floor(H.geo.origin.windowOffset.left+H.geo.origin.size.width/2),W.bottom=W.top,W.left=Math.floor(H.geo.origin.windowOffset.top+H.geo.origin.size.height/2),W.right=W.left;else{var u=M[0];W.top=Math.floor(u.left+(u.right-u.left)/2),u=M.length>2?M[Math.ceil(M.length/2)-1]:M[0],W.right=Math.floor(u.top+(u.bottom-u.top)/2),u=M[M.length-1],W.bottom=Math.floor(u.left+(u.right-u.left)/2),u=M.length>2?M[Math.ceil((M.length+1)/2)-1]:M[M.length-1],W.left=Math.floor(u.top+(u.bottom-u.top)/2)}return W}}}),R}),function(){"use strict";var R=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},At=function(e){return{eq:e}},en=At(function(e,t){return e===t}),gn=function(e){return At(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},nn=function(e){return At(function(t,n){var c,f,p,r=Object.keys(t),o=Object.keys(n);if(!(c=en,f=gn(c),p=function(f){return Array.prototype.slice.call(f).sort(void 0)},At(function(_,w){return f.eq(p(_),p(w))})).eq(r,o))return!1;for(var i=r.length,s=0;s<i;s++){var a=r[s];if(!e.eq(t[a],n[a]))return!1}return!0})},mn=At(function(e,t){if(e===t)return!0;var n=R(e);return n===R(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?gn(mn).eq(e,t):"object"===n&&nn(mn).eq(e,t))});const st=Object.getPrototypeOf,Le=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},xt=e=>t=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Le(n,String,(o,i)=>i.isPrototypeOf(o))?"string":r})(t)===e,ln=e=>t=>typeof t===e,dn=e=>t=>e===t,H=(e,t)=>M(e)&&Le(e,t,(n,r)=>st(n)===r),W=xt("string"),M=xt("object"),ae=e=>H(e,Object),u=xt("array"),k=dn(null),g=ln("boolean"),x=dn(void 0),C=e=>null==e,N=e=>!C(e),P=ln("function"),m=ln("number"),q=(e,t)=>{if(u(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},I=()=>{},B=(e,t)=>(...n)=>e(t.apply(null,n)),ne=(e,t)=>n=>e(t(n)),J=e=>()=>e,K=e=>e,Ce=(e,t)=>e===t;function ge(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const kt=e=>t=>!e(t),l=e=>()=>{throw new Error(e)},ct=e=>e(),ue=e=>{e()},Et=J(!1),ft=J(!0);class O{constructor(t,n){this.tag=t,this.value=n}static some(t){return new O(!0,t)}static none(){return O.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?O.some(t(this.value)):O.none()}bind(t){return this.tag?t(this.value):O.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:O.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return N(t)?O.some(t):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ae=Array.prototype.slice,Wt=Array.prototype.indexOf,xn=Array.prototype.push,Wn=(e,t)=>Wt.call(e,t),Oe=(e,t)=>Wn(e,t)>-1,Ht=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},pt=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=t(e[o],o);return r},ke=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},Ct=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},er=(e,t)=>{const n=[],r=[];for(let o=0,i=e.length;o<i;o++){const s=e[o];(t(s,o)?n:r).push(s)}return{pass:n,fail:r}},ot=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const i=e[r];t(i,r)&&n.push(i)}return n},Mn=(e,t,n)=>(Ct(e,(r,o)=>{n=t(n,r,o)}),n),et=(e,t,n)=>(ke(e,(r,o)=>{n=t(n,r,o)}),n),U=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const i=e[r];if(t(i,r))return O.some(i);if(n(i,r))break}return O.none()},Z=(e,t)=>U(e,t,Et),Ee=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return O.some(n);return O.none()},qe=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!u(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);xn.apply(t,e[n])}return t},We=(e,t)=>qe(pt(e,t)),tt=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Pt=e=>{const t=Ae.call(e,0);return t.reverse(),t},Ze=(e,t)=>ot(e,n=>!Oe(t,n)),Vt=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const i=e[r];n[String(i)]=t(i,r)}return n},Mt=(e,t)=>{const n=Ae.call(e,0);return n.sort(t),n},Mr=(e,t)=>t>=0&&t<e.length?O.some(e[t]):O.none(),jn=e=>Mr(e,0),Zr=e=>Mr(e,e.length-1),vn=P(Array.from)?Array.from:e=>Ae.call(e),Kn=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return O.none()},_n=Object.keys,jo=Object.hasOwnProperty,Ft=(e,t)=>{const n=_n(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},eo=(e,t)=>ve(e,(n,r)=>({k:r,v:t(n,r)})),ve=(e,t)=>{const n={};return Ft(e,(r,o)=>{const i=t(r,o);n[i.k]=i.v}),n},Nt=e=>(t,n)=>{e[n]=t},$t=(e,t,n,r)=>{Ft(e,(o,i)=>{(t(o,i)?n:r)(o,i)})},un=(e,t)=>{const n={};return $t(e,t,Nt(n),I),n},fr=(e,t)=>{const n=[];return Ft(e,(r,o)=>{n.push(t(r,o))}),n},rn=e=>fr(e,K),qt=(e,t)=>ut(e,t)?O.from(e[t]):O.none(),ut=(e,t)=>jo.call(e,t),fn=(e,t)=>ut(e,t)&&null!=e[t],Xt=e=>{const t={};return ke(e,n=>{t[n]={}}),_n(t)},In=e=>void 0!==e.length,to=Array.isArray,Or=(e,t,n)=>{if(!e)return!1;if(n=n||e,In(e)){for(let r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(const r in e)if(ut(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},xr=(e,t)=>{const n=[];return Or(e,(r,o)=>{n.push(t(r,o,e))}),n},no=(e,t)=>{const n=[];return Or(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},go=(e,t,n,r)=>{let o=x(n)?e[0]:n;for(let i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},js=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},ro=e=>e[e.length-1],Jo=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Jl=()=>Ea(0,0),Ea=(e,t)=>({major:e,minor:t}),mi={nu:Ea,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Jl():((r,o)=>{const i=((a,c)=>{for(let d=0;d<a.length;d++){const f=a[d];if(f.test(c))return f}})(r,o);if(!i)return{major:0,minor:0};const s=a=>Number(o.replace(i,"$"+a));return Ea(s(1),s(2))})(e,n)},unknown:Jl},Ql=(e,t)=>{const n=String(t).toLowerCase();return Z(e,r=>r.search(n))},Zl=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ta=(e,t)=>Dn(e,t)?e.substring(t.length):e,yn=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!x(r)||o+t.length<=r)},Dn=(e,t)=>Zl(e,t,0),Ui=(e,t)=>Zl(e,t,e.length-t.length),Wi=e=>t=>t.replace(e,""),mo=Wi(/^\s+|\s+$/g),ec=Wi(/^\s+/g),tc=Wi(/\s+$/g),pr=e=>e.length>0,vi=e=>!pr(e),Vi=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?O.none():O.some(n)},Ds=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,oo=e=>t=>yn(t,e),Na=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>yn(e,"edge/")&&yn(e,"chrome")&&yn(e,"safari")&&yn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ds],search:e=>yn(e,"chrome")&&!yn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>yn(e,"msie")||yn(e,"trident")},{name:"Opera",versionRegexes:[Ds,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:oo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:oo("firefox")},{name:"Safari",versionRegexes:[Ds,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(yn(e,"safari")||yn(e,"mobile/"))&&yn(e,"applewebkit")}],iu=[{name:"Windows",search:oo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>yn(e,"iphone")||yn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:oo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:oo("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:oo("linux"),versionRegexes:[]},{name:"Solaris",search:oo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:oo("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:oo("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nc={browsers:J(Na),oses:J(iu)},Oa="Chromium",Ra="Firefox",Qo=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isEdge:r("Edge"),isChromium:r(Oa),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Ra),isSafari:r("Safari")}},Bs=()=>Qo({current:void 0,version:mi.unknown()}),_i=Qo,ja=(J("Edge"),J(Oa),J("IE"),J("Opera"),J(Ra),J("Safari"),"Windows"),rc="Android",Da="Solaris",Ki="FreeBSD",Pa="ChromeOS",jr=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isWindows:r(ja),isiOS:r("iOS"),isAndroid:r(rc),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Da),isFreeBSD:r(Ki),isChromeOS:r(Pa)}},ic=()=>jr({current:void 0,version:mi.unknown()}),Xi=jr,su=(J(ja),J("iOS"),J(rc),J("Linux"),J("macOS"),J(Da),J(Ki),J(Pa),e=>window.matchMedia(e).matches);let au=Jo(()=>((e,t,n)=>{const r=nc.browsers(),o=nc.oses(),i=t.bind(c=>{return d=r,Kn(c.brands,p=>{const _=p.brand.toLowerCase();return Z(d,w=>{var y;return _===(null===(y=w.brand)||void 0===y?void 0:y.toLowerCase())}).map(w=>({current:w.name,version:mi.nu(parseInt(p.version,10),0)}))});var d}).orThunk(()=>{return Ql(r,d=e).map(f=>{const p=mi.detect(f.versionRegexes,d);return{current:f.name,version:p}});var d}).fold(Bs,_i),s=(c=o,d=e,Ql(c,d).map(f=>{const p=mi.detect(f.versionRegexes,d);return{current:f.name,version:p}})).fold(ic,Xi),a=((c,d,f,p)=>{const _=c.isiOS()&&!0===/ipad/i.test(f),w=c.isiOS()&&!_,y=c.isiOS()||c.isAndroid(),S=y||p("(pointer:coarse)"),b=_||!w&&y&&p("(min-device-width:768px)"),T=w||y&&!b,j=d.isSafari()&&c.isiOS()&&!1===/safari/i.test(f),D=!T&&!b&&!j;return{isiPad:J(_),isiPhone:J(w),isTablet:J(b),isPhone:J(T),isTouch:J(S),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:J(j),isDesktop:J(D)}})(s,i,e,n);var c,d;return{browser:i,os:s,deviceType:a}})(navigator.userAgent,O.from(navigator.userAgentData),su));const tr=()=>au(),Zo=navigator.userAgent,Yi=tr(),io=Yi.browser,gr=Yi.os,Do=Yi.deviceType,Ba=-1!==Zo.indexOf("Windows Phone"),Bt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:io.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!io.isIE(),windowsPhone:Ba,browser:{current:io.current,version:io.version,isChromium:io.isChromium,isEdge:io.isEdge,isFirefox:io.isFirefox,isIE:io.isIE,isOpera:io.isOpera,isSafari:io.isSafari},os:{current:gr.current,version:gr.version,isAndroid:gr.isAndroid,isChromeOS:gr.isChromeOS,isFreeBSD:gr.isFreeBSD,isiOS:gr.isiOS,isLinux:gr.isLinux,isMacOS:gr.isMacOS,isSolaris:gr.isSolaris,isWindows:gr.isWindows},deviceType:{isDesktop:Do.isDesktop,isiPad:Do.isiPad,isiPhone:Do.isiPhone,isPhone:Do.isPhone,isTablet:Do.isTablet,isTouch:Do.isTouch,isWebView:Do.isWebView}},sc=/^\s*|\s*$/g,ac=e=>C(e)?"":(""+e).replace(sc,""),La=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Or(e,(o,i)=>!1!==t.call(r,o,i,n)&&(La(o,t,n,r),!0)))},Ie={trim:ac,isArray:to,is:(e,t)=>t?!("array"!==t||!to(e))||typeof e===t:void 0!==e,toArray:e=>{if(to(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=W(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Or,map:xr,grep:no,inArray:(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hasOwn:ut,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(ut(r,o)){const i=r[o];void 0!==i&&(e[o]=i)}}return e},walk:La,resolve:(e,t=window)=>{const n=e.split(".");for(let r=0,o=n.length;r<o&&(t=t[n[r]]);r++);return t},explode:(e,t)=>u(e)?e:""===e?[]:xr(e.split(t||","),ac),_addCacheSuffix:e=>{const t=Bt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},yi=(e,t,n=Ce)=>e.exists(r=>n(r,t)),Ms=(e,t,n=Ce)=>Xn(e,t,n).getOr(e.isNone()&&t.isNone()),Xn=(e,t,n)=>e.isSome()&&t.isSome()?O.some(n(e.getOrDie(),t.getOrDie())):O.none(),bi=(e,t)=>e?O.some(t):O.none(),lu=typeof window<"u"?window:Function("return this;")(),lc=(e,t)=>((n,r)=>{let o=r??lu;for(let i=0;i<n.length&&null!=o;++i)o=o[n[i]];return o})(e.split("."),t),cu=Object.getPrototypeOf,Yt=e=>e.dom.nodeName.toLowerCase(),Is=e=>e.dom.nodeType,Gi=e=>t=>Is(t)===e,Ji=e=>nr(e)&&(e=>{const t=lc("ownerDocument.defaultView",e);return M(e)&&((n=t,((r,o)=>{const i=lc("HTMLElement",o);if(null==i)throw new Error("HTMLElement not available on this browser");return i})(0,n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(cu(e).constructor.name));var n})(e.dom),nr=Gi(1),mr=Gi(3),Ma=Gi(9),uu=Gi(11),ei=e=>t=>nr(t)&&Yt(t)===e,Ia=(e,t,n)=>{if(!(W(n)||g(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},En=(e,t,n)=>{Ia(e.dom,t,n)},so=(e,t)=>{const n=e.dom;Ft(t,(r,o)=>{Ia(n,o,r)})},Cr=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},vo=(e,t)=>O.from(Cr(e,t)),zs=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},h=(e,t)=>{e.dom.removeAttribute(t)},v=e=>et(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),E=(e,t)=>{const n=Cr(e,t);return void 0===n||""===n?[]:n.split(" ")},A=e=>void 0!==e.dom.classList,L=e=>E(e,"class"),$=(e,t)=>((n,r,o)=>{const i=E(n,r).concat([o]);return En(n,r,i.join(" ")),!0})(e,"class",t),V=(e,t)=>((n,r,o)=>{const i=ot(E(n,r),s=>s!==o);return i.length>0?En(n,r,i.join(" ")):h(n,r),!1})(e,"class",t),le=(e,t)=>{A(e)?e.dom.classList.add(t):$(e,t)},oe=e=>{0===(A(e)?e.dom.classList:L(e)).length&&h(e,"class")},_e=(e,t)=>{A(e)?e.dom.classList.remove(t):V(e,t),oe(e)},Te=(e,t)=>A(e)&&e.dom.classList.contains(t),Pe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},xe=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return Pe(n.childNodes[0])},je=(e,t)=>{const n=(t||document).createElement(e);return Pe(n)},mt=(e,t)=>{const n=(t||document).createTextNode(e);return Pe(n)},X=Pe,Cn=(e,t)=>{const n=[],r=i=>(n.push(i),t(i));let o=t(e);do{o=o.bind(r)}while(o.isSome());return n},on=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ir=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Dt=(e,t)=>e.dom===t.dom,Lt=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Po=e=>X(e.dom.ownerDocument),It=e=>Ma(e)?e:Po(e),cn=e=>X(It(e).dom.defaultView),rr=e=>O.from(e.dom.parentNode).map(X),wi=e=>O.from(e.dom.parentElement).map(X),zr=(e,t)=>{const n=P(t)?t:Et;let r=e.dom;const o=[];for(;null!=r.parentNode;){const i=r.parentNode,s=X(i);if(o.push(s),!0===n(s))break;r=i}return o},Fr=e=>O.from(e.dom.previousSibling).map(X),kr=e=>O.from(e.dom.nextSibling).map(X),_o=e=>Pt(Cn(e,Fr)),ti=e=>Cn(e,kr),Qt=e=>pt(e.dom.childNodes,X),bn=(e,t)=>O.from(e.dom.childNodes[t]).map(X),kn=e=>bn(e,0),Yn=e=>bn(e,e.dom.childNodes.length-1),ao=e=>e.dom.childNodes.length,Gn=e=>uu(e)&&N(e.dom.host),Tt=P(Element.prototype.attachShadow)&&P(Node.prototype.getRootNode),Tn=J(Tt),sn=Tt?e=>X(e.dom.getRootNode()):It,an=e=>Gn(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return X(n)})(It(e)),lo=e=>X(e.dom.host),ni=e=>{if(Tn()&&N(e.target)){const t=X(e.target);if(nr(t)&&Fs(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return jn(n)}}return O.from(e.target)},Fs=e=>N(e.dom.shadowRoot),Dr=e=>{const t=mr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(r=>{const o=sn(r);return Gn(o)?O.some(o):O.none()})(X(t)).fold(()=>n.body.contains(t),ne(Dr,lo))};var $s=(e,t,n,r,o)=>e(n,r)?O.some(n):P(o)&&o(n)?O.none():t(n,r,o);const or=(e,t,n)=>{let r=e.dom;const o=P(n)?n:Et;for(;r.parentNode;){r=r.parentNode;const i=X(r);if(t(i))return O.some(i);if(o(i))break}return O.none()},Bo=(e,t,n)=>$s((r,o)=>o(r),or,e,t,n),yo=(e,t,n)=>or(e,r=>on(r,t),n),Lo=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Ir(o)?O.none():O.from(o.querySelector(n)).map(X)})(t,e),co=(e,t,n)=>$s((r,o)=>on(r,o),yo,e,t,n),bo=(e,t=!1)=>{return Dr(e)?e.dom.isContentEditable:(n=e,co(n,"[contenteditable]")).fold(J(t),r=>"true"===Hs(r));var n},Hs=e=>e.dom.contentEditable,ri=e=>void 0!==e.style&&P(e.style.getPropertyValue),qs=(e,t,n)=>{if(!W(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ri(e)&&e.style.setProperty(t,n)},Us=(e,t,n)=>{qs(e.dom,t,n)},Qi=(e,t)=>{const n=e.dom;Ft(t,(r,o)=>{qs(n,o,r)})},G=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Dr(e)?r:fe(n,t)},fe=(e,t)=>ri(e)?e.style.getPropertyValue(t):"",Se=(e,t)=>{const r=fe(e.dom,t);return O.from(r).filter(o=>o.length>0)},Re=e=>{const t={},n=e.dom;if(ri(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);t[o]=n.style[o]}return t},$e=(e,t)=>{var n,r;r=t,ri(n=e.dom)&&n.style.removeProperty(r),yi(vo(e,"style").map(mo),"")&&h(e,"style")},nt=(e,t)=>{rr(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},it=(e,t)=>{kr(e).fold(()=>{rr(e).each(n=>{Qe(n,t)})},n=>{nt(n,t)})},bt=(e,t)=>{kn(e).fold(()=>{Qe(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Qe=(e,t)=>{e.dom.appendChild(t.dom)},Kt=(e,t)=>{nt(e,t),Qe(t,e)},Ot=(e,t)=>{ke(t,n=>{Qe(e,n)})},Rt=e=>{e.dom.textContent="",ke(Qt(e),t=>{_t(t)})},_t=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},St=e=>{const t=Qt(e);var n,r;t.length>0&&(n=e,ke(r=t,(o,i)=>{it(0===i?n:r[i-1],o)})),_t(e)},Nn=e=>pt(e,X),Jn=e=>e.dom.innerHTML,An=(e,t)=>{const n=Po(e).dom,r=X(n.createDocumentFragment()),o=((i,s)=>{const a=(s||document).createElement("div");return a.innerHTML=i,Qt(X(a))})(t,n);Ot(r,o),Rt(e),Qe(e,r)},Sr=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Pr=(e,t)=>({left:e,top:t,translate:(n,r)=>Pr(e+n,t+r)}),Zt=Pr,uo=(e,t)=>void 0!==e?e:void 0!==t?t:0,Er=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Zt(n.offsetLeft,n.offsetTop):Dr(e)?(r=>{const o=r.getBoundingClientRect();return Zt(o.left,o.top)})(t):Zt(0,0)},xi=e=>{const t=void 0!==e?e.dom:document;return Zt(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},za=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Fa=(e,t)=>{tr().browser.isSafari()&&P(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},cc=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),ug=e=>{const t=void 0===e?window:e,r=xi(X(t.document));return(o=>{const i=void 0===o?window:o;return tr().browser.isFirefox()?O.none():O.from(i.visualViewport)})(t).fold(()=>{const o=t.document.documentElement;return cc(r.left,r.top,o.clientWidth,o.clientHeight)},o=>cc(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},hg=(e,t)=>{let n=[];return ke(Qt(e),r=>{t(r)&&(n=n.concat([r])),n=n.concat(hg(r,t))}),n},Qn=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return Ir(o)?[]:pt(o.querySelectorAll(n),X)})(t,e),fg=(e,t,n)=>yo(e,t,n).isSome();class Pn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,r,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let i=t[r];if(i)return i;for(let s=t.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(i=s[r],i)return i}}}findPreviousNode(t,n){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let i=r.lastChild;i;i=i.lastChild)if(!i.lastChild)return i;return r}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Zi=e=>t=>!!t&&t.nodeType===e,dc=e=>!!e&&!Object.getPrototypeOf(e),Ye=Zi(1),$a=e=>{const t=e.toLowerCase();return n=>N(n)&&n.nodeName.toLowerCase()===t},wo=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Oe(t,r)}return!1}},uc=(e,t)=>{const n=t.toLowerCase().split(" ");return r=>{if(Ye(r)){const o=r.ownerDocument.defaultView;if(o)for(let i=0;i<n.length;i++){const s=o.getComputedStyle(r,null);if((s?s.getPropertyValue(e):null)===n[i])return!0}}return!1}},pg=e=>t=>Ye(t)&&t.hasAttribute(e),es=e=>Ye(e)&&e.hasAttribute("data-mce-bogus"),oi=e=>Ye(e)&&"TABLE"===e.tagName,gg=e=>t=>!(!Ye(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),hu=wo(["textarea","input"]),Me=Zi(3),GC=Zi(4),JC=Zi(7),Ci=Zi(8),Ha=Zi(9),fu=Zi(11),hn=$a("br"),mg=$a("img"),xo=gg("true"),tn=gg("false"),hc=wo(["td","th"]),QC=wo(["td","th","caption"]),Mo=wo(["video","audio","object","embed"]),ZC=$a("li"),vg=$a("details"),ek=$a("summary"),zn="\xa0",pu=e=>"\ufeff"===e,gu=((e,t)=>{const n=r=>e(r)?O.from(r.dom.nodeValue):O.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(mr),fc=e=>gu.get(e),_g=e=>gu.getOption(e),tk=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),ki=e=>{let t;return n=>(t=t||Vt(e,ft),ut(t,Yt(n)))},$r=ki(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),pc=e=>nr(e)&&!$r(e),ts=e=>nr(e)&&"br"===Yt(e),yg=ki(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),mu=ki(["ul","ol","dl"]),qa=ki(["li","dd","dt"]),nk=ki(["thead","tbody","tfoot"]),Ua=ki(["td","th"]),gc=ki(["pre","script","textarea","style"]),rk=ki(tk),ok=e=>rk(e)||pc(e),Wa=()=>{const e=je("br");return En(e,"data-mce-bogus","1"),e},Si=e=>{Rt(e),Qe(e,Wa())},ik=e=>{Yn(e).each(t=>{Fr(t).each(n=>{$r(e)&&ts(t)&&$r(n)&&_t(t)})})},ir="\ufeff",mc=pu,ii=e=>e.replace(/\uFEFF/g,""),sk=Ye,Vs=Me,Ks=e=>(Vs(e)&&(e=e.parentNode),sk(e)&&e.hasAttribute("data-mce-caret")),Ei=e=>Vs(e)&&mc(e.data),Hr=e=>Ks(e)||Ei(e),bg=e=>e.firstChild!==e.lastChild||!hn(e.firstChild),vu=e=>{const t=e.container();return!!Me(t)&&(t.data.charAt(e.offset())===ir||e.isAtStart()&&Ei(t.previousSibling))},_u=e=>{const t=e.container();return!!Me(t)&&(t.data.charAt(e.offset()-1)===ir||e.isAtEnd()&&Ei(t.nextSibling))},vc=e=>Vs(e)&&e.data[0]===ir,_c=e=>Vs(e)&&e.data[e.data.length-1]===ir,yu=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const r=t.getElementsByTagName("br"),o=r[r.length-1];es(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,wg=e=>Ks(e.startContainer),xg=xo,ak=tn,lk=hn,ck=Me,dk=wo(["script","style","textarea"]),Cg=wo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),uk=wo(["table"]),hk=Hr,ho=e=>!hk(e)&&(ck(e)?!dk(e.parentNode):Cg(e)||lk(e)||uk(e)||bu(e)),bu=e=>{return!(Ye(t=e)&&"true"===t.getAttribute("unselectable"))&&ak(e);var t},kg=(e,t)=>ho(e)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(bu(o))return!1;if(xg(o))return!0}return!0})(e,t),fk=/^[ \t\r\n]*$/,Ti=e=>fk.test(e),pk=e=>{for(const t of e)if(!pu(t))return!1;return!0},Sg=e=>"\n"===e||"\r"===e,Eg=(e,t=4,n=!0,r=!0)=>{const o=(c=t)<=0?"":new Array(c+1).join(" "),i=e.replace(/\t/g,o);var c;return et(i,(a,c)=>{return-1!==" \f\t\v".indexOf(c)||c===zn?a.pcIsSpace||""===a.str&&n||a.str.length===i.length-1&&r||(f=a.str.length+1)<(d=i).length&&f>=0&&Sg(d[f])?{pcIsSpace:!1,str:a.str+zn}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Sg(c),str:a.str+c};var d,f},{pcIsSpace:!1,str:""}).str},yc=(e,t)=>{return ho(e)&&(r=t,!(Me(n=e)&&Ti(n.data)&&!((o,i)=>{const s=X(i),a=X(o);return fg(a,"pre,code",ge(Dt,s))})(n,r)))||(n=>Ye(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(e)||gk(e);var n,r},gk=pg("data-mce-bookmark"),mk=pg("data-mce-bogus"),vk=e=>Ye(e)&&"all"===e.getAttribute("data-mce-bogus"),Sn=(e,t=!0)=>((n,r)=>{let o=0;if(yc(n,n))return!1;{let i=n.firstChild;if(!i)return!0;const s=new Pn(i,n);do{if(r){if(vk(i)){i=s.next(!0);continue}if(mk(i)){i=s.next();continue}}if(hn(i))o++,i=s.next();else{if(yc(i,n))return!1;i=s.next()}}while(i);return o<=1}})(e.dom,t),bc="data-mce-block",wu=e=>{return(t=e,ot(_n(t),n=>!/[A-Z]/.test(n))).join(",");var t},Tg=(e,t)=>N(t.querySelector(e))?(t.setAttribute(bc,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(bc),!1),Ng=(e,t)=>{const n=wu(e.getTransparentElements()),r=wu(e.getBlockElements());return ot(t.querySelectorAll(n),o=>Tg(r,o))},Ag=(e,t)=>{var n;const r=t?"lastChild":"firstChild";for(let o=e[r];o;o=o[r])if(Sn(X(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},xu=(e,t)=>{const n=Ng(e,t);var r,o,i;((e,t,n)=>{const r=e.getBlockElements(),o=X(t),i=a=>Yt(a)in r,s=a=>Dt(a,o);ke(Nn(n),a=>{or(a,i,s).each(c=>{const d=ot(Qt(a),_=>i(_)&&!e.isValidChild(Yt(c),Yt(_)));if(d.length>0){const f=wi(c);ke(d,p=>{or(p,i,s).each(_=>{((w,y)=>{const S=document.createRange(),b=w.parentNode;if(b){S.setStartBefore(w),S.setEndBefore(y);const T=S.extractContents();Ag(T,!0),S.setStartAfter(y),S.setEndAfter(w);const j=S.extractContents();Ag(j,!1),Sn(X(T))||b.insertBefore(T,w),Sn(X(y))||b.insertBefore(y,w),Sn(X(j))||b.insertBefore(j,w),b.removeChild(w)}})(_.dom,p.dom)})}),f.each(p=>Ng(e,p.dom))}})})})(e,t,n),r=e,o=t,i=n,ke([...i,...ns(r,o)?[o]:[]],s=>ke(Qn(X(s),s.nodeName.toLowerCase()),a=>{bk(r,a.dom)&&St(a)}))},yk=(e,t)=>{if(Su(e,t)){const n=wu(e.getBlockElements());Tg(n,t)}},Cu=e=>e.hasAttribute(bc),ku=(e,t)=>ut(e.getTransparentElements(),t),Su=(e,t)=>Ye(t)&&ku(e,t.nodeName),ns=(e,t)=>Su(e,t)&&Cu(t),bk=(e,t)=>Su(e,t)&&!Cu(t),Eu=(e,t)=>1===t.type&&ku(e,t.name)&&W(t.attr(bc)),wk=tr().browser,Og=e=>Z(e,nr),Rg=(e,t)=>e.children&&Oe(e.children,t),jg=(e,t={})=>{let n=0;const r={},o=X(e),i=It(o),s=c=>new Promise((d,f)=>{let p;const _=Ie._addCacheSuffix(c),w=qt(r,_).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[_]=w,w.count++;const y=(D,F)=>{ke(D,ue),w.status=F,w.passed=[],w.failed=[],p&&(p.onload=null,p.onerror=null,p=null)},S=()=>y(w.passed,2),b=()=>y(w.failed,3);if(d&&w.passed.push(d),f&&w.failed.push(f),1===w.status)return;if(2===w.status)return void S();if(3===w.status)return void b();w.status=1;const T=je("link",i.dom);var j;so(T,{rel:"stylesheet",type:"text/css",id:w.id}),t.contentCssCors&&En(T,"crossOrigin","anonymous"),t.referrerPolicy&&En(T,"referrerpolicy",t.referrerPolicy),p=T.dom,p.onload=S,p.onerror=b,j=T,Qe(an(o),j),En(T,"href",_)}),a=c=>{const d=Ie._addCacheSuffix(c);qt(r,d).each(f=>{0==--f.count&&(delete r[d],(p=>{const _=an(o);Lo(_,"#"+p).each(_t)})(f.id))})};return{load:s,loadAll:c=>Promise.allSettled(pt(c,d=>s(d).then(J(d)))).then(d=>{const f=er(d,p=>"fulfilled"===p.status);return f.fail.length>0?Promise.reject(pt(f.fail,p=>p.reason)):pt(f.pass,p=>p.value)}),unload:a,unloadAll:c=>{ke(c,d=>{a(d)})},_setReferrerPolicy:c=>{t.referrerPolicy=c},_setContentCssCors:c=>{t.contentCssCors=c}}},Dg=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=sn(t).dom;return O.from(e.get(r)).getOrThunk(()=>{const o=jg(r,n);return e.set(r,o),o})}}})(),Pg=(e,t)=>N(e)&&(yc(e,t)||pc(X(e))),Bg=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Tu=(e,t,n)=>{var r;const o=n||t;if(Ye(t)&&Bg(t))return t;const i=t.childNodes;for(let s=i.length-1;s>=0;s--)Tu(e,i[s],o);if(Ye(t)){const s=t.childNodes;1===s.length&&Bg(s[0])&&(null===(r=t.parentNode)||void 0===r||r.insertBefore(s[0],t))}return fu(s=t)||Ha(s)||yc(t,o)||(s=>!!Ye(s)&&s.childNodes.length>0)(t)||((s,a)=>Me(s)&&s.data.length>0&&((c,d)=>{const f=new Pn(c,d).prev(!1),p=new Pn(c,d).next(!1),_=x(f)||Pg(f,d),w=x(p)||Pg(p,d);return _&&w})(s,a))(t,o)||e.remove(t),t;var s},xk=Ie.makeMap,wc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ck=/[<>&\"\']/g,kk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Sk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},rs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ek={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Lg=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let o=0;o<r.length;o+=2){const i=String.fromCharCode(parseInt(r[o],t));if(!rs[i]){const s="&"+r[o+1]+";";n[i]=s,n[s]=i}}return n}},Nu=Lg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Mg=(e,t)=>e.replace(t?wc:xc,n=>rs[n]||n),Ig=(e,t)=>e.replace(t?wc:xc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":rs[n]||"&#"+n.charCodeAt(0)+";"),Au=(e,t,n)=>{const r=n||Nu;return e.replace(t?wc:xc,o=>rs[o]||r[o]||o)},Ni={encodeRaw:Mg,encodeAllRaw:e=>(""+e).replace(Ck,t=>rs[t]||t),encodeNumeric:Ig,encodeNamed:Au,getEncodeFunc:(e,t)=>{const n=Lg(t)||Nu,r=xk(e.replace(/\+/g,","));return r.named&&r.numeric?(o,i)=>o.replace(i?wc:xc,s=>void 0!==rs[s]?rs[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):r.named?t?(o,i)=>Au(o,i,n):Au:r.numeric?Ig:Mg},decode:e=>e.replace(kk,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Sk[n]||String.fromCharCode(n):Ek[t]||Nu[t]||(r=>{const o=je("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(t))},Zn=(e,t)=>(e=Ie.trim(e))?e.split(t||" "):[],zg=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Cc={},Va=Ie.makeMap,Co=Ie.each,Ou=Ie.extend,Fg=Ie.explode,$g=(e,t={})=>{const n=Va(e," ",Va(e.toUpperCase()," "));return Ou(n,t)},Hg=e=>$g("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Ru=(e,t)=>{if(e){const n={};return W(e)&&(e={"*":e}),Co(e,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===t?Va(r,/[, ]/):Fg(r,/[, ]/)}),n}},Ai=(e={})=>{var t;const n={},r={};let o=[];const i={},s={},a=(de,De,ze)=>{const He=e[de];if(He)return Va(He,/[, ]/,Va(He.toUpperCase(),/[, ]/));{let Ue=Cc[de];return Ue||(Ue=$g(De,ze),Cc[de]=Ue),Ue}},c=null!==(t=e.schema)&&void 0!==t?t:"html5",d=(de=>{const{globalAttributes:De,phrasingContent:ze,flowContent:He}=(zt=>{let ur,On,pn,hr;return ur="id accesskey class dir lang style tabindex title role",On="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",pn="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==zt&&(ur+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",On+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",pn+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==zt&&(ur+=" xml:lang",pn=[pn,"acronym applet basefont big font strike tt"].join(" "),On=[On,"center dir isindex noframes"].join(" "),hr=[On,pn].join(" ")),hr=hr||[On,pn].join(" "),{globalAttributes:ur,blockContent:On,phrasingContent:pn,flowContent:hr}})(de),Ue={},Fe=(zt,ur="",On="")=>{const pn=Zn(On),hr=Zn(zt);let Jr=hr.length;for(;Jr--;){const Vn=Zn([De,ur].join(" "));Ue[hr[Jr]]={attributes:Vt(Vn,J({})),attributesOrder:Vn,children:Vt(pn,J({}))}}},ht=(zt,ur)=>{const On=Zn(zt),pn=Zn(ur);let hr=On.length;for(;hr--;){const Jr=Ue[On[hr]];for(let Vn=0,ui=pn.length;Vn<ui;Vn++)Jr.attributes[pn[Vn]]={},Jr.attributesOrder.push(pn[Vn])}};return"html5-strict"!==de&&(ke(Zn("acronym applet basefont big font strike tt"),zt=>{Fe(zt,"",ze)}),ke(Zn("center dir isindex noframes"),zt=>{Fe(zt,"",He)})),Fe("html","manifest","head body"),Fe("head","","base command link meta noscript script style title"),Fe("title hr noscript br"),Fe("base","href target"),Fe("link","href rel media hreflang type sizes hreflang"),Fe("meta","name http-equiv content charset"),Fe("style","media type scoped"),Fe("script","src async defer type charset"),Fe("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",He),Fe("dd div","",He),Fe("address dt caption","","html4"===de?ze:He),Fe("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ze),Fe("blockquote","cite",He),Fe("ol","reversed start type","li"),Fe("ul","","li"),Fe("li","value",He),Fe("dl","","dt dd"),Fe("a","href target rel media hreflang type","html4"===de?ze:He),Fe("q","cite",ze),Fe("ins del","cite datetime",He),Fe("img","src sizes srcset alt usemap ismap width height"),Fe("iframe","src name width height",He),Fe("embed","src type width height"),Fe("object","data type typemustmatch name usemap form width height",[He,"param"].join(" ")),Fe("param","name value"),Fe("map","name",[He,"area"].join(" ")),Fe("area","alt coords shape href target rel media hreflang type"),Fe("table","border","caption colgroup thead tfoot tbody tr"+("html4"===de?" col":"")),Fe("colgroup","span","col"),Fe("col","span"),Fe("tbody thead tfoot","","tr"),Fe("tr","","td th"),Fe("td","colspan rowspan headers",He),Fe("th","colspan rowspan headers scope abbr",He),Fe("form","accept-charset action autocomplete enctype method name novalidate target",He),Fe("fieldset","disabled form name",[He,"legend"].join(" ")),Fe("label","form for",ze),Fe("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Fe("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===de?He:ze),Fe("select","disabled form multiple name required size","option optgroup"),Fe("optgroup","disabled label","option"),Fe("option","disabled label selected value"),Fe("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Fe("menu","type label",[He,"li"].join(" ")),Fe("noscript","",He),"html4"!==de&&(Fe("wbr"),Fe("ruby","",[ze,"rt rp"].join(" ")),Fe("figcaption","",He),Fe("mark rt rp summary bdi","",ze),Fe("canvas","width height",He),Fe("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[He,"track source"].join(" ")),Fe("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[He,"track source"].join(" ")),Fe("picture","","img source"),Fe("source","src srcset type media sizes"),Fe("track","kind src srclang label default"),Fe("datalist","",[ze,"option"].join(" ")),Fe("article section nav aside main header footer","",He),Fe("hgroup","","h1 h2 h3 h4 h5 h6"),Fe("figure","",[He,"figcaption"].join(" ")),Fe("time","datetime",ze),Fe("dialog","open",He),Fe("command","type label icon disabled checked radiogroup command"),Fe("output","for form name",ze),Fe("progress","value max",ze),Fe("meter","value min max low high optimum",ze),Fe("details","open",[He,"summary"].join(" ")),Fe("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==de&&(ht("script","language xml:space"),ht("style","xml:space"),ht("object","declare classid code codebase codetype archive standby align border hspace vspace"),ht("embed","align name hspace vspace"),ht("param","valuetype type"),ht("a","charset name rev shape coords"),ht("br","clear"),ht("applet","codebase archive code object alt name width height align hspace vspace"),ht("img","name longdesc align border hspace vspace"),ht("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ht("font basefont","size color face"),ht("input","usemap align"),ht("select"),ht("textarea"),ht("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ht("ul","type compact"),ht("li","type"),ht("ol dl menu dir","compact"),ht("pre","width xml:space"),ht("hr","align noshade size width"),ht("isindex","prompt"),ht("table","summary width frame rules cellspacing cellpadding align bgcolor"),ht("col","width align char charoff valign"),ht("colgroup","width align char charoff valign"),ht("thead","align char charoff valign"),ht("tr","align char charoff valign bgcolor"),ht("th","axis align char charoff valign nowrap bgcolor width height"),ht("form","accept"),ht("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ht("tfoot","align char charoff valign"),ht("tbody","align char charoff valign"),ht("area","nohref"),ht("body","background bgcolor text link vlink alink")),"html4"!==de&&(ht("input button select textarea","autofocus"),ht("input textarea","placeholder"),ht("a","download"),ht("link script img","crossorigin"),ht("img","loading"),ht("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==de&&ke([Ue.video,Ue.audio],zt=>{delete zt.children.audio,delete zt.children.video}),ke(Zn("a form meter progress dfn"),zt=>{Ue[zt]&&delete Ue[zt].children[zt]}),delete Ue.caption.children.table,delete Ue.script,Ue})(c);!1===e.verify_html&&(e.valid_elements="*[*]");const f=Ru(e.valid_styles),p=Ru(e.invalid_styles,"map"),_=Ru(e.valid_classes,"map"),w=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),y=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),S=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),T="td th iframe video audio object script code",j=a("non_empty_elements",T+" pre",S),D=a("move_caret_before_on_enter_elements",T+" table",S),F=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),z=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",F),Y=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),re=a("transparent_elements","a ins del canvas map");Co("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),de=>{s[de]=new RegExp("</"+de+"[^>]*>","gi")});const ie=de=>{const De=O.from(n["@"]),ze=/[*?+]/;ke(((He,Ue)=>{const Fe=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return We(Zn(Ue,","),ht=>{const zt=Fe.exec(ht);if(zt){const ur=zt[1],On=zt[2],pn=zt[3],hr=zt[4],Jr=zt[5],Vn={attributes:{},attributesOrder:[]};if(He.each(ui=>{return Oo=Vn,Ft((Ln=ui).attributes,(Yo,qi)=>{Oo.attributes[qi]=Yo}),void Oo.attributesOrder.push(...Ln.attributesOrder);var Ln,Oo}),"#"===ur?Vn.paddEmpty=!0:"-"===ur&&(Vn.removeEmpty=!0),"!"===hr&&(Vn.removeEmptyAttrs=!0),Jr&&((ui,Ln)=>{const Oo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Yo=/[*?+]/,{attributes:qi,attributesOrder:Ca}=Ln;ke(Zn(ui,"|"),nu=>{const hi=Oo.exec(nu);if(hi){const fi={},ka=hi[1],Lr=hi[2].replace(/[\\:]:/g,":"),Qr=hi[3],Go=hi[4];if("!"===ka&&(Ln.attributesRequired=Ln.attributesRequired||[],Ln.attributesRequired.push(Lr),fi.required=!0),"-"===ka)return delete qi[Lr],void Ca.splice(Ie.inArray(Ca,Lr),1);if(Qr&&("="===Qr?(Ln.attributesDefault=Ln.attributesDefault||[],Ln.attributesDefault.push({name:Lr,value:Go}),fi.defaultValue=Go):"~"===Qr?(Ln.attributesForced=Ln.attributesForced||[],Ln.attributesForced.push({name:Lr,value:Go}),fi.forcedValue=Go):"<"===Qr&&(fi.validValues=Ie.makeMap(Go,"?"))),Yo.test(Lr)){const Yl=fi;Ln.attributePatterns=Ln.attributePatterns||[],Yl.pattern=zg(Lr),Ln.attributePatterns.push(Yl)}else qi[Lr]||Ca.push(Lr),qi[Lr]=fi}})})(Jr,Vn),pn&&(Vn.outputName=On),"@"===On){if(!He.isNone())return[];He=O.some(Vn)}return[pn?{name:On,element:Vn,aliasName:pn}:{name:On,element:Vn}]}return[]})})(De,de??""),({name:He,element:Ue,aliasName:Fe})=>{if(Fe&&(n[Fe]=Ue),ze.test(He)){const ht=Ue;ht.pattern=zg(He),o.push(ht)}else n[He]=Ue})},ce=de=>{o=[],ke(_n(n),De=>{delete n[De]}),ie(de)},me=de=>{delete Cc.text_block_elements,delete Cc.block_elements,ke((De=>{const ze=/^(~)?(.+)$/;return We(Zn(De,","),He=>{const Ue=ze.exec(He);if(Ue){const Fe="~"===Ue[1];return[{inline:Fe,cloneName:Fe?"span":"div",name:Ue[2]}]}return[]})})(de??""),({inline:De,name:ze,cloneName:He})=>{if(r[ze]=r[He],i[ze]=He,j[ze.toUpperCase()]={},j[ze]={},De||(z[ze.toUpperCase()]={},z[ze]={}),!n[ze]){let Ue=n[He];Ue=Ou({},Ue),delete Ue.removeEmptyAttrs,delete Ue.removeEmpty,n[ze]=Ue}Ft(r,(Ue,Fe)=>{Ue[He]&&(r[Fe]=Ue=Ou({},r[Fe]),Ue[ze]=Ue[He])})})},Q=de=>{ke((De=>{const ze=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return We(Zn(De,","),He=>{const Ue=ze.exec(He);if(Ue){const Fe=Ue[1];return[{operation:Fe?(zt=Fe,"-"===zt?"remove":"add"):"replace",name:Ue[2],validChildren:Zn(Ue[3],"|")}]}var zt;return[]})})(de??""),({operation:De,name:ze,validChildren:He})=>{const Ue="replace"===De?{"#comment":{}}:r[ze];ke(He,Fe=>{"remove"===De?delete Ue[Fe]:Ue[Fe]={}}),r[ze]=Ue})},ee=de=>{const De=n[de];if(De)return De;let ze=o.length;for(;ze--;){const He=o[ze];if(He.pattern.test(de))return He}};e.valid_elements?(ce(e.valid_elements),Co(d,(de,De)=>{r[De]=de.children})):(Co(d,(de,De)=>{n[De]={attributes:de.attributes,attributesOrder:de.attributesOrder},r[De]=de.children}),Co(Zn("strong/b em/i"),de=>{const De=Zn(de,"/");n[De[1]].outputName=De[0]}),Co(Y,(de,De)=>{n[De]&&(e.padd_empty_block_inline_children&&(n[De].paddInEmptyBlock=!0),n[De].removeEmpty=!0)}),Co(Zn("ol ul blockquote a table tbody"),de=>{n[de]&&(n[de].removeEmpty=!0)}),Co(Zn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),de=>{n[de]&&(n[de].paddEmpty=!0)}),Co(Zn("span"),de=>{n[de].removeEmptyAttrs=!0})),me(e.custom_elements),Q(e.valid_children),ie(e.extended_valid_elements),Q("+ol[ul|ol],+ul[ul|ol]"),Co({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(de,De)=>{n[De]&&(n[De].parentsRequired=Zn(de))}),e.invalid_elements&&Co(Fg(e.invalid_elements),de=>{n[de]&&delete n[de]}),ee("span")||ie("span[!data-mce-type|*]");const he=J(f),we=J(p),Ve=J(_),Be=J(b),rt=J(z),Je=J(F),gt=J(Y),vt=J(Object.seal(S)),Xe=J(y),dt=J(j),yt=J(D),te=J(w),se=J(re),be=J(Object.seal(s)),Ne=J(i);return{type:c,children:r,elements:n,getValidStyles:he,getValidClasses:Ve,getBlockElements:rt,getInvalidStyles:we,getVoidElements:vt,getTextBlockElements:Je,getTextInlineElements:gt,getBoolAttrs:Be,getElementRule:ee,getSelfClosingElements:Xe,getNonEmptyElements:dt,getMoveCaretBeforeOnEnterElements:yt,getWhitespaceElements:te,getTransparentElements:se,getSpecialElements:be,isValidChild:(de,De)=>{const ze=r[de.toLowerCase()];return!(!ze||!ze[De.toLowerCase()])},isValid:(de,De)=>{const ze=ee(de);if(ze){if(!De)return!0;{if(ze.attributes[De])return!0;const He=ze.attributePatterns;if(He){let Ue=He.length;for(;Ue--;)if(He[Ue].pattern.test(De))return!0}}}return!1},getCustomElements:Ne,addValidElements:ie,setValidElements:ce,addCustomElements:me,addValidChildren:Q}},ju=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,i={};let s,a;t&&(s=t.getValidStyles(),a=t.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let p=0;p<d.length;p++)i[d[p]]="\ufeff"+p,i["\ufeff"+p]=d[p];const f={parse:p=>{const _={};let w=!1;const y=e.url_converter,S=e.url_converter_scope||f,b=(me,Q,ee)=>{const he=_[me+"-top"+Q];if(!he)return;const we=_[me+"-right"+Q];if(!we)return;const Ve=_[me+"-bottom"+Q];if(!Ve)return;const Be=_[me+"-left"+Q];if(!Be)return;const rt=[he,we,Ve,Be];let Je=rt.length-1;for(;Je--&&rt[Je]===rt[Je+1];);Je>-1&&ee||(_[me+Q]=-1===Je?rt[0]:rt.join(" "),delete _[me+"-top"+Q],delete _[me+"-right"+Q],delete _[me+"-bottom"+Q],delete _[me+"-left"+Q])},T=me=>{const Q=_[me];if(!Q)return;const ee=Q.indexOf(",")>-1?[Q]:Q.split(" ");let he=ee.length;for(;he--;)if(ee[he]!==ee[0])return!1;return _[me]=ee[0],!0},j=me=>(w=!0,i[me]),D=(me,Q)=>(w&&(me=me.replace(/\uFEFF[0-9]/g,ee=>i[ee])),Q||(me=me.replace(/\\([\'\";:])/g,"$1")),me),F=me=>String.fromCharCode(parseInt(me.slice(1),16)),z=me=>me.replace(/\\[0-9a-f]+/gi,F),Y=(me,Q,ee,he,we,Ve)=>{if(we=we||Ve)return"'"+(we=D(we)).replace(/\'/g,"\\'")+"'";if(Q=D(Q||ee||he||""),!e.allow_script_urls){const Be=Q.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Be)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Be))return""}return y&&(Q=y.call(S,Q,"style")),"url('"+Q.replace(/\'/g,"\\'")+"')"};if(p){let me;for(p=(p=p.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,j).replace(/\"[^\"]+\"|\'[^\']+\'/g,Q=>Q.replace(/[;:]/g,j));me=r.exec(p);){r.lastIndex=me.index+me[0].length;let Q=me[1].replace(o,"").toLowerCase(),ee=me[2].replace(o,"");if(Q&&ee){if(Q=z(Q),ee=z(ee),-1!==Q.indexOf("\ufeff")||-1!==Q.indexOf('"')||!e.allow_script_urls&&("behavior"===Q||/expression\s*\(|\/\*|\*\//.test(ee)))continue;"font-weight"===Q&&"700"===ee?ee="bold":"color"!==Q&&"background-color"!==Q||(ee=ee.toLowerCase()),ee=ee.replace(n,Y),_[Q]=w?D(ee,!0):ee}}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),ie="border-style",ce="border-color",T(re="border-width")&&T(ie)&&T(ce)&&(_.border=_[re]+" "+_[ie]+" "+_[ce],delete _[re],delete _[ie],delete _[ce]),"medium none"===_.border&&delete _.border,"none"===_["border-image"]&&delete _["border-image"]}var re,ie,ce;return _},serialize:(p,_)=>{let w="";const y=(S,b)=>{const T=b[S];if(T)for(let j=0,D=T.length;j<D;j++){const F=T[j],z=p[F];z&&(w+=(w.length>0?" ":"")+F+": "+z+";")}};return _&&s?(y("*",s),y(_,s)):Ft(p,(S,b)=>{S&&((T,j)=>{if(!a||!j)return!0;let D=a["*"];return!(D&&D[T]||(D=a[j],D&&D[T]))})(b,_)&&(w+=(w.length>0?" ":"")+b+": "+S+";")}),w}};return f},Tk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},qg=(e,t)=>{const n=t??{};for(const r in e)ut(Tk,r)||(n[r]=e[r]);return N(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Du=(e,t,n,r)=>{var o;const i=qg(t,r);return i.type=e,C(i.target)&&(i.target=null!==(o=i.srcElement)&&void 0!==o?o:n),(C((s=t).preventDefault)||(a=s)instanceof Event||P(a.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=ft,P(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=ft,P(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=ft,i.stopPropagation()},(s=>s.isDefaultPrevented===ft||s.isDefaultPrevented===Et)(i)||(i.isDefaultPrevented=!0===i.defaultPrevented?ft:Et,i.isPropagationStopped=!0===i.cancelBubble?ft:Et,i.isImmediatePropagationStopped=Et)),i;var s,a},Nk=/^(?:mouse|contextmenu)|click/,Pu=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},kc=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},Ka=(e,t)=>{const n=Du(e.type,e,document,t);if(N(r=e)&&Nk.test(r.type)&&x(e.pageX)&&!x(e.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,i=r.body,s=n;s.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),s.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}var r;return n},Ak=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const i=()=>{kc(e,"DOMContentLoaded",i),kc(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():Pu(e,"DOMContentLoaded",i),n.domLoaded||Pu(e,"load",i)};class os{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,r,o){const i=this;let s;const a=window,c=_=>{i.executeHandlers(Ka(_||a.event),d)};if(!t||Me(t)||Ci(t))return r;let d;t[i.expando]?d=t[i.expando]:(d=i.count++,t[i.expando]=d,i.events[d]={}),o=o||t;const f=n.split(" ");let p=f.length;for(;p--;){let _=f[p],w=c,y=!1,S=!1;"DOMContentLoaded"===_&&(_="ready"),i.domLoaded&&"ready"===_&&"complete"===t.readyState?r.call(o,Ka({type:_})):(i.hasFocusIn||"focusin"!==_&&"focusout"!==_||(y=!0,S="focusin"===_?"focus":"blur",w=b=>{const T=Ka(b||a.event);T.type="focus"===T.type?"focusin":"focusout",i.executeHandlers(T,d)}),s=i.events[d][_],s?"ready"===_&&i.domLoaded?r(Ka({type:_})):s.push({func:r,scope:o}):(i.events[d][_]=s=[{func:r,scope:o}],s.fakeName=S,s.capture=y,s.nativeHandler=w,"ready"===_?Ak(t,w,i):Pu(t,S||_,w,y)))}return t=s=null,r}unbind(t,n,r){if(!t||Me(t)||Ci(t))return this;const o=t[this.expando];if(o){let i=this.events[o];if(n){const s=n.split(" ");let a=s.length;for(;a--;){const c=s[a],d=i[c];if(d){if(r){let f=d.length;for(;f--;)if(d[f].func===r){const p=d.nativeHandler,_=d.fakeName,w=d.capture,y=d.slice(0,f).concat(d.slice(f+1));y.nativeHandler=p,y.fakeName=_,y.capture=w,i[c]=y}}r&&0!==d.length||(delete i[c],kc(t,d.fakeName||c,d.nativeHandler,d.capture))}}}else Ft(i,(s,a)=>{kc(t,s.fakeName||a,s.nativeHandler,s.capture)}),i={};for(const s in i)if(ut(i,s))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,r){return this.dispatch(t,n,r)}dispatch(t,n,r){if(!t||Me(t)||Ci(t))return this;const o=Ka({type:n,target:t},r);do{const i=t[this.expando];i&&this.executeHandlers(o,i),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||Me(t)||Ci(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let r=n.length;for(;r--;)(t=n[r])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const r=this.events[n],o=r&&r[t.type];if(o)for(let i=0,s=o.length;i<s;i++){const a=o[i];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}os.Event=new os;const Bu=Ie.each,Ok=Ie.grep,Lu="data-mce-style",Rk=Ie.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Xa=(e,t,n)=>{C(n)||""===n?h(e,t):En(e,t,n)},Ug=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Xs=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const i=o.nodeType;(!t||!Me(o)||i!==r&&o.data.length)&&(n++,r=i)}return n},Wg=(e,t)=>{const n=Cr(t,"style"),r=e.serialize(e.parse(n),Yt(t));Xa(t,Lu,r)},Vg=(e,t,n)=>{const r=Ug(t);var o,i;C(n)||""===n?$e(e,r):Us(e,r,(i=r,m(o=n)?ut(Rk,i)?o+"":o+"px":o))},Gt=(e,t={})=>{const n={},r=window,o={};let i=0;const s=Dg.forElement(X(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],c=t.schema?t.schema:Ai({}),d=ju({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),f=t.ownEvents?new os:os.Event,p=c.getBlockElements(),_=te=>te&&e&&W(te)?e.getElementById(te):te,w=te=>{const se=_(te);return N(se)?X(se):null},y=(te,se,be="")=>{let Ne;const de=w(te);if(N(de)&&nr(de)){const De=yt[se];Ne=De&&De.get?De.get(de.dom,se):Cr(de,se)}return N(Ne)?Ne:be},S=te=>{const se=_(te);return C(se)?[]:se.attributes},b=(te,se,be)=>{ie(te,Ne=>{if(Ye(Ne)){const de=X(Ne),De=""===be?null:be,ze=Cr(de,se),He=yt[se];He&&He.set?He.set(de.dom,De,se):Xa(de,se,De),ze!==De&&t.onSetAttrib&&t.onSetAttrib({attrElm:de.dom,attrName:se,attrValue:De})}})},T=()=>t.root_element||e.body,j=(te,se)=>((be,Ne,de)=>{let De=0,ze=0;const He=be.ownerDocument;if(de=de||be,Ne){if(de===be&&Ne.getBoundingClientRect&&"static"===G(X(be),"position")){const Fe=Ne.getBoundingClientRect();return De=Fe.left+(He.documentElement.scrollLeft||be.scrollLeft)-He.documentElement.clientLeft,ze=Fe.top+(He.documentElement.scrollTop||be.scrollTop)-He.documentElement.clientTop,{x:De,y:ze}}let Ue=Ne;for(;Ue&&Ue!==de&&Ue.nodeType&&!Rg(Ue,de);)De+=Ue.offsetLeft||0,ze+=Ue.offsetTop||0,Ue=Ue.offsetParent;for(Ue=Ne.parentNode;Ue&&Ue!==de&&Ue.nodeType&&!Rg(Ue,de);)De-=Ue.scrollLeft||0,ze-=Ue.scrollTop||0,Ue=Ue.parentNode;ze+=(Fe=X(Ne),wk.isFirefox()&&"table"===Yt(Fe)?Og(Qt(Fe)).filter(ht=>"caption"===Yt(ht)).bind(ht=>Og(ti(ht)).map(zt=>zt.dom.offsetTop<=ht.dom.offsetTop?-ht.dom.offsetHeight:0)).getOr(0):0)}var Fe;return{x:De,y:ze}})(e.body,_(te),se),D=(te,se,be)=>{const Ne=_(te);if(!C(Ne)&&Ye(Ne))return be?G(X(Ne),Ug(se)):("float"===(se=se.replace(/-(\D)/g,(de,De)=>De.toUpperCase()))&&(se="cssFloat"),Ne.style?Ne.style[se]:void 0)},F=te=>{const se=_(te);if(!se)return{w:0,h:0};let be=D(se,"width"),Ne=D(se,"height");return be&&-1!==be.indexOf("px")||(be="0"),Ne&&-1!==Ne.indexOf("px")||(Ne="0"),{w:parseInt(be,10)||se.offsetWidth||se.clientWidth,h:parseInt(Ne,10)||se.offsetHeight||se.clientHeight}},z=(te,se)=>{if(!te)return!1;const be=u(te)?te:[te];return Ht(be,Ne=>on(X(Ne),se))},Y=(te,se,be,Ne)=>{const de=[];let De=_(te);Ne=void 0===Ne;const ze=be||("BODY"!==T().nodeName?T().parentNode:null);if(W(se))if("*"===se)se=Ye;else{const He=se;se=Ue=>z(Ue,He)}for(;De&&!(De===ze||C(De.nodeType)||Ha(De)||fu(De));){if(!se||se(De)){if(!Ne)return[De];de.push(De)}De=De.parentNode}return Ne?de:null},re=(te,se,be)=>{let Ne=se;if(te){W(se)&&(Ne=de=>z(de,se));for(let de=te[be];de;de=de[be])if(P(Ne)&&Ne(de))return de}return null},ie=function(te,se,be){const Ne=be??this;if(u(te)){const de=[];return Bu(te,(De,ze)=>{const He=_(De);He&&de.push(se.call(Ne,He,ze))}),de}{const de=_(te);return!!de&&se.call(Ne,de)}},ce=(te,se)=>{ie(te,be=>{Ft(se,(Ne,de)=>{b(be,de,Ne)})})},me=(te,se)=>{ie(te,be=>{const Ne=X(be);An(Ne,se)})},Q=(te,se,be,Ne,de)=>ie(te,De=>{const ze=W(se)?e.createElement(se):se;return N(be)&&ce(ze,be),Ne&&(!W(Ne)&&Ne.nodeType?ze.appendChild(Ne):W(Ne)&&me(ze,Ne)),de?ze:De.appendChild(ze)}),ee=(te,se,be)=>Q(e.createElement(te),te,se,be,!0),he=Ni.encodeAllRaw,we=(te,se)=>ie(te,be=>{const Ne=X(be);return se&&ke(Qt(Ne),de=>{mr(de)&&0===de.dom.length?_t(de):nt(Ne,de)}),_t(Ne),Ne.dom}),Ve=(te,se,be)=>{ie(te,Ne=>{if(Ye(Ne)){const de=X(Ne),De=se.split(" ");ke(De,ze=>{var He,Ue,ht,zt;N(be)?(be?le:_e)(de,ze):(Ue=ze,A(He=de)?He.dom.classList.toggle(Ue):(zt=Ue,Oe(L(ht=He),zt)?V(ht,zt):$(ht,zt)),oe(He))})}})},Be=(te,se,be)=>ie(se,Ne=>{var de;const De=u(se)?te.cloneNode(!0):te;return be&&Bu(Ok(Ne.childNodes),ze=>{De.appendChild(ze)}),null===(de=Ne.parentNode)||void 0===de||de.replaceChild(De,Ne),Ne}),rt=te=>{if(Ye(te)){const se="a"===te.nodeName.toLowerCase()&&!y(te,"href")&&y(te,"id");if(y(te,"name")||y(te,"data-mce-bookmark")||se)return!0}return!1},Je=()=>e.createRange(),gt=(te,se,be,Ne)=>{if(u(te)){let de=te.length;const De=[];for(;de--;)De[de]=gt(te[de],se,be,Ne);return De}return!t.collect||te!==e&&te!==r||a.push([te,se,be,Ne]),f.bind(te,se,be,Ne||dt)},vt=(te,se,be)=>{if(u(te)){let Ne=te.length;const de=[];for(;Ne--;)de[Ne]=vt(te[Ne],se,be);return de}if(a.length>0&&(te===e||te===r)){let Ne=a.length;for(;Ne--;){const[de,De,ze]=a[Ne];te!==de||se&&se!==De||be&&be!==ze||f.unbind(de,De,ze)}}return f.unbind(te,se,be)},Xe=te=>{if(te&&Ye(te)){const se=te.getAttribute("data-mce-contenteditable");return se&&"inherit"!==se?se:"inherit"!==te.contentEditable?te.contentEditable:null}return null},dt={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:a,styles:d,schema:c,events:f,isBlock:te=>W(te)?ut(p,te):Ye(te)&&(ut(p,te.nodeName)||ns(c,te)),root:null,clone:(te,se)=>te.cloneNode(se),getRoot:T,getViewPort:te=>{const se=ug(te);return{x:se.x,y:se.y,w:se.width,h:se.height}},getRect:te=>{const se=_(te),be=j(se),Ne=F(se);return{x:be.x,y:be.y,w:Ne.w,h:Ne.h}},getSize:F,getParent:(te,se,be)=>{const Ne=Y(te,se,be,!1);return Ne&&Ne.length>0?Ne[0]:null},getParents:Y,get:_,getNext:(te,se)=>re(te,se,"nextSibling"),getPrev:(te,se)=>re(te,se,"previousSibling"),select:(te,se)=>{var be,Ne;const de=null!==(Ne=null!==(be=_(se))&&void 0!==be?be:t.root_element)&&void 0!==Ne?Ne:e;return P(de.querySelectorAll)?vn(de.querySelectorAll(te)):[]},is:z,add:Q,create:ee,createHTML:(te,se,be="")=>{let Ne="<"+te;for(const de in se)fn(se,de)&&(Ne+=" "+de+'="'+he(se[de])+'"');return vi(be)&&ut(c.getVoidElements(),te)?Ne+" />":Ne+">"+be+"</"+te+">"},createFragment:te=>{const se=e.createElement("div"),be=e.createDocumentFragment();let Ne;for(be.appendChild(se),te&&(se.innerHTML=te);Ne=se.firstChild;)be.appendChild(Ne);return be.removeChild(se),be},remove:we,setStyle:(te,se,be)=>{ie(te,Ne=>{const de=X(Ne);Vg(de,se,be),t.update_styles&&Wg(d,de)})},getStyle:D,setStyles:(te,se)=>{ie(te,be=>{const Ne=X(be);Ft(se,(de,De)=>{Vg(Ne,De,de)}),t.update_styles&&Wg(d,Ne)})},removeAllAttribs:te=>ie(te,se=>{const be=se.attributes;for(let Ne=be.length-1;Ne>=0;Ne--)se.removeAttributeNode(be.item(Ne))}),setAttrib:b,setAttribs:ce,getAttrib:y,getPos:j,parseStyle:te=>d.parse(te),serializeStyle:(te,se)=>d.serialize(te,se),addStyle:te=>{if(dt!==Gt.DOM&&e===document){if(n[te])return;n[te]=!0}let se=e.getElementById("mceDefaultStyles");if(!se){se=e.createElement("style"),se.id="mceDefaultStyles",se.type="text/css";const be=e.head;be.firstChild?be.insertBefore(se,be.firstChild):be.appendChild(se)}se.styleSheet?se.styleSheet.cssText+=te:se.appendChild(e.createTextNode(te))},loadCSS:te=>{te||(te=""),ke(te.split(","),se=>{o[se]=!0,s.load(se).catch(I)})},addClass:(te,se)=>{Ve(te,se,!0)},removeClass:(te,se)=>{Ve(te,se,!1)},hasClass:(te,se)=>{const be=w(te),Ne=se.split(" ");return N(be)&&tt(Ne,de=>Te(be,de))},toggleClass:Ve,show:te=>{ie(te,se=>$e(X(se),"display"))},hide:te=>{ie(te,se=>Us(X(se),"display","none"))},isHidden:te=>{const se=w(te);return N(se)&&yi(Se(se,"display"),"none")},uniqueId:te=>(te||"mce_")+i++,setHTML:me,getOuterHTML:te=>{const se=w(te);return N(se)?Ye(se.dom)?se.dom.outerHTML:(be=>{const Ne=je("div"),de=X(be.dom.cloneNode(!0));return Qe(Ne,de),Jn(Ne)})(se):""},setOuterHTML:(te,se)=>{ie(te,be=>{Ye(be)&&(be.outerHTML=se)})},decode:Ni.decode,encode:he,insertAfter:(te,se)=>{const be=_(se);return ie(te,Ne=>{const de=be?.parentNode,De=be?.nextSibling;return de&&(De?de.insertBefore(Ne,De):de.appendChild(Ne)),Ne})},replace:Be,rename:(te,se)=>{if(te.nodeName!==se.toUpperCase()){const be=ee(se);return Bu(S(te),Ne=>{b(be,Ne.nodeName,y(te,Ne.nodeName))}),Be(be,te,!0),be}return te},findCommonAncestor:(te,se)=>{let be=te;for(;be;){let Ne=se;for(;Ne&&be!==Ne;)Ne=Ne.parentNode;if(be===Ne)break;be=be.parentNode}return!be&&te.ownerDocument?te.ownerDocument.documentElement:be},run:ie,getAttribs:S,isEmpty:(te,se,be)=>{let Ne=0;if(rt(te))return!1;const de=te.firstChild;if(de){const De=new Pn(de,te),ze=c?c.getWhitespaceElements():{},He=se||(c?c.getNonEmptyElements():null);let Ue=de;do{if(Ye(Ue)){const Fe=Ue.getAttribute("data-mce-bogus");if(Fe){Ue=De.next("all"===Fe);continue}const ht=Ue.nodeName.toLowerCase();if(He&&He[ht]){if("br"===ht){Ne++,Ue=De.next();continue}return!1}if(rt(Ue))return!1}if(Ci(Ue)||Me(Ue)&&!Ti(Ue.data)&&(!be?.includeZwsp||!pk(Ue.data))||Me(Ue)&&Ue.parentNode&&ze[Ue.parentNode.nodeName]&&Ti(Ue.data))return!1;Ue=De.next()}while(Ue)}return Ne<=1},createRng:Je,nodeIndex:Xs,split:(te,se,be)=>{let Ne,de,De=Je();if(te&&se&&te.parentNode&&se.parentNode){const ze=te.parentNode;return De.setStart(ze,Xs(te)),De.setEnd(se.parentNode,Xs(se)),Ne=De.extractContents(),De=Je(),De.setStart(se.parentNode,Xs(se)+1),De.setEnd(ze,Xs(te)+1),de=De.extractContents(),ze.insertBefore(Tu(dt,Ne),te),ze.insertBefore(be||se,te),ze.insertBefore(Tu(dt,de),te),we(te),be||se}},bind:gt,unbind:vt,fire:(te,se,be)=>f.dispatch(te,se,be),dispatch:(te,se,be)=>f.dispatch(te,se,be),getContentEditable:Xe,getContentEditableParent:te=>{const se=T();let be=null;for(let Ne=te;Ne&&Ne!==se&&(be=Xe(Ne),null===be);Ne=Ne.parentNode);return be},isEditable:te=>{if(N(te)){const se=Ye(te)?te:te.parentElement;return N(se)&&bo(X(se))}return!1},destroy:()=>{if(a.length>0){let te=a.length;for(;te--;){const[se,be,Ne]=a[te];f.unbind(se,be,Ne)}}Ft(o,(te,se)=>{s.unload(se),delete o[se]})},isChildOf:(te,se)=>te===se||se.contains(te),dumpRng:te=>"startContainer: "+te.startContainer.nodeName+", startOffset: "+te.startOffset+", endContainer: "+te.endContainer.nodeName+", endOffset: "+te.endOffset},yt=((te,se,be)=>{const Ne=se.keep_values,De={style:{set:(ze,He)=>{const Ue=X(ze);Ne&&Xa(Ue,Lu,He),h(Ue,"style"),W(He)&&Qi(Ue,te.parse(He))},get:ze=>{const He=X(ze),Ue=Cr(He,Lu)||Cr(He,"style");return te.serialize(te.parse(Ue),Yt(He))}}};return Ne&&(De.href=De.src={set:(ze,He,Ue)=>{const Fe=X(ze);P(se.url_converter)&&N(He)&&(He=se.url_converter.call(se.url_converter_scope||be(),String(He),Ue,ze)),Xa(Fe,"data-mce-"+Ue,He),Xa(Fe,Ue,He)},get:(ze,He)=>{const Ue=X(ze);return Cr(Ue,"data-mce-"+He)||Cr(Ue,He)}}),De})(d,t,J(dt));return dt};Gt.DOM=Gt(document),Gt.nodeIndex=Xs;const jk=Gt.DOM;class si{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,r)=>{const o=jk;let i;const s=()=>{o.remove(a),i&&(i.onerror=i.onload=i=null)},a=o.uniqueId();i=document.createElement("script"),i.id=a,i.type="text/javascript",i.src=Ie._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(i,"referrerpolicy",this.settings.referrerPolicy),i.onload=()=>{s(),n()},i.onerror=()=>{s(),r("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(i)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:r,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,r=(c,d)=>{qt(n.scriptLoadedCallbacks,d).each(f=>{ke(f,p=>p[c](d))}),delete n.scriptLoadedCallbacks[d]},o=c=>{const d=ot(c,f=>"rejected"===f.status);return d.length>0?Promise.reject(We(d,({reason:f})=>u(f)?f:[f])):Promise.resolve()},i=c=>Promise.allSettled(pt(c,d=>2===n.states[d]?(r("resolve",d),Promise.resolve()):3===n.states[d]?(r("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,r("resolve",d);const f=n.queue;return f.length>0?(n.queue=[],i(f).then(o)):Promise.resolve()},()=>(n.states[d]=3,r("reject",d),Promise.reject(d)))))),s=c=>(n.loading=!0,i(c).then(d=>{n.loading=!1;const f=n.queueLoadedCallbacks.shift();return O.from(f).each(ue),o(d)})),a=Xt(t);return n.loading?new Promise((c,d)=>{n.queueLoadedCallbacks.push(()=>{s(a).then(c,d)})}):s(a)}}si.ScriptLoader=new si;const Fn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Ya={},Mu=Fn("en"),Kg=()=>qt(Ya,Mu.get()),ko={getData:()=>eo(Ya,e=>({...e})),setCode:e=>{e&&Mu.set(e)},getCode:()=>Mu.get(),add:(e,t)=>{let n=Ya[e];n||(Ya[e]=n={});const r=pt(_n(t),o=>o.toLowerCase());Ft(t,(o,i)=>{const s=i.toLowerCase();s!==i&&((a,c)=>{const d=a.indexOf(c);return-1!==d&&a.indexOf(c,d+1)>d})(r,s)?(ut(t,s)||(n[s]=o),n[i]=o):n[s]=o})},translate:e=>{const t=Kg().getOr({}),n=a=>P(a)?Object.prototype.toString.call(a):r(a)?"":""+a,r=a=>""===a||null==a,o=a=>{const c=n(a);return ut(t,c)?n(t[c]):qt(t,c.toLowerCase()).map(n).getOr(c)},i=a=>a.replace(/{context:\w+}$/,"");if(r(e))return"";if(M(s=e)&&ut(s,"raw"))return n(e.raw);var s,a;if(u(a=e)&&a.length>1){const a=e.slice(1);return i(o(e[0]).replace(/\{([0-9]+)\}/g,(c,d)=>ut(a,d)?n(a[d]):c))}return i(o(e))},isRtl:()=>Kg().bind(e=>qt(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>ut(Ya,e)},cr=()=>{const e=[],t={},n={},r=[],o=(c,d)=>{const f=ot(r,p=>p.name===c&&p.state===d);ke(f,p=>p.resolve())},i=c=>ut(t,c),s=(c,d)=>{const f=ko.getCode();!f||d&&-1===(","+(d||"")+",").indexOf(","+f+",")||si.ScriptLoader.add(t[c]+"/langs/"+f+".js")},a=(c,d="added")=>"added"===d&&ut(n,c)||"loaded"===d&&i(c)?Promise.resolve():new Promise(f=>{r.push({name:c,state:d,resolve:f})});return{items:e,urls:t,lookup:n,get:c=>{if(n[c])return n[c].instance},requireLangPack:(c,d)=>{!1!==cr.languageLoad&&(i(c)?s(c,d):a(c,"loaded").then(()=>s(c,d)))},add:(c,d)=>(e.push(d),n[c]={instance:d},o(c,"added"),d),remove:c=>{delete t[c],delete n[c]},createUrl:(c,d)=>W(d)?W(c)?{prefix:"",resource:d,suffix:""}:{prefix:c.prefix,resource:d,suffix:c.suffix}:d,load:(c,d)=>{if(t[c])return Promise.resolve();let f=W(d)?d:d.prefix+d.resource+d.suffix;0!==f.indexOf("/")&&-1===f.indexOf("://")&&(f=cr.baseURL+"/"+f),t[c]=f.substring(0,f.lastIndexOf("/"));const p=()=>(o(c,"loaded"),Promise.resolve());return n[c]?p():si.ScriptLoader.add(f).then(p)},waitFor:a}};cr.languageLoad=!0,cr.baseURL="",cr.PluginManager=cr(),cr.ThemeManager=cr(),cr.ModelManager=cr();const Dk=e=>{const t=Fn(O.none()),n=()=>t.get().each(r=>clearInterval(r));return{clear:()=>{n(),t.set(O.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(O.some(setInterval(r,e)))}}},Oi=()=>{const e=(t=>{const n=Fn(O.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(O.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(O.some(o))}}})(I);return{...e,on:t=>e.get().each(t)}},Sc=(e,t)=>{let n=null;return{cancel:()=>{k(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{k(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Iu=(e,t)=>{let n=null;const r=()=>{k(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},Ga=J("mce-annotation"),is=J("data-mce-annotation"),Ys=J("data-mce-annotation-uid"),Ja=J("data-mce-annotation-active"),Qa=J("data-mce-annotation-classes"),Za=J("data-mce-annotation-attrs"),Xg=e=>t=>Dt(t,e),Yg=(e,t)=>{const n=e.selection.getRng(),r=X(n.startContainer),o=X(e.getBody()),i=t.fold(()=>"."+Ga(),a=>`[${is()}="${a}"]`),s=bn(r,n.startOffset).getOr(r);return co(s,i,Xg(o)).bind(a=>vo(a,`${Ys()}`).bind(c=>vo(a,`${is()}`).map(d=>{const f=Jg(e,c);return{uid:c,name:d,elements:f}})))},Gg=(e,t)=>zs(e,"data-mce-bogus")||fg(e,'[data-mce-bogus="all"]',Xg(t)),Jg=(e,t)=>{const n=X(e.getBody()),r=Qn(n,`[${Ys()}="${t}"]`);return ot(r,o=>!Gg(o,n))},Qg=(e,t)=>{const n=X(e.getBody()),r=Qn(n,`[${is()}="${t}"]`),o={};return ke(r,i=>{if(!Gg(i,n)){const s=Cr(i,Ys()),a=qt(o,s).getOr([]);o[s]=a.concat([i])}}),o};let Zg=0;const el=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Zg++,e+"_"+n+Zg+String(t)},em=(e,t)=>X(e.dom.cloneNode(t)),ss=e=>em(e,!1),tm=e=>em(e,!0),nm=(e,t,n=Et)=>{const r=new Pn(e,t),o=i=>{let s;do{s=r[i]()}while(s&&!Me(s)&&!n(s));return O.from(s).filter(Me)};return{current:()=>O.from(r.current()).filter(Me),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},as=(e,t)=>{const n=t||(o=>e.isBlock(o)||hn(o)||tn(o)),r=(o,i,s,a)=>{if(Me(o)){const c=a(o,i,o.data);if(-1!==c)return O.some({container:o,offset:c})}return s().bind(c=>r(c.container,c.offset,s,a))};return{backwards:(o,i,s,a)=>{const c=nm(o,a??e.getRoot(),n);return r(o,i,()=>c.prev().map(d=>({container:d,offset:d.length})),s).getOrNull()},forwards:(o,i,s,a)=>{const c=nm(o,a??e.getRoot(),n);return r(o,i,()=>c.next().map(d=>({container:d,offset:0})),s).getOrNull()}}},Gs=Math.round,ls=e=>e?{left:Gs(e.left),top:Gs(e.top),bottom:Gs(e.bottom),right:Gs(e.right),width:Gs(e.width),height:Gs(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},rm=(e,t)=>(e=ls(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),om=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,tl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&om(t.top-e.bottom,e,t)},nl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&om(t.bottom-e.top,e,t),im=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},Ec=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ri=(e,t)=>{if(Ye(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(s=n.length-1,Math.min(Math.max(t,0),s))]}var s;return e},Pk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),sm=e=>W(e)&&e.charCodeAt(0)>=768&&Pk.test(e),am=Ye,Bk=ho,lm=uc("display","block table"),Lk=uc("float","left right"),rl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(am,Bk,kt(Lk)),Mk=kt(uc("white-space","pre pre-line pre-wrap")),ol=Me,zu=hn,cm=Gt.nodeIndex,Tc=(e,t)=>t<0&&Ye(e)&&e.hasChildNodes()?void 0:Ri(e,t),Fu=e=>e?e.createRange():Gt.DOM.createRng(),$u=e=>W(e)&&/[\r\n\t ]/.test(e),dm=e=>!!e.setStart&&!!e.setEnd,Hu=e=>{const t=e.startContainer,n=e.startOffset;if($u(e.toString())&&Mk(t.parentNode)&&Me(t)){const r=t.data;if($u(r[n-1])||$u(r[n+1]))return!0}return!1},um=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,ji=e=>{var t;let n;const r=e.getClientRects();return n=ls(r.length>0?r[0]:e.getBoundingClientRect()),!dm(e)&&zu(e)&&um(n)?(o=>{const i=o.ownerDocument,s=Fu(i),a=i.createTextNode(zn),c=o.parentNode;c.insertBefore(a,o),s.setStart(a,0),s.setEnd(a,1);const d=ls(s.getBoundingClientRect());return c.removeChild(a),d})(e):um(n)&&dm(e)&&null!==(t=(o=>{const s=o.endContainer,a=o.startOffset,c=o.endOffset;if(o.startContainer===s&&Me(s)&&0===a&&1===c){const d=o.cloneRange();return d.setEndAfter(s),ji(d)}return null})(e))&&void 0!==t?t:n},cs=(e,t)=>{const n=rm(e,t);return n.width=1,n.right=n.left+1,n},ye=(e,t,n)=>{const r=()=>(n||(n=(o=>{const i=[],s=f=>{var p,_;0!==f.height&&(i.length>0&&(p=f).left===(_=i[i.length-1]).left&&p.top===_.top&&p.bottom===_.bottom&&p.right===_.right||i.push(f))},a=(f,p)=>{const _=Fu(f.ownerDocument);if(p<f.data.length){if(sm(f.data[p]))return;if(sm(f.data[p-1])&&(_.setStart(f,p),_.setEnd(f,p+1),!Hu(_)))return void s(cs(ji(_),!1))}p>0&&(_.setStart(f,p-1),_.setEnd(f,p),Hu(_)||s(cs(ji(_),!1))),p<f.data.length&&(_.setStart(f,p),_.setEnd(f,p+1),Hu(_)||s(cs(ji(_),!0)))},c=o.container(),d=o.offset();if(ol(c))return a(c,d),i;if(am(c))if(o.isAtEnd()){const f=Tc(c,d);ol(f)&&a(f,f.data.length),rl(f)&&!zu(f)&&s(cs(ji(f),!1))}else{const f=Tc(c,d);if(ol(f)&&a(f,0),rl(f)&&o.isAtEnd())return s(cs(ji(f),!1)),i;const p=Tc(o.container(),o.offset()-1);rl(p)&&!zu(p)&&(lm(p)||lm(f)||!rl(f))&&s(cs(ji(p),!1)),rl(f)&&s(cs(ji(f),!0))}return i})(ye(e,t))),n);return{container:J(e),offset:J(t),toRange:()=>{const o=Fu(e.ownerDocument);return o.setStart(e,t),o.setEnd(e,t),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(ol(e),0===t),isAtEnd:()=>ol(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:o=>o&&e===o.container()&&t===o.offset(),getNode:o=>Tc(e,o?t-1:t)}};ye.fromRangeStart=e=>ye(e.startContainer,e.startOffset),ye.fromRangeEnd=e=>ye(e.endContainer,e.endOffset),ye.after=e=>ye(e.parentNode,cm(e)+1),ye.before=e=>ye(e.parentNode,cm(e)),ye.isAbove=(e,t)=>Xn(jn(t.getClientRects()),Zr(e.getClientRects()),tl).getOr(!1),ye.isBelow=(e,t)=>Xn(Zr(t.getClientRects()),jn(e.getClientRects()),nl).getOr(!1),ye.isAtStart=e=>!!e&&e.isAtStart(),ye.isAtEnd=e=>!!e&&e.isAtEnd(),ye.isTextPosition=e=>!!e&&Me(e.container()),ye.isElementPosition=e=>!ye.isTextPosition(e);const Nc=(e,t)=>{Me(t)&&0===t.data.length&&e.remove(t)},qu=(e,t,n)=>{var r,i;fu(n)?((r,o,i)=>{const s=O.from(i.firstChild),a=O.from(i.lastChild);o.insertNode(i),s.each(c=>Nc(r,c.previousSibling)),a.each(c=>Nc(r,c.nextSibling))})(e,t,n):(r=e,t.insertNode(i=n),Nc(r,i.previousSibling),Nc(r,i.nextSibling))},So=Me,hm=es,fm=Gt.nodeIndex,pm=e=>{const t=e.parentNode;return hm(t)?pm(t):t},Uu=e=>e?go(e.childNodes,(t,n)=>(hm(n)&&"BR"!==n.nodeName?t=t.concat(Uu(n)):t.push(n),t),[]):[],gm=e=>t=>e===t,mm=e=>(So(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,r;n=Uu(pm(t)),r=js(n,gm(t),t),n=n.slice(0,r+1);const o=go(n,(i,s,a)=>(So(s)&&So(n[a-1])&&i++,i),0);return n=no(n,wo([t.nodeName])),r=js(n,gm(t),t),r-o})(e)+"]",vm=(e,t)=>{let n,r=[],o=t.container(),i=t.offset();if(So(o))n=((a,c)=>{let d=a;for(;(d=d.previousSibling)&&So(d);)c+=d.data.length;return c})(o,i);else{const a=o.childNodes;i>=a.length?(n="after",i=a.length-1):n="before",o=a[i]}r.push(mm(o));let s=((a,c,d)=>{const f=[];for(let p=c.parentNode;p&&p!==a;p=p.parentNode)f.push(p);return f})(e,o);return s=no(s,kt(es)),r=r.concat(xr(s,a=>mm(a))),r.reverse().join("/")+","+n},_m=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",i=go(r,(s,a)=>{const c=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return c?("text()"===c[1]&&(c[1]="#text"),((d,f,p)=>{let _=Uu(d);return _=no(_,(w,y)=>!So(w)||!So(_[y-1])),_=no(_,wo([f])),_[p]})(s,c[1],parseInt(c[2],10))):null},e);if(!i)return null;if(!So(i)&&i.parentNode){let s;return s="after"===o?fm(i)+1:fm(i),ye(i.parentNode,s)}return((s,a)=>{let c=s,d=0;for(;So(c);){const f=c.data.length;if(a>=d&&a<=d+f){s=c,a-=d;break}if(!So(c.nextSibling)){s=c,a=f;break}d+=f,c=c.nextSibling}return So(s)&&a>s.data.length&&(a=s.data.length),ye(s,a)})(i,parseInt(o,10))},Ac=tn,ym=(e,t,n,r,o)=>{const i=o?r.startContainer:r.endContainer;let s=o?r.startOffset:r.endOffset;const a=[],c=e.getRoot();if(Me(i))a.push(n?((d,f,p)=>{let _=d(f.data.slice(0,p)).length;for(let w=f.previousSibling;w&&Me(w);w=w.previousSibling)_+=d(w.data).length;return _})(t,i,s):s);else{let d=0;const f=i.childNodes;s>=f.length&&f.length&&(d=1,s=Math.max(0,f.length-1)),a.push(e.nodeIndex(f[s],n)+d)}for(let d=i;d&&d!==c;d=d.parentNode)a.push(e.nodeIndex(d,n));return a},Wu=(e,t,n)=>{let r=0;return Ie.each(e.select(t),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},bm=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(Ye(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},wm=e=>(bm(e,!0),bm(e,!1),e),xm=(e,t)=>{if(Ye(e)&&(e=Ri(e,t),Ac(e)))return e;if(Hr(e)){Me(e)&&Ks(e)&&(e=e.parentNode);let n=e.previousSibling;if(Ac(n)||(n=e.nextSibling,Ac(n)))return n}},Cm=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Ac(r)){const s=r.nodeName;return{name:s,index:Wu(n.dom,s,r)}}const i=xm((s=o).startContainer,s.startOffset)||xm(s.endContainer,s.endOffset);var s;if(i){const s=i.tagName;return{name:s,index:Wu(n.dom,s,i)}}return((s,a,c,d)=>{const f=a.dom,p=ym(f,s,c,d,!0),_=a.isForward(),w=wg(d)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:p,forward:_,...w}:{start:p,end:ym(f,s,c,d,!1),forward:_,...w}})(e,n,t,o)},km=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Sm=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),i=e.isCollapsed(),s=e.getNode(),a=s.nodeName,c=e.isForward();if("IMG"===a)return{name:a,index:Wu(n,a,s)};const d=wm(r.cloneRange());if(!i){d.collapse(!1);const p=km(n,o+"_end",t);qu(n,d,p)}r=wm(r),r.collapse(!0);const f=km(n,o+"_start",t);return qu(n,r,f),e.moveToBookmark({id:o,keep:!0,forward:c}),{id:o,forward:c}},Vu=ge(Cm,K,!0),Em=e=>{const t=i=>i(e),n=J(e),r=()=>o,o={tag:!0,inner:e,fold:(i,s)=>s(e),isValue:ft,isError:Et,map:i=>_r.value(i(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:i=>{i(e)},toOptional:()=>O.some(e)};return o},Tm=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(r,o)=>r(e),isValue:Et,isError:ft,map:t,mapError:r=>_r.error(r(e)),bind:t,exists:Et,forall:ft,getOr:K,or:K,getOrThunk:ct,orThunk:ct,getOrDie:l(String(e)),each:I,toOptional:O.none};return n},_r={value:Em,error:Tm,fromOption:(e,t)=>e.fold(()=>Tm(t),Em)},Io=e=>{if(!u(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return ke(e,(r,o)=>{const i=_n(r);if(1!==i.length)throw new Error("one and only one name per case");const s=i[0],a=r[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!u(a))throw new Error("case arguments must be an array");t.push(s),n[s]=(...c)=>{const d=c.length;if(d!==a.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+d);return{fold:(...f)=>{if(f.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+f.length);return f[o].apply(null,c)},match:f=>{const p=_n(f);if(t.length!==p.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+p.join(","));if(!tt(t,_=>Oe(p,_)))throw new Error("Not all branches were specified when using match. Specified: "+p.join(", ")+"\nRequired: "+t.join(", "));return f[s].apply(null,c)},log:f=>{console.log(f,{constructors:t,constructor:s,params:c})}}}}),n};Io([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ik=e=>"inline-command"===e.type||"inline-format"===e.type,zk=e=>"block-command"===e.type||"block-format"===e.type,Fk=e=>{const t=r=>_r.error({message:r,pattern:e}),n=(r,o,i)=>{if(void 0!==e.format){let s;if(u(e.format)){if(!tt(e.format,W))return t(r+" pattern has non-string items in the `format` array");s=e.format}else{if(!W(e.format))return t(r+" pattern has non-string `format` parameter");s=[e.format]}return _r.value(o(s))}return void 0!==e.cmd?W(e.cmd)?_r.value(i(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!M(e))return t("Raw pattern is not an object");if(!W(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!W(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,o=e.end;return 0===o.length&&(o=r,r=""),n("Inline",i=>({type:"inline-format",start:r,end:o,format:i}),(i,s)=>({type:"inline-command",start:r,end:o,cmd:i,value:s}))}return void 0!==e.replacement?W(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):_r.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,o)=>({type:"block-command",start:e.start,cmd:r,value:o}))},Nm=e=>ot(e,zk),Am=e=>ot(e,Ik),Om=e=>{const t=(n=>{const r=[],o=[];return ke(n,i=>{i.fold(s=>{r.push(s)},s=>{o.push(s)})}),{errors:r,values:o}})(pt(e,Fk));return ke(t.errors,n=>console.error(n.message,n.pattern)),t.values},Ku=tr().deviceType,$k=Ku.isTouch(),Hk=Gt.DOM,Rm=e=>H(e,RegExp),Ge=e=>t=>t.options.get(e),Xu=e=>W(e)||M(e),jm=(e,t="")=>n=>{const r=W(n);if(r){if(-1!==n.indexOf("=")){const o=(i=>{const s=i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(",");return et(s,(a,c)=>{const d=c.split("="),f=d[0],p=d.length>1?d[1]:f;return a[mo(f)]=mo(p),a},{})})(n);return{value:qt(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},qk=Ge("iframe_attrs"),Uk=Ge("doctype"),Dm=Ge("document_base_url"),Wk=Ge("body_id"),Vk=Ge("body_class"),Pm=Ge("content_security_policy"),Kk=Ge("br_in_pre"),sr=Ge("forced_root_block"),il=Ge("forced_root_block_attrs"),Xk=Ge("newline_behavior"),Yk=Ge("br_newline_selector"),Gk=Ge("no_newline_selector"),Jk=Ge("keep_styles"),Qk=Ge("end_container_on_empty_block"),Bm=Ge("automatic_uploads"),Lm=Ge("images_reuse_filename"),Zk=Ge("images_replace_blob_uris"),Mm=Ge("icons"),eS=Ge("icons_url"),tS=Ge("images_upload_url"),nS=Ge("images_upload_base_path"),rS=Ge("images_upload_credentials"),oS=Ge("images_upload_handler"),iS=Ge("content_css_cors"),Yu=Ge("referrer_policy"),Im=Ge("language"),sS=Ge("language_url"),zm=Ge("indent_use_margin"),aS=Ge("indentation"),lS=Ge("content_css"),cS=Ge("content_style"),Fm=Ge("font_css"),dS=Ge("directionality"),uS=Ge("inline_boundaries_selector"),$m=Ge("object_resizing"),hS=Ge("resize_img_proportional"),fS=Ge("placeholder"),Hm=Ge("event_root"),pS=Ge("service_message"),Js=Ge("theme"),gS=Ge("theme_url"),Gu=Ge("model"),mS=Ge("model_url"),sl=Ge("inline_boundaries"),vS=Ge("formats"),_S=Ge("preview_styles"),yS=Ge("format_empty_lines"),bS=Ge("format_noneditable_selector"),wS=Ge("custom_ui_selector"),Ju=Ge("inline"),xS=Ge("hidden_input"),CS=Ge("submit_patch"),kS=Ge("add_form_submit_trigger"),SS=Ge("add_unload_trigger"),ES=Ge("custom_undo_redo_levels"),TS=Ge("disable_nodechange"),qm=Ge("readonly"),NS=Ge("editable_root"),Um=Ge("content_css_cors"),Oc=Ge("plugins"),AS=Ge("external_plugins"),OS=Ge("block_unsupported_drop"),RS=Ge("visual"),jS=Ge("visual_table_class"),Wm=Ge("visual_anchor_class"),DS=Ge("iframe_aria_text"),PS=Ge("setup"),BS=Ge("init_instance_callback"),LS=Ge("urlconverter_callback"),MS=Ge("auto_focus"),IS=Ge("browser_spellcheck"),zS=Ge("protect"),FS=Ge("paste_block_drop"),Rc=Ge("paste_data_images"),$S=Ge("paste_preprocess"),HS=Ge("paste_postprocess"),qS=Ge("newdocument_content"),US=Ge("paste_webkit_styles"),WS=Ge("paste_remove_styles_if_webkit"),VS=Ge("paste_merge_formats"),KS=Ge("smart_paste"),XS=Ge("paste_as_text"),YS=Ge("paste_tab_spaces"),GS=Ge("allow_html_data_urls"),JS=Ge("text_patterns"),QS=Ge("text_patterns_lookup"),Vm=Ge("noneditable_class"),ZS=Ge("editable_class"),eE=Ge("noneditable_regexp"),tE=Ge("preserve_cdata"),nE=Ge("highlight_on_focus"),Qu=Ge("xss_sanitization"),rE=Ge("init_content_sync"),Km=e=>Ie.explode(e.options.get("images_file_types")),oE=Ge("table_tab_navigation"),iE=Ge("details_initial_state"),sE=Ge("details_serialized_state"),aE=Ye,Xm=Me,Ym=e=>{const t=e.parentNode;t&&t.removeChild(e)},Gm=e=>{const t=ii(e);return{count:e.length-t.length,text:t}},Jm=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(ir));)e.deleteData(t,1)},Qm=(e,t)=>(ds(e),t),ds=e=>{aE(e)&&Hr(e)&&(bg(e)?e.removeAttribute("data-mce-caret"):Ym(e)),Xm(e)&&(Jm(e),0===e.data.length&&Ym(e))},cE=tn,dE=Mo,uE=hc,Zm=(e,t,n)=>{const r=rm(t.getBoundingClientRect(),n);let o,i;if("BODY"===e.tagName){const a=e.ownerDocument.documentElement;o=e.scrollLeft||a.scrollLeft,i=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();o=e.scrollLeft-a.left,i=e.scrollTop-a.top}r.left+=o,r.right+=o,r.top+=i,r.bottom+=i,r.width=1;let s=t.offsetWidth-t.clientWidth;return s>0&&(n&&(s*=-1),r.left+=s,r.right+=s),r},ev=()=>Bt.browser.isFirefox(),al=e=>cE(e)||dE(e),ll=e=>(al(e)||oi(e)&&ev())&&wi(X(e)).exists(bo),fE=xo,Zu=tn,pE=Mo,tv=uc("display","block table table-cell table-caption list-item"),nv=Hr,rv=Ks,gE=Ye,mE=Me,vE=ho,Qs=e=>e>0,us=e=>e<0,jc=(e,t)=>{let n;for(;n=e(t);)if(!rv(n))return n;return null},cl=(e,t,n,r,o)=>{const i=new Pn(e,r),s=Zu(e)||rv(e);let a;if(us(t)){if(s&&(a=jc(i.prev.bind(i),!0),n(a)))return a;for(;a=jc(i.prev.bind(i),o);)if(n(a))return a}if(Qs(t)){if(s&&(a=jc(i.next.bind(i),!0),n(a)))return a;for(;a=jc(i.next.bind(i),o);)if(n(a))return a}return null},Di=(e,t)=>{for(;e&&e!==t;){if(tv(e))return e;e=e.parentNode}return null},zo=(e,t,n)=>Di(e.container(),n)===Di(t.container(),n),eh=(e,t)=>{if(!t)return O.none();const n=t.container(),r=t.offset();return gE(n)?O.from(n.childNodes[r+e]):O.none()},ov=(e,t)=>{var n;const r=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},_E=(e,t,n)=>Di(t,e)===Di(n,e),iv=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let i=o[r];if(i&&nv(i)&&(i=i[r]),Zu(i)||pE(i)){if(_E(t,i,o))return i;break}if(vE(i))break;o=o.parentNode}return null},dl=ge(ov,!0),ul=ge(ov,!1),th=(e,t,n)=>{let r;const o=ge(iv,!0,t),i=ge(iv,!1,t),s=n.startContainer,a=n.startOffset;if(Ks(s)){const c=mE(s)?s.parentNode:s,d=c.getAttribute("data-mce-caret");if("before"===d&&(r=c.nextSibling,ll(r)))return dl(r);if("after"===d&&(r=c.previousSibling,ll(r)))return ul(r)}if(!n.collapsed)return n;if(Me(s)){if(nv(s)){if(1===e){if(r=i(s),r)return dl(r);if(r=o(s),r)return ul(r)}if(-1===e){if(r=o(s),r)return ul(r);if(r=i(s),r)return dl(r)}return n}if(_c(s)&&a>=s.data.length-1)return 1===e&&(r=i(s),r)?dl(r):n;if(vc(s)&&a<=1)return-1===e&&(r=o(s),r)?ul(r):n;if(a===s.data.length)return r=i(s),r?dl(r):n;if(0===a)return r=o(s),r?ul(r):n}return n},sv=(e,t)=>eh(e?0:-1,t).filter(Zu),hl=(e,t,n)=>{const r=th(e,t,n);return-1===e?ye.fromRangeStart(r):ye.fromRangeEnd(r)},Dc=e=>O.from(e.getNode()).map(X),nh=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Pc=(e,t)=>{const n=zo(e,t);return!(n||!hn(e.getNode()))||n};var $n,e;(e=$n||($n={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const yE=tn,Fo=Me,av=Ye,rh=hn,Zs=ho,lv=e=>{return Cg(e)||!!bu(t=e)&&!et(vn(t.getElementsByTagName("*")),(n,r)=>n||xg(r),!1);var t},Bc=kg,cv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,dv=(e,t)=>{if(Qs(e)){if(Zs(t.previousSibling)&&!Fo(t.previousSibling))return ye.before(t);if(Fo(t))return ye(t,0)}if(us(e)){if(Zs(t.nextSibling)&&!Fo(t.nextSibling))return ye.after(t);if(Fo(t))return ye(t,t.data.length)}return us(e)?rh(t)?ye.before(t):ye.after(t):ye.before(t)},oh=(e,t,n)=>{let r,o,i,s;if(!av(n)||!t)return null;if(t.isEqual(ye.after(n))&&n.lastChild){if(s=ye.after(n.lastChild),us(e)&&Zs(n.lastChild)&&av(n.lastChild))return rh(n.lastChild)?ye.before(n.lastChild):s}else s=t;const a=s.container();let c=s.offset();if(Fo(a)){if(us(e)&&c>0)return ye(a,--c);if(Qs(e)&&c<a.length)return ye(a,++c);r=a}else{if(us(e)&&c>0&&(o=cv(a,c-1),Zs(o)))return!lv(o)&&(i=cl(o,e,Bc,o),i)?Fo(i)?ye(i,i.data.length):ye.after(i):Fo(o)?ye(o,o.data.length):ye.before(o);if(Qs(e)&&c<a.childNodes.length&&(o=cv(a,c),Zs(o)))return rh(o)?((f,p)=>{const _=p.nextSibling;return _&&Zs(_)?Fo(_)?ye(_,0):ye.before(_):oh($n.Forwards,ye.after(p),f)})(n,o):!lv(o)&&(i=cl(o,e,Bc,o),i)?Fo(i)?ye(i,0):ye.before(i):Fo(o)?ye(o,0):ye.after(o);r=o||s.getNode()}if(r&&(Qs(e)&&s.isAtEnd()||us(e)&&s.isAtStart())&&(r=cl(r,e,ft,n,!0),Bc(r,n)))return dv(e,r);o=r&&cl(r,e,Bc,n);const d=ro(ot(((f,p)=>{const _=[];let w=f;for(;w&&w!==p;)_.push(w),w=w.parentNode;return _})(a,n),yE));return!d||o&&d.contains(o)?o?dv(e,o):null:(s=Qs(e)?ye.after(d):ye.before(d),s)},$o=e=>({next:t=>oh($n.Forwards,t,e),prev:t=>oh($n.Backwards,t,e)}),uv=e=>ye.isTextPosition(e)?0===e.offset():ho(e.getNode()),hv=e=>{if(ye.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return ho(e.getNode(!0))},fv=(e,t)=>!ye.isTextPosition(e)&&!ye.isTextPosition(t)&&e.getNode()===t.getNode(!0),qr=(e,t,n)=>{const r=$o(t);return O.from(e?r.next(n):r.prev(n))},ea=(e,t,n)=>qr(e,t,n).bind(r=>{return zo(n,r,t)&&(i=n,s=r,e?!fv(i,s)&&(ye.isTextPosition(a=i)||!hn(a.getNode()))&&hv(i)&&uv(s):!fv(s,i)&&uv(i)&&hv(s))?qr(e,t,r):O.some(r);var i,s,a}),pv=(e,t,n,r)=>ea(e,t,n).bind(o=>r(o)?pv(e,t,o,r):O.some(o)),ta=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Me(n)?O.some(ye(n,e?0:n.data.length)):n?ho(n)?O.some(e?ye.before(n):hn(r=n)?ye.before(r):ye.after(r)):((o,i,s)=>{const a=o?ye.before(s):ye.after(s);return qr(o,i,a)})(e,t,n):O.none();var r},yr=ge(qr,!0),Tr=ge(qr,!1),ar=ge(ta,!0),fo=ge(ta,!1),ih="_mce_caret",po=e=>Ye(e)&&e.id===ih,hs=(e,t)=>{let n=t;for(;n&&n!==e;){if(po(n))return n;n=n.parentNode}return null},gv=e=>ut(e,"name"),mv=e=>Ie.isArray(e.start),Lc=e=>!(!gv(e)&&g(e.forward))||e.forward,vv=(e,t)=>(Ye(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),bE=(e,t)=>fo(e).fold(Et,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),_v=(e,t,n)=>!(t.hasChildNodes()||!hs(e,t)||(((r,o)=>{var i;const s=(null!==(i=r.ownerDocument)&&void 0!==i?i:document).createTextNode(ir);r.appendChild(s),o.setStart(s,0),o.setEnd(s,0)})(t,n),0)),yv=(e,t,n,r)=>{const o=n[t?"start":"end"],i=e.getRoot();if(o){let s=i,a=o[0];for(let c=o.length-1;s&&c>=1;c--){const d=s.childNodes;if(_v(i,s,r))return!0;if(o[c]>d.length-1)return!!_v(i,s,r)||bE(s,r);s=d[o[c]]}Me(s)&&(a=Math.min(o[0],s.data.length)),Ye(s)&&(a=Math.min(o[0],s.childNodes.length)),t?r.setStart(s,a):r.setEnd(s,a)}return!0},sh=e=>Me(e)&&e.data.length>0,bv=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=r?.parentNode,i=n.keep;if(r&&o){let s,a;if("start"===t?i?r.hasChildNodes()?(s=r.firstChild,a=1):sh(r.nextSibling)?(s=r.nextSibling,a=0):sh(r.previousSibling)?(s=r.previousSibling,a=r.previousSibling.data.length):(s=o,a=e.nodeIndex(r)+1):(s=o,a=e.nodeIndex(r)):i?r.hasChildNodes()?(s=r.firstChild,a=1):sh(r.previousSibling)?(s=r.previousSibling,a=r.previousSibling.data.length):(s=o,a=e.nodeIndex(r)):(s=o,a=e.nodeIndex(r)),!i){const c=r.previousSibling,d=r.nextSibling;let f;for(Ie.each(Ie.grep(r.childNodes),p=>{Me(p)&&(p.data=p.data.replace(/\uFEFF/g,""))});f=e.get(n.id+"_"+t);)e.remove(f,!0);if(Me(d)&&Me(c)&&!Bt.browser.isOpera()){const p=c.data.length;c.appendData(d.data),e.remove(d),s=c,a=p}}return O.some(ye(s,a))}return O.none()},wE=(e,t,n)=>((r,o,i=!1)=>{return 2===o?Cm(ii,i,r):3===o?(s=>{const a=s.getRng();return{start:vm(s.dom.getRoot(),ye.fromRangeStart(a)),end:vm(s.dom.getRoot(),ye.fromRangeEnd(a)),forward:s.isForward()}})(r):o?{rng:(s=r).getRng(),forward:s.isForward()}:Sm(r,!1);var s})(e,t,n),xE=(e,t)=>{((n,r)=>{const o=n.dom;if(r){if(mv(r))return((i,s)=>{const a=i.createRng();return yv(i,!0,s,a)&&yv(i,!1,s,a)?O.some({range:a,forward:Lc(s)}):O.none()})(o,r);if(W(r.start))return((i,s)=>{const a=O.from(_m(i.getRoot(),s.start)),c=O.from(_m(i.getRoot(),s.end));return Xn(a,c,(d,f)=>{const p=i.createRng();return p.setStart(d.container(),d.offset()),p.setEnd(f.container(),f.offset()),{range:p,forward:Lc(s)}})})(o,r);if(ut(r,"id"))return((i,s)=>{const a=bv(i,"start",s),c=bv(i,"end",s);return Xn(a,c.or(a),(d,f)=>{const p=i.createRng();return p.setStart(vv(i,d.container()),d.offset()),p.setEnd(vv(i,f.container()),f.offset()),{range:p,forward:Lc(s)}})})(o,r);if(gv(r))return((i,s)=>O.from(i.select(s.name)[s.index]).map(a=>{const c=i.createRng();return c.selectNode(a),{range:c,forward:!0}}))(o,r);if((i=>ut(i,"rng"))(r))return O.some({range:r.rng,forward:Lc(r)})}return O.none()})(e,t).each(({range:n,forward:r})=>{e.setRng(n,r)})},Ur=e=>Ye(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Mc=e=>"\xa0"===e,na=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),ah=e=>!na(e)&&!Mc(e)&&!pu(e),lh=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},CE=e=>{return{value:(n=lh(e.red)+lh(e.green)+lh(e.blue),Ta(n,"#").toUpperCase())};var n},kE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,SE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,xv=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Cv=(e,t,n,r)=>{const o=parseInt(e,10),i=parseInt(t,10),s=parseInt(n,10),a=parseFloat(r);return xv(o,i,s,a)},Ic=e=>(t=>{if("transparent"===t)return O.some(xv(0,0,0,0));const n=kE.exec(t);if(null!==n)return O.some(Cv(n[1],n[2],n[3],"1"));const r=SE.exec(t);return null!==r?O.some(Cv(r[1],r[2],r[3],r[4])):O.none()})(e).map(CE).map(t=>"#"+t.value).getOr(e),ch=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},kv=(e,t)=>{const n=Qn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ot(We(e,i=>{const s=Ec(i);return s?[X(s)]:[]}),Ua)},ra=e=>kv(ch(e.selection.getSel()),X(e.getBody())),fl=(e,t)=>yo(e,"table",t),Sv=e=>kn(e).fold(J([e]),t=>[e].concat(Sv(t))),dh=e=>Yn(e).fold(J([e]),t=>"br"===Yt(t)?Fr(t).map(n=>[e].concat(dh(n))).getOr([]):[e].concat(dh(t))),uh=(e,t)=>Xn((n=>{const r=n.startContainer,o=n.startOffset;return Me(r)?0===o?O.some(X(r)):O.none():O.from(r.childNodes[o]).map(X)})(t),(n=>{const r=n.endContainer,o=n.endOffset;return Me(r)?o===r.data.length?O.some(X(r)):O.none():O.from(r.childNodes[o-1]).map(X)})(t),(n,r)=>{const o=Z(Sv(e),ge(Dt,n)),i=Z(dh(e),ge(Dt,r));return o.isSome()&&i.isSome()}).getOr(!1),hh=(e,t,n,r)=>{const o=n,i=new Pn(n,o),s=un(e.schema.getMoveCaretBeforeOnEnterElements(),(c,d)=>!Oe(["td","th","table"],d.toLowerCase()));let a=n;do{if(Me(a)&&0!==Ie.trim(a.data).length)return void(r?t.setStart(a,0):t.setEnd(a,a.data.length));if(s[a.nodeName])return void(r?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},zc=e=>{const t=e.selection.getSel();return N(t)&&t.rangeCount>0},fh=(e,t)=>{const n=ra(e);n.length>0?ke(n,r=>{const o=r.dom,i=e.dom.createRng();i.setStartBefore(o),i.setEndAfter(o),t(i,!0)}):t(e.selection.getRng(),!1)},Ev=(e,t,n)=>{const r=Sm(e,t);n(r),e.moveToBookmark(r)},pl=e=>m(e?.nodeType),ph=e=>Ye(e)&&!Ur(e)&&!po(e)&&!es(e),fs=e=>!0===e.isContentEditable,Tv=(e,t,n)=>{const{selection:r,dom:o}=e,i=r.getNode(),s=tn(i);Ev(r,!0,()=>{t()}),s&&tn(i)&&o.isChildOf(i,e.getBody())?e.selection.select(i):n(r.getStart())&&EE(o,r)},EE=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:i,startOffset:s}=o;if(!((a,c)=>{if(ph(c)&&!/^(TD|TH)$/.test(c.nodeName)){const d=a.getAttrib(c,"data-mce-selected"),f=parseInt(d,10);return!isNaN(f)&&f>0}return!1})(e,t.getNode())&&Ye(i)){const a=i.childNodes,c=e.getRoot();let d;if(s<a.length){const f=a[s];d=new Pn(f,null!==(n=e.getParent(f,e.isBlock))&&void 0!==n?n:c)}else{const f=a[a.length-1];d=new Pn(f,null!==(r=e.getParent(f,e.isBlock))&&void 0!==r?r:c),d.next(!0)}for(let f=d.current();f;f=d.next()){if("false"===e.getContentEditable(f))return;if(Me(f)&&!mh(f))return o.setStart(f,0),void t.setRng(o)}}},Nv=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(Ye(e)||!mh(e))return e}},gh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ns(e,t),oa=(e,t,n)=>e.schema.isValidChild(t,n),mh=(e,t=!1)=>{if(N(e)&&Me(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Ti(n)}return!1},Av=(e,t)=>{const n=e.dom;return ph(t)&&"false"===n.getContentEditable(t)&&((r,o)=>{const i="[data-mce-cef-wrappable]",s=bS(r),a=vi(s)?i:`${i},${s}`;return on(X(o),a)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Pi=(e,t)=>P(e)?e(t):(N(t)&&(e=e.replace(/%(\w+)/g,(n,r)=>t[r]||n)),e),vh=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),_h=(e,t)=>{if(C(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=Ic(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Fc=(e,t,n)=>{const r=e.getStyle(t,n);return _h(r,n)},Ov=(e,t)=>{let n;return e.getParent(t,r=>!!Ye(r)&&(n=e.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},$c=(e,t,n)=>e.getParents(t,n,e.getRoot()),yh=(e,t,n)=>{const r=e.formatter.get(t);return N(r)&&Ht(r,n)},Ho=e=>fn(e,"block"),Wr=e=>fn(e,"selector"),Bn=e=>fn(e,"inline"),bh=e=>Wr(e)&&!1!==e.expand&&!Bn(e),ia=Ur,Rv=$c,jv=mh,TE=gh,Dv=(e,t)=>{let n=t;for(;n;){if(Ye(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Pv=(e,t,n,r)=>{const o=t.data;if(e){for(let i=n;i>0;i--)if(r(o.charAt(i-1)))return i}else for(let i=n;i<o.length;i++)if(r(o.charAt(i)))return i;return-1},NE=(e,t,n)=>Pv(e,t,n,r=>Mc(r)||na(r)),AE=(e,t,n)=>Pv(e,t,n,ah),Bv=(e,t,n,r,o,i)=>{let s;const a=e.getParent(n,e.isBlock)||t,c=(d,f,p)=>{const _=as(e);return O.from((o?_.backwards:_.forwards)(d,f,(y,S)=>ia(y.parentNode)?-1:(s=y,p(o,y,S)),a))};return c(n,r,NE).bind(d=>i?c(d.container,d.offset+(o?-1:0),AE):O.some(d)).orThunk(()=>s?O.some({container:s,offset:o?0:s.length}):O.none())},Lv=(e,t,n,r,o)=>{const i=r[o];Me(r)&&vi(r.data)&&i&&(r=i);const s=Rv(e,r);for(let a=0;a<s.length;a++)for(let c=0;c<t.length;c++){const d=t[c];if((!N(d.collapsed)||d.collapsed===n.collapsed)&&Wr(d)&&e.is(s[a],d.selector))return s[a]}return r},Mv=(e,t,n,r)=>{var o;let i=n;const s=e.getRoot(),a=t[0];if(Ho(a)&&(i=a.wrapper?null:e.getParent(n,a.block,s)),!i){const c=null!==(o=e.getParent(n,"LI,TD,TH"))&&void 0!==o?o:s;i=e.getParent(Me(n)?n.parentNode:n,d=>d!==s&&TE(e.schema,d),c)}if(i&&Ho(a)&&a.wrapper&&(i=Rv(e,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i&&i[r]&&!e.isBlock(i[r])&&(i=i[r],!vh(i,"br")););return i||n},Iv=(e,t,n,r)=>{const o=n.parentNode;return!N(n[r])&&(!(o!==t&&!C(o)&&!e.isBlock(o))||Iv(e,t,o,r))},Hc=(e,t,n,r,o)=>{let i=n;const s=o?"previousSibling":"nextSibling",a=e.getRoot();if(Me(n)&&!jv(n)&&(o?r>0:r<n.data.length))return n;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(let d=i[s];d;d=d[s]){const f=Me(d)&&!Iv(e,a,d,s);if(!ia(d)&&(!hn(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!jv(d,f))return i}if(i===a||i.parentNode===a){n=i;break}i=i.parentNode}var c;return n},zv=e=>ia(e.parentNode)||ia(e),ps=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:i,endContainer:s,endOffset:a}=t;const c=n[0];return Ye(o)&&o.hasChildNodes()&&(o=Ri(o,i),Me(o)&&(i=0)),Ye(s)&&s.hasChildNodes()&&(s=Ri(s,t.collapsed?a:a-1),Me(s)&&(a=s.data.length)),o=Dv(e,o),s=Dv(e,s),zv(o)&&(o=ia(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,Me(o)&&(i=t.collapsed?o.length:0)),zv(s)&&(s=ia(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,Me(s)&&(a=t.collapsed?0:s.length)),t.collapsed&&(Bv(e,e.getRoot(),o,i,!0,r).each(({container:d,offset:f})=>{o=d,i=f}),Bv(e,e.getRoot(),s,a,!1,r).each(({container:d,offset:f})=>{s=d,a=f})),(Bn(c)||c.block_expand)&&(Bn(c)&&Me(o)&&0!==i||(o=Hc(e,n,o,i,!0)),Bn(c)&&Me(s)&&a!==s.data.length||(s=Hc(e,n,s,a,!1))),bh(c)&&(o=Lv(e,n,t,o,"previousSibling"),s=Lv(e,n,t,s,"nextSibling")),(Ho(c)||Wr(c))&&(o=Mv(e,n,o,"previousSibling"),s=Mv(e,n,s,"nextSibling"),Ho(c)&&(e.isBlock(o)||(o=Hc(e,n,o,i,!0)),e.isBlock(s)||(s=Hc(e,n,s,a,!1)))),Ye(o)&&o.parentNode&&(i=e.nodeIndex(o),o=o.parentNode),Ye(s)&&s.parentNode&&(a=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:i,endContainer:s,endOffset:a}},gl=(e,t,n)=>{var r;const o=t.startOffset,i=Ri(t.startContainer,o),s=t.endOffset,a=Ri(t.endContainer,s-1),c=b=>{const T=b[0];Me(T)&&T===i&&o>=T.data.length&&b.splice(0,1);const j=b[b.length-1];return 0===s&&b.length>0&&j===a&&Me(j)&&b.splice(b.length-1,1),b},d=(b,T,j)=>{const D=[];for(;b&&b!==j;b=b[T])D.push(b);return D},f=(b,T)=>e.getParent(b,j=>j.parentNode===T,T),p=(b,T,j)=>{const D=j?"nextSibling":"previousSibling";for(let F=b,z=F.parentNode;F&&F!==T;F=z){z=F.parentNode;const Y=d(F===b?F:F[D],D);Y.length&&(j||Y.reverse(),n(c(Y)))}};if(i===a)return n(c([i]));const _=null!==(r=e.findCommonAncestor(i,a))&&void 0!==r?r:e.getRoot();if(e.isChildOf(i,a))return p(i,_,!0);if(e.isChildOf(a,i))return p(a,_);const w=f(i,_)||i,y=f(a,_)||a;p(i,w,!0);const S=d(w===i?w:w.nextSibling,"nextSibling",y===a?y.nextSibling:y);S.length&&n(c(S)),p(a,y)},OE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Fv=(e,t,n,r,o,i)=>{const{uid:s=t,...a}=n;le(e,Ga()),En(e,`${Ys()}`,s),En(e,`${is()}`,r);const{attributes:c={},classes:d=[]}=o(s,a);if(so(e,c),f=e,ke(d,_=>{le(f,_)}),i){d.length>0&&En(e,`${Qa()}`,d.join(","));const f=_n(c);f.length>0&&En(e,`${Za()}`,f.join(","))}var f},$v=(e,t,n,r,o)=>{const i=je("span",e);return Fv(i,t,n,r,o,!1),i},Hv=e=>{const t=(()=>{const i={};return{register:(s,a)=>{i[s]={name:s,settings:a}},lookup:s=>qt(i,s).map(a=>a.settings),getNames:()=>_n(i)}})();((i,s)=>{const a=is(),c=f=>O.from(f.attr(a)).bind(s.lookup),d=f=>{var p,_;f.attr(Ys(),null),f.attr(is(),null),f.attr(Ja(),null);const w=O.from(f.attr(Za())).map(T=>T.split(",")).getOr([]),y=O.from(f.attr(Qa())).map(T=>T.split(",")).getOr([]);ke(w,T=>f.attr(T,null));const S=null!==(_=null===(p=f.attr("class"))||void 0===p?void 0:p.split(" "))&&void 0!==_?_:[],b=Ze(S,[Ga()].concat(y));f.attr("class",b.length>0?b.join(" "):null),f.attr(Qa(),null),f.attr(Za(),null)};i.serializer.addTempAttr(Ja()),i.serializer.addAttributeFilter(a,f=>{for(const p of f)c(p).each(_=>{!1===_.persistent&&("span"===p.name?p.unwrap():d(p))})})})(e,t);const n=((i,s)=>{const a=Fn({}),c=()=>({listeners:[],previous:Oi()}),d=(w,y)=>{f(w,S=>(y(S),S))},f=(w,y)=>{const S=a.get(),b=y(qt(S,w).getOrThunk(c));S[w]=b,a.set(S)},p=(w,y)=>{ke(Jg(i,w),S=>{y?En(S,Ja(),"true"):h(S,Ja())})},_=Iu(()=>{const w=Mt(s.getNames());ke(w,y=>{f(y,S=>{const b=S.previous.get();return Yg(i,O.some(y)).fold(()=>{b.each(T=>{var j;d(j=y,D=>{ke(D.listeners,F=>F(!1,j))}),S.previous.clear(),p(T,!1)})},({uid:T,name:j,elements:D})=>{var F,z,Y;yi(b,T)||(b.each(F=>p(F,!1)),z=T,Y=D,d(F=j,re=>{ke(re.listeners,ie=>ie(!0,F,{uid:z,nodes:pt(Y,ce=>ce.dom)}))}),S.previous.set(T),p(T,!0))}),{previous:S.previous,listeners:S.listeners}})})},30);return i.on("remove",()=>{_.cancel()}),i.on("NodeChange",()=>{_.throttle()}),{addListener:(w,y)=>{f(w,S=>({previous:S.previous,listeners:S.listeners.concat([y])}))}}})(e,t),r=ei("span"),o=i=>{ke(i,s=>{r(s)?St(s):(a=>{_e(a,Ga()),h(a,`${Ys()}`),h(a,`${is()}`),h(a,`${Ja()}`);const c=vo(a,`${Za()}`).map(p=>p.split(",")).getOr([]),d=vo(a,`${Qa()}`).map(p=>p.split(",")).getOr([]);var f;ke(c,p=>h(a,p)),f=a,ke(d,p=>{_e(f,p)}),h(a,`${Qa()}`),h(a,`${Za()}`)})(s)})};return{register:(i,s)=>{t.register(i,s)},annotate:(i,s)=>{t.lookup(i).each(a=>{var c,d,f,p;d=i,f=a,p=s,(c=e).undoManager.transact(()=>{const _=c.selection,w=_.getRng(),y=ra(c).length>0,S=el("mce-annotation");if(w.collapsed&&!y&&((b,T)=>{const j=ps(b.dom,T,[{inline:"span"}]);T.setStart(j.startContainer,j.startOffset),T.setEnd(j.endContainer,j.endOffset),b.selection.setRng(T)})(c,w),_.getRng().collapsed&&!y){const b=$v(c.getDoc(),S,p,d,f.decorate);An(b,zn),_.getRng().insertNode(b.dom),_.select(b.dom)}else Ev(_,!1,()=>{fh(c,b=>{((e,t,n,r,o,i)=>{const s=[],a=$v(e.getDoc(),n,i,r,o),c=Oi(),d=()=>{c.clear()},f=_=>{ke(_,p)},p=_=>{switch(w=e,y=_,S="span",b=Yt(_),rr(y).fold(()=>"skipping",T=>{return"br"===b||mr(j=y)&&fc(j)===ir?"valid":(j=>nr(j)&&Te(j,Ga()))(y)?"existing":po(y.dom)?"caret":Ht(OE,j=>on(y,j))?"valid-block":oa(w,S,b)&&oa(w,Yt(T),S)?"valid":"invalid-child";var j})){case"invalid-child":{d();const w=Qt(_);f(w),d();break}case"valid-block":d(),Fv(_,n,i,r,o,!0);break;case"valid":{const w=c.get().getOrThunk(()=>{const y=ss(a);return s.push(y),c.set(y),y});Kt(_,w);break}}var w,y,S,b};gl(e.dom,t,_=>{d(),(w=>{const y=pt(w,X);f(y)})(_)})})(c,b,S,d,f.decorate,p)})})})})},annotationChanged:(i,s)=>{n.addListener(i,s)},remove:i=>{Yg(e,O.some(i)).each(({elements:s})=>{const a=e.selection.getBookmark();o(s),e.selection.moveToBookmark(a)})},removeAll:i=>{const s=e.selection.getBookmark();Ft(Qg(e,i),(a,c)=>{o(a)}),e.selection.moveToBookmark(s)},getAll:i=>{const s=Qg(e,i);return eo(s,a=>pt(a,c=>c.dom))}}},ml=e=>({getBookmark:ge(wE,e),moveToBookmark:ge(xE,e)});ml.isBookmarkNode=Ur;const qv=(e,t,n)=>!n.collapsed&&Ht(n.getClientRects(),r=>{return s=t,(i=e)>=(o=r).left&&i<=o.right&&s>=o.top&&s<=o.bottom;var o,i,s}),Uv=(e,t,n)=>{e.dispatch(t,n)},Wv=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},Vv=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},Kv=(e,t)=>e.dispatch("SetContent",t),Xv=(e,t)=>e.dispatch("GetContent",t),Yv=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Ke={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ke.metaKeyPressed(e),metaKeyPressed:e=>Bt.os.isMacOS()||Bt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},gs="data-mce-selected",Gv=Math.abs,qc=Math.round,wh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Jv=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,i=t.getBody();let s,a,c,d,f,p,_,w,y,S,b,T,j,D,F;const z=Xe=>N(Xe)&&(mg(Xe)||n.is(Xe,"figure.image")),Y=Xe=>Mo(Xe)||n.hasClass(Xe,"mce-preview-object"),re=Xe=>{const dt=Xe.target;((yt,te)=>{if("longpress"===(se=yt).type||0===se.type.indexOf("touch")){const se=yt.touches[0];return z(yt.target)&&!qv(se.clientX,se.clientY,te)}var se;return z(yt.target)&&!qv(yt.clientX,yt.clientY,te)})(Xe,t.selection.getRng())&&!Xe.isDefaultPrevented()&&t.selection.select(dt)},ie=Xe=>n.hasClass(Xe,"mce-preview-object")&&N(Xe.firstElementChild)?[Xe,Xe.firstElementChild]:n.is(Xe,"figure.image")?[Xe.querySelector("img")]:[Xe],ce=Xe=>{const dt=$m(t);return!!dt&&"false"!==Xe.getAttribute("data-mce-resize")&&Xe!==t.getBody()&&(n.hasClass(Xe,"mce-preview-object")&&N(Xe.firstElementChild)?on(X(Xe.firstElementChild),dt):on(X(Xe),dt))},me=(Xe,dt,yt)=>{if(N(yt)){const te=ie(Xe);ke(te,se=>{se.style[dt]||!t.schema.isValid(se.nodeName.toLowerCase(),dt)?n.setStyle(se,dt,yt):n.setAttrib(se,dt,""+yt)})}},Q=(Xe,dt,yt)=>{me(Xe,"width",dt),me(Xe,"height",yt)},ee=Xe=>{let dt,yt,te,se,be;dt=Xe.screenX-p,yt=Xe.screenY-_,T=dt*d[2]+w,j=yt*d[3]+y,T=T<5?5:T,j=j<5?5:j,te=(z(s)||Y(s))&&!1!==hS(t)?!Ke.modifierPressed(Xe):Ke.modifierPressed(Xe),te&&(Gv(dt)>Gv(yt)?(j=qc(T*S),T=qc(j/S)):(T=qc(j/S),j=qc(T*S))),Q(a,T,j),se=d.startPos.x+dt,be=d.startPos.y+yt,se=se>0?se:0,be=be>0?be:0,n.setStyles(c,{left:se,top:be,display:"block"}),c.innerHTML=T+" &times; "+j,d[2]<0&&a.clientWidth<=T&&n.setStyle(a,"left",void 0+(w-T)),d[3]<0&&a.clientHeight<=j&&n.setStyle(a,"top",void 0+(y-j)),dt=i.scrollWidth-D,yt=i.scrollHeight-F,dt+yt!==0&&n.setStyles(c,{left:se-dt,top:be-yt}),b||(t.dispatch("ObjectResizeStart",{target:s,width:w,height:y,origin:"corner-"+d.name}),b=!0)},he=()=>{const Xe=b;b=!1,Xe&&(me(s,"width",T),me(s,"height",j)),n.unbind(r,"mousemove",ee),n.unbind(r,"mouseup",he),o!==r&&(n.unbind(o,"mousemove",ee),n.unbind(o,"mouseup",he)),n.remove(a),n.remove(c),n.remove(f),we(s),Xe&&(t.dispatch("ObjectResized",{target:s,width:T,height:j,origin:"corner-"+d.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),t.nodeChanged()},we=Xe=>{gt();const dt=n.getPos(Xe,i),yt=dt.x,te=dt.y,se=Xe.getBoundingClientRect(),be=se.width||se.right-se.left,Ne=se.height||se.bottom-se.top;s!==Xe&&(Be(),s=Xe,T=j=0);const de=t.dispatch("ObjectSelected",{target:Xe});ce(Xe)&&!de.isDefaultPrevented()?Ft(wh,(De,ze)=>{let He=n.get("mceResizeHandle"+ze);He&&n.remove(He),He=n.add(i,"div",{id:"mceResizeHandle"+ze,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ze+"-resize; margin:0; padding:0"}),n.bind(He,"mousedown",Ue=>{Ue.stopImmediatePropagation(),Ue.preventDefault(),(Fe=>{const ht=ie(s)[0];var zt;p=Fe.screenX,_=Fe.screenY,w=ht.clientWidth,y=ht.clientHeight,S=y/w,d=De,d.name=ze,d.startPos={x:be*De[0]+yt,y:Ne*De[1]+te},D=i.scrollWidth,F=i.scrollHeight,f=n.add(i,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(f,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=Y(zt=s)?n.create("img",{src:Bt.transparentSrc}):zt.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:yt,top:te,margin:0}),Q(a,be,Ne),a.removeAttribute(gs),i.appendChild(a),n.bind(r,"mousemove",ee),n.bind(r,"mouseup",he),o!==r&&(n.bind(o,"mousemove",ee),n.bind(o,"mouseup",he)),c=n.add(i,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},w+" &times; "+y)})(Ue)}),De.elm=He,n.setStyles(He,{left:be*De[0]+yt-He.offsetWidth/2,top:Ne*De[1]+te-He.offsetHeight/2})}):Be(!1)},Ve=Sc(we,0),Be=(Xe=!0)=>{Ve.cancel(),gt(),s&&Xe&&s.removeAttribute(gs),Ft(wh,(dt,yt)=>{const te=n.get("mceResizeHandle"+yt);te&&(n.unbind(te),n.remove(te))})},rt=(Xe,dt)=>n.isChildOf(Xe,dt),Je=Xe=>{if(b||t.removed||t.composing)return;const dt="mousedown"===Xe.type?Xe.target:e.getNode(),yt=co(X(dt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(se=>se.dom).filter(se=>n.isEditable(se.parentElement)).getOrUndefined(),te=N(yt)?n.getAttrib(yt,gs,"1"):"1";if(ke(n.select(`img[${gs}],hr[${gs}]`),se=>{se.removeAttribute(gs)}),N(yt)&&rt(yt,i)&&t.hasFocus()){vt();const se=e.getStart(!0);if(rt(se,yt)&&rt(e.getEnd(!0),yt))return n.setAttrib(yt,gs,te),void Ve.throttle(yt)}Be()},gt=()=>{Ft(wh,Xe=>{Xe.elm&&(n.unbind(Xe.elm),delete Xe.elm)})},vt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{vt(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Je),t.on("keyup compositionend",Xe=>{s&&"TABLE"===s.nodeName&&Je(Xe)}),t.on("hide blur",Be),t.on("contextmenu longpress",re,!0)}),t.on("remove",gt),{isResizable:ce,showResizeRect:we,hideResizeRect:Be,updateResizeRect:Je,destroy:()=>{Ve.cancel(),s=a=f=null}}},Qv=(e,t,n)=>{const r=e.document.createRange();var o,i;return o=r,t.fold(i=>{o.setStartBefore(i.dom)},(i,s)=>{o.setStart(i.dom,s)},i=>{o.setStartAfter(i.dom)}),i=r,n.fold(a=>{i.setEndBefore(a.dom)},(a,c)=>{i.setEnd(a.dom,c)},a=>{i.setEndAfter(a.dom)}),r},xh=(e,t,n,r,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},vl=Io([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zv=(e,t,n)=>t(X(n.startContainer),n.startOffset,X(n.endContainer),n.endOffset),e_=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),jE=document.caretPositionFromPoint?(e,t,n)=>{var r,o;return O.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(i=>{if(null===i.offsetNode)return O.none();const s=e.dom.createRange();return s.setStart(i.offsetNode,i.offset),s.collapse(),O.some(s)})}:document.caretRangeFromPoint?(e,t,n)=>{var r,o;return O.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:O.none,Ch=Io([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ai={before:Ch.before,on:Ch.on,after:Ch.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(K,K,K)},Uc=Io([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sa={domRange:Uc.domRange,relative:Uc.relative,exact:Uc.exact,exactFromRange:e=>Uc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:r=>X(r.startContainer),relative:(r,o)=>ai.getStart(r),exact:(r,o,i,s)=>r});return cn(t)},range:e_},Wc=(e,t)=>{const n=Yt(e);return"input"===n?ai.after(e):Oe(["br","img"],n)?0===t?ai.before(e):ai.after(e):ai.on(e,t)},DE=(e,t)=>{const n=e.fold(ai.before,Wc,ai.after),r=t.fold(ai.before,Wc,ai.after);return sa.relative(n,r)},t_=(e,t,n,r)=>{const o=Wc(e,t),i=Wc(n,r);return sa.relative(o,i)},kh=(e,t)=>{const n=(t||document).createDocumentFragment();return ke(e,r=>{n.appendChild(r.dom)}),X(n)},n_=(e,t,n)=>{return(r=cn(X(n)).dom,o=e,i=t,((s,a,c)=>{const d=X(s.document);return jE(d,a,c).map(f=>e_(X(f.startContainer),f.startOffset,X(f.endContainer),f.endOffset))})(r,o,i)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,i},Sh=(e,t)=>N(e)&&N(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,r_=(e,t,n)=>null!==((r,o,i)=>{let s=r;for(;s&&s!==o;){if(i(s))return s;s=s.parentNode}return null})(e,t,n),BE=(e,t,n)=>r_(e,t,r=>r.nodeName===n),LE=(e,t)=>Hr(e)&&!r_(e,t,po),o_=(e,t,n)=>{const r=t.parentNode;if(r){const o=new Pn(t,e.getParent(r,e.isBlock)||e.getRoot());let i;for(;i=o[n?"prev":"next"]();)if(hn(i))return!0}return!1},Eh=(e,t,n,r,o)=>{const i=e.getRoot(),s=e.schema.getNonEmptyElements(),a=o.parentNode;let c,d;if(!a)return O.none();const f=e.getParent(a,e.isBlock)||i;if(r&&hn(o)&&t&&e.isEmpty(f))return O.some(ye(a,e.nodeIndex(o)));const p=new Pn(o,f);for(;d=p[r?"prev":"next"]();){if("false"===e.getContentEditableParent(d)||LE(d,i))return O.none();if(Me(d)&&d.data.length>0)return BE(d,i,"A")?O.none():O.some(ye(d,r?d.data.length:0));if(e.isBlock(d)||s[d.nodeName.toLowerCase()])return O.none();c=d}return Ci(c)?O.none():n&&c?O.some(ye(c,0)):O.none()},i_=(e,t,n,r)=>{const o=e.getRoot();let i,s=!1,a=n?r.startContainer:r.endContainer,c=n?r.startOffset:r.endOffset;const d=Ye(a)&&c===a.childNodes.length,f=e.schema.getNonEmptyElements();let p=n;if(Hr(a))return O.none();if(Ye(a)&&c>a.childNodes.length-1&&(p=!1),Ha(a)&&(a=o,c=0),a===o){if(p&&(i=a.childNodes[c>0?c-1:0],i)&&(Hr(i)||f[i.nodeName]||oi(i)))return O.none();if(a.hasChildNodes()){if(c=Math.min(!p&&c>0?c-1:c,a.childNodes.length-1),a=a.childNodes[c],c=Me(a)&&d?a.data.length:0,!t&&a===o.lastChild&&oi(a)||((_,w)=>{let y=w;for(;y&&y!==_;){if(tn(y))return!0;y=y.parentNode}return!1})(o,a)||Hr(a))return O.none();if(a.hasChildNodes()&&!oi(a)){i=a;const _=new Pn(a,o);do{if(tn(i)||Hr(i)){s=!1;break}if(Me(i)&&i.data.length>0){c=p?0:i.data.length,a=i,s=!0;break}if(f[i.nodeName.toLowerCase()]&&!QC(i)){c=e.nodeIndex(i),a=i.parentNode,p||c++,s=!0;break}}while(i=p?_.next():_.prev())}}}return t&&(Me(a)&&0===c&&Eh(e,d,t,!0,a).each(_=>{a=_.container(),c=_.offset(),s=!0}),Ye(a)&&(i=a.childNodes[c],i||(i=a.childNodes[c-1]),!i||!hn(i)||"A"===(null===(y=i.previousSibling)||void 0===y?void 0:y.nodeName)||o_(e,i,!1)||o_(e,i,!0)||Eh(e,d,t,!0,i).each(_=>{a=_.container(),c=_.offset(),s=!0}))),p&&!t&&Me(a)&&c===a.data.length&&Eh(e,d,t,!1,a).each(_=>{a=_.container(),c=_.offset(),s=!0}),s&&a?O.some(ye(a,c)):O.none();var y},Vc=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=ye.fromRangeStart(t);return i_(e,n,!0,r).each(i=>{n&&ye.isAbove(o,i)||r.setStart(i.container(),i.offset())}),n||i_(e,n,!1,r).each(i=>{r.setEnd(i.container(),i.offset())}),n&&r.collapse(!0),Sh(t,r)?O.none():O.some(r)},Kc=(e,t)=>e.splitText(t),Xc=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&Me(t)){if(n>0&&n<t.data.length)if(r=Kc(t,n),t=r.previousSibling,o>n){o-=n;const i=Kc(r,o).previousSibling;t=r=i,o=i.data.length,n=0}else o=0}else if(Me(t)&&n>0&&n<t.data.length&&(t=Kc(t,n),n=0),Me(r)&&o>0&&o<r.data.length){const i=Kc(r,o).previousSibling;r=i,o=i.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},ms=e=>({walk:(t,n)=>gl(e,t,n),split:Xc,expand:(t,n={type:"word"})=>{if("word"===n.type){const r=ps(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return t},normalize:t=>Vc(e,t).fold(Et,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});ms.compareRanges=Sh,ms.getCaretRangeFromPoint=n_,ms.getSelectedNode=Ec,ms.getNode=Ri;const ME=((e,t)=>{const n=o=>{const i=(s=>{const a=s.dom;return Dr(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(i<=0||null===i){const s=G(o,e);return parseFloat(s)||0}return i},r=(o,i)=>et(i,(s,a)=>{const c=G(o,a),d=void 0===c?0:parseInt(c,10);return isNaN(d)?s:s+d},0);return{set:(o,i)=>{if(!m(i)&&!i.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+i);const s=o.dom;ri(s)&&(s.style[e]=i+"px")},get:n,getOuter:n,aggregate:r,max:(o,i,s)=>{const a=r(o,s);return i>a?i-a:0}}})("height"),s_=()=>X(document),a_=(e,t)=>e.view(t).fold(J([]),n=>{const r=e.owner(n),o=a_(e,r);return[n].concat(o)});var IE=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?O.none():O.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(X)},owner:e=>It(e)});const Th=e=>"textarea"===Yt(e),l_=(e,t)=>{const n=(o=>{const i=o.dom.ownerDocument,s=i.body,a=i.defaultView,c=i.documentElement;if(s===o.dom)return Zt(s.offsetLeft,s.offsetTop);const d=uo(a?.pageYOffset,c.scrollTop),f=uo(a?.pageXOffset,c.scrollLeft),p=uo(c.clientTop,s.clientTop),_=uo(c.clientLeft,s.clientLeft);return Er(o).translate(f-_,d-p)})(e),r=ME.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},c_=(e,t,n,r)=>{FE(e,(o,i)=>zE(e,t,n,r),n)},d_=(e,t,n,r,o)=>{const i={elm:r.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",i).isDefaultPrevented()||(n(e,t,xi(t).top,r,o),e.dispatch("AfterScrollIntoView",i))},zE=(e,t,n,r)=>{X(e.getBody());const i=X(e.getDoc()),s=((a,c)=>{const d=((p,_)=>{const w=Qt(p);if(0===w.length||Th(p))return{element:p,offset:_};if(_<w.length&&!Th(w[_]))return{element:w[_],offset:0};{const y=w[w.length-1];return Th(y)?{element:p,offset:_}:"img"===Yt(y)?{element:y,offset:1}:mr(y)?{element:y,offset:fc(y).length}:{element:y,offset:Qt(y).length}}})(a,c),f=xe('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return nt(d.element,f),l_(f,()=>_t(f))})(X(n.startContainer),n.startOffset);d_(e,i,t,s,r),s.cleanup()},u_=(e,t,n,r)=>{const o=X(e.getDoc());d_(e,o,n,l_(X(t),I),r)},FE=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,i=n.endContainer,s=n.endOffset;t(X(r),X(i));const a=e.dom.createRng();a.setStart(r,o),a.setEnd(i,s),e.selection.setRng(n)},Nh=(e,t,n,r,o)=>{const i=t.pos;if(r)za(i.left,i.top,o);else{const s=i.top-n+t.height;za(-e.getBody().getBoundingClientRect().left,s,o)}},h_=(e,t,n,r,o,i)=>{const s=r+n,a=o.pos.top,c=o.bottom,d=c-a>=r;a<n?Nh(e,o,r,!1!==i,t):a>s?Nh(e,o,r,d?!1!==i:!0===i,t):c>s&&!d&&Nh(e,o,r,!0===i,t)},f_=(e,t,n,r,o)=>{const i=cn(t).dom.innerHeight;h_(e,t,n,i,r,o)},p_=(e,t,n,r,o)=>{const i=cn(t).dom.innerHeight;h_(e,t,n,i,r,o);const s=(c=>{const d=s_(),f=xi(d),p=((y,S)=>{const b=S.owner(y);return a_(S,b)})(c,IE),_=Er(c),w=Mn(p,(y,S)=>{const b=Er(S);return{left:y.left+b.left,top:y.top+b.top}},{left:0,top:0});return Zt(w.left+_.left+f.left,w.top+_.top+f.top)})(r.element),a=ug(window);s.top<a.y?Fa(r.element,!1!==o):s.top>a.bottom&&Fa(r.element,!0===o)},$E=(e,t,n)=>c_(e,f_,t,n),HE=(e,t,n)=>u_(e,t,f_,n),qE=(e,t,n)=>c_(e,p_,t,n),UE=(e,t,n)=>u_(e,t,p_,n),_l=(e,t,n)=>{(e.inline?$E:qE)(e,t,n)},g_=e=>e.dom.focus(),m_=e=>{const t=sn(e).dom;return e.dom===t.activeElement},Ah=(e=s_())=>O.from(e.dom.activeElement).map(X),v_=(e,t)=>{const n=mr(t)?fc(t).length:Qt(t).length+1;return e>n?n:e<0?0:e},WE=e=>sa.range(e.start,v_(e.soffset,e.start),e.finish,v_(e.foffset,e.finish)),__=(e,t)=>!dc(t.dom)&&(Lt(e,t)||Dt(e,t)),y_=e=>t=>__(e,t.start)&&__(e,t.finish),VE=e=>sa.range(X(e.startContainer),e.startOffset,X(e.endContainer),e.endOffset),KE=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),O.some(t)}catch{return O.none()}},Oh=e=>{const t=e.inline||Bt.browser.isFirefox()?(n=X(e.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?O.from(o.getRangeAt(0)):O.none()).map(VE)})(cn(n).dom).filter(y_(n))):O.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Rh=e=>(e.bookmark?e.bookmark:O.none()).bind(t=>{return n=X(e.getBody()),O.from(t).filter(y_(n)).map(WE);var n}).bind(KE),b_={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Vr={setEditorTimeout:(e,t,n)=>{return m(o=n)||(o=0),setTimeout(()=>{e.removed||t()},o);var o},setEditorInterval:(e,t,n)=>{const r=(m(i=n)||(i=0),setInterval(()=>{e.removed?clearInterval(r):t()},i));var i;return r}};let aa;const jh=Gt.DOM,Dh=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Yc=(e,t)=>{const n=wS(e);return null!==jh.getParent(t,o=>{return Ye(i=o)&&b_.isEditorUIElement(i)||!!n&&e.dom.is(o,n);var i})},Ph=e=>{try{const t=sn(X(e.getElement()));return Ah(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},XE=(e,t)=>{const n=t.editor;(o=>{const i=Sc(()=>{Oh(o)},0);o.on("init",()=>{var s,d;o.inline&&((s,a)=>{const c=()=>{a.throttle()};Gt.DOM.bind(document,"mouseup",c),s.on("remove",()=>{Gt.DOM.unbind(document,"mouseup",c)})})(o,i),d=i,(s=o).on("mouseup touchend",f=>{d.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",c=>{(d=>"nodechange"===d.type&&d.selectionChange)(c)||Oh(s)})}),o.on("remove",()=>{i.cancel()})})(n);const r=(o,i)=>{nE(o)&&!0!==o.inline&&i(X(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=e.focusedEditor;Dh(Ph(n))&&r(n,le),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Vr.setEditorTimeout(n,()=>{const o=e.focusedEditor;Dh(Ph(n))&&o===n||r(n,_e),Yc(n,Ph(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),aa||(aa=o=>{const i=e.activeEditor;i&&ni(o).each(s=>{s.ownerDocument===document&&(s===document.body||Yc(i,s)||e.focusedEditor!==i||(i.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},jh.bind(document,"focusin",aa))},YE=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&aa&&(jh.unbind(document,"focusin",aa),aa=null)},w_=(e,t)=>{var n,r,o;(n=X(e.getBody()),r=t,(o=r,o.collapsed?O.from(Ri(o.startContainer,o.startOffset)).map(X):O.none()).bind(o=>nk(o)?O.some(o):Lt(n,o)?O.none():O.some(n))).bind(n=>ar(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Bh=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},vs=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(r=X(n),m_(r)||(o=r,Ah(sn(o)).filter(i=>o.dom.contains(i.dom))).isSome());var r,o})(e):N((t=e).iframeElement)&&m_(X(t.iframeElement));var t},Lh=e=>e.editorManager.setActive(e),x_=(e,t,n,r,o)=>{const s=n?t.startOffset:t.endOffset;return O.from(n?t.startContainer:t.endContainer).map(X).map(a=>r&&t.collapsed?a:bn(a,o(a,s)).getOr(a)).bind(a=>nr(a)?O.some(a):rr(a).filter(nr)).map(a=>a.dom).getOr(e)},C_=(e,t,n=!1)=>x_(e,t,!0,n,(r,o)=>Math.min(ao(r),o)),k_=(e,t,n=!1)=>x_(e,t,!1,n,(r,o)=>o>0?o-1:o),S_=(e,t)=>{const n=e;for(;e&&Me(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Mh=(e,t)=>pt(t,n=>{const r=e.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),GE=["img","br"],E_=e=>{return _g(e).filter(n=>0!==n.trim().length||n.indexOf(zn)>-1).isSome()||Oe(GE,Yt(e))||Ji(n=e)&&"false"===Cr(n,"contenteditable");var n},T_="[data-mce-autocompleter]",N_=e=>Lo(e,T_),QE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gc=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let i=e[o];if(i)return i;for(let s=e.parent;s&&s!==t;s=s.parent)if(i=s[o],i)return i}},ZE=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Ti(n))return!1;const r=e.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},A_=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class br{static create(t,n){const r=new br(t,QE[t]||1);return n&&Ft(n,(o,i)=>{r.attr(i,o)}),r}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const r=this;if(!W(t))return N(t)&&Ft(t,(i,s)=>{r.attr(s,i)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(t in o.map){delete o.map[t];let i=o.length;for(;i--;)if(o[i].name===t)return o.splice(i,1),r}return r}if(t in o.map){let i=o.length;for(;i--;)if(o[i].name===t){o[i].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,r}return o.map[t]}}clone(){const t=this,n=new br(t.name,t.type),r=t.attributes;if(r){const o=[];o.map={};for(let i=0,s=r.length;i<s;i++){const a=r[i];"id"!==a.name&&(o[o.length]={name:a.name,value:a.value},o.map[a.name]=a.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const r=n.next;t.insert(n,t,!0),n=r}t.remove()}remove(){const t=this,n=t.parent,r=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const r=n.lastChild;return r?(r.next=t,t.prev=r,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,r){t.parent&&t.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,r=[];for(let o=n.firstChild;o;o=Gc(o,n))o.name===t&&r.push(o);return r}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Gc(o,t))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},r){var o;const i=this;let s=i.firstChild;if(A_(i))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(t[s.name]||A_(s))return!1}if(8===s.type||3===s.type&&!ZE(s)||3===s.type&&s.parent&&n[s.parent.name]&&Ti(null!==(o=s.value)&&void 0!==o?o:"")||r&&r(s))return!1}while(s=Gc(s,i));return!0}walk(t){return Gc(this,null,t)}}const O_=(e,t,n=0)=>{const r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(t){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const i=o.exec(e);return i?i.index+i[0].length:r.length}},eT=(e,t,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,i=e.getVoidElements();let s=1,a=n;for(;0!==s;)for(r.lastIndex=a;;){const c=r.exec(t);if(null===c)return a;if("!"===c[1]){a=Dn(c[2],"--")?O_(t,!1,c.index+3):O_(t,!0,c.index+1);break}{o.lastIndex=r.lastIndex;const d=o.exec(t);if(k(d)||d.index!==r.lastIndex)continue;"/"===c[1]?s-=1:ut(i,c[2])||(s+=1),a=r.lastIndex+d[0].length;break}}return a},R_=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let o=((a,c)=>{const d=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");return c.replace(d,"")})(e.getTempAttrs(),t);const i=r.getVoidElements();let s;for(;s=n.exec(o);){const a=n.lastIndex,c=s[0].length;let d;d=i[s[1]]?a:eT(r,o,a),o=o.substring(0,a-c)+o.substring(d),n.lastIndex=a-c}return ii(o)},tT=R_,j_=e=>{const t=Qn(e,"[data-mce-bogus]");ke(t,n=>{"all"===Cr(n,"data-mce-bogus")?_t(n):ts(n)?(nt(n,mt("\ufeff")),_t(n)):St(n)})},D_=e=>{const t=Qn(e,"input");ke(t,n=>{h(n,"name")})},P_=Ie.makeMap,B_=e=>{const t=[],n=(e=e||{}).indent,r=P_(e.indent_before||""),o=P_(e.indent_after||""),i=Ni.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="xhtml"!==e.element_format;return{start:(a,c,d)=>{if(n&&r[a]&&t.length>0){const f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}if(t.push("<",a),c)for(let f=0,p=c.length;f<p;f++){const _=c[f];t.push(" ",_.name,'="',i(_.value,!0),'"')}if(t[t.length]=!d||s?">":" />",d&&n&&o[a]&&t.length>0){const f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}},end:a=>{let c;t.push("</",a,">"),n&&o[a]&&t.length>0&&(c=t[t.length-1],c.length>0&&"\n"!==c&&t.push("\n"))},text:(a,c)=>{a.length>0&&(t[t.length]=c?a:i(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("\x3c!--",a,"--\x3e")},pi:(a,c)=>{c?t.push("<?",a," ",i(c),"?>"):t.push("<?",a,"?>"),n&&t.push("\n")},doctype:a=>{t.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Bi=(e={},t=Ai())=>{const n=B_(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,i={3:a=>{var c;n.text(null!==(c=a.value)&&void 0!==c?c:"",a.raw)},8:a=>{var c;n.comment(null!==(c=a.value)&&void 0!==c?c:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var c;n.doctype(null!==(c=a.value)&&void 0!==c?c:"")},4:a=>{var c;n.cdata(null!==(c=a.value)&&void 0!==c?c:"")},11:a=>{let c=a;if(c=c.firstChild)do{s(c)}while(c=c.next)}};n.reset();const s=a=>{var c;const d=i[a.type];if(d)d(a);else{const f=a.name,p=f in t.getVoidElements();let _=a.attributes;if(o&&_&&_.length>1){const w=[];w.map={};const y=t.getElementRule(a.name);if(y){for(let S=0,b=y.attributesOrder.length;S<b;S++){const T=y.attributesOrder[S];if(T in _.map){const j=_.map[T];w.map[T]=j,w.push({name:T,value:j})}}for(let S=0,b=_.length;S<b;S++){const T=_[S].name;if(!(T in w.map)){const j=_.map[T];w.map[T]=j,w.push({name:T,value:j})}}_=w}}if(n.start(f,_,p),!p){let w=a.firstChild;if(w){"pre"!==f&&"textarea"!==f||3!==w.type||"\n"!==(null===(c=w.value)||void 0===c?void 0:c[0])||n.text("\n",!0);do{s(w)}while(w=w.next)}n.end(f)}}};return 1!==r.type||e.inner?3===r.type?i[3](r):i[11](r):s(r),n.getContent()}}},L_=new Set;ke(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{L_.add(e)});const M_=["font","text-decoration","text-emphasis"],Ih=(e,t)=>_n(e.parseStyle(e.getAttrib(t,"style"))),rT=(e,t,n)=>{const r=Ih(e,t),o=Ih(e,n),i=s=>{var a,c;const d=null!==(a=e.getStyle(t,s))&&void 0!==a?a:"",f=null!==(c=e.getStyle(n,s))&&void 0!==c?c:"";return pr(d)&&pr(f)&&d!==f};return Ht(r,s=>{const a=c=>Ht(c,d=>d===s);if(!a(o)&&a(M_)){const c=ot(o,d=>Ht(M_,f=>Dn(d,f)));return Ht(c,i)}return i(s)})},I_=(e,t,n)=>O.from(n.container()).filter(Me).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),zh=ge(I_,!0,na),Fh=ge(I_,!1,na),oT=e=>{const t=e.container();return Me(t)&&(0===t.data.length||mc(t.data)&&ml.isBookmarkNode(t.parentNode))},Li=(e,t)=>n=>eh(e?0:-1,n).filter(t).isSome(),z_=e=>mg(e)&&"block"===G(X(e),"display"),F_=e=>{return tn(e)&&!(Ye(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},iT=Li(!0,z_),sT=Li(!1,z_),yl=Li(!0,Mo),bl=Li(!1,Mo),$_=Li(!0,oi),H_=Li(!1,oi),Mi=Li(!0,F_),Ii=Li(!1,F_),q_=(e,t)=>{return o=Et,Lt(r=t,n=e)?zr(n,i=>o(i)||Dt(i,r)).slice(0,-1):[];var n,r,o},li=(e,t)=>[e].concat(q_(e,t)),$h=(e,t,n)=>pv(e,t,n,oT),U_=(e,t)=>Z(li(X(t.container()),e),$r),W_=(e,t,n)=>$h(e,t.dom,n).forall(r=>U_(t,n).fold(()=>!zo(r,n,t.dom),o=>!zo(r,n,t.dom)&&Lt(o,X(r.container())))),V_=(e,t,n)=>U_(t,n).fold(()=>$h(e,t.dom,n).forall(r=>!zo(r,n,t.dom)),r=>$h(e,r.dom,n).isNone()),Hh=ge(V_,!1),K_=ge(V_,!0),aT=ge(W_,!1),lT=ge(W_,!0),cT=e=>Dc(e).exists(ts),Jc=(e,t,n)=>{const r=ot(li(X(n.container()),t),$r),o=jn(r).getOr(t);return qr(e,o.dom,n).filter(cT)},qh=(e,t)=>Dc(t).exists(ts)||Jc(!0,e,t).isSome(),Uh=(e,t)=>{return(n=t,O.from(n.getNode(!0)).map(X)).exists(ts)||Jc(!1,e,t).isSome();var n},dT=ge(Jc,!1),uT=ge(Jc,!0),X_=e=>ye.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Y_=(e,t)=>{const n=ot(li(X(t.container()),e),$r);return jn(n).getOr(e)},G_=(e,t)=>X_(t)?Fh(t):Fh(t)||Tr(Y_(e,t).dom,t).exists(Fh),J_=(e,t)=>X_(t)?zh(t):zh(t)||yr(Y_(e,t).dom,t).exists(zh),Wh=e=>Dc(e).bind(t=>Bo(t,nr)).exists(t=>{return n=G(t,"white-space"),Oe(["pre","pre-wrap"],n);var n}),Q_=(e,t)=>n=>{return r=new Pn(n,e)[t](),N(r)&&tn(r)&&tv(r);var r},Z_=(e,t)=>{return!Wh(t)&&(Tr((n=e).dom,r=t).isNone()||yr(n.dom,r).isNone()||Hh(n,r)||K_(n,r)||Uh(n,r)||qh(n,r)||G_(e,t)||J_(e,t));var n,r},wl=(e,t)=>!Wh(t)&&(Hh(e,t)||aT(e,t)||Uh(e,t)||G_(e,t)||((n,r)=>{const o=Tr(n.dom,r).getOr(r),i=Q_(n.dom,"prev");return r.isAtStart()&&(i(r.container())||i(o.container()))})(e,t)),xl=(e,t)=>!Wh(t)&&(K_(e,t)||lT(e,t)||qh(e,t)||J_(e,t)||((n,r)=>{const o=yr(n.dom,r).getOr(r),i=Q_(n.dom,"next");return r.isAtEnd()&&(i(r.container())||i(o.container()))})(e,t)),Vh=(e,t)=>wl(e,t)||xl(e,(n=>{const r=n.container(),o=n.offset();return Me(r)&&o<r.data.length?ye(r,o+1):n})(t)),e0=(e,t)=>Mc(e.charAt(t)),t0=(e,t)=>na(e.charAt(t)),n0=(e,t,n)=>{const r=t.data,o=ye(t,0);return n||!e0(r,0)||Vh(e,o)?!!(n&&t0(r,0)&&wl(e,o))&&(t.data=zn+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},r0=(e,t,n)=>{const r=t.data,o=ye(t,r.length-1);return n||!e0(r,r.length-1)||Vh(e,o)?!!(n&&t0(r,r.length-1)&&xl(e,o))&&(t.data=r.slice(0,-1)+zn,!0):(t.data=r.slice(0,-1)+" ",!0)},o0=(e,t,n)=>{if(0===n)return;const r=X(e),o=or(r,$r).getOr(r),i=e.data.slice(t,t+n),s=t+n>=e.data.length&&xl(o,ye(e,e.data.length)),a=0===t&&wl(o,ye(e,0));e.replaceData(t,n,Eg(i,4,a,s))},Qc=(e,t)=>{const n=e.data.slice(t),r=n.length-ec(n).length;o0(e,t,r)},Kh=(e,t)=>{const n=e.data.slice(0,t),r=n.length-tc(n).length;o0(e,t-r,r)},Xh=(e,t,n,r=!0)=>{const o=tc(e.data).length,i=r?e:t,s=r?t:e;return r?i.appendData(s.data):i.insertData(0,s.data),_t(X(s)),n&&Qc(i,o),i},fT=(e,t)=>((n,r)=>{const o=n.container(),i=n.offset();return!ye.isTextPosition(n)&&o===r.parentNode&&i>ye.before(r).offset()})(t,e)?ye(t.container(),t.offset()-1):t,i0=e=>{return ho(e.previousSibling)?O.some(Me(t=e.previousSibling)?ye(t,t.data.length):ye.after(t)):e.previousSibling?fo(e.previousSibling):O.none();var t},s0=e=>{return ho(e.nextSibling)?O.some(Me(t=e.nextSibling)?ye(t,0):ye.before(t)):e.nextSibling?ar(e.nextSibling):O.none();var t},a0=(e,t,n)=>{n.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},gT=(e,t)=>t&&ut(e.schema.getBlockElements(),Yt(t)),mT=e=>{if(Sn(e)){const t=xe('<br data-mce-bogus="1">');return Rt(e),Qe(e,t),O.some(ye.before(t.dom))}return O.none()},_s=(e,t,n,r=!0)=>{const o=((e,t,n)=>{return(r=e,o=t,i=n,r?(s=o,s0(a=i).orThunk(()=>i0(a)).orThunk(()=>{return yr(c=s,ye.after(d=a)).orThunk(()=>Tr(c,ye.before(d)));var c,d})):((s,a)=>i0(a).orThunk(()=>s0(a)).orThunk(()=>{return c=s,O.from((d=a).previousSibling?d.previousSibling:d.parentNode).bind(f=>Tr(c,ye.before(f))).orThunk(()=>yr(c,ye.after(d)));var c,d}))(o,i)).map(ge(fT,n));var r,o,i,s,a})(t,e.getBody(),n.dom),i=or(n,ge(gT,e),(s=e.getBody(),c=>c.dom===s));var s;const a=((c,d,f)=>{const p=Fr(c).filter(mr),_=kr(c).filter(mr);return _t(c),(w=p,y=_,S=d,b=(T,j,D)=>{const F=T.dom,z=j.dom,Y=F.data.length;return Xh(F,z,f),D.container()===z?ye(F,Y):D},w.isSome()&&y.isSome()&&S.isSome()?O.some(b(w.getOrDie(),y.getOrDie(),S.getOrDie())):O.none()).orThunk(()=>(f&&(p.each(T=>Kh(T.dom,T.dom.length)),_.each(T=>Qc(T.dom,0))),d));var w,y,S,b})(n,o,(d=n,ut(e.schema.getTextInlineElements(),Yt(d))));var d;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(mT).fold(()=>{r&&a0(e,t,a)},c=>{r&&a0(e,t,O.some(c))})},vT=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ys=(e,t)=>on(X(t),uS(e))&&!ns(e.schema,t)&&e.dom.isEditable(t),l0=e=>{var t,n;return"rtl"===Gt.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",vT.test(n))},zi=(e,t,n)=>{const r=(o=e,i=t,ot(Gt.DOM.getParents(n.container(),"*",i),o));var o,i;return O.from(r[r.length-1])},Kr=(e,t)=>{const n=t.container(),r=t.offset();return e?Ei(n)?Me(n.nextSibling)?ye(n.nextSibling,0):ye.after(n):vu(t)?ye(n,r+1):t:Ei(n)?Me(n.previousSibling)?ye(n.previousSibling,n.previousSibling.data.length):ye.before(n):_u(t)?ye(n,r-1):t},c0=ge(Kr,!0),d0=ge(Kr,!1),u0=(e,t)=>{const n=r=>r.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Yh=e=>u0(e,"Delete"),_T=e=>yg(e)||qa(e),Zc=(e,t)=>{return Lt(e,t)?Bo(t,_T,(n=e,r=>yi(rr(r),n,Dt))):O.none();var n},Gh=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},h0=(e,t,n)=>Xn(ar(n),fo(n),(r,o)=>{const i=Kr(!0,r),s=Kr(!1,o),a=Kr(!1,t);return e?yr(n,a).exists(c=>c.isEqual(s)&&t.isEqual(i)):Tr(n,a).exists(c=>c.isEqual(i)&&t.isEqual(s))}).getOr(!0),f0=e=>{var t;return(8===Is(t=e)||"#comment"===Yt(t)?Fr(e):Yn(e)).bind(f0).orThunk(()=>O.some(e))},p0=(e,t,n,r=!0)=>{var o;t.deleteContents();const i=f0(n).getOr(n),s=X(null!==(o=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(s.dom===e.getBody()?Gh(e,r):Sn(s)&&(Si(s),r&&e.selection.setCursorLocation(s.dom,0)),!Dt(n,s)){const c=yi(rr(s),n)?[]:rr(a=s).map(Qt).map(d=>ot(d,f=>!Dt(a,f))).getOr([]);ke(c.concat(Qt(n)),d=>{Dt(d,s)||Lt(d,s)||!Sn(d)||_t(d)})}var a},Jh=e=>Qn(e,"td,th"),Qh=(e,t)=>({start:e,end:t}),Cl=Io([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ed=(e,t)=>co(X(e),"td,th",t),g0=e=>!Dt(e.start,e.end),m0=(e,t)=>fl(e.start,t).bind(n=>fl(e.end,t).bind(r=>bi(Dt(n,r),n))),Zh=e=>t=>m0(t,e).map(n=>({rng:t,table:n,cells:Jh(n)})),v0=(e,t,n,r)=>{if(n.collapsed||!e.forall(g0))return O.none();if(t.isSameTable){const o=e.bind(Zh(r));return O.some({start:o,end:o})}{const o=ed(n.startContainer,r),i=ed(n.endContainer,r),s=o.bind((c=r,d=>fl(d,c).bind(f=>Zr(Jh(f)).map(p=>Qh(d,p))))).bind(Zh(r)),a=i.bind((c=>d=>fl(d,c).bind(f=>jn(Jh(f)).map(p=>Qh(p,d))))(r)).bind(Zh(r));return O.some({start:s,end:a})}var c},_0=(e,t)=>Ee(e,n=>Dt(n,t)),ef=e=>Xn(_0(e.cells,e.rng.start),_0(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),y0=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(i=>o.setStartAfter(i.dom)),r.each(i=>o.setEndBefore(i.dom)),o},b0=e=>ke(e,t=>{h(t,"contenteditable"),Si(t)}),tf=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),nf(e,o,t,!1).each(i=>i())},w0=e=>{const t=ra(e),n=X(e.selection.getNode());hc(n.dom)&&Sn(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Ht(t,r=>Dt(r,n))&&En(n,"data-mce-selected","1")},x0=(e,t,n)=>O.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:i,isStartInTable:s})=>{const a=O.from((d=e).dom.getParent(s?i.endContainer:i.startContainer,d.dom.isBlock)).map(X);var d;i.deleteContents(),((d,f,p)=>{p.each(_=>{f?_t(_):(Si(_),d.selection.setCursorLocation(_.dom,0))})})(e,s,a.filter(Sn));const c=s?t[0]:t[t.length-1];return tf(e,c,r,s),Sn(c)?O.none():O.some(s?t.slice(1):t.slice(0,-1))}).getOr(t);b0(o),w0(e)}),bT=(e,t,n,r)=>O.some(()=>{const o=e.selection.getRng(),i=t[0],s=n[n.length-1];tf(e,i,o,!0),tf(e,s,o,!1);const a=Sn(i)?t:t.slice(1),c=Sn(s)?n:n.slice(0,-1);b0(a.concat(c)),r.deleteContents(),w0(e)}),nf=(e,t,n,r=!0)=>O.some(()=>{p0(e,t,n,r)}),wT=(e,t)=>O.some(()=>_s(e,!1,t)),C0=(e,t)=>Z(li(t,e),Ua),rf=(e,t)=>Z(li(t,e),ei("caption")),td=(e,t)=>O.some(()=>{Si(t),e.selection.setCursorLocation(t.dom,0)}),k0=(e,t)=>e?$_(t):H_(t),of=(e,t)=>{const n=X(e.selection.getStart(!0)),r=ra(e);return e.selection.isCollapsed()&&0===r.length?((e,t,n)=>{const r=X(e.getBody());return rf(r,n).fold(()=>((o,i,s,a)=>{const c=ye.fromRangeStart(o.selection.getRng());return C0(s,a).bind(d=>{return Sn(d)?td(o,d):(p=s,w=d,y=c,ea(i,o.getBody(),y).bind(S=>C0(p,X(S.getNode())).bind(b=>Dt(b,w)?O.none():O.some(I))));var p,w,y})})(e,t,r,n).orThunk(()=>bi(((o,i)=>{const s=ye.fromRangeStart(o.selection.getRng());return k0(i,s)||qr(i,o.getBody(),s).exists(a=>k0(i,a))})(e,t),I)),o=>((i,s,a,c)=>{const d=ye.fromRangeStart(i.selection.getRng());return Sn(c)?td(i,c):(p=a,w=c,y=d,ea(_=s,(f=i).getBody(),y).fold(()=>O.some(I),S=>{return T=_,j=y,D=S,ar((b=w).dom).bind(F=>fo(b.dom).map(z=>T?j.isEqual(F)&&D.isEqual(z):j.isEqual(z)&&D.isEqual(F))).getOr(!0)?((b,T)=>td(b,T))(f,w):((b,T,j)=>rf(b,X(j.getNode())).fold(()=>O.some(I),D=>bi(!Dt(D,T),I)))(p,w,S);var b,T,j,D}));var f,p,_,w,y})(e,t,r,o))})(e,t,n):((o,i,s)=>{const a=X(o.getBody()),c=o.selection.getRng();return 0!==s.length?x0(o,s,O.none()):(d=o,p=c,rf(f=a,i).fold(()=>{return w=d,((e,t)=>{const n=(i=e,s=>Dt(i,s)),r=((i,s)=>{const a=ed(i.startContainer,s),c=ed(i.endContainer,s);return Xn(a,c,Qh)})(t,n),o=((i,s)=>{const a=w=>fl(X(w),s),c=a(i.startContainer),d=a(i.endContainer),f=c.isSome(),p=d.isSome(),_=Xn(c,d,Dt).getOr(!1);return{startTable:c,endTable:d,isStartInTable:f,isEndInTable:p,isSameTable:_,isMultiTable:!_&&f&&p}})(t,n);var i;return((i,s,a)=>i.exists(c=>{return f=a,!g0(d=c)&&m0(d,f).exists(p=>{const _=p.dom.rows;return 1===_.length&&1===_[0].cells.length})&&uh(c.start,s);var d,f}))(r,t,n)?r.map(i=>Cl.singleCellTable(t,i.start)):o.isMultiTable?((i,s,a,c)=>v0(i,s,a,c).bind(({start:d,end:f})=>{const p=d.bind(ef).getOr([]),_=f.bind(ef).getOr([]);if(p.length>0&&_.length>0){const w=y0(a,s);return O.some(Cl.multiTable(p,_,w))}return O.none()}))(r,o,t,n):((i,s,a,c)=>v0(i,s,a,c).bind(({start:d,end:f})=>d.or(f)).bind(d=>{const{isSameTable:f}=s,p=ef(d).getOr([]);if(f&&d.cells.length===p.length)return O.some(Cl.fullTable(d.table));if(p.length>0){if(f)return O.some(Cl.partialTable(p,O.none()));{const _=y0(a,s);return O.some(Cl.partialTable(p,O.some({...s,rng:_})))}}return O.none()}))(r,o,t,n)})(f,p).bind(b=>b.fold(ge(nf,w),ge(wT,w),ge(x0,w),ge(bT,w)));var w},w=>td(d,w)));var d,f,p})(e,n,r)},bs=(e,t)=>{let n=t;for(;n&&n!==e;){if(xo(n)||tn(n))return n;n=n.parentNode}return null},CT=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],kT=Ie.each,sf=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=o=>Ht(CT,i=>Dn(o,i))||n.has(o);return{compare:(o,i)=>{if(o.nodeName!==i.nodeName||o.nodeType!==i.nodeType)return!1;const s=c=>{const d={};return kT(t.getAttribs(c),f=>{const p=f.nodeName.toLowerCase();"style"===p||r(p)||(d[p]=t.getAttrib(c,p))}),d},a=(c,d)=>{for(const f in c)if(ut(c,f)){const p=d[f];if(x(p)||c[f]!==p)return!1;delete d[f]}for(const f in d)if(ut(d,f))return!1;return!0};return!(Ye(o)&&Ye(i)&&(!a(s(o),s(i))||!a(t.parseStyle(t.getAttrib(o,"style")),t.parseStyle(t.getAttrib(i,"style"))))||Ur(o)||Ur(i))},isAttributeInternal:r}},S0=(e,t,n,r)=>{const o=n.name;for(let i=0,s=e.length;i<s;i++){const a=e[i];if(a.name===o){const c=r.nodes[o];c?c.nodes.push(n):r.nodes[o]={filter:a,nodes:[n]}}}if(n.attributes)for(let i=0,s=t.length;i<s;i++){const a=t[i],c=a.name;if(c in n.attributes.map){const d=r.attributes[c];d?d.nodes.push(n):r.attributes[c]={filter:a,nodes:[n]}}}},E0=(e,t)=>{const n=(r,o)=>{Ft(r,i=>{const s=vn(i.nodes);ke(i.filter.callbacks,a=>{for(let c=s.length-1;c>=0;c--){const d=s[c];(o?void 0!==d.attr(i.filter.name):d.name===i.filter.name)&&!C(d.parent)||s.splice(c,1)}s.length>0&&a(s,i.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},T0=(e,t,n,r={})=>{const o=((i,s,a)=>{const c={nodes:{},attributes:{}};return a.firstChild&&((d,f)=>{let p=d;for(;p=p.walk();)S0(i,s,p,c)})(a),c})(e,t,n);E0(o,r)},af=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const o=new br("br",1);t.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new br("#text",3)).value=zn},N0=(e,t)=>{const n=e?.firstChild;return N(n)&&n===e.lastChild&&n.name===t},kl=(e,t,n,r)=>r.isEmpty(t,n,o=>!0===e.getElementRule(o.name)?.paddEmpty),ST=e=>{let t;for(let n=e;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(t=n)}return O.from(t)},lf=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const o of r)n&&!t.isValidChild(n.name,o.name)&&lf(o,t,n);e.unwrap()}},cf=(e,t,n,r=I)=>{const o=t.getTextBlockElements(),i=t.getNonEmptyElements(),s=t.getWhitespaceElements(),a=Ie.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),c=new Set,d=f=>f!==n&&!a[f.name];for(let f=0;f<e.length;f++){const p=e[f];let _,w,y;if(!p.parent||c.has(p))continue;if(o[p.name]&&"li"===p.parent.name){let b=p.next;for(;b&&o[b.name];)b.name="li",c.add(b),p.parent.insert(b,p.parent),b=b.next;p.unwrap();continue}const S=[p];for(_=p.parent;_&&!t.isValidChild(_.name,p.name)&&d(_);_=_.parent)S.push(_);if(_&&S.length>1)if(t.isValidChild(_.name,p.name)){S.reverse(),w=S[0].clone(),r(w);let b=w;for(let T=0;T<S.length-1;T++){t.isValidChild(b.name,S[T].name)&&T>0?(y=S[T].clone(),r(y),b.append(y)):y=b;for(let j=S[T].firstChild;j&&j!==S[T+1];){const D=j.next;y.append(j),j=D}b=y}kl(t,i,s,w)?_.insert(p,S[0],!0):(_.insert(w,S[0],!0),_.insert(p,w)),_=S[0],(kl(t,i,s,_)||N0(_,"br"))&&_.empty().remove()}else lf(p,t);else if(p.parent){if("li"===p.name){let b=p.prev;if(b&&("ul"===b.name||"ol"===b.name)){b.append(p);continue}if(b=p.next,b&&("ul"===b.name||"ol"===b.name)&&b.firstChild){b.insert(p,b.firstChild,!0);continue}const T=new br("ul",1);r(T),p.wrap(T);continue}if(t.isValidChild(p.parent.name,"div")&&t.isValidChild("div",p.name)){const b=new br("div",1);r(b),p.wrap(b)}else lf(p,t)}}},A0=(e,t,n=t.parent)=>!(!n||!e.children[t.name]||e.isValidChild(n.name,t.name))||!(!n||"a"!==t.name||!((r,o)=>{let i=r;for(;i;){if("a"===i.name)return!0;i=i.parent}return!1})(n)),df=e=>e.collapsed?e:(t=>{const n=ye.fromRangeStart(t),r=ye.fromRangeEnd(t),o=t.commonAncestorContainer;return qr(!1,o,r).map(i=>!zo(n,r,o)&&zo(n,i,o)?((s,a,c,d)=>{const f=document.createRange();return f.setStart(s,a),f.setEnd(c,d),f})(n.container(),n.offset(),i.container(),i.offset()):t).getOr(t)})(e),uf=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},O0=(e,t)=>{const n=ye.after(e),r=$o(t).prev(n);return r?r.toRange():null},AT=["pre"],hf=hc,OT=(e,t,n)=>{var r,o;const i=e.selection,s=e.dom,a=e.parser,c=n.merge,d=Bi({validate:!0},e.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,f);let p=i.getRng();const _=p.startContainer,w=e.getBody();var D,F;_===w&&i.isCollapsed()&&s.isBlock(w.firstChild)&&(D=e,N(F=w.firstChild)&&!D.schema.getVoidElements()[F.nodeName])&&s.isEmpty(w.firstChild)&&(p=s.createRng(),p.setStart(w.firstChild,0),p.setEnd(w.firstChild,0),i.setRng(p)),i.isCollapsed()||(D=>{const F=D.dom,z=df(D.selection.getRng());D.selection.setRng(z);const Y=F.getParent(z.startContainer,hf);var re,ie,ce;re=F,ie=z,N(ce=Y)&&ce===re.getParent(ie.endContainer,hf)&&uh(X(ce),ie)?nf(D,z,X(Y)):z.startContainer===z.endContainer&&z.endOffset-z.startOffset==1&&Me(z.startContainer.childNodes[z.startOffset])?z.deleteContents():D.getDoc().execCommand("Delete",!1)})(e);const y=i.getNode(),S={context:y.nodeName.toLowerCase(),data:n.data,insert:!0},b=a.parse(t,S);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,i)=>{const s=o.getNonEmptyElements();return N(i)&&(i.isEmpty(s)||(c=i,o.getBlockElements()[c.name]&&N((d=c).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===zn)(c.firstChild)));var c,d})(e,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(e.schema,b)&&((D,F)=>!!uf(D,F))(s,y))return p=((e,t,n,r)=>{const o=((p,_,w)=>{const y=_.serialize(w);return(S=>{var b,T;const j=S.firstChild,D=S.lastChild;return j&&"META"===j.nodeName&&(null===(b=j.parentNode)||void 0===b||b.removeChild(j)),D&&"mce_marker"===D.id&&(null===(T=D.parentNode)||void 0===T||T.removeChild(D)),S})(p.createFragment(y))})(t,e,r),i=uf(t,n.startContainer),s=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||N(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((r=t.firstChild).data===zn||hn(r)))?e.slice(0,-1):e;var r,t,n})(ot(null!==(c=o.firstChild?.childNodes)&&void 0!==c?c:[],p=>"LI"===p.nodeName));var c;const d=t.getRoot(),f=p=>{const _=ye.fromRangeStart(n),w=$o(t.getRoot()),S=(1===p?w.prev(_):w.next(_))?.getNode();return!S||uf(t,S)!==i};return i?f(1)?((p,_,w)=>{const y=p.parentNode;return y&&Ie.each(_,S=>{y.insertBefore(S,p)}),((S,b)=>{const T=ye.before(S),j=$o(b).next(T);return j?j.toRange():null})(p,w)})(i,s,d):f(2)?(p=i,w=d,t.insertAfter((_=s).reverse(),p),O0(_[0],w)):((p,_,w,y)=>{const S=((T,j)=>{const D=j.cloneRange(),F=j.cloneRange();return D.setStartBefore(T),F.setEndAfter(T),[D.cloneContents(),F.cloneContents()]})(p,y),b=p.parentNode;return b&&(b.insertBefore(S[0],p),Ie.each(_,T=>{b.insertBefore(T,p)}),b.insertBefore(S[1],p),b.removeChild(p)),O0(_[_.length-1],w)})(i,s,d,n):null;var p,_,w})(d,s,i.getRng(),b),p&&i.setRng(p),t;!0===n.paste&&((D,F,z,Y)=>{var re;const ie=F.firstChild,ce=F.lastChild,me=ie===("bookmark"===ce.attr("data-mce-type")?ce.prev:ce),Q=Oe(AT,ie.name);if(me&&Q){const ee="false"!==ie.attr("contenteditable"),he=(null===(re=D.getParent(z,D.isBlock))||void 0===re?void 0:re.nodeName.toLowerCase())===ie.name,we=O.from(bs(Y,z)).forall(xo);return ee&&he&&we}return!1})(s,b,y,e.getBody())&&(null===(r=b.firstChild)||void 0===r||r.unwrap()),(D=>{let F=D;for(;F=F.walk();)1===F.type&&F.attr("data-mce-fragment","1")})(b);let T=b.lastChild;if(T&&"mce_marker"===T.attr("id")){const D=T;for(T=T.prev;T;T=T.walk(!0))if(3===T.type||!s.isBlock(T.name)){T.parent&&e.schema.isValidChild(T.parent.name,"span")&&T.parent.insert(D,T,"br"===T.name);break}}if(e._selectionOverrides.showBlockCaretContainer(y),S.invalid){e.selection.setContent(f);let D,F=i.getNode();const z=e.getBody();for(Ha(F)?F=D=z:D=F;D&&D!==z;)F=D,D=D.parentNode;t=F===z?z.innerHTML:s.getOuterHTML(F);const Y=a.parse(t),re=(ee=>{for(let he=ee;he;he=he.walk())if("mce_marker"===he.attr("id"))return O.some(he);return O.none()})(Y),ie=re.bind(ST).getOr(Y);re.each(ee=>ee.replace(b));const ce=b.children(),me=null!==(o=b.parent)&&void 0!==o?o:Y;b.unwrap();const Q=ot(ce,ee=>A0(e.schema,ee,me));cf(Q,e.schema,ie),T0(a.getNodeFilters(),a.getAttributeFilters(),Y),t=d.serialize(Y),F===z?s.setHTML(z,t):s.setOuterHTML(F,t)}else t=d.serialize(b),((D,F,z)=>{var Y;if("all"===z.getAttribute("data-mce-bogus"))null===(Y=z.parentNode)||void 0===Y||Y.insertBefore(D.dom.createFragment(F),z);else{const re=z.firstChild,ie=z.lastChild;!re||re===ie&&"BR"===re.nodeName?D.dom.setHTML(z,F):D.selection.setContent(F,{no_events:!0})}})(e,t,y);var j;return((D,F)=>{const z=D.schema.getTextInlineElements(),Y=D.dom;if(F){const re=D.getBody(),ie=sf(D);Ie.each(Y.select("*[data-mce-fragment]"),ce=>{if(N(z[ce.nodeName.toLowerCase()])&&tt(Ih(Y,ce),ee=>!L_.has(ee)))for(let me=ce.parentElement;N(me)&&me!==re&&!rT(Y,ce,me);me=me.parentElement)if(ie.compare(me,ce)){Y.remove(ce,!0);break}})}})(e,c),((D,F)=>{var z,Y,re;let ie;const ce=D.dom,me=D.selection;if(!F)return;me.scrollIntoView(F);const Q=bs(D.getBody(),F);if(Q&&"false"===ce.getContentEditable(Q))return ce.remove(F),void me.select(Q);let ee=ce.createRng();const he=F.previousSibling;if(Me(he)){ee.setStart(he,null!==(Y=null===(z=he.nodeValue)||void 0===z?void 0:z.length)&&void 0!==Y?Y:0);const Ve=F.nextSibling;Me(Ve)&&(he.appendData(Ve.data),null===(re=Ve.parentNode)||void 0===re||re.removeChild(Ve))}else ee.setStartBefore(F),ee.setEndBefore(F);const we=ce.getParent(F,ce.isBlock);if(ce.remove(F),we&&ce.isEmpty(we)){const Ve=hf(we);Rt(X(we)),ee.setStart(we,0),ee.setEnd(we,0),Ve||we.getAttribute("data-mce-fragment")||!(ie=(Be=>{let rt=ye.fromRangeStart(Be);return rt=$o(D.getBody()).next(rt),rt?.toRange()})(ee))?ce.add(we,ce.create("br",Ve?{}:{"data-mce-bogus":"1"})):(ee=ie,ce.remove(we))}me.setRng(ee)})(e,s.get("mce_marker")),j=e.getBody(),Ie.each(j.getElementsByTagName("*"),D=>{D.removeAttribute("data-mce-fragment")}),((D,F)=>{O.from(D.getParent(F,"td,th")).map(X).each(ik)})(s,i.getStart()),((D,F,z)=>{const Y=zr(X(z),re=>Dt(re,X(F)));Mr(Y,Y.length-2).filter(nr).fold(()=>xu(D,F),re=>xu(D,re.dom))})(e.schema,e.getBody(),i.getStart()),t},nd=e=>e instanceof br,ff=(e,t,n)=>{var r;e.dom.setHTML(e.getBody(),t),!0!==n&&vs(r=e)&&ar(r.getBody()).each(o=>{const i=o.getNode(),s=oi(i)?ar(i).getOr(o):o;r.selection.setRng(s.toRange())})},R0=e=>P(e)?e:Et,pf=(e,t,n)=>{const r=t(e),o=R0(n);return r.orThunk(()=>o(e)?O.none():((i,s,a)=>{let c=i.dom;const d=R0(a);for(;c.parentNode;){c=c.parentNode;const f=X(c),p=s(f);if(p.isSome())return p;if(d(f))break}return O.none()})(e,t,o))},gf=vh,j0=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const i=r[o];if(Wr(i)&&!1===i.inherit&&e.dom.is(t,i.selector))return!0}return!1},mf=(e,t,n,r,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const s=e.dom.getParent(t,a=>!!j0(e,a,n)||a.parentNode===i||!!qo(e,a,n,r,!0));return!!qo(e,s,n,r,o)},rd=(e,t,n)=>!(!Bn(n)||!gf(t,n.inline))||!(!Ho(n)||!gf(t,n.block))||!!Wr(n)&&Ye(t)&&e.is(t,n.selector),D0=(e,t,n,r,o,i)=>{const s=n[r],a="attributes"===r;if(P(n.onmatch))return n.onmatch(t,n,r);if(s)if(In(s)){for(let c=0;c<s.length;c++)if(a?e.getAttrib(t,s[c]):Fc(e,t,s[c]))return!0}else for(const c in s)if(ut(s,c)){const d=a?e.getAttrib(t,c):Fc(e,t,c),f=Pi(s[c],i),p=C(d)||vi(d);if(p&&C(f))continue;if(o&&p&&!n.exact||(!o||n.exact)&&!gf(d,_h(f,c)))return!1}return!0},qo=(e,t,n,r,o)=>{const i=e.formatter.get(n),s=e.dom;if(i&&Ye(t))for(let a=0;a<i.length;a++){const c=i[a];if(rd(e.dom,t,c)&&D0(s,t,c,"attributes",o,r)&&D0(s,t,c,"styles",o,r)){const d=c.classes;if(d)for(let f=0;f<d.length;f++)if(!e.dom.hasClass(t,Pi(d[f],r)))return;return c}}},vf=(e,t,n,r,o)=>{if(r)return mf(e,r,t,n,o);if(r=e.selection.getNode(),mf(e,r,t,n,o))return!0;const i=e.selection.getStart();return!(i===r||!mf(e,i,t,n,o))},P0=e=>(t=>{const n=[];let r=t;for(;r;){if(Me(r)&&"\ufeff"!==r.data||r.childNodes.length>1)return[];Ye(r)&&n.push(r),r=r.firstChild}return n})(e).length>0,B0=e=>{if(e){const t=new Pn(e,e);for(let n=t.current();n;n=t.next())if(Me(n))return n}return null},_f=e=>{const t=je("span");return so(t,{id:ih,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Qe(t,mt("\ufeff")),t},yf=(e,t,n=!0)=>{const r=e.dom,o=e.selection;if(P0(t))_s(e,!1,X(t),n);else{const i=o.getRng(),s=r.getParent(t,r.isBlock),a=i.startContainer,c=i.startOffset,d=i.endContainer,f=i.endOffset,p=(_=>{const w=B0(_);return w&&"\ufeff"===w.data.charAt(0)&&w.deleteData(0,1),w})(t);r.remove(t,!0),a===p&&c>0&&i.setStart(p,c-1),d===p&&f>0&&i.setEnd(p,f-1),s&&r.isEmpty(s)&&Si(X(s)),o.setRng(i)}},bf=(e,t,n=!0)=>{const r=e.dom,o=e.selection;if(t)yf(e,t,n);else if(!(t=hs(e.getBody(),o.getStart())))for(;t=r.get(ih);)yf(e,t,n)},L0=(e,t)=>(e.appendChild(t),t),M0=(e,t)=>{var n;const r=Mn(e,(i,s)=>L0(i,s.cloneNode(!1)),t),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return L0(r,o.createTextNode("\ufeff"))},I0=e=>{const t=_f(!1),n=M0(e,t.dom);return{caretContainer:t,caretPosition:ye(n,0)}},z0=(e,t)=>{const{caretContainer:n,caretPosition:r}=I0(t);return nt(X(e),n),_t(X(e)),r},F0=(e,t)=>{const n=e.schema.getTextInlineElements();return ut(n,Yt(t))&&!po(t.dom)&&!es(t.dom)},$0=e=>po(e.dom)&&P0(e.dom),Sl={},H0=wo(["pre"]);((e,t)=>{Sl[e]||(Sl[e]=[]),Sl[e].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=ot(ot(r,H0),(i=r,s=>{const a=s.previousSibling;return H0(a)&&Oe(i,a)}));ke(o,i=>{((s,a)=>{const c=X(a),d=It(c).dom;_t(c),Ot(X(s),[je("br",d),je("br",d),...Qt(c)])})(i.previousSibling,i)})}var i})})("pre");const q0=["fontWeight","fontStyle","color","fontSize","fontFamily"],U0=(e,t)=>{const n=e.get(t);return u(n)?Z(n,r=>{return Bn(r)&&"span"===r.inline&&M((o=r).styles)&&Ht(_n(o.styles),i=>Oe(q0,i));var o}):O.none()},W0=(e,t)=>Tr(t,ye.fromRangeStart(e)).isNone(),V0=(e,t)=>!1===yr(t,ye.fromRangeEnd(e)).exists(n=>!hn(n.getNode())||yr(t,n).isSome()),K0=e=>t=>ZC(t)&&e.isEditable(t),X0=e=>ot(e.getSelectedBlocks(),K0(e.dom)),wf=Ie.each,xf=e=>Ye(e)&&!Ur(e)&&!po(e)&&!es(e),Y0=(e,t)=>{for(let n=e;n;n=n[t]){if(Me(n)&&pr(n.data))return e;if(Ye(n)&&!Ur(n))return n}return e},G0=(e,t,n)=>{const r=sf(e),o=Ye(t)&&fs(t),i=Ye(n)&&fs(n);if(o&&i){const s=Y0(t,"previousSibling"),a=Y0(n,"nextSibling");if(r.compare(s,a)){for(let c=s.nextSibling;c&&c!==a;){const d=c;c=c.nextSibling,s.appendChild(d)}return e.dom.remove(a),Ie.each(Ie.grep(a.childNodes),c=>{s.appendChild(c)}),s}}return n},J0=(e,t,n,r)=>{var o;if(r&&!1!==t.merge_siblings){const i=null!==(o=G0(e,Nv(r),r))&&void 0!==o?o:r;G0(e,i,Nv(i,!0))}},Cf=(e,t,n)=>{wf(e.childNodes,r=>{xf(r)&&(t(r)&&n(r),r.hasChildNodes()&&Cf(r,t,n))})},Q0=(e,t)=>n=>!(!n||!Fc(e,n,t)),Z0=(e,t,n)=>r=>{var o,i;e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=e,"SPAN"===(i=r).nodeName&&0===o.getAttribs(i).length&&o.remove(i,!0)},ws=Io([{keep:[]},{rename:["name"]},{removed:[]}]),DT=/^(src|href|style)$/,kf=Ie.each,od=vh,ey=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),ty=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Ye(r)){const i=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>i?i:o]}return Me(r)&&n&&o>=r.data.length&&(r=new Pn(r,e.getBody()).next()||r),Me(r)&&!n&&0===o&&(r=new Pn(r,e.getBody()).prev()||r),r},ny=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[n]||r:e},Sf=(e,t,n,r)=>{var o;const i=e.create(n,r);return null===(o=t.parentNode)||void 0===o||o.insertBefore(i,t),i.appendChild(t),i},ry=(e,t,n,r,o)=>{const i=X(t),s=X(e.create(r,o)),a=n?ti(i):_o(i);return Ot(s,a),n?(nt(i,s),bt(s,i)):(it(i,s),Qe(s,i)),s.dom},oy=(e,t,n)=>{const r=t.parentNode;let o;const i=e.dom,s=sr(e);var a;Ho(n)&&r===i.getRoot()&&(n.list_block&&od(t,n.list_block)||ke(vn(t.childNodes),a=>{oa(e,s,a.nodeName.toLowerCase())?o?o.appendChild(a):(o=Sf(i,a,s),i.setAttribs(o,il(e))):o=null})),Wr(a=n)&&Bn(a)&&yi(qt(a,"mixed"),!0)&&!od(n.inline,t)||i.remove(t,!0)},iy=(e,t,n)=>m(e)?{name:t,value:null}:{name:e,value:Pi(t,n)},sy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},ay=(e,t,n,r,o)=>{let i=!1;kf(n.styles,(s,a)=>{const{name:c,value:d}=iy(a,s,r),f=_h(d,c);(n.remove_similar||k(d)||!Ye(o)||od(Fc(e,o,c),f))&&e.setStyle(t,c,""),i=!0}),i&&sy(e,t)},ly=(e,t,n,r,o)=>{const i=e.dom,s=sf(e),a=e.schema;if(Bn(t)&&ku(a,t.inline)&&ns(a,r)&&r.parentElement===e.getBody())return oy(e,r,t),ws.removed();if(!t.ceFalseOverride&&r&&"false"===i.getContentEditableParent(r)||r&&!rd(i,r,t)&&(!t.links||"A"!==r.nodeName))return ws.keep();const c=r,d=t.preserve_attributes;if(Bn(t)&&"all"===t.remove&&u(d)){const f=ot(i.getAttribs(c),p=>Oe(d,p.name.toLowerCase()));if(i.removeAllAttribs(c),ke(f,p=>i.setAttrib(c,p.name,p.value)),f.length>0)return ws.rename("span")}if("all"!==t.remove){ay(i,c,t,n,o),kf(t.attributes,(p,_)=>{const{name:w,value:y}=iy(_,p,n);if(t.remove_similar||k(y)||!Ye(o)||od(i.getAttrib(o,w),y)){if("class"===w){const S=i.getAttrib(c,w);if(S){let b="";if(ke(S.split(/\s+/),T=>{/mce\-\w+/.test(T)&&(b+=(b?" ":"")+T)}),b)return void i.setAttrib(c,w,b)}}if(DT.test(w)&&c.removeAttribute("data-mce-"+w),"style"===w&&wo(["li"])(c)&&"none"===i.getStyle(c,"list-style-type"))return c.removeAttribute(w),void i.setStyle(c,"list-style-type","none");"class"===w&&c.removeAttribute("className"),c.removeAttribute(w)}}),kf(t.classes,p=>{p=Pi(p,n),Ye(o)&&!i.hasClass(o,p)||i.removeClass(c,p)});const f=i.getAttribs(c);for(let p=0;p<f.length;p++)if(!s.isAttributeInternal(f[p].nodeName))return ws.keep()}return"none"!==t.remove?(oy(e,c,t),ws.removed()):ws.keep()},PT=(e,t,n,r)=>ly(e,t,n,r,r).fold(J(r),o=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,o)),J(null)),cy=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((i,s,a,c,d)=>{const f=i.formatter.get(s),p=f[0],_=i.dom,w=i.selection,y=D=>{const F=((z,Y,re,ie,ce)=>{let me;return Y.parentNode&&ke($c(z.dom,Y.parentNode).reverse(),Q=>{if(!me&&Ye(Q)&&"_start"!==Q.id&&"_end"!==Q.id){const ee=qo(z,Q,re,ie,ce);ee&&!1!==ee.split&&(me=Q)}}),me})(i,D,s,a,d);return((z,Y,re,ie,ce,me,Q,ee)=>{var he,we;let Ve,Be;const rt=z.dom;if(re){const Je=re.parentNode;for(let gt=ie.parentNode;gt&&gt!==Je;gt=gt.parentNode){let vt=rt.clone(gt,!1);for(let Xe=0;Xe<Y.length&&(vt=PT(z,Y[Xe],ee,vt),null!==vt);Xe++);vt&&(Ve&&vt.appendChild(Ve),Be||(Be=vt),Ve=vt)}Q.mixed&&rt.isBlock(re)||(ie=null!==(he=rt.split(re,ie))&&void 0!==he?he:ie),Ve&&Be&&(null===(we=ce.parentNode)||void 0===we||we.insertBefore(Ve,ce),Be.appendChild(ce),Bn(Q)&&J0(z,Q,0,Ve))}return ie})(i,f,F,D,D,0,p,a)},S=D=>Ht(f,F=>El(i,F,a,D,D)),b=D=>{const F=vn(D.childNodes),z=S(D)||Ht(f,re=>rd(_,D,re)),Y=D.parentNode;if(!z&&N(Y)&&bh(p)&&S(Y),p.deep&&F.length)for(let re=0;re<F.length;re++)b(F[re]);ke(["underline","line-through","overline"],re=>{Ye(D)&&i.dom.getStyle(D,"text-decoration")===re&&D.parentNode&&Ov(_,D.parentNode)===re&&El(i,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:re}},void 0,D)})},T=D=>{const F=_.get(D?"_start":"_end");if(F){let z=F[D?"firstChild":"lastChild"];return Ur(Y=z)&&Ye(Y)&&("_start"===Y.id||"_end"===Y.id)&&(z=z[D?"firstChild":"lastChild"]),Me(z)&&0===z.data.length&&(z=D?F.previousSibling||F.nextSibling:F.nextSibling||F.previousSibling),_.remove(F,!0),z}var Y;return null},j=D=>{let F,z,Y=ps(_,D,f,D.collapsed);if(p.split){if(Y=Xc(Y),F=ty(i,Y,!0),z=ty(i,Y),F!==z){if(F=ny(F,!0),z=ny(z,!1),ey(_,F,z)){const ie=O.from(F.firstChild).getOr(F);return y(ry(_,ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void T(!0)}if(ey(_,z,F)){const ie=O.from(z.lastChild).getOr(z);return y(ry(_,ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void T(!1)}F=Sf(_,F,"span",{id:"_start","data-mce-type":"bookmark"}),z=Sf(_,z,"span",{id:"_end","data-mce-type":"bookmark"});const re=_.createRng();re.setStartAfter(F),re.setEndBefore(z),gl(_,re,ie=>{ke(ie,ce=>{Ur(ce)||Ur(ce.parentNode)||y(ce)})}),y(F),y(z),F=T(!0),z=T()}else F=z=y(F);Y.startContainer=F.parentNode?F.parentNode:F,Y.startOffset=_.nodeIndex(F),Y.endContainer=z.parentNode?z.parentNode:z,Y.endOffset=_.nodeIndex(z)+1}gl(_,Y,re=>{ke(re,b)})};if(c){if(pl(c)){const D=_.createRng();D.setStartBefore(c),D.setEndAfter(c),j(D)}else j(c);Vv(i,s,c,a)}else w.isCollapsed()&&Bn(p)&&!ra(i).length?((e,t,n,r)=>{const o=e.dom,i=e.selection;let s=!1;const a=e.formatter.get(t);if(!a)return;const c=i.getRng(),d=c.startContainer,f=c.startOffset;let p=d;Me(d)&&(f!==d.data.length&&(s=!0),p=p.parentNode);const _=[];let w;for(;p;){if(qo(e,p,t,n,r)){w=p;break}p.nextSibling&&(s=!0),_.push(p),p=p.parentNode}if(w)if(s){const y=i.getBookmark();c.collapse(!0);let S=ps(o,c,a,!0);S=Xc(S),e.formatter.remove(t,n,S,r),i.moveToBookmark(y)}else{const y=hs(e.getBody(),w),S=_f(!1).dom;((j,D,F)=>{var z,Y;const re=j.dom,ie=re.getParent(F,ge(gh,j.schema));ie&&re.isEmpty(ie)?null===(z=F.parentNode)||void 0===z||z.replaceChild(D,F):((ce=>{const me=Qn(ce,"br"),Q=ot((ee=>{const he=[];let we=ee.dom;for(;we;)he.push(X(we)),we=we.lastChild;return he})(ce).slice(-1),ts);me.length===Q.length&&ke(Q,_t)})(X(F)),re.isEmpty(F)?null===(Y=F.parentNode)||void 0===Y||Y.replaceChild(D,F):re.insertAfter(D,F))})(e,S,y??w);const b=((j,D,F,z,Y,re)=>{const ie=j.formatter,ce=j.dom,me=ot(_n(ie.get()),ee=>ee!==z&&!yn(ee,"removeformat")),Q=(ee=j,he=F,et(me,(Ve,Be)=>{const rt=yh(ee,Be,vt=>{const Xe=dt=>P(dt)||dt.length>1&&"%"===dt.charAt(0);return Ht(["styles","attributes"],dt=>qt(vt,dt).exists(yt=>{const te=u(yt)?yt:rn(yt);return Ht(te,Xe)}))});return ee.formatter.matchNode(he,Be,{},rt)?Ve.concat([Be]):Ve},[]));var ee,he;if(ot(Q,ee=>!((he,we,Ve)=>{const Be=["inline","block","selector","attributes","styles","classes"],rt=Je=>un(Je,(gt,vt)=>Ht(Be,Xe=>Xe===vt));return yh(he,we,Je=>{const gt=rt(Je);return yh(he,Ve,vt=>{const Xe=rt(vt);return((dt,yt,te=mn)=>nn(te).eq(dt,yt))(gt,Xe)})})})(j,ee,z)).length>0){const ee=F.cloneNode(!1);return ce.add(D,ee),ie.remove(z,Y,ee,re),ce.remove(ee),O.some(ee)}return O.none()})(e,S,w,t,n,r),T=M0(_.concat(b.toArray()),S);y&&yf(e,y,!1),i.setCursorLocation(T,1),o.isEmpty(w)&&o.remove(w)}})(i,s,a,d):(Tv(i,()=>fh(i,j),D=>Bn(p)&&vf(i,s,a,D)),i.nodeChanged()),D=i,z=a,"removeformat"===(F=s)?ke(X0(D.selection),Y=>{ke(q0,re=>D.dom.setStyle(Y,re,"")),sy(D.dom,Y)}):U0(D.formatter,F).each(Y=>{ke(X0(D.selection),re=>ay(D.dom,re,Y,z,null))}),Vv(i,s,c,a);var D,F,z})(e,t,n,r,o)},El=(e,t,n,r,o)=>ly(e,t,n,r,o).fold(Et,i=>(e.dom.rename(r,i),!0),ft),dy=Ie.each,id=Ie.each,uy=(e,t,n,r)=>{if(id(n.styles,(o,i)=>{e.setStyle(t,i,Pi(o,r))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},BT=(e,t,n,r)=>{const o=e.formatter.get(t),i=o[0],s=!r&&e.selection.isCollapsed(),a=e.dom,c=e.selection,d=(y,S=i)=>{P(S.onformat)&&S.onformat(y,S,n,r),uy(a,y,S,n),id(S.attributes,(b,T)=>{a.setAttrib(y,T,Pi(b,n))}),id(S.classes,b=>{const T=Pi(b,n);a.hasClass(y,T)||a.addClass(y,T)})},f=(y,S)=>{let b=!1;return id(y,T=>!(!Wr(T)||("false"!==a.getContentEditable(S)||T.ceFalseOverride)&&(!N(T.collapsed)||T.collapsed===s)&&a.is(S,T.selector)&&!po(S)&&(d(S,T),b=!0,1))),b},_=(y,S,b)=>{const T=[];let j=!0;const D=i.inline||i.block,F=(y=>{if(W(y)){const S=a.create(y);return d(S),S}return null})(D);gl(y,S,z=>{let Y;const re=ie=>{let ce=!1,me=j,Q=!1;const ee=ie.parentNode,he=ee.nodeName.toLowerCase(),we=y.getContentEditable(ie);N(we)&&(me=j,j="true"===we,ce=!0,Q=Av(e,ie));const Ve=j&&!ce;if(hn(ie)&&!((Be,rt,Je,gt)=>{if(yS(Be)&&Bn(rt)&&Je.parentNode){const vt=Hg(Be.schema),Xe=((e,t)=>((n,r)=>{const o=n.dom;return o.parentNode?(i=X(o.parentNode),Z(i.dom.childNodes,a=>(i=>!Dt(n,i)&&r(i))(X(a))).map(X)):O.none();var i})(e,t).isSome())(X(Je),dt=>po(dt.dom));return fn(vt,gt)&&Sn(X(Je.parentNode),!1)&&!Xe}return!1})(e,i,ie,he))return Y=null,void(Ho(i)&&y.remove(ie));if(Be=ie,Ho(rt=i)&&!0===rt.wrapper&&qo(e,Be,t,n))Y=null;else{if(((Be,rt,Je)=>{const gt=Ho(vt=i)&&!0!==vt.wrapper&&gh(e.schema,Be)&&oa(e,rt,D);var vt;return Je&&gt})(ie,he,Ve)){const Be=y.rename(ie,D);return d(Be),T.push(Be),void(Y=null)}if(Wr(i)){let Be=f(o,ie);if(!Be&&N(ee)&&bh(i)&&(Be=f(o,ee)),!Bn(i)||Be)return void(Y=null)}N(F)&&((Be,rt,Je,gt)=>{const vt=Be.nodeName.toLowerCase(),Xe=oa(e,D,vt)&&oa(e,rt,D),dt=!b&&Me(Be)&&mc(Be.data),yt=po(Be),te=!Bn(i)||!y.isBlock(Be);return(Je||gt)&&Xe&&!dt&&!yt&&te})(ie,he,Ve,Q)?(Y||(Y=y.clone(F,!1),ee.insertBefore(Y,ie),T.push(Y)),Q&&ce&&(j=me),Y.appendChild(ie)):(Y=null,ke(vn(ie.childNodes),re),ce&&(j=me),Y=null)}var Be,rt};ke(z,re)}),!0===i.links&&ke(T,z=>{const Y=re=>{"A"===re.nodeName&&d(re,i),ke(vn(re.childNodes),Y)};Y(z)}),ke(T,z=>{const Y=(re=>{let ie=0;return ke(re.childNodes,ce=>{var me;N(me=ce)&&Me(me)&&0===me.length||Ur(ce)||ie++}),ie})(z);var re;!(T.length>1)&&y.isBlock(z)||0!==Y?(Bn(i)||Ho(i)&&i.wrapper)&&(i.exact||1!==Y||(z=Z((re=z).childNodes,ph).filter(ce=>"false"!==y.getContentEditable(ce)&&rd(y,ce,i)).map(ce=>{const me=y.clone(ce,!1);return d(me),y.replace(me,re,!0),y.remove(ce,!0),me}).getOr(re)),((re,ie,ce,me)=>{dy(ie,Q=>{var ee,he,we;Bn(Q)&&dy(re.dom.select(Q.inline,me),ee=>{xf(ee)&&El(re,Q,ce,ee,Q.exact?ee:null)}),ee=re.dom,we=me,(he=Q).clear_child_styles&&wf(ee.select(he.links?"*:not(a)":"*",we),Be=>{xf(Be)&&fs(Be)&&wf(he.styles,(rt,Je)=>{ee.setStyle(Be,Je,"")})})})})(e,o,n,z),((re,ie,ce,me,Q)=>{const ee=Q.parentNode;qo(re,ee,ce,me)&&El(re,ie,me,Q)||ie.merge_with_parents&&ee&&re.dom.getParent(ee,he=>!!qo(re,he,ce,me)&&(El(re,ie,me,Q),!0))})(e,i,t,n,z),((re,ie,ce,me)=>{if(ie.styles&&ie.styles.backgroundColor){const Q=Q0(re,"fontSize");Cf(me,ee=>Q(ee)&&fs(ee),Z0(re,"backgroundColor",Pi(ie.styles.backgroundColor,ce)))}})(y,i,n,z),((re,ie,ce,me)=>{const Q=ee=>{if(Ye(ee)&&Ye(ee.parentNode)&&fs(ee)){const he=Ov(re,ee.parentNode);re.getStyle(ee,"color")&&he?re.setStyle(ee,"text-decoration",he):re.getStyle(ee,"text-decoration")===he&&re.setStyle(ee,"text-decoration",null)}};ie.styles&&(ie.styles.color||ie.styles.textDecoration)&&(Ie.walk(me,Q,"childNodes"),Q(me))})(y,i,0,z),((re,ie,ce,me)=>{if(Bn(ie)&&("sub"===ie.inline||"sup"===ie.inline)){const Q=Q0(re,"fontSize");Cf(me,he=>Q(he)&&fs(he),Z0(re,"fontSize",""));const ee=ot(re.select("sup"===ie.inline?"sub":"sup",me),fs);re.remove(ee,!0)}})(y,i,0,z),J0(e,i,0,z)):y.remove(z,!0)})},w=pl(r)?r:c.getNode();if("false"===a.getContentEditable(w)&&!Av(e,w))return f(o,r=w),void Wv(e,t,r,n);if(i){if(r)if(pl(r)){if(!f(o,r)){const y=a.createRng();y.setStartBefore(r),y.setEndAfter(r),_(a,ps(a,y,o),!0)}}else _(a,r,!0);else s&&Bn(i)&&!ra(e).length?((y,S,b)=>{let T;const j=y.selection,D=y.formatter.get(S);if(!D)return;const F=j.getRng();let z=F.startOffset;const Y=F.startContainer.nodeValue;T=hs(y.getBody(),j.getStart());const re=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(Y&&z>0&&z<Y.length&&re.test(Y.charAt(z))&&re.test(Y.charAt(z-1))){const me=j.getBookmark();F.collapse(!0);let Q=ps(y.dom,F,D);Q=Xc(Q),y.formatter.apply(S,b,Q),j.moveToBookmark(me)}else{let me=T?B0(T):null;T&&"\ufeff"===me?.data||(ie=y.getDoc(),ce=_f(!0).dom,T=ie.importNode(ce,!0),me=T.firstChild,F.insertNode(T),z=1),y.formatter.apply(S,b,T),j.setCursorLocation(me,z)}var ie,ce})(e,t,n):(c.setRng(df(c.getRng())),Tv(e,()=>{fh(e,(y,S)=>{const b=S?y:ps(a,y,o);_(a,b,!1)})},ft),e.nodeChanged()),U0(e.formatter,t).each(y=>{var S;ke(ot((b=>{const T=b.getSelectedBlocks(),j=b.getRng();if(b.isCollapsed())return[];if(1===T.length)return W0(j,T[0])&&V0(j,T[0])?T:[];{const D=jn(T).filter(Y=>W0(j,Y)).toArray(),F=Zr(T).filter(Y=>V0(j,Y)).toArray(),z=T.slice(1,-1);return D.concat(z).concat(F)}})(S=e.selection),K0(S.dom)),S=>uy(a,S,y,n))});S=e,ut(Sl,y=t)&&ke(Sl[y],b=>{b(S)})}var y,S;Wv(e,t,r,n)},hy=(e,t,n,r)=>{(r||e.selection.isEditable())&&BT(e,t,n,r)},fy=e=>ut(e,"vars"),py=e=>e.selection.getStart(),gy=(e,t,n,r,o)=>U(t,i=>{const s=e.formatter.matchNode(i,n,o??{},r);return!x(s)},i=>!!j0(e,i,n)||!r&&N(e.formatter.matchNode(i,n,o,!0))),my=(e,t)=>{const n=t??py(e);return ot($c(e.dom,n),r=>Ye(r)&&!es(r))},vy=(e,t,n)=>{const r=my(e,t);Ft(n,(o,i)=>{const s=a=>{const c=gy(e,r,i,a.similar,fy(a)?a.vars:void 0),d=c.isSome();if(a.state.get()!==d){a.state.set(d);const f=c.getOr(t);fy(a)?a.callback(d,{node:f,format:i,parents:r}):ke(a.callbacks,p=>p(d,{node:f,format:i,parents:r}))}};ke([o.withSimilar,o.withoutSimilar],s),ke(o.withVars,s)})},_y=Ie.explode,yy=()=>{const e={};return{addFilter:(t,n)=>{ke(_y(t),r=>{ut(e,r)||(e[r]={name:r,callbacks:[]}),e[r].callbacks.push(n)})},getFilters:()=>rn(e),removeFilter:(t,n)=>{ke(_y(t),r=>{if(ut(e,r))if(N(n)){const o=e[r],i=ot(o.callbacks,s=>s!==n);i.length>0?o.callbacks=i:delete e[r]}else delete e[r]})}}},by=(e,t,n)=>{t.addNodeFilter("br",(r,o,i)=>{const s=Ie.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),c=n.getWhitespaceElements();s.body=1;const d=f=>f.name in s||Eu(n,f);for(let f=0,p=r.length;f<p;f++){let _=r[f],w=_.parent;if(w&&d(w)&&_===w.lastChild){let y=_.prev;for(;y;){const S=y.name;if("span"!==S||"bookmark"!==y.attr("data-mce-type")){"br"===S&&(_=null);break}y=y.prev}if(_&&(_.remove(),kl(n,a,c,w))){const S=n.getElementRule(w.name);S&&(S.removeEmpty?w.remove():S.paddEmpty&&af(e,i,d,w))}}else{let y=_;for(;w&&w.firstChild===y&&w.lastChild===y&&(y=w,!s[w.name]);)w=w.parent;if(y===w){const S=new br("#text",3);S.value=zn,_.replace(S)}}}})},Ef=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const i=";base64"===o[2],s=i?(a=>{const c=/([a-z0-9+\/=\s]+)/i.exec(a);return c?c[1]:""})(r):decodeURIComponent(r);return O.some({type:o[1],data:s,base64Encoded:i})}return O.none()},wy=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch{return O.none()}const o=new Uint8Array(r.length);for(let i=0;i<o.length;i++)o[i]=r.charCodeAt(i);return O.some(new Blob([o],{type:e}))},xy=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(e)});let MT=0;const Cy=(e,t,n)=>Ef(e).bind(({data:r,type:o,base64Encoded:i})=>{if(t&&!i)return O.none();{const s=i?r:btoa(r);return n(s,o)}}),ky=(e,t,n)=>{const r=e.create("blobid"+MT++,t,n);return e.add(r),r},Sy=(e,t,n=!1)=>Cy(t,n,(r,o)=>O.from(e.getByData(r,o)).orThunk(()=>wy(o,r).map(i=>ky(e,i,r))));function xs(e){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Tf(e,t){return(Tf=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function Nf(e,t,n){return(Nf=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,i){var s=[null];s.push.apply(s,o);var a=new(Function.bind.apply(r,s));return i&&Tf(a,i.prototype),a}).apply(null,arguments)}function Eo(e){return function(t){if(Array.isArray(t))return Af(t)}(e)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,n){if(t){if("string"==typeof t)return Af(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Af(t,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zT=Object.hasOwnProperty,Ey=Object.setPrototypeOf,FT=Object.isFrozen,$T=Object.getPrototypeOf,HT=Object.getOwnPropertyDescriptor,Nr=Object.freeze,Uo=Object.seal,qT=Object.create,Ty=typeof Reflect<"u"&&Reflect,sd=Ty.apply,Of=Ty.construct;sd||(sd=function(e,t,n){return e.apply(t,n)}),Nr||(Nr=function(e){return e}),Uo||(Uo=function(e){return e}),Of||(Of=function(e,t){return Nf(e,Eo(t))});var Ny,UT=To(Array.prototype.forEach),WT=To(Array.prototype.pop),Tl=To(Array.prototype.push),ad=To(String.prototype.toLowerCase),VT=To(String.prototype.match),Fi=To(String.prototype.replace),KT=To(String.prototype.indexOf),XT=To(String.prototype.trim),Ar=To(RegExp.prototype.test),Rf=(Ny=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Of(Ny,t)});function To(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return sd(e,t,r)}}function Ut(e,t){Ey&&Ey(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var o=ad(r);o!==r&&(FT(t)||(t[n]=o),r=o)}e[r]=!0}return e}function Cs(e){var t,n=qT(null);for(t in e)sd(zT,e,[t])&&(n[t]=e[t]);return n}function ld(e,t){for(;null!==e;){var n=HT(e,t);if(n){if(n.get)return To(n.get);if("function"==typeof n.value)return To(n.value)}e=$T(e)}return function(r){return console.warn("fallback value for",r),null}}var Ay=Nr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jf=Nr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Df=Nr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),YT=Nr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Pf=Nr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),GT=Nr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oy=Nr(["#text"]),Ry=Nr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Bf=Nr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jy=Nr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=Nr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),JT=Uo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),QT=Uo(/<%[\w\W]*|[\w\W]*%>/gm),ZT=Uo(/^data-[\-\w.\u00B7-\uFFFF]/),eN=Uo(/^aria-[\-\w]+$/),tN=Uo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nN=Uo(/^(?:\w+script|data):/i),rN=Uo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),oN=Uo(/^html$/i),iN=function(){return typeof window>"u"?null:window},sN=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iN(),n=function(pe){return e(pe)};if(n.version="2.3.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,o=t.document,i=t.DocumentFragment,s=t.HTMLTemplateElement,a=t.Node,c=t.Element,d=t.NodeFilter,f=t.NamedNodeMap,p=void 0===f?t.NamedNodeMap||t.MozNamedAttrMap:f,_=t.HTMLFormElement,w=t.DOMParser,y=t.trustedTypes,S=c.prototype,b=ld(S,"cloneNode"),T=ld(S,"nextSibling"),j=ld(S,"childNodes"),D=ld(S,"parentNode");if("function"==typeof s){var F=o.createElement("template");F.content&&F.content.ownerDocument&&(o=F.content.ownerDocument)}var z=function(pe,wt){if("object"!==xs(pe)||"function"!=typeof pe.createPolicy)return null;var at=null,Jt="data-tt-policy-suffix";wt.currentScript&&wt.currentScript.hasAttribute(Jt)&&(at=wt.currentScript.getAttribute(Jt));var Rn="dompurify"+(at?"#"+at:"");try{return pe.createPolicy(Rn,{createHTML:function(lr){return lr}})}catch{return console.warn("TrustedTypes policy "+Rn+" could not be created."),null}}(y,r),Y=z?z.createHTML(""):"",re=o,ie=re.implementation,ce=re.createNodeIterator,me=re.createDocumentFragment,Q=re.getElementsByTagName,ee=r.importNode,he={};try{he=Cs(o).documentMode?o.documentMode:{}}catch{}var we={};n.isSupported="function"==typeof D&&ie&&void 0!==ie.createHTMLDocument&&9!==he;var Ve,Be,rt=JT,Je=QT,gt=ZT,vt=eN,Xe=nN,dt=rN,yt=tN,te=null,se=Ut({},[].concat(Eo(Ay),Eo(jf),Eo(Df),Eo(Pf),Eo(Oy))),be=null,Ne=Ut({},[].concat(Eo(Ry),Eo(Bf),Eo(jy),Eo(cd))),de=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),De=null,ze=null,He=!0,Ue=!0,Fe=!1,ht=!1,zt=!1,ur=!1,On=!1,pn=!1,hr=!1,Jr=!1,Vn=!0,ui=!0,Ln=!1,Oo={},Yo=null,qi=Ut({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ca=null,nu=Ut({},["audio","video","img","source","image","track"]),hi=null,fi=Ut({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ka="http://www.w3.org/1998/Math/MathML",Lr="http://www.w3.org/2000/svg",Qr="http://www.w3.org/1999/xhtml",Go=Qr,Yl=!1,UR=["application/xhtml+xml","text/html"],Sa=null,WR=o.createElement("form"),$C=function(pe){return pe instanceof RegExp||pe instanceof Function},cg=function(pe){Sa&&Sa===pe||(pe&&"object"===xs(pe)||(pe={}),pe=Cs(pe),te="ALLOWED_TAGS"in pe?Ut({},pe.ALLOWED_TAGS):se,be="ALLOWED_ATTR"in pe?Ut({},pe.ALLOWED_ATTR):Ne,hi="ADD_URI_SAFE_ATTR"in pe?Ut(Cs(fi),pe.ADD_URI_SAFE_ATTR):fi,Ca="ADD_DATA_URI_TAGS"in pe?Ut(Cs(nu),pe.ADD_DATA_URI_TAGS):nu,Yo="FORBID_CONTENTS"in pe?Ut({},pe.FORBID_CONTENTS):qi,De="FORBID_TAGS"in pe?Ut({},pe.FORBID_TAGS):{},ze="FORBID_ATTR"in pe?Ut({},pe.FORBID_ATTR):{},Oo="USE_PROFILES"in pe&&pe.USE_PROFILES,He=!1!==pe.ALLOW_ARIA_ATTR,Ue=!1!==pe.ALLOW_DATA_ATTR,Fe=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,ht=pe.SAFE_FOR_TEMPLATES||!1,zt=pe.WHOLE_DOCUMENT||!1,pn=pe.RETURN_DOM||!1,hr=pe.RETURN_DOM_FRAGMENT||!1,Jr=pe.RETURN_TRUSTED_TYPE||!1,On=pe.FORCE_BODY||!1,Vn=!1!==pe.SANITIZE_DOM,ui=!1!==pe.KEEP_CONTENT,Ln=pe.IN_PLACE||!1,yt=pe.ALLOWED_URI_REGEXP||yt,Go=pe.NAMESPACE||Qr,pe.CUSTOM_ELEMENT_HANDLING&&$C(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&$C(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(de.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ve=Ve=-1===UR.indexOf(pe.PARSER_MEDIA_TYPE)?"text/html":pe.PARSER_MEDIA_TYPE,Be="application/xhtml+xml"===Ve?function(wt){return wt}:ad,ht&&(Ue=!1),hr&&(pn=!0),Oo&&(te=Ut({},Eo(Oy)),be=[],!0===Oo.html&&(Ut(te,Ay),Ut(be,Ry)),!0===Oo.svg&&(Ut(te,jf),Ut(be,Bf),Ut(be,cd)),!0===Oo.svgFilters&&(Ut(te,Df),Ut(be,Bf),Ut(be,cd)),!0===Oo.mathMl&&(Ut(te,Pf),Ut(be,jy),Ut(be,cd))),pe.ADD_TAGS&&(te===se&&(te=Cs(te)),Ut(te,pe.ADD_TAGS)),pe.ADD_ATTR&&(be===Ne&&(be=Cs(be)),Ut(be,pe.ADD_ATTR)),pe.ADD_URI_SAFE_ATTR&&Ut(hi,pe.ADD_URI_SAFE_ATTR),pe.FORBID_CONTENTS&&(Yo===qi&&(Yo=Cs(Yo)),Ut(Yo,pe.FORBID_CONTENTS)),ui&&(te["#text"]=!0),zt&&Ut(te,["html","head","body"]),te.table&&(Ut(te,["tbody"]),delete De.tbody),Nr&&Nr(pe),Sa=pe)},HC=Ut({},["mi","mo","mn","ms","mtext"]),qC=Ut({},["foreignobject","desc","title","annotation-xml"]),VR=Ut({},["title","style","font","a","script"]),ru=Ut({},jf);Ut(ru,Df),Ut(ru,YT);var dg=Ut({},Pf);Ut(dg,GT);var pi=function(pe){Tl(n.removed,{element:pe});try{pe.parentNode.removeChild(pe)}catch{try{pe.outerHTML=Y}catch{pe.remove()}}},ou=function(pe,wt){try{Tl(n.removed,{attribute:wt.getAttributeNode(pe),from:wt})}catch{Tl(n.removed,{attribute:null,from:wt})}if(wt.removeAttribute(pe),"is"===pe&&!be[pe])if(pn||hr)try{pi(wt)}catch{}else try{wt.setAttribute(pe,"")}catch{}},UC=function(pe){var wt,at;if(On)pe="<remove></remove>"+pe;else{var Jt=VT(pe,/^[\r\n\t ]+/);at=Jt&&Jt[0]}"application/xhtml+xml"===Ve&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");var Rn=z?z.createHTML(pe):pe;if(Go===Qr)try{wt=(new w).parseFromString(Rn,Ve)}catch{}if(!wt||!wt.documentElement){wt=ie.createDocument(Go,"template",null);try{wt.documentElement.innerHTML=Yl?"":Rn}catch{}}var lr=wt.body||wt.documentElement;return pe&&at&&lr.insertBefore(o.createTextNode(at),lr.childNodes[0]||null),Go===Qr?Q.call(wt,zt?"html":"body")[0]:zt?wt.documentElement:lr},WC=function(pe){return ce.call(pe.ownerDocument||pe,pe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Gl=function(pe){return"object"===xs(a)?pe instanceof a:pe&&"object"===xs(pe)&&"number"==typeof pe.nodeType&&"string"==typeof pe.nodeName},gi=function(pe,wt,at){we[pe]&&UT(we[pe],function(Jt){Jt.call(n,wt,at,Sa)})},VC=function(pe){var wt,at;if(gi("beforeSanitizeElements",pe,null),(at=pe)instanceof _&&("string"!=typeof at.nodeName||"string"!=typeof at.textContent||"function"!=typeof at.removeChild||!(at.attributes instanceof p)||"function"!=typeof at.removeAttribute||"function"!=typeof at.setAttribute||"string"!=typeof at.namespaceURI||"function"!=typeof at.insertBefore)||Ar(/[\u0080-\uFFFF]/,pe.nodeName))return pi(pe),!0;var Jt=Be(pe.nodeName);if(gi("uponSanitizeElement",pe,{tagName:Jt,allowedTags:te}),pe.hasChildNodes()&&!Gl(pe.firstElementChild)&&(!Gl(pe.content)||!Gl(pe.content.firstElementChild))&&Ar(/<[/\w]/g,pe.innerHTML)&&Ar(/<[/\w]/g,pe.textContent)||"select"===Jt&&Ar(/<template/i,pe.innerHTML))return pi(pe),!0;if(!te[Jt]||De[Jt]){if(!De[Jt]&&XC(Jt)&&(de.tagNameCheck instanceof RegExp&&Ar(de.tagNameCheck,Jt)||de.tagNameCheck instanceof Function&&de.tagNameCheck(Jt)))return!1;if(ui&&!Yo[Jt]){var Rn=D(pe)||pe.parentNode,lr=j(pe)||pe.childNodes;if(lr&&Rn)for(var Hn=lr.length-1;Hn>=0;--Hn)Rn.insertBefore(b(lr[Hn],!0),T(pe))}return pi(pe),!0}return pe instanceof c&&!function(Ro){var qn=D(Ro);qn&&qn.tagName||(qn={namespaceURI:Qr,tagName:"template"});var Un=ad(Ro.tagName),Rs=ad(qn.tagName);return Ro.namespaceURI===Lr?qn.namespaceURI===Qr?"svg"===Un:qn.namespaceURI===ka?"svg"===Un&&("annotation-xml"===Rs||HC[Rs]):Boolean(ru[Un]):Ro.namespaceURI===ka?qn.namespaceURI===Qr?"math"===Un:qn.namespaceURI===Lr?"math"===Un&&qC[Rs]:Boolean(dg[Un]):Ro.namespaceURI===Qr&&!(qn.namespaceURI===Lr&&!qC[Rs])&&!(qn.namespaceURI===ka&&!HC[Rs])&&!dg[Un]&&(VR[Un]||!ru[Un])}(pe)?(pi(pe),!0):"noscript"!==Jt&&"noembed"!==Jt||!Ar(/<\/no(script|embed)/i,pe.innerHTML)?(ht&&3===pe.nodeType&&(wt=Fi(wt=pe.textContent,rt," "),wt=Fi(wt,Je," "),pe.textContent!==wt&&(Tl(n.removed,{element:pe.cloneNode()}),pe.textContent=wt)),gi("afterSanitizeElements",pe,null),!1):(pi(pe),!0)},KC=function(pe,wt,at){if(Vn&&("id"===wt||"name"===wt)&&(at in o||at in WR))return!1;if((!Ue||ze[wt]||!Ar(gt,wt))&&(!He||!Ar(vt,wt)))if(!be[wt]||ze[wt]){if(!(XC(pe)&&(de.tagNameCheck instanceof RegExp&&Ar(de.tagNameCheck,pe)||de.tagNameCheck instanceof Function&&de.tagNameCheck(pe))&&(de.attributeNameCheck instanceof RegExp&&Ar(de.attributeNameCheck,wt)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(wt))||"is"===wt&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&Ar(de.tagNameCheck,at)||de.tagNameCheck instanceof Function&&de.tagNameCheck(at))))return!1}else if(!hi[wt]&&!Ar(yt,Fi(at,dt,""))&&("src"!==wt&&"xlink:href"!==wt&&"href"!==wt||"script"===pe||0!==KT(at,"data:")||!Ca[pe])&&(!Fe||Ar(Xe,Fi(at,dt,"")))&&at)return!1;return!0},XC=function(pe){return pe.indexOf("-")>0},YC=function(pe){var wt,at,Jt,Rn;gi("beforeSanitizeAttributes",pe,null);var lr=pe.attributes;if(lr){var Hn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(Rn=lr.length;Rn--;){var Ro=wt=lr[Rn],qn=Ro.name,Un=Ro.namespaceURI;at="value"===qn?wt.value:XT(wt.value),Jt=Be(qn);var Rs=at;if(Hn.attrName=Jt,Hn.attrValue=at,Hn.keepAttr=!0,Hn.forceKeepAttr=void 0,gi("uponSanitizeAttribute",pe,Hn),at=Hn.attrValue,!Hn.forceKeepAttr)if(Hn.keepAttr)if(Ar(/\/>/i,at))ou(qn,pe);else{ht&&(at=Fi(at,rt," "),at=Fi(at,Je," "));var XR=Be(pe.nodeName);if(KC(XR,Jt,at)){if(at!==Rs)try{Un?pe.setAttributeNS(Un,qn,at):pe.setAttribute(qn,at)}catch{ou(qn,pe)}}else ou(qn,pe)}else ou(qn,pe)}gi("afterSanitizeAttributes",pe,null)}},KR=function pe(wt){var at,Jt=WC(wt);for(gi("beforeSanitizeShadowDOM",wt,null);at=Jt.nextNode();)gi("uponSanitizeShadowNode",at,null),VC(at)||(at.content instanceof i&&pe(at.content),YC(at));gi("afterSanitizeShadowDOM",wt,null)};return n.sanitize=function(pe,wt){var at,Jt,Rn,lr,Hn;if((Yl=!pe)&&(pe="\x3c!--\x3e"),"string"!=typeof pe&&!Gl(pe)){if("function"!=typeof pe.toString)throw Rf("toString is not a function");if("string"!=typeof(pe=pe.toString()))throw Rf("dirty is not a string, aborting")}if(!n.isSupported){if("object"===xs(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof pe)return t.toStaticHTML(pe);if(Gl(pe))return t.toStaticHTML(pe.outerHTML)}return pe}if(ur||cg(wt),n.removed=[],"string"==typeof pe&&(Ln=!1),Ln){if(pe.nodeName){var Ro=Be(pe.nodeName);if(!te[Ro]||De[Ro])throw Rf("root node is forbidden and cannot be sanitized in-place")}}else if(pe instanceof a)1===(Jt=(at=UC("\x3c!----\x3e")).ownerDocument.importNode(pe,!0)).nodeType&&"BODY"===Jt.nodeName||"HTML"===Jt.nodeName?at=Jt:at.appendChild(Jt);else{if(!pn&&!ht&&!zt&&-1===pe.indexOf("<"))return z&&Jr?z.createHTML(pe):pe;if(!(at=UC(pe)))return pn?null:Jr?Y:""}at&&On&&pi(at.firstChild);for(var qn=WC(Ln?pe:at);Rn=qn.nextNode();)3===Rn.nodeType&&Rn===lr||VC(Rn)||(Rn.content instanceof i&&KR(Rn.content),YC(Rn),lr=Rn);if(lr=null,Ln)return pe;if(pn){if(hr)for(Hn=me.call(at.ownerDocument);at.firstChild;)Hn.appendChild(at.firstChild);else Hn=at;return be.shadowroot&&(Hn=ee.call(r,Hn,!0)),Hn}var Un=zt?at.outerHTML:at.innerHTML;return zt&&te["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&Ar(oN,at.ownerDocument.doctype.name)&&(Un="<!DOCTYPE "+at.ownerDocument.doctype.name+">\n"+Un),ht&&(Un=Fi(Un,rt," "),Un=Fi(Un,Je," ")),z&&Jr?z.createHTML(Un):Un},n.setConfig=function(pe){cg(pe),ur=!0},n.clearConfig=function(){Sa=null,ur=!1},n.isValidAttribute=function(pe,wt,at){Sa||cg({});var Jt=Be(pe),Rn=Be(wt);return KC(Jt,Rn,at)},n.addHook=function(pe,wt){"function"==typeof wt&&(we[pe]=we[pe]||[],Tl(we[pe],wt))},n.removeHook=function(pe){if(we[pe])return WT(we[pe])},n.removeHooks=function(pe){we[pe]&&(we[pe]=[])},n.removeAllHooks=function(){we={}},n}();const Dy=Ie.each,aN=Ie.trim,lN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],cN={ftp:21,http:80,https:443,mailto:25},dN=["img","video"],Py=(e,t,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?(i=n,(N(o=e.allow_svg_data_urls)?!o:!N(i)||!Oe(dN,i))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,i};class No{static parseDataUri(t){let n;const r=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(t,n,r={}){if(r.allow_script_urls)return!0;{const o=Ni.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!Py(r,o,n)}}static getDocumentBaseUrl(t){var n;let r;return r=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(t,n={}){this.path="",this.directory="",t=aN(t),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);const i=0===t.indexOf("//");if(0!==t.indexOf("/")||i||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=r?r.path:new No(document.location.href).directory;if(""===r?.protocol)t="//mce_host"+o.toAbsPath(a,t);else{const c=/([^#?]*)([#?]?.*)/.exec(t);c&&(t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(a,c[1])+c[2])}}t=t.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);s&&Dy(lN,(a,c)=>{let d=s[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),o[a]=d}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),i&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new No(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let i=this.toRelPath(this.path,n.path);return n.query&&(i+="?"+n.query),n.anchor&&(i+="#"+n.anchor),i}toAbsolute(t,n){const r=new No(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?cN[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,o,i=0,s="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),c=n.split("/");if(a.length>=c.length)for(r=0,o=a.length;r<o;r++)if(r>=c.length||a[r]!==c[r]){i=r+1;break}if(a.length<c.length)for(r=0,o=c.length;r<o;r++)if(r>=a.length||a[r]!==c[r]){i=r+1;break}if(1===i)return n;for(r=0,o=a.length-(i-1);r<o;r++)s+="../";for(r=i-1,o=c.length;r<o;r++)s+=r!==i-1?"/"+c[r]:c[r];return s}toAbsPath(t,n){let r=0;const o=/\/$/.test(n)?"/":"",i=t.split("/"),s=n.split("/"),a=[];Dy(i,p=>{p&&a.push(p)});const c=[];for(let p=s.length-1;p>=0;p--)0!==s[p].length&&"."!==s[p]&&(".."!==s[p]?r>0?r--:c.push(s[p]):r++);const d=a.length-r;let f;return f=d<=0?Pt(c).join("/"):a.slice(0,d).join("/")+"/"+Pt(c).join("/"),0!==f.indexOf("/")&&(f="/"+f),o&&f.lastIndexOf("/")!==f.length-1&&(f+=o),f}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const uN=Ie.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Lf="data-mce-type";let By=0;const Ly=(e,t,n,r)=>{var o,i,s,a;const c=t.validate,d=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);const f=null!==(i=r?.tagName)&&void 0!==i?i:e.nodeName.toLowerCase();if(1!==e.nodeType||"body"===f)return;const p=X(e),_=zs(p,Lf),w=Cr(p,"data-mce-bogus");if(!_&&W(w))return void("all"===w?_t(p):St(p));const y=n.getElementRule(f);if(!c||y){if(N(r)&&(r.allowedTags[f]=!0),c&&y&&!_){if(ke(null!==(s=y.attributesForced)&&void 0!==s?s:[],S=>{En(p,S.name,"{$uid}"===S.value?"mce_"+By++:S.value)}),ke(null!==(a=y.attributesDefault)&&void 0!==a?a:[],S=>{zs(p,S.name)||En(p,S.name,"{$uid}"===S.value?"mce_"+By++:S.value)}),y.attributesRequired&&!Ht(y.attributesRequired,S=>zs(p,S))||y.removeEmptyAttrs&&(S=>{const b=S.dom.attributes;return null==b||0===b.length})(p))return void St(p);y.outputName&&y.outputName!==f&&((S,b)=>{const T=((D,F)=>{const z=je(F),Y=v(D);return so(z,Y),z})(S,b);it(S,T);const j=Qt(S);Ot(T,j),_t(S)})(p,y.outputName)}}else ut(d,f)?_t(p):St(p)},My=(e,t,n,r,o)=>!(r in uN&&Py(e,o,n))&&(!e.validate||t.isValid(n,r)||Dn(r,"data-")||Dn(r,"aria-")),Iy=(e,t)=>e.hasAttribute(Lf)&&("id"===t||"class"===t||"style"===t),zy=(e,t)=>e in t.getBoolAttrs(),hN=(e,t,n)=>{const{attributes:r}=e;for(let o=r.length-1;o>=0;o--){const i=r[o],s=i.name,a=i.value;My(t,n,e.tagName.toLowerCase(),s,a)||Iy(e,s)?zy(s,n)&&e.setAttribute(s,s):e.removeAttribute(s)}},Fy=Ie.makeMap,$y=Ie.extend,Hy=(e,t,n)=>{const r=e.name,o=r in n&&"title"!==r&&"textarea"!==r,i=t.childNodes;for(let s=0,a=i.length;s<a;s++){const c=i[s],d=new br(c.nodeName.toLowerCase(),c.nodeType);if(Ye(c)){const f=c.attributes;for(let p=0,_=f.length;p<_;p++){const w=f[p];d.attr(w.name,w.value)}}else Me(c)?(d.value=c.data,o&&(d.raw=!0)):(Ci(c)||GC(c)||JC(c))&&(d.value=c.data);Hy(d,c,n),e.append(d)}},ca=(e={},t=Ai())=>{const n=yy(),r=yy(),o={validate:!0,root_name:"body",sanitize:!0,...e},i=new DOMParser,s=((S,b)=>{if(S.sanitize){const T=((e,t)=>{const n=sN();return n.addHook("uponSanitizeElement",(r,o)=>{Ly(r,e,t,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const i=r.tagName.toLowerCase(),{attrName:s,attrValue:a}=o;o.keepAttr=My(e,t,i,s,a),o.keepAttr?(o.allowedAttributes[s]=!0,zy(s,t)&&(o.attrValue=s),e.allow_svg_data_urls&&Dn(a,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Iy(r,s)&&(o.forceKeepAttr=!0)}),n})(S,b);return(j,D)=>{T.sanitize(j,((F,z)=>{const Y={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return Y.PARSER_MEDIA_TYPE=z,F.allow_script_urls?Y.ALLOWED_URI_REGEXP=/.*/:F.allow_html_data_urls&&(Y.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),Y})(S,D)),T.removed=[]}}return(T,j)=>{const D=document.createNodeIterator(T,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let F;for(;F=D.nextNode();)Ly(F,S,b),Ye(F)&&hN(F,S,b)}})(o,t),c=n.getFilters,p=r.getFilters,w=(S,b)=>{const T=W(b.attr(Lf)),j=1===b.type&&!ut(S,b.name)&&!Eu(t,b);return 3===b.type||j&&!T},y={schema:t,addAttributeFilter:r.addFilter,getAttributeFilters:p,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:c,removeNodeFilter:n.removeFilter,parse:(S,b={})=>{var T;const j=o.validate,D=null!==(T=b.context)&&void 0!==T?T:o.root_name,F=((he,we,Ve="html")=>{const Be="xhtml"===Ve?"application/xhtml+xml":"text/html",rt=ut(t.getSpecialElements(),we.toLowerCase()),Je=rt?`<${we}>${he}</${we}>`:he,vt=i.parseFromString("xhtml"===Ve?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Je}</body></html>`:`<body>${Je}</body>`,Be).body;return s(vt,Be),rt?vt.firstChild:vt})(S,D,b.format);xu(t,F);const z=new br(D,11);Hy(z,F,t.getSpecialElements()),F.innerHTML="";const[Y,re]=((he,we,Ve,Be)=>{const rt=Ve.validate,Je=we.getNonEmptyElements(),gt=we.getWhitespaceElements(),vt=$y(Fy("script,style,head,html,body,title,meta,param"),we.getBlockElements()),Xe=Hg(we),dt=/[ \t\r\n]+/g,yt=/^[ \t\r\n]+/,te=/[ \t\r\n]+$/,se=de=>{let De=de.parent;for(;N(De);){if(De.name in gt)return!0;De=De.parent}return!1},be=de=>de.name in vt||Eu(we,de),Ne=(de,De)=>!N(De?de.prev:de.next)&&!C(de.parent)&&be(de.parent)&&(de.parent!==he||!0===Be.isRootContent);return[de=>{var De,He,Ue;if(3===de.type&&!se(de)){let ze=null!==(De=de.value)&&void 0!==De?De:"";ze=ze.replace(dt," "),Ue=be,(N(He=de.prev)&&(Ue(He)||"br"===He.name)||Ne(de,!0))&&(ze=ze.replace(yt,"")),0===ze.length?de.remove():de.value=ze}},de=>{var De,Ue,Fe;if(1===de.type){const ze=we.getElementRule(de.name);if(rt&&ze){const He=kl(we,Je,gt,de);ze.paddInEmptyBlock&&He&&(Ue=>{let Fe=Ue;for(;N(Fe);){if(Fe.name in Xe)return kl(we,Je,gt,Fe);Fe=Fe.parent}return!1})(de)?af(Ve,Be,be,de):ze.removeEmpty&&He?be(de)?de.remove():de.unwrap():ze.paddEmpty&&(He||N0(Ue=de,"#text")&&(null===(Fe=Ue?.firstChild)||void 0===Fe?void 0:Fe.value)===zn)&&af(Ve,Be,be,de)}}else if(3===de.type&&!se(de)){let ze=null!==(De=de.value)&&void 0!==De?De:"";(de.next&&be(de.next)||Ne(de,!1))&&(ze=ze.replace(te,"")),0===ze.length?de.remove():de.value=ze}}]})(z,t,o,b),ie=[],me={nodes:{},attributes:{}},Q=he=>S0(c(),p(),he,me);if(((he,we,Ve)=>{const Be=[];for(let rt=he,Je=rt;rt;Je=rt,rt=rt.walk()){const gt=rt;ke(we,vt=>vt(gt)),C(gt.parent)&&gt!==he?rt=Je:Be.push(gt)}for(let rt=Be.length-1;rt>=0;rt--){const Je=Be[rt];ke(Ve,gt=>gt(Je))}})(z,[Y,Q],[re,j?he=>{return Ve=ie,void(A0(t,we=he)&&Ve.push(we));var we,Ve}:I]),ie.reverse(),j&&ie.length>0)if(b.context){const{pass:he,fail:we}=er(ie,Ve=>Ve.parent===z);cf(we,t,z,Q),b.invalid=he.length>0}else cf(ie,t,z,Q);const ee=((he,we)=>{var Ve;const Be=null!==(Ve=we.forced_root_block)&&void 0!==Ve?Ve:he.forced_root_block;return!1===Be?"":!0===Be?"p":Be})(o,b);return ee&&("body"===z.name||b.isRootContent)&&((he,we)=>{const Ve=$y(Fy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),Be=/^[ \t\r\n]+/,rt=/[ \t\r\n]+$/;let Je=he.firstChild,gt=null;const vt=Xe=>{var dt,yt;Xe&&(Je=Xe.firstChild,Je&&3===Je.type&&(Je.value=null===(dt=Je.value)||void 0===dt?void 0:dt.replace(Be,"")),Je=Xe.lastChild,Je&&3===Je.type&&(Je.value=null===(yt=Je.value)||void 0===yt?void 0:yt.replace(rt,"")))};if(t.isValidChild(he.name,we.toLowerCase())){for(;Je;){const Xe=Je.next;w(Ve,Je)?(gt||(gt=new br(we,1),gt.attr(o.forced_root_block_attrs),he.insert(gt,Je)),gt.append(Je)):(vt(gt),gt=null),Je=Xe}vt(gt)}})(z,ee),b.invalid||E0(me,b),z}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&by(t,e,n),e.addAttributeFilter("href",o=>{let i=o.length;const s=a=>{const c=a?Ie.trim(a):"";return/\b(noopener)\b/g.test(c)?c:c.split(" ").filter(f=>f.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;i--;){const a=o[i];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",s(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let i,s,a,c,d=o.length;for(;d--;)if(c=o[d],"a"===c.name&&c.firstChild&&!c.attr("href"))for(a=c.parent,i=c.lastChild;i&&a;)s=i.prev,a.insert(i,c),i=s}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let i,s,a=o.length;for(;a--;)if(i=o[a],s=i.parent,s&&("ul"===s.name||"ol"===s.name))if(i.prev&&"li"===i.prev.name)i.prev.append(i);else{const c=new br("li",1);c.attr("style","list-style-type: none"),i.wrap(c)}});const r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",o=>{var i;let s=o.length;for(;s--;){const a=o[s],c=null!==(i=a.attr("class"))&&void 0!==i?i:"",d=Ie.explode(c," ");let f="";for(let p=0;p<d.length;p++){const _=d[p];let w=!1,y=r["*"];y&&y[_]&&(w=!0),y=r[a.name],!w&&y&&y[_]&&(w=!0),w&&(f&&(f+=" "),f+=_)}f.length||(f=null),a.attr("class",f)}}),((o,i)=>{const{blob_cache:s}=i;if(s){const a=c=>{const d=c.attr("src");var f;(f=c).attr("src")===Bt.transparentSrc||N(f.attr("data-mce-placeholder"))||(f=>N(f.attr("data-mce-bogus")))(c)||C(d)||Sy(s,d,!0).each(f=>{c.attr("src",f.blobUri())})};o.addAttributeFilter("src",c=>ke(c,a))}})(e,t)})(y,o),(b=o).inline_styles&&((e,t,n)=>{var r;const o=ju();var i,s,a;t.convert_fonts_to_spans&&(i=e,s=o,a=Ie.explode(null!==(r=t.font_size_legacy_values)&&void 0!==r?r:""),i.addNodeFilter("font",c=>{ke(c,d=>{const f=s.parse(d.attr("style")),p=d.attr("color"),_=d.attr("face"),w=d.attr("size");var y;p&&(f.color=p),_&&(f["font-family"]=_),w&&Vi(w).each(y=>{f["font-size"]=a[y-1]}),d.name="span",d.attr("style",s.serialize(f)),y=d,ke(["color","face","size"],b=>{y.attr(b,null)})})})),((i,s,a)=>{i.addNodeFilter("strike",c=>{const d="html4"!==s.type;ke(c,f=>{if(d)f.name="s";else{const p=a.parse(f.attr("style"));p["text-decoration"]="line-through",f.name="span",f.attr("style",a.serialize(p))}})})})(e,n,o)})(y,b,t),y;var b},qy=(e,t,n)=>{const r=nd(i=e)?Bi({validate:!1}).serialize(i):i,o=t(r);var i;if(o.isDefaultPrevented())return o;if(nd(e)){if(o.content!==r){const i=ca({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:e.name});return{...o,content:i}}return{...o,content:e}}return o},Uy=(e,t)=>{if(t.no_events)return _r.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?_r.error(Xv(e,{content:"",...n}).content):_r.value(n)}},Wy=(e,t,n)=>n.no_events?t:qy(t,o=>Xv(e,{...n,content:o}),Qu(e)).content,Mf=(e,t)=>{if(t.no_events)return _r.value(t);{const n=qy(t.content,r=>{return o=e,i={...t,content:r},o.dispatch("BeforeSetContent",i);var o,i},Qu(e));return n.isDefaultPrevented()?(Kv(e,n),_r.error(void 0)):_r.value(n)}},If=(e,t,n)=>{n.no_events||Kv(e,{...n,content:t})},zf=(e,t,n)=>({element:e,width:t,rows:n}),Vy=(e,t)=>({element:e,cells:t}),pN=(e,t)=>({x:e,y:t}),Ky=(e,t)=>vo(e,t).bind(Vi).getOr(1),gN=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},Xy=e=>et(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Yy=(e,t)=>{const n=e.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let i=0;i<o.length;i++)if(Dt(o[i],t))return O.some(pN(i,r))}return O.none()},Gy=(e,t,n,r,o)=>{const i=[],s=e.rows;for(let a=n;a<=o;a++){const c=s[a].cells,d=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(Vy(s[a].element,d))}return i},mN=e=>((t,n)=>{const r=ss(t.element),o=je("tbody");return Ot(o,n),Qe(r,o),r})(e,pt(e.rows,n=>{const r=pt(n.cells,i=>{const s=tm(i);return h(s,"colspan"),h(s,"rowspan"),s}),o=ss(n.element);return Ot(o,r),o})),Jy=()=>kh([]),dd=(e,t)=>t>=0&&t<e.length&&na(e.charAt(t)),Qy=e=>ii(e.innerText),Zy=e=>Ye(e)?e.outerHTML:Me(e)?Ni.encodeRaw(e.data,!1):Ci(e)?"\x3c!--"+e.data+"--\x3e":"",wN=Jo(()=>document.implementation.createHTMLDocument("undo")),ud=e=>{const t=(n=e.getBody(),ot(pt(vn(n.childNodes),Zy),i=>i.length>0));var n;const r=We(t,i=>{const s=R_(e.serializer,i);return s.length>0?[s]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(i=>({type:"complete",fragments:null,content:i,bookmark:null,beforeBookmark:null}))(o)},Ff=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,r)=>{let o=0;ke(n,i=>{var s,a;0===i[0]?o++:1===i[0]?(((s,a,c)=>{const d=(f=>{let p;const _=document.createElement("div"),w=document.createDocumentFragment();for(f&&(_.innerHTML=f);p=_.firstChild;)w.appendChild(p);return w})(a);s.hasChildNodes()&&c<s.childNodes.length?s.insertBefore(d,s.childNodes[c]):s.appendChild(d)})(r,i[1],o),o++):2===i[0]&&(a=o,(s=r).hasChildNodes()&&a<s.childNodes.length&&s.removeChild(s.childNodes[a]))})})(((n,r)=>{const o=n.length+r.length+2,i=new Array(o),s=new Array(o),a=(p,_,w,y,S)=>{const b=d(p,_,w,y);if(null===b||b.start===_&&b.diag===_-y||b.end===p&&b.diag===p-w){let T=p,j=w;for(;T<_||j<y;)T<_&&j<y&&n[T]===r[j]?(S.push([0,n[T]]),++T,++j):_-p>y-w?(S.push([2,n[T]]),++T):(S.push([1,r[j]]),++j)}else{a(p,b.start,w,b.start-b.diag,S);for(let T=b.start;T<b.end;++T)S.push([0,n[T]]);a(b.end,_,b.end-b.diag,y,S)}},c=(p,_,w,y)=>{let S=p;for(;S-_<y&&S<w&&n[S]===r[S-_];)++S;return{start:p,end:S,diag:_}},d=(p,_,w,y)=>{const S=_-p,b=y-w;if(0===S||0===b)return null;const T=S-b,j=b+S,D=(j%2==0?j:j+1)/2;let F,z,Y,re,ie;for(i[1+D]=p,s[1+D]=_+1,F=0;F<=D;++F){for(z=-F;z<=F;z+=2){for(Y=z+D,i[Y]=z===-F||z!==F&&i[Y-1]<i[Y+1]?i[Y+1]:i[Y-1]+1,re=i[Y],ie=re-p+w-z;re<_&&ie<y&&n[re]===r[ie];)i[Y]=++re,++ie;if(T%2!=0&&T-F<=z&&z<=T+F&&s[Y-T]<=i[Y])return c(s[Y-T],z+p-w,_,y)}for(z=T-F;z<=T+F;z+=2){for(Y=z+D-T,s[Y]=z===T-F||z!==T+F&&s[Y+1]<=s[Y-1]?s[Y+1]-1:s[Y-1],re=s[Y]-1,ie=re-p+w-z;re>=p&&ie>=w&&n[re]===r[ie];)s[Y]=re--,ie--;if(T%2==0&&-F<=z&&z<=F&&s[Y]<=i[Y+T])return c(s[Y],z+p-w,_,y)}}return null},f=[];return a(0,n.length,0,r.length,f),f})(pt(vn(t.childNodes),Zy),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!N(r)||!mv(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},$f=e=>"fragmented"===e.type?e.fragments.join(""):e.content,eb=e=>{const t=je("body",wN());return An(t,$f(e)),ke(Qn(t,"*[data-mce-bogus]"),St),Jn(t)},Hf=(e,t)=>{return!(!e||!t)&&(r=t,!($f(e)!==$f(r))||((n,r)=>eb(n)===eb(r))(e,t));var r},qf=e=>0===e.get(),hd=(e,t,n)=>{qf(n)&&(e.typing=t)},tb=(e,t)=>{e.typing&&(hd(e,!1,t),e.add())},nb=e=>({init:{bindEvents:I},undoManager:{beforeChange:(t,n)=>{return r=e,i=n,void(qf(t)&&i.set(Vu(r.selection)));var r,i},add:(t,n,r,o,i,s)=>((a,c,d,f,p,_,w)=>{const y=ud(a),S=Ie.extend(_||{},y);if(!qf(f)||a.removed)return null;const b=c.data[d.get()];if(a.dispatch("BeforeAddUndo",{level:S,lastLevel:b,originalEvent:w}).isDefaultPrevented()||b&&Hf(b,S))return null;c.data[d.get()]&&p.get().each(D=>{c.data[d.get()].beforeBookmark=D});const T=ES(a);if(T&&c.data.length>T){for(let D=0;D<c.data.length-1;D++)c.data[D]=c.data[D+1];c.data.length--,d.set(c.data.length)}S.bookmark=Vu(a.selection),d.get()<c.data.length-1&&(c.data.length=d.get()+1),c.data.push(S),d.set(c.data.length-1);const j={level:S,lastLevel:b,originalEvent:w};return d.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",j),a.dispatch("change",j)):a.dispatch("AddUndo",j),S})(e,t,n,r,o,i,s),undo:(t,n,r)=>((o,i,s,a)=>{let c;return i.typing&&(i.add(),i.typing=!1,hd(i,!1,s)),a.get()>0&&(a.set(a.get()-1),c=i.data[a.get()],Ff(o,c,!0),o.setDirty(!0),o.dispatch("Undo",{level:c})),c})(e,t,n,r),redo:(t,n)=>((r,o,i)=>{let s;return o.get()<i.length-1&&(o.set(o.get()+1),s=i[o.get()],Ff(r,s,!1),r.setDirty(!0),r.dispatch("Redo",{level:s})),s})(e,t,n),clear:(t,n)=>{return r=e,i=n,(o=t).data=[],i.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,i},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return r=e,o=t,n.get()>0||o.typing&&o.data[0]&&!Hf(ud(r),o.data[0]);var r,o},hasRedo:(t,n)=>{return r=t,n.get()<r.data.length-1&&!r.typing;var r},transact:(t,n,r)=>{return s=r,tb(o=t,n),o.beforeChange(),o.ignore(s),o.add();var o,s},ignore:(t,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(t,n),extra:(t,n,r,o)=>((i,s,a,c,d)=>{if(s.transact(c)){const f=s.data[a.get()].bookmark,p=s.data[a.get()-1];Ff(i,p,!0),s.transact(d)&&(s.data[a.get()-1].beforeBookmark=f)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>vf(e,t,n,r,o),matchAll:(t,n)=>((r,o,i)=>{const s=[],a={},c=r.selection.getStart();return r.dom.getParent(c,d=>{for(let f=0;f<o.length;f++){const p=o[f];!a[p]&&qo(r,d,p,i)&&(a[p]=!0,s.push(p))}},r.dom.getRoot()),s})(e,t,n),matchNode:(t,n,r,o)=>qo(e,t,n,r,o),canApply:t=>((n,r)=>{const o=n.formatter.get(r),i=n.dom;if(o&&n.selection.isEditable()){const s=n.selection.getStart(),a=$c(i,s);for(let c=o.length-1;c>=0;c--){const d=o[c];if(!Wr(d))return!0;for(let f=a.length-1;f>=0;f--)if(i.is(a[f],d.selector))return!0}}return!1})(e,t),closest:t=>((n,r)=>{const o=i=>Dt(i,X(n.getBody()));return O.from(n.selection.getStart(!0)).bind(i=>pf(X(i),s=>Kn(r,a=>{return qo(n,s.dom,d=a)?O.some(d):O.none();var d}),o)).getOrNull()})(e,t),apply:(t,n,r)=>hy(e,t,n,r),remove:(t,n,r,o)=>cy(e,t,n,r,o),toggle:(t,n,r)=>((o,i,s,a)=>{const c=o.formatter.get(i);c&&(!vf(o,i,s,a)||"toggle"in c[0]&&!c[0].toggle?hy(o,i,s,a):cy(o,i,s,a))})(e,t,n,r),formatChanged:(t,n,r,o,i)=>{return((_,w,y,S,b,T)=>{const j=w.get();ke(y.split(","),D=>{const F=qt(j,D).getOrThunk(()=>{const Y={withSimilar:{state:Fn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Fn(!1),similar:!1,callbacks:[]},withVars:[]};return j[D]=Y,Y}),z=()=>{const Y=my(_);return gy(_,Y,D,b,T).isSome()};if(x(T)){const Y=b?F.withSimilar:F.withoutSimilar;Y.callbacks.push(S),1===Y.callbacks.length&&Y.state.set(z())}else F.withVars.push({state:Fn(z()),similar:b,vars:T,callback:S})}),w.set(j)})(e,a=t,c=n,d=r,o,i),{unbind:()=>((_,w,y)=>{const S=_.get();ke(w.split(","),b=>qt(S,b).each(T=>{S[b]={withSimilar:{...T.withSimilar,callbacks:ot(T.withSimilar.callbacks,j=>j!==y)},withoutSimilar:{...T.withoutSimilar,callbacks:ot(T.withoutSimilar.callbacks,j=>j!==y)},withVars:ot(T.withVars,j=>j.callback!==y)}})),_.set(S)})(a,c,d)};var a,c,d}},editor:{getContent:t=>{return r=t,O.from((n=e).getBody()).fold(J("tree"===r.format?new br("body",11):""),o=>((e,t,n)=>{let r;return r="raw"===t.format?Ie.trim(tT(e.serializer,n.innerHTML)):"text"===t.format?((o,i)=>{const s=o.getDoc(),a=sn(X(o.getBody())),c=je("div",s);En(c,"data-mce-bogus","all"),Qi(c,{position:"fixed",left:"-9999999px",top:"0"}),An(c,i.innerHTML),j_(c),D_(c);const d=Gn(p=a)?p:X(It(p).dom.body);var p;Qe(d,c);const f=ii(c.dom.innerText);return _t(c),f})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((o,i)=>{const s=sr(o),a=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return i.replace(a,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!gc(X(n))&&W(r)?Ie.trim(r):r})(n,r,o));var n,r},setContent:(t,n)=>{return o=t,i=n,O.from((r=e).getBody()).map(s=>nd(o)?((a,c,d,f)=>{T0(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),d);const p=Bi({validate:!1},a.schema).serialize(d),_=gc(X(c))?p:Ie.trim(p);return ff(a,_,f.no_selection),{content:d,html:_}})(r,s,o,i):((a,c,d,f)=>{if(0===d.length||/^\s+$/.test(d)){const p='<br data-mce-bogus="1">';"TABLE"===c.nodeName?d="<tr><td>"+p+"</td></tr>":/^(UL|OL)$/.test(c.nodeName)&&(d="<li>"+p+"</li>");const _=sr(a);return a.schema.isValidChild(c.nodeName.toLowerCase(),_.toLowerCase())?(d=p,d=a.dom.createHTML(_,il(a),d)):d||(d=p),ff(a,d,f.no_selection),{content:d,html:d}}{"raw"!==f.format&&(d=Bi({validate:!1},a.schema).serialize(a.parser.parse(d,{isRootContent:!0,insert:!0})));const p=gc(X(c))?d:Ie.trim(d);return ff(a,p,f.no_selection),{content:p,html:p}}})(r,s,o,i)).getOr({content:o,html:nd(i.content)?"":i.content});var r,o,i},insertContent:(t,n)=>OT(e,t,n),addVisual:t=>((n,r)=>{const o=n.dom,i=N(r)?r:n.getBody();ke(o.select("table,a",i),s=>{switch(s.nodeName){case"TABLE":const a=jS(n),c=o.getAttrib(s,"border");c&&"0"!==c||!n.hasVisual?o.removeClass(s,a):o.addClass(s,a);break;case"A":if(!o.getAttrib(s,"href")){const d=o.getAttrib(s,"name")||s.id,f=Wm(n);d&&n.hasVisual?o.addClass(s,f):o.removeClass(s,f)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((r,o,i={})=>{const s=(a=i,c=o,{...a,format:c,get:!0,selection:!0,getInner:!0});var a,c;return Uy(r,s).fold(K,a=>{const c=((d,f)=>{if("text"===f.format)return O.from((p=d).selection.getRng()).map(_=>{var w;const y=O.from(p.dom.getParent(_.commonAncestorContainer,p.dom.isBlock)),S=p.getBody(),b=y.map(Y=>Y.nodeName).getOr("div").toLowerCase(),T=X(_.cloneContents());j_(T),D_(T);const j=p.dom.add(S,b,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},T.dom),D=Qy(j),F=ii(null!==(w=j.textContent)&&void 0!==w?w:"");if(p.dom.remove(j),dd(F,0)||dd(F,F.length-1)){const z=y.getOr(S),Y=Qy(z),re=Y.indexOf(D);return-1===re?D:(dd(Y,re-1)?" ":"")+D+(dd(Y,re+D.length)?" ":"")}return D}).getOr("");var p;{const p=((_,w)=>{const y=_.selection.getRng(),S=_.dom.create("body"),b=_.selection.getSel(),T=Mh(_,ch(b)),j=w.contextual?((e,t)=>{const n=kv(t,e);return n.length>0?((e,t)=>{return(n=e,r=t[0],yo(r,"table",ge(Dt,n))).bind(n=>{const r=t[0],o=t[t.length-1],i=(s=>{const a=zf(ss(s),0,[]);return ke(Qn(s,"tr"),(c,d)=>{ke(Qn(c,"td,th"),(f,p)=>{((_,w,y,S,b)=>{const T=Ky(b,"rowspan"),j=Ky(b,"colspan"),D=_.rows;for(let F=y;F<y+T;F++){D[F]||(D[F]=Vy(tm(S),[]));for(let z=w;z<w+j;z++)D[F].cells[z]=F===y&&z===w?b:ss(b)}})(a,((_,w,y)=>{for(;gN(_,w,y);)w++;return w})(a,p,d),d,c,f)})}),zf(a.element,Xy(a.rows),a.rows)})(n);return(s=i,a=r,c=o,Yy(s,a).bind(d=>Yy(s,c).map(f=>((p,_,w)=>{const y=_.x,S=_.y,b=w.x,T=w.y,j=S<T?Gy(p,y,S,b,T):Gy(p,y,T,b,S);return zf(p.element,Xy(j),j)})(s,d,f)))).map(s=>kh([mN(s)]));var s,a,c}).getOrThunk(Jy);var n,r})(e,n):(r=e,(o=t).length>0&&o[0].collapsed?Jy():(i=r,((a,c)=>{const d=et(c,(f,p)=>(Qe(p,f),p),a);return c.length>0?kh([d]):d})(X((s=o[0]).cloneContents()),((e,t)=>{const n=X(t.commonAncestorContainer),r=li(n,e),o=ot(r,ok),i=(c=t,Z(a=r,d=>"li"===Yt(d)&&uh(d,c)).fold(J([]),d=>{return(f=a,Z(f,p=>"ul"===Yt(p)||"ol"===Yt(p))).map(f=>{const p=je(Yt(f)),_=un(Re(f),(w,y)=>Dn(y,"list-style"));return Qi(p,_),[je("li"),p]}).getOr([]);var f})),s=o.concat(i.length?i:(a=>qa(a)?rr(a).filter(mu).fold(J([]),c=>[a,c]):mu(a)?[a]:[])(n));var a,c;return pt(s,ss)})(i,s))));var r,o,i,s})(X(_.getBody()),T).dom:y.cloneContents();return j&&S.appendChild(j),_.selection.serializer.serialize(S,w)})(d,f);return"tree"===f.format?p:d.selection.isCollapsed()?"":p}})(r,a);return Wy(r,c,a)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(N_(X(e.getBody())).isNone()){const r=xe('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Qe(r,X(t.extractContents())),t.insertNode(r.dom),rr(r).each(o=>o.dom.normalize()),(n=r,((o,i)=>{const s=a=>{const c=Qt(a);for(let d=c.length-1;d>=0;d--){const f=c[d];if(i(f))return O.some(f);const p=s(f);if(p.isSome())return p}return O.none()};return s(o)})(n,E_)).map(o=>{var i;e.selection.setCursorLocation(o.dom,"img"===Yt(i=o)?1:_g(i).fold(()=>Qt(i).length,s=>s.length))})}var n})(e,t),removeDecoration:()=>{return t=e,n=X(e.getBody()),N_(n).each(r=>{const o=t.selection.getBookmark();St(r),t.selection.moveToBookmark(o)});var t,n}},raw:{getModel:()=>O.none()}}),Wo=e=>ut(e.plugins,"rtc"),Uf=e=>e.rtcInstance?e.rtcInstance:nb(e),wn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},rb=e=>wn(e).init.bindEvents(),ob=e=>0===e.dom.length?(_t(e),O.none()):O.some(e),ib=(e,t,n,r)=>{e.bind(o=>((r?Kh:Qc)(o.dom,r?o.dom.length:0),t.filter(mr).map(i=>((s,a,c,d)=>{const f=s.dom,p=a.dom,_=d?f.length:p.length;d?(Xh(f,p,!1,!d),c.setStart(p,_)):(Xh(p,f,!1,!d),c.setEnd(p,_))})(o,i,n,r)))).orThunk(()=>{return(i=t,s=r,i.filter(a=>ml.isBookmarkNode(a.dom)).bind(s?kr:Fr)).or(t).filter(mr).map(i=>((s,a)=>{rr(s).each(c=>{const d=s.dom;a&&wl(c,ye(d,0))?Qc(d,0):!a&&xl(c,ye(d,d.length))&&Kh(d,d.length)})})(i,r));var i,s})},sb=(e,t,n)=>{if(ut(e,t)){const r=ot(e[t],o=>o!==n);0===r.length?delete e[t]:e[t]=r}},ab=e=>!(!e||!e.ownerDocument)&&Lt(X(e.ownerDocument),X(e)),lb=(e,t,n,r)=>{let o,i;const{selectorChangedWithUnbind:s}=((b,T)=>{let j,D;const F=(Y,re)=>Z(re,ie=>b.is(ie,Y)),z=Y=>b.getParents(Y,void 0,b.getRoot());return{selectorChangedWithUnbind:(Y,re)=>(j||(j={},D={},T.on("NodeChange",ie=>{const ce=ie.element,me=z(ce),Q={};Ft(j,(ee,he)=>{F(he,me).each(we=>{D[he]||(ke(ee,Ve=>{Ve(!0,{node:we,selector:he,parents:me})}),D[he]=ee),Q[he]=ee})}),Ft(D,(ee,he)=>{Q[he]||(delete D[he],ke(ee,we=>{we(!1,{node:ce,selector:he,parents:me})}))})})),j[Y]||(j[Y]=[]),j[Y].push(re),F(Y,z(T.selection.getStart())).each(()=>{D[Y]=j[Y]}),{unbind:()=>{sb(j,Y,re),sb(D,Y,re)}})}})(e,r),a=(b,T)=>((j,D,F={})=>{const z=(Y=F,re=D,{format:"html",...Y,set:!0,selection:!0,content:re});var Y,re;Mf(j,z).each(Y=>{const re=((ce,me)=>{if("raw"!==me.format){const Q=ce.selection.getRng(),ee=ce.dom.getParent(Q.commonAncestorContainer,ce.dom.isBlock),he=ee?{context:ee.nodeName.toLowerCase()}:{},we=ce.parser.parse(me.content,{forced_root_block:!1,...he,...me});return Bi({validate:!1},ce.schema).serialize(we)}return me.content})(j,Y),ie=j.selection.getRng();((ce,me)=>{const Q=O.from(me.firstChild).map(X),ee=O.from(me.lastChild).map(X);ce.deleteContents(),ce.insertNode(me);const he=Q.bind(Fr).filter(mr).bind(ob),we=ee.bind(kr).filter(mr).bind(ob);ib(he,Q,ce,!0),ib(we,ee,ce,!1),ce.collapse(!1)})(ie,ie.createContextualFragment(re)),j.selection.setRng(ie),_l(j,ie),If(j,re,Y)})})(r,b,T),c=b=>{const T=f();T.collapse(!!b),p(T)},d=()=>t.getSelection?t.getSelection():t.document.selection,f=()=>{let b;const T=(D,F,z)=>{try{return F.compareBoundaryPoints(D,z)}catch{return-1}},j=t.document;if(N(r.bookmark)&&!vs(r)){const D=Rh(r);if(D.isSome())return D.map(F=>Mh(r,[F])[0]).getOr(j.createRange())}try{const D=d();D&&!dc(D.anchorNode)&&(b=D.rangeCount>0?D.getRangeAt(0):j.createRange(),b=Mh(r,[b])[0])}catch{}if(b||(b=j.createRange()),Ha(b.startContainer)&&b.collapsed){const D=e.getRoot();b.setStart(D,0),b.setEnd(D,0)}return o&&i&&(0===T(b.START_TO_START,b,o)&&0===T(b.END_TO_END,b,o)?b=i:(o=null,i=null)),b},p=(b,T)=>{if(!((D=b)&&ab(D.startContainer)&&ab(D.endContainer)))return;var D;const j=d();if(b=r.dispatch("SetSelectionRange",{range:b,forward:T}).range,j){i=b;try{j.removeAllRanges(),j.addRange(b)}catch{}!1===T&&j.extend&&(j.collapse(b.endContainer,b.endOffset),j.extend(b.startContainer,b.startOffset)),o=j.rangeCount>0?j.getRangeAt(0):null}if(!b.collapsed&&b.startContainer===b.endContainer&&j?.setBaseAndExtent&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()){const D=b.startContainer.childNodes[b.startOffset];D&&"IMG"===D.nodeName&&(j.setBaseAndExtent(b.startContainer,b.startOffset,b.endContainer,b.endOffset),j.anchorNode===b.startContainer&&j.focusNode===b.endContainer||j.setBaseAndExtent(D,0,D,1))}r.dispatch("AfterSetSelectionRange",{range:b,forward:T})},_=()=>{const b=d(),T=b?.anchorNode,j=b?.focusNode;if(!b||!T||!j||dc(T)||dc(j))return!0;const D=e.createRng(),F=e.createRng();try{D.setStart(T,b.anchorOffset),D.collapse(!0),F.setStart(j,b.focusOffset),F.collapse(!0)}catch{return!0}return D.compareBoundaryPoints(D.START_TO_START,F)<=0},w={dom:e,win:t,serializer:n,editor:r,expand:(b={type:"word"})=>p(ms(e).expand(f(),b)),collapse:c,setCursorLocation:(b,T)=>{const j=e.createRng();N(b)&&N(T)?(j.setStart(b,T),j.setEnd(b,T),p(j),c(!1)):(hh(e,j,r.getBody(),!0),p(j))},getContent:b=>((T,j={})=>{return F=j.format?j.format:"html",z=j,wn(T).selection.getContent(F,z);var F,z})(r,b),setContent:a,getBookmark:(b,T)=>y.getBookmark(b,T),moveToBookmark:b=>y.moveToBookmark(b),select:(b,T)=>{return(j=e,D=b,F=T,O.from(D).bind(z=>O.from(z.parentNode).map(Y=>{const re=j.nodeIndex(z),ie=j.createRng();return ie.setStart(Y,re),ie.setEnd(Y,re+1),F&&(hh(j,ie,z,!0),hh(j,ie,z,!1)),ie}))).each(p),b;var j,D,F},isCollapsed:()=>{const b=f(),T=d();return!(!b||b.item)&&(b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!T||b.collapsed)},isEditable:()=>{const b=f(),T=r.getBody().querySelectorAll('[data-mce-selected="1"]');return T.length>0?tt(T,j=>e.isEditable(j.parentElement)):b.startContainer===b.endContainer?e.isEditable(b.startContainer):e.isEditable(b.startContainer)&&e.isEditable(b.endContainer)},isForward:_,setNode:b=>(a(e.getOuterHTML(b)),b),getNode:()=>((b,T)=>{if(!T)return b;let j=T.startContainer,D=T.endContainer;const F=T.startOffset,z=T.endOffset;let Y=T.commonAncestorContainer;T.collapsed||(j===D&&z-F<2&&j.hasChildNodes()&&(Y=j.childNodes[F]),Me(j)&&Me(D)&&(j=j.length===F?S_(j.nextSibling,!0):j.parentNode,D=0===z?S_(D.previousSibling,!1):D.parentNode,j&&j===D&&(Y=j)));const re=Me(Y)?Y.parentNode:Y;return Ye(re)?re:b})(r.getBody(),f()),getSel:d,setRng:p,getRng:f,getStart:b=>C_(r.getBody(),f(),b),getEnd:b=>k_(r.getBody(),f(),b),getSelectedBlocks:(b,T)=>((j,D,F,z)=>{const Y=[],re=j.getRoot(),ie=j.getParent(F||C_(re,D,D.collapsed),j.isBlock),ce=j.getParent(z||k_(re,D,D.collapsed),j.isBlock);if(ie&&ie!==re&&Y.push(ie),ie&&ce&&ie!==ce){let me;const Q=new Pn(ie,re);for(;(me=Q.next())&&me!==ce;)j.isBlock(me)&&Y.push(me)}return ce&&ie!==ce&&ce!==re&&Y.push(ce),Y})(e,f(),b,T),normalize:()=>{const b=f(),T=d();if(!(ch(T).length>1)&&zc(r)){const j=Vc(e,b);return j.each(D=>{p(D,_())}),j.getOr(b)}return b},selectorChanged:(b,T)=>(s(b,T),w),selectorChangedWithUnbind:s,getScrollContainer:()=>{let b,T=e.getRoot();for(;T&&"BODY"!==T.nodeName;){if(T.scrollHeight>T.clientHeight){b=T;break}T=T.parentNode}return b},scrollIntoView:(b,T)=>{var j;N(b)?((j=r).inline?HE:UE)(j,b,T):_l(r,f(),T)},placeCaretAt:(b,T)=>p(n_(b,T,r.getDoc())),getBoundingClientRect:()=>{const b=f();return b.collapsed?ye.fromRangeStart(b).getClientRects()[0]:b.getBoundingClientRect()},destroy:()=>{t=o=i=null,S.destroy()}},y=ml(w),S=Jv(w,r);return w.bookmarkManager=y,w.controlSelection=S,w},xN=(e,t,n)=>{-1===Ie.inArray(t,n)&&(e.addAttributeFilter(n,(r,o)=>{let i=r.length;for(;i--;)r[i].attr(o,null)}),t.push(n))},cb=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:Gt.DOM,i=t&&t.schema?t.schema:Ai(r),s=ca(r,i);return c=r,d=o,(a=s).addAttributeFilter("data-mce-tabindex",(f,p)=>{let _=f.length;for(;_--;){const w=f[_];w.attr("tabindex",w.attr("data-mce-tabindex")),w.attr(p,null)}}),a.addAttributeFilter("src,href,style",(f,p)=>{const _="data-mce-"+p,w=c.url_converter,y=c.url_converter_scope;let S=f.length;for(;S--;){const b=f[S];let T=b.attr(_);void 0!==T?(b.attr(p,T.length>0?T:null),b.attr(_,null)):(T=b.attr(p),"style"===p?T=d.serializeStyle(d.parseStyle(T),b.name):w&&(T=w.call(y,T,p,b.name)),b.attr(p,T.length>0?T:null))}}),a.addAttributeFilter("class",f=>{let p=f.length;for(;p--;){const _=f[p];let w=_.attr("class");w&&(w=w.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),_.attr("class",w.length>0?w:null))}}),a.addAttributeFilter("data-mce-type",(f,p,_)=>{let w=f.length;for(;w--;){const y=f[w];"bookmark"===y.attr("data-mce-type")&&!_.cleanup&&(O.from(y.firstChild).exists(b=>{var T;return!mc(null!==(T=b.value)&&void 0!==T?T:"")})?y.unwrap():y.remove())}}),a.addNodeFilter("noscript",f=>{var p;let _=f.length;for(;_--;){const w=f[_].firstChild;w&&(w.value=Ni.decode(null!==(p=w.value)&&void 0!==p?p:""))}}),a.addNodeFilter("script,style",(f,p)=>{var _;const w=S=>S.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=f.length;for(;y--;){const S=f[y],b=S.firstChild,T=null!==(_=b?.value)&&void 0!==_?_:"";if("script"===p){const j=S.attr("type");j&&S.attr("type","mce-no/type"===j?null:j.replace(/^mce\-/,"")),"xhtml"===c.element_format&&b&&T.length>0&&(b.value="// <![CDATA[\n"+w(T)+"\n// ]]>")}else"xhtml"===c.element_format&&b&&T.length>0&&(b.value="\x3c!--\n"+w(T)+"\n--\x3e")}}),a.addNodeFilter("#comment",f=>{let p=f.length;for(;p--;){const _=f[p],w=_.value;c.preserve_cdata&&0===w?.indexOf("[CDATA[")?(_.name="#cdata",_.type=4,_.value=d.decode(w.replace(/^\[CDATA\[|\]\]$/g,""))):0===w?.indexOf("mce:protected ")&&(_.name="#text",_.type=3,_.raw=!0,_.value=unescape(w).substr(14))}}),a.addNodeFilter("xml:namespace,input",(f,p)=>{let _=f.length;for(;_--;){const w=f[_];7===w.type?w.remove():1===w.type&&("input"!==p||w.attr("type")||w.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",f=>{ke(f,p=>{"format-caret"===p.attr("data-mce-type")&&(p.isEmpty(a.schema.getNonEmptyElements())?p.remove():p.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(f,p)=>{let _=f.length;for(;_--;)f[_].attr(p,null)}),c.remove_trailing_brs&&by(c,a,a.schema),{schema:i,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,c={})=>{const d={format:"html",...c},f=(y=a,T=S=d,N(b=w=t)&&b.hasEventListeners("PreProcess")&&!T.no_events?((b,T,j)=>{let D;const F=b.dom;let z=T.cloneNode(!0);const Y=document.implementation;if(Y.createHTMLDocument){const re=Y.createHTMLDocument("");Ie.each("BODY"===z.nodeName?z.childNodes:[z],ie=>{re.body.appendChild(re.importNode(ie,!0))}),z="BODY"!==z.nodeName?re.body.firstChild:re.body,D=F.doc,F.doc=re}return ie={...j,node:z},b.dispatch("PreProcess",ie),D&&(F.doc=D),z;var ie})(w,y,S):y),p=((w,y,S)=>{const b=ii(S.getInner?y.innerHTML:w.getOuterHTML(y));return S.selection||gc(X(y))?b:Ie.trim(b)})(o,f,d),_=((w,y,S)=>{const b=S.selection?{forced_root_block:!1,...S}:S,T=w.parse(y,b);return(j=>{const D=z=>"br"===z?.name,F=j.lastChild;if(D(F)){const z=F.prev;D(z)&&(F.remove(),z.remove())}})(T),T})(s,p,d);var w,y,S,b,T;return"tree"===d.format?_:((w,y,S,b,T)=>{var z;return((D,F,z)=>{return!F.no_events&&D?(re=D,ie={...F,content:z},re.dispatch("PostProcess",ie)).content:z;var re,ie})(w,T,(z=b,Bi(y,S).serialize(z)))})(t,r,i,_,d)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:ge(xN,s,n),getTempAttrs:J(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var a,c,d})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Wf=(e,t,n={})=>{const r=(o=n,i=t,{format:"html",...o,set:!0,content:i});var o,i;return Mf(e,r).map(o=>{const i=(a=o.content,c=o,Uf(e).editor.setContent(a,c));var a,c;return If(e,i.html,o),i.content}).getOr(t)},kN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),SN="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),EN="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),db=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],ub=(e,t)=>{const n=ot(t,r=>ut(e,r));return Mt(n)},hb=(e,t)=>{const n=Ie.makeMap(e.plugins," "),r=ot(t,o=>ut(n,o));return Mt(r)},RN=e=>Z(db,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),fd=Gt.DOM,pd=e=>O.from(e).each(t=>t.destroy()),gd=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>ut(e,t)}})(),da=cr.ModelManager,fb=(e,t)=>t.dom[e],pb=(e,t)=>parseInt(G(t,e),10),jN=ge(fb,"clientWidth"),DN=ge(fb,"clientHeight"),PN=ge(pb,"margin-top"),BN=ge(pb,"margin-left"),gb=e=>{const t=[],n=()=>{const c=e.theme;return c&&c.getNotificationManagerImpl?c.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},r=()=>O.from(t[0]),o=()=>{ke(t,c=>{c.reposition()})},i=c=>{Ee(t,d=>d===c).each(d=>{t.splice(d,1)})},s=(c,d=!0)=>{return e.removed||!(p=(f=e).inline?f.getBody():f.getContentAreaContainer(),O.from(p).map(X)).map(Dr).getOr(!1)?{}:(d&&e.dispatch("BeforeOpenNotification",{notification:c}),Z(t,f=>{return!((p=n().getArgs(f)).type!==(_=c).type||p.text!==_.text||p.progressBar||p.timeout||_.progressBar||_.timeout);var p,_}).getOrThunk(()=>{e.editorManager.setActive(e);const f=n().open(c,()=>{i(f),o(),r().fold(()=>e.focus(),p=>g_(X(p.getEl())))});return(p=>{t.push(p)})(f),o(),e.dispatch("OpenNotification",{notification:{...f}}),f}));var f,p},a=J(t);return(c=e).on("SkinLoaded",()=>{const d=pS(c);d&&s({text:d,type:"warning",timeout:0},!1),o()}),c.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),c.on("remove",()=>{ke(t.slice(),d=>{n().close(d)})}),{open:s,close:()=>{r().each(c=>{n().close(c),i(c),o()})},getNotifications:a};var c},ua=cr.PluginManager,ks=cr.ThemeManager,mb=e=>{let t=[];const n=()=>{const s=e.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},r=(s,a)=>(...c)=>a?a.apply(s,c):void 0,o=s=>{e.dispatch("CloseWindow",{dialog:s}),t=ot(t,a=>a!==s),0===t.length&&e.focus()},i=s=>{e.editorManager.setActive(e),Oh(e),e.ui.show();const a=s();return t.push(c=a),e.dispatch("OpenWindow",{dialog:c}),a;var c};return e.on("remove",()=>{ke(t,s=>{n().close(s)})}),{open:(s,a)=>i(()=>n().open(s,a,o)),openUrl:s=>i(()=>n().openUrl(s,o)),alert:(s,a,c)=>{const d=n();d.alert(s,r(c||d,a))},confirm:(s,a,c)=>{const d=n();d.confirm(s,r(c||d,a))},close:()=>{O.from(t[t.length-1]).each(s=>{n().close(s),o(s)})}}},vb=(e,t)=>{e.notificationManager.open({type:"error",text:t})},md=(e,t)=>{e._skinLoaded?vb(e,t):e.on("SkinLoaded",()=>{vb(e,t)})},Nl=(e,t,n)=>{Uv(e,t,{message:n}),console.error(n)},Al=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,vd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},_b=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return pt(t,o=>/^[a-z0-9\-]+$/i.test(o)&&!e.inline?`${n}/${o}/${r}`:e.documentBaseURI.toAbsolute(o))},yb=()=>{let e={};const t=(r,o)=>({status:r,resultUri:o}),n=r=>r in e;return{hasBlobUri:n,getResultUri:r=>{const o=e[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===e[r].status,isUploaded:r=>!!n(r)&&2===e[r].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,o)=>{e[r]=t(2,o)},removeFailed:r=>{delete e[r]},destroy:()=>{e={}}}};let MN=0;const bb=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),wb=(e,t)=>((e,t)=>{const n={},r=(c,d)=>new Promise((f,p)=>{const _=new XMLHttpRequest;_.open("POST",t.url),_.withCredentials=t.credentials,_.upload.onprogress=y=>{d(y.loaded/y.total*100)},_.onerror=()=>{p("Image upload failed due to a XHR Transport error. Code: "+_.status)},_.onload=()=>{if(_.status<200||_.status>=300)return void p("HTTP Error: "+_.status);const y=JSON.parse(_.responseText);var S,b;y&&W(y.location)?f((b=y.location,(S=t.basePath)?S.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b)):p("Invalid JSON: "+_.responseText)};const w=new FormData;w.append("file",c.blob(),c.filename()),_.send(w)}),o=P(t.handler)?t.handler:r,i=(c,d)=>({url:d,blobInfo:c,status:!0}),s=(c,d)=>({url:"",blobInfo:c,status:!1,error:d}),a=(c,d)=>{Ie.each(n[c],f=>{f(d)}),delete n[c]};return{upload:(c,d)=>{return t.url||o!==r?(p=d,f=Ie.grep(f=c,_=>!e.isUploaded(_.blobUri())),Promise.all(Ie.map(f,_=>{return e.isPending(_.blobUri())?(w=>{const y=w.blobUri();return new Promise(S=>{n[y]=n[y]||[],n[y].push(S)})})(_):(y=o,S=p,e.markPending((w=_).blobUri()),new Promise(b=>{let T,j;try{const D=()=>{T&&(T.close(),j=I)},F=Y=>{D(),e.markUploaded(w.blobUri(),Y),a(w.blobUri(),i(w,Y)),b(i(w,Y))},z=Y=>{D(),e.removeFailed(w.blobUri()),a(w.blobUri(),s(w,Y)),b(s(w,Y))};j=Y=>{Y<0||Y>100||O.from(T).orThunk(()=>O.from(S).map(ct)).each(re=>{T=re,re.progressBar.value(Y)})},y(w,j).then(F,Y=>{z(W(Y)?{message:Y}:Y)})}catch(D){b(s(w,D))}}));var w,y,S}))):new Promise(f=>{f([])});var f,p}}})(t,{url:tS(e),basePath:nS(e),credentials:rS(e),handler:oS(e)}),xb={remove_similar:!0,inherit:!1},ha={selector:"td,th",...xb},FN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ha},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ha},tablecellbordercolor:{styles:{borderColor:"%value"},...ha},tablecellclass:{classes:["%value"],...ha},tableclass:{selector:"table",classes:["%value"],...xb},tablecellborderstyle:{styles:{borderStyle:"%value"},...ha},tablecellborderwidth:{styles:{borderWidth:"%value"},...ha}},$N=J(FN),_d=Ie.each,Xr=Gt.DOM,Vf=e=>N(e)&&M(e),Cb=(e,t)=>{const n=t&&t.schema||Ai({}),r=s=>{const a=W(s)?{name:s,classes:[],attrs:{}}:s,c=Xr.create(a.name);return d=c,(f=a).classes.length>0&&Xr.addClass(d,f.classes.join(" ")),Xr.setAttribs(d,f.attrs),c;var d,f},o=(s,a,c)=>{let d;const f=a[0],p=Vf(f)?f.name:void 0,_=((S,b)=>{const j=n.getElementRule(S.nodeName.toLowerCase())?.parentsRequired;return!(!j||!j.length)&&(b&&Oe(j,b)?b:j[0])})(s,p);if(_)p===_?(d=f,a=a.slice(1)):d=_;else if(f)d=f,a=a.slice(1);else if(!c)return s;const w=d?r(d):Xr.create("div");w.appendChild(s),c&&Ie.each(c,S=>{const b=r(S);w.insertBefore(b,s)});const y=Vf(d)?d.siblings:void 0;return o(w,a,y)},i=Xr.create("div");if(e.length>0){const s=e[0],a=r(s),c=Vf(s)?s.siblings:void 0;i.appendChild(o(a,e.slice(1),c))}return i},HN=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Ie.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,i,s,a)=>{switch(o){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Ie.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===s){const c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(n.attrs[c[1]]=c[2])}return""})),n.name=t||"div",n},qN=(e,t)=>{let n="",r=_S(e);if(""===r)return"";const o=w=>W(w)?w.replace(/%(\w+)/g,""):"",i=(w,y)=>Xr.getStyle(y??e.getBody(),w,!0);if(W(t)){const w=e.formatter.get(t);if(!w)return"";t=w[0]}if("preview"in t){const w=t.preview;if(!1===w)return"";r=w||r}let s,a=t.block||t.inline||"span";const c=W(d=t.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ie.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),w=>{const y=Ie.map(w.split(/(?:~\+|~|\+)/),HN),S=y.pop();return y.length&&(S.siblings=y),S}).reverse()):[];var d;c.length>0?(c[0].name||(c[0].name=a),a=t.selector,s=Cb(c,e)):s=Cb([a],e);const f=Xr.select(a,s)[0]||s.firstChild;_d(t.styles,(w,y)=>{const S=o(w);S&&Xr.setStyle(f,y,S)}),_d(t.attributes,(w,y)=>{const S=o(w);S&&Xr.setAttrib(f,y,S)}),_d(t.classes,w=>{const y=o(w);Xr.hasClass(f,y)||Xr.addClass(f,y)}),e.dispatch("PreviewFormats"),Xr.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);const p=i("fontSize"),_=/px$/.test(p)?parseInt(p,10):0;return _d(r.split(" "),w=>{let y=i(w,f);if(!("background-color"===w&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(y)&&(y=i(w),"#ffffff"===Ic(y).toLowerCase())||"color"===w&&"#000000"===Ic(y).toLowerCase())){if("font-size"===w&&/em|%$/.test(y)){if(0===_)return;y=parseFloat(y)/(/%$/.test(y)?100:1)*_+"px"}"border"===w&&y&&(n+="padding:0 2px;"),n+=w+":"+y+";"}}),e.dispatch("AfterPreviewFormats"),Xr.remove(s),n},kb=e=>{const t=(r=>{const o={},i=(s,a)=>{s&&(W(s)?(u(a)||(a=[a]),ke(a,c=>{x(c.deep)&&(c.deep=!Wr(c)),x(c.split)&&(c.split=!Wr(c)||Bn(c)),x(c.remove)&&Wr(c)&&!Bn(c)&&(c.remove="none"),Wr(c)&&Bn(c)&&(c.mixed=!0,c.block_expand=!0),W(c.classes)&&(c.classes=c.classes.split(/\s+/))}),o[s]=a):Ft(s,(c,d)=>{i(d,c)}))};return i((s=>{const a=s.dom,c=s.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:f=>{a.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:f=>{a.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const f={inline:"span",styles:{textDecoration:"line-through"},exact:!0},p={inline:"strike",remove:"all",preserve_attributes:["class","style"]},_={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==c?[_,f,p]:[f,_,p]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(f,p,_)=>Ye(f)&&f.hasAttribute("href"),onformat:(f,p,_)=>{Ie.each(_,(w,y)=>{a.setAttrib(f,y,w)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":f=>{var p;return null!==(p=f?.customValue)&&void 0!==p?p:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ie.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),f=>{d[f]={block:f,remove:"all"}}),d})(r)),i($N()),i(vS(r)),{get:s=>N(s)?o[s]:o,has:s=>ut(o,s),register:i,unregister:s=>(s&&o[s]&&delete o[s],o)}})(e),n=Fn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(r=e).on("mouseup keydown",o=>{var i;((s,a,c)=>{const d=s.selection,f=s.getBody();bf(s,null,c),8!==a&&46!==a||!d.isCollapsed()||"\ufeff"!==d.getStart().innerHTML||bf(s,hs(f,d.getStart())),37!==a&&39!==a||bf(s,hs(f,d.getStart()))})(r,o.keyCode,(i=r.selection.getRng().endContainer,Me(i)&&Ui(i.data,zn)))}),Wo(e)||((r,o)=>{r.set({}),o.on("NodeChange",i=>{vy(o,i.element,r.get())}),o.on("FormatApply FormatRemove",i=>{const s=O.from(i.node).map(a=>pl(a)?a:a.startContainer).bind(a=>Ye(a)?O.some(a):O.from(a.parentElement)).getOrThunk(()=>py(o));vy(o,s,r.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,o,i)=>{var a,c,d;a=r,c=o,d=i,wn(e).formatter.apply(a,c,d)},remove:(r,o,i,s)=>{var c,d,f,p;c=r,d=o,f=i,p=s,wn(e).formatter.remove(c,d,f,p)},toggle:(r,o,i)=>{var a,c,d;a=r,c=o,d=i,wn(e).formatter.toggle(a,c,d)},match:(r,o,i,s)=>{return c=r,d=o,f=i,p=s,wn(e).formatter.match(c,d,f,p);var c,d,f,p},closest:r=>{return i=r,wn(e).formatter.closest(i);var i},matchAll:(r,o)=>{return s=r,a=o,wn(e).formatter.matchAll(s,a);var s,a},matchNode:(r,o,i,s)=>{return c=r,d=o,f=i,p=s,wn(e).formatter.matchNode(c,d,f,p);var c,d,f,p},canApply:r=>{return i=r,wn(e).formatter.canApply(i);var i},formatChanged:(r,o,i,s)=>{return c=n,d=r,f=o,p=i,_=s,wn(e).formatter.formatChanged(c,d,f,p,_);var c,d,f,p,_},getCssText:ge(qN,e)};var r},Sb=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Eb=e=>{const t=Oi(),n=Fn(0),r=Fn(0),o={data:[],typing:!1,beforeChange:()=>{var s,a;s=n,a=t,wn(e).undoManager.beforeChange(s,a)},add:(i,s)=>{return c=o,d=r,f=n,p=t,_=i,w=s,wn(e).undoManager.add(c,d,f,p,_,w);var c,d,f,p,_,w},dispatchChange:()=>{e.setDirty(!0);const i=ud(e);i.bookmark=Vu(e.selection),e.dispatch("change",{level:i,lastLevel:Mr(o.data,r.get()).getOrUndefined()})},undo:()=>{return s=o,a=n,c=r,wn(e).undoManager.undo(s,a,c);var s,a,c},redo:()=>{return s=r,a=o.data,wn(e).undoManager.redo(s,a);var s,a},clear:()=>{var s,a;s=o,a=r,wn(e).undoManager.clear(s,a)},reset:()=>{var s;s=o,wn(e).undoManager.reset(s)},hasUndo:()=>{return s=o,a=r,wn(e).undoManager.hasUndo(s,a);var s,a},hasRedo:()=>{return s=o,a=r,wn(e).undoManager.hasRedo(s,a);var s,a},transact:i=>{return a=o,c=n,d=i,wn(e).undoManager.transact(a,c,d);var a,c,d},ignore:i=>{var a,c;a=n,c=i,wn(e).undoManager.ignore(a,c)},extra:(i,s)=>{var c,d,f,p;c=o,d=r,f=i,p=s,wn(e).undoManager.extra(c,d,f,p)}};return Wo(e)||((i,s,a)=>{const c=Fn(!1),d=f=>{hd(s,!1,a),s.add({},f)};i.on("init",()=>{s.add()}),i.on("BeforeExecCommand",f=>{Sb(f.command)||(tb(s,a),s.beforeChange())}),i.on("ExecCommand",f=>{Sb(f.command)||d(f)}),i.on("ObjectResizeStart cut",()=>{s.beforeChange()}),i.on("SaveContent ObjectResized blur",d),i.on("dragend",d),i.on("keyup",f=>{const p=f.keyCode;if(f.isDefaultPrevented())return;const _=Bt.os.isMacOS()&&"Meta"===f.key;(p>=33&&p<=36||p>=37&&p<=40||45===p||f.ctrlKey||_)&&(d(),i.nodeChanged()),46!==p&&8!==p||i.nodeChanged(),c.get()&&s.typing&&!Hf(ud(i),s.data[0])&&(i.isDirty()||i.setDirty(!0),i.dispatch("TypingUndo"),c.set(!1),i.nodeChanged())}),i.on("keydown",f=>{const p=f.keyCode;if(!f.isDefaultPrevented()){if(!(p>=33&&p<=36||p>=37&&p<=40||45===p))return!(p<16||p>20)||224===p||91===p||s.typing||f.ctrlKey&&!f.altKey||f.metaKey?void((Bt.os.isMacOS()?f.metaKey:f.ctrlKey&&!f.altKey)&&s.beforeChange()):(s.beforeChange(),hd(s,!0,a),s.add({},f),void c.set(!0));s.typing&&d(f)}}),i.on("mousedown",f=>{s.typing&&d(f)}),i.on("input",f=>{var p,_;f.inputType&&("insertReplacementText"===f.inputType||"insertText"===(p=f).inputType&&null===p.data||"insertFromPaste"===(_=f).inputType||"insertFromDrop"===_.inputType)&&d(f)}),i.on("AddUndo Undo Redo ClearUndos",f=>{f.isDefaultPrevented()||i.nodeChanged()})})(e,o,n),(i=e).addShortcut("meta+z","","Undo"),i.addShortcut("meta+y,meta+shift+z","","Redo"),o;var i},UN=[9,27,Ke.HOME,Ke.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ke.DOWN,Ke.UP,Ke.LEFT,Ke.RIGHT].concat(Bt.browser.isFirefox()?[224]:[]),Tb="data-mce-placeholder",Nb=e=>"keydown"===e.type||"keyup"===e.type,Ab=e=>{const t=e.keyCode;return t===Ke.BACKSPACE||t===Ke.DELETE},WN=(e,t)=>({from:e,to:t}),Kf=(e,t)=>{const n=X(e),r=X(t.container());return Zc(n,r).map(o=>({block:o,position:t}))},Ob=(e,t)=>Bo(t,n=>Ua(n)||xo(n.dom),n=>Dt(n,e)).filter(nr).getOr(e),Rb=e=>{const t=(n=>{const r=Qt(n);return Ee(r,$r).fold(J(r),o=>r.slice(0,o))})(e);return ke(t,_t),t},jb=(e,t)=>{const n=li(t,e);return Z(n.reverse(),r=>Sn(r)).each(_t)},VN=(e,t,n,r)=>{if(Sn(n))return Si(n),ar(n.dom);0===ot(_o(r),i=>!Sn(i)).length&&Sn(t)&&nt(r,je("br"));const o=Tr(n.dom,ye.before(r.dom));return ke(Rb(t),i=>{nt(r,i)}),jb(e,t),o},KN=(e,t,n)=>{if(Sn(n)){if(Sn(t)){const i=Mn((s=>{const a=(c,d)=>kn(c).fold(()=>d,f=>pc(f)?a(f,d.concat(ss(f))):d);return a(s,[])})(n),(s,a)=>(Kt(s,a),a),Wa());Rt(t),Qe(t,i)}return _t(n),ar(t.dom)}const r=fo(n.dom);return ke(Rb(t),o=>{Qe(n,o)}),jb(e,t),r},Db=(e,t)=>{ta(e,t.dom).bind(n=>O.from(n.getNode())).map(X).filter(ts).each(_t)},Pb=(e,t,n)=>{return Db(!0,t),Db(!1,n),(r=t,o=n,Lt(o,r)?((i,s)=>{const a=li(s,i);return O.from(a[a.length-1])})(o,r):O.none()).fold(ge(KN,e,t,n),ge(VN,e,t,n));var r,o},Bb=(e,t,n,r)=>t?Pb(e,r,n):Pb(e,n,r),Xf=(e,t)=>{const n=X(e.getBody());return(o=n.dom,i=t,s=e.selection.getRng(),s.collapsed?((a,c,d)=>{const f=Kf(a,ye.fromRangeStart(d)),p=f.bind(_=>qr(c,a,_.position).bind(w=>Kf(a,w).map(y=>{return S=a,b=c,hn((T=y).position.getNode())&&!Sn(T.block)?ta(!1,T.block.dom).bind(j=>j.isEqual(T.position)?qr(b,S,j).bind(D=>Kf(S,D)):O.some(T)).getOr(T):T;var S,b,T})));return Xn(f,p,WN).filter(_=>{return!Dt((w=_).from.block,w.to.block)&&((w,y)=>{const S=X(w);return Dt(Ob(S,y.from.block),Ob(S,y.to.block))})(a,_)&&(w=>!1===tn(w.from.block.dom)&&!1===tn(w.to.block.dom))(_)&&(w=>{const y=S=>yg(S)||Cu(S.dom);return y(w.from.block)&&y(w.to.block)})(_);var w})})(o,i,s):O.none()).map(o=>()=>{Bb(n,t,o.from.block,o.to.block).each(i=>{e.selection.setRng(i.toRange())})});var o,i,s},Lb=(e,t)=>{const n=X(t),r=ge(Dt,e);return or(n,Ua,r).isSome()},Yf=(e,t)=>e.selection.isCollapsed()?O.none():(e=>{const t=X(e.getBody());return((n,r)=>{const o=Tr(n.dom,ye.fromRangeStart(r)).isNone(),i=yr(n.dom,ye.fromRangeEnd(r)).isNone();return!(Lb(s=n,(a=r).startContainer)||Lb(s,a.endContainer))&&o&&i;var s,a})(t,e.selection.getRng())?(n=e,O.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return Xn(Zc(n,X(o.startContainer)),Zc(n,X(o.endContainer)),(i,s)=>Dt(i,s)?O.none():O.some(()=>{o.deleteContents(),Bb(n,!0,i,s).each(a=>{r.setRng(a.toRange())})})).getOr(O.none())})(t,e.selection);var n})(e),ci=(e,t,n,r,o)=>O.from(t._selectionOverrides.showCaret(e,n,r,o)),Ol=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?O.none():O.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(t)),Gf=(e,t,n)=>t.collapsed?((r,o,i)=>{const s=th(1,r.getBody(),o),a=ye.fromRangeStart(s),c=a.getNode();if(al(c))return ci(1,r,c,!a.isAtEnd(),!1);const d=a.getNode(!0);if(al(d))return ci(1,r,d,!1,!1);const f=bs(r.dom.getRoot(),a.getNode());return al(f)?ci(1,r,f,!1,i):O.none()})(e,t,n).getOr(t):t,YN=e=>Mi(e)||yl(e),GN=e=>Ii(e)||bl(e),Mb=(e,t,n,r,o,i)=>{var s,a;ci(r,e,i.getNode(!o),o,!0).each(s=>{if(t.collapsed){const a=t.cloneRange();o?a.setEnd(s.startContainer,s.startOffset):a.setStart(s.endContainer,s.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(s)}),s=e.dom,Me(a=n)&&0===a.data.length&&s.remove(a)},Jf=(e,t)=>((n,r)=>{const o=n.selection.getRng();if(!Me(o.commonAncestorContainer))return O.none();const i=r?$n.Forwards:$n.Backwards,s=$o(n.getBody()),a=ge(nh,r?s.next:s.prev),c=r?YN:GN,d=hl(i,n.getBody(),o),f=a(d),p=f&&Kr(r,f);if(!p||!Pc(d,p))return O.none();if(c(p))return O.some(()=>Mb(n,o,d.getNode(),i,r,p));const _=a(p);return _&&c(_)&&Pc(p,_)?O.some(()=>Mb(n,o,d.getNode(),i,r,_)):O.none()})(e,t),Qf=(e,t)=>{const n=e.getBody();return t?ar(n).filter(Mi):fo(n).filter(Ii)},Zf=e=>{const t=e.selection.getRng();return!t.collapsed&&(Qf(e,!0).exists(n=>n.isEqual(ye.fromRangeStart(t)))||Qf(e,!1).exists(n=>n.isEqual(ye.fromRangeEnd(t))))},Yr=Io([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ib=(e,t,n)=>qr(t,e,n).bind(r=>{return o=r.getNode(),N(o)&&(Ua(X(o))||qa(X(o)))||((i,s,a,c)=>{const d=f=>pc(X(f))&&!zo(a,c,i);return sv(!s,a).fold(()=>sv(s,c).fold(Et,d),d)})(e,t,n,r)?O.none():t&&tn(r.getNode())||!t&&tn(r.getNode(!0))?((i,s,a,c)=>{const d=c.getNode(!s);return Zc(X(i),X(a.getNode())).map(f=>Sn(f)?Yr.remove(f.dom):Yr.moveToElement(d)).orThunk(()=>O.some(Yr.moveToElement(d)))})(e,t,n,r):t&&Ii(n)||!t&&Mi(n)?O.some(Yr.moveToPosition(r)):O.none();var o}),zb=(e,t)=>O.from(bs(e.getBody(),t)),Fb=e=>{const t=e.dom,n=e.selection,r=bs(e.getBody(),n.getNode());if(xo(r)&&t.isBlock(r)&&t.isEmpty(r)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(ye.before(o).toRange())}return!0},ep=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return zb(e,n).filter(tn).fold(()=>((r,o,i)=>{const s=th(o?1:-1,r,i),a=ye.fromRangeStart(s),c=X(r);return!o&&Ii(a)?O.some(Yr.remove(a.getNode(!0))):o&&Mi(a)?O.some(Yr.remove(a.getNode())):!o&&Mi(a)&&Uh(c,a)?dT(c,a).map(d=>Yr.remove(d.getNode())):o&&Ii(a)&&qh(c,a)?uT(c,a).map(d=>Yr.remove(d.getNode())):(d=r,((_,w)=>{const y=w.getNode(!_),S=_?"after":"before";return Ye(y)&&y.getAttribute("data-mce-caret")===S})(f=o,p=a)?(_=f,w=p.getNode(!f),C(w)?O.none():_&&tn(w.nextSibling)?O.some(Yr.moveToElement(w.nextSibling)):!_&&tn(w.previousSibling)?O.some(Yr.moveToElement(w.previousSibling)):O.none()).orThunk(()=>Ib(d,f,p)):Ib(d,f,p).bind(_=>((w,y,S)=>S.fold(b=>O.some(Yr.remove(b)),b=>O.some(Yr.moveToElement(b)),b=>zo(y,b,w)?O.none():O.some(Yr.moveToPosition(b))))(d,p,_)));var d,f,p,_,w})(e.getBody(),t,e.selection.getRng()).map(r=>()=>{return r.fold((o=e,i=t,s=>(o._selectionOverrides.hideFakeCaret(),_s(o,i,X(s)),!0)),((o,i)=>s=>{const a=i?ye.before(s):ye.after(s);return o.selection.setRng(a.toRange()),!0})(e,t),(o=>i=>(o.selection.setRng(i.toRange()),!0))(e));var o,i}),()=>O.some(I))})(e,t):((n,r)=>{const o=n.selection.getNode();return tn(o)&&!hc(o)?zb(n,o.parentNode).filter(tn).fold(()=>O.some(()=>{var i;i=X(n.getBody()),ke(Qn(i,".mce-offscreen-selection"),_t),_s(n,r,X(n.selection.getNode())),Gh(n)}),()=>O.some(I)):Zf(n)?O.some(()=>{p0(n,n.selection.getRng(),X(n.getBody()))}):O.none()})(e,t),tp=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=ye.fromRangeStart(n.selection.getRng());return qr(r,n.getBody(),o).filter(i=>r?iT(i):sT(i)).bind(i=>eh(r?0:-1,i)).map(i=>()=>n.selection.select(i))})(e,t):O.none(),fa=Me,$b=e=>fa(e)&&e.data[0]===ir,Hb=e=>fa(e)&&e.data[e.data.length-1]===ir,qb=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(ir)},yd=(e,t)=>e?(n=>{var r;if(fa(n.previousSibling))return Hb(n.previousSibling)||n.previousSibling.appendData(ir),n.previousSibling;if(fa(n))return $b(n)||n.insertData(0,ir),n;{const o=qb(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(t):(n=>{var r,o;if(fa(n.nextSibling))return $b(n.nextSibling)||n.nextSibling.insertData(0,ir),n.nextSibling;if(fa(n))return Hb(n)||n.appendData(ir),n;{const i=qb(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(i,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(i),i}})(t),QN=ge(yd,!0),ZN=ge(yd,!1),Ub=(e,t)=>Me(e.container())?yd(t,e.container()):yd(t,e.getNode()),Wb=(e,t)=>{const n=t.get();return n&&e.container()===n&&Ei(n)},np=(e,t)=>t.fold(n=>{ds(e.get());const r=QN(n);return e.set(r),O.some(ye(r,r.length-1))},n=>ar(n).map(r=>{if(Wb(r,e)){const o=e.get();return ye(o,1)}{ds(e.get());const o=Ub(r,!0);return e.set(o),ye(o,1)}}),n=>fo(n).map(r=>{if(Wb(r,e)){const o=e.get();return ye(o,o.length-1)}{ds(e.get());const o=Ub(r,!1);return e.set(o),ye(o,o.length-1)}}),n=>{ds(e.get());const r=ZN(n);return e.set(r),O.some(ye(r,1))}),Vb=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return O.none()},dr=Io([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Kb=(e,t)=>Di(t,e)||e,eA=(e,t,n)=>{const r=c0(n),o=Kb(t,r.container());return zi(e,o,r).fold(()=>yr(o,r).bind(ge(zi,e,o)).map(i=>dr.before(i)),O.none)},tA=(e,t)=>null===hs(e,t),Xb=(e,t,n)=>zi(e,t,n).filter(ge(tA,t)),nA=(e,t,n)=>{const r=d0(n);return Xb(e,t,r).bind(o=>Tr(o,r).isNone()?O.some(dr.start(o)):O.none())},rA=(e,t,n)=>{const r=c0(n);return Xb(e,t,r).bind(o=>yr(o,r).isNone()?O.some(dr.end(o)):O.none())},oA=(e,t,n)=>{const r=d0(n),o=Kb(t,r.container());return zi(e,o,r).fold(()=>Tr(o,r).bind(ge(zi,e,o)).map(i=>dr.after(i)),O.none)},Yb=e=>!l0(rp(e)),Vo=(e,t,n)=>Vb([eA,nA,rA,oA],[e,t,n]).filter(Yb),rp=e=>e.fold(K,K,K,K),Gb=e=>e.fold(J("before"),J("start"),J("end"),J("after")),bd=e=>e.fold(dr.before,dr.before,dr.after,dr.after),op=e=>e.fold(dr.start,dr.start,dr.end,dr.end),iA=(e,t,n,r,o,i)=>Xn(zi(t,n,r),zi(t,n,o),(s,a)=>s!==a&&((c,d,f)=>{const p=Di(d,c),_=Di(f,c);return N(p)&&p===_})(n,s,a)?dr.after(e?s:a):i).getOr(i),sA=(e,t)=>e.fold(ft,n=>{return o=t,!(Gb(r=n)===Gb(o)&&rp(r)===rp(o));var r,o}),aA=(e,t)=>e?t.fold(B(O.some,dr.start),O.none,B(O.some,dr.after),O.none):t.fold(O.none,B(O.some,dr.before),O.none,B(O.some,dr.end)),Jb=(e,t,n)=>{const r=e?1:-1;return t.setRng(ye(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Ko;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Ko||(Ko={}));const wd=(e,t)=>e===$n.Backwards?Pt(t):t,lA=(e,t,n)=>e===$n.Forwards?t.next(n):t.prev(n),cA=(e,t,n,r)=>hn(r.getNode(t===$n.Forwards))?Ko.Br:!1===zo(n,r)?Ko.Block:Ko.Wrap,Qb=(e,t,n,r)=>{const o=$o(n);let i=r;const s=[];for(;i;){const a=lA(t,o,i);if(!a)break;if(hn(a.getNode(!1)))return t===$n.Forwards?{positions:wd(t,s).concat([a]),breakType:Ko.Br,breakAt:O.some(a)}:{positions:wd(t,s),breakType:Ko.Br,breakAt:O.some(a)};if(a.isVisible()){if(e(i,a)){const c=cA(0,t,i,a);return{positions:wd(t,s),breakType:c,breakAt:O.some(a)}}s.push(a),i=a}else i=a}return{positions:wd(t,s),breakType:Ko.Eol,breakAt:O.none()}},Zb=(e,t,n,r)=>t(n,r).breakAt.map(o=>{const i=t(n,o).positions;return e===$n.Backwards?i.concat(o):[o].concat(i)}).getOr([]),ip=(e,t)=>et(e,(n,r)=>n.fold(()=>O.some(r),o=>Xn(jn(o.getClientRects()),jn(r.getClientRects()),(i,s)=>{const a=Math.abs(t-i.left);return Math.abs(t-s.left)<=a?r:o}).or(n)),O.none()),xd=(e,t)=>jn(t.getClientRects()).bind(n=>ip(e,n.left)),Rl=ge(Qb,ye.isAbove,-1),jl=ge(Qb,ye.isBelow,1),e1=ge(Zb,-1,Rl),t1=ge(Zb,1,jl),n1=(e,t)=>Rl(e,t).breakAt.isNone(),r1=(e,t)=>jl(e,t).breakAt.isNone(),dA=(e,t)=>xd(e1(e,t),t),uA=(e,t)=>xd(t1(e,t),t),hA=tn,o1=(e,t)=>Math.abs(e.left-t),i1=(e,t)=>Math.abs(e.right-t),s1=(e,t)=>go(e,(n,r)=>{const o=Math.min(o1(n,t),i1(n,t)),i=Math.min(o1(r,t),i1(r,t));return i===o&&fn(r,"node")&&hA(r.node)||i<o?r:n}),fA=e=>{const t=n=>pt(n,r=>{const o=ls(r);return o.node=e,o});if(Ye(e))return t(e.getClientRects());if(Me(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},a1=e=>We(e,fA);var Dl;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Dl||(Dl={}));const l1=(e,t,n,r,o,i)=>{let s=0;const a=[],c=p=>{let _=a1([p]);-1===e&&(_=_.reverse());for(let w=0;w<_.length;w++){const y=_[w];if(!n(y,d)){if(a.length>0&&t(y,ro(a))&&s++,y.line=s,o(y))return!0;a.push(y)}}return!1},d=ro(i.getClientRects());if(!d)return a;const f=i.getNode();return f&&(c(f),((p,_,w,y)=>{let S=y;for(;S=cl(S,p,kg,_);)if(w(S))return})(e,r,c,f)),a},pA=ge(l1,Dl.Up,tl,nl),gA=ge(l1,Dl.Down,nl,tl),c1=e=>ro(e.getClientRects()),d1=e=>t=>t.line>e,sp=e=>t=>t.line===e,di=(e,t)=>{e.selection.setRng(t),_l(e,e.selection.getRng())},ap=(e,t,n)=>O.some(Gf(e,t,n)),u1=(e,t,n,r,o,i)=>{const s=t===$n.Forwards,a=$o(e.getBody()),c=ge(nh,s?a.next:a.prev),d=s?r:o;if(!n.collapsed){const y=Ec(n);if(i(y))return ci(t,e,y,t===$n.Backwards,!1);if(Zf(e)){const S=n.cloneRange();return S.collapse(t===$n.Backwards),O.from(S)}}const f=hl(t,e.getBody(),n);if(d(f))return Ol(e,f.getNode(!s));let p=c(f);const _=wg(n);if(!p)return _?O.some(n):O.none();if(p=Kr(s,p),d(p))return ci(t,e,p.getNode(!s),s,!1);const w=c(p);return w&&d(w)&&Pc(p,w)?ci(t,e,w.getNode(!s),s,!1):_?ap(e,p.toRange(),!1):O.none()},h1=(e,t,n,r,o,i)=>{const s=hl(t,e.getBody(),n),a=ro(s.getClientRects()),c=t===Dl.Down,d=e.getBody();if(!a)return O.none();if(Zf(e)){const S=c?ye.fromRangeEnd(n):ye.fromRangeStart(n);return(c?uA:dA)(d,S).orThunk(()=>O.from(S)).map(b=>b.toRange())}const f=(c?gA:pA)(d,d1(1),s),p=ot(f,sp(1)),_=a.left,w=s1(p,_);if(w&&i(w.node)){const S=Math.abs(_-w.left),b=Math.abs(_-w.right);return ci(t,e,w.node,S<b,!1)}let y;if(y=r(s)?s.getNode():o(s)?s.getNode(!0):Ec(n),y){const S=((T,j,D,F)=>{const z=$o(j);let Y,re,ie,ce;const me=[];let Q=0;1===T?(Y=z.next,re=nl,ie=tl,ce=ye.after(F)):(Y=z.prev,re=tl,ie=nl,ce=ye.before(F));const ee=c1(ce);do{if(!ce.isVisible())continue;const he=c1(ce);if(ie(he,ee))continue;me.length>0&&re(he,ro(me))&&Q++;const we=ls(he);if(we.position=ce,we.line=Q,D(we))return me;me.push(we)}while(ce=Y(ce));return me})(t,d,d1(1),y);let b=s1(ot(S,sp(1)),_);if(b||(b=ro(ot(S,sp(0))),b))return ap(e,b.position.toRange(),!1)}return 0===p.length?lp(e,c).filter(c?o:r).map(S=>Gf(e,S.toRange(),!1)):O.none()},lp=(e,t)=>{const n=e.selection.getRng(),r=t?ye.fromRangeEnd(n):ye.fromRangeStart(n),o=(i=r.container(),s=e.getBody(),or(X(i),a=>fE(a.dom),a=>a.dom===s).map(a=>a.dom).getOr(s));var i,s;if(t){const a=jl(o,r);return Zr(a.positions)}{const a=Rl(o,r);return jn(a.positions)}},f1=(e,t,n)=>lp(e,t).filter(n).exists(r=>(e.selection.setRng(r.toRange()),!0)),Cd=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},p1=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},g1=(e,t,n)=>np(t,n).map(r=>(Cd(e,r),n)),m1=(e,t,n)=>!!sl(e)&&((e,t,n)=>{const r=e.getBody(),o=((i,s,a)=>{const c=ye.fromRangeStart(i);if(i.collapsed)return c;{const d=ye.fromRangeEnd(i);return a?Tr(s,d).getOr(d):yr(s,c).getOr(c)}})(e.selection.getRng(),r,n);return((i,s,a,c)=>{const d=Kr(i,c),f=Vo(s,a,d);return Vo(s,a,d).bind(ge(aA,i)).orThunk(()=>((p,_,w,y,S)=>{const b=Kr(p,S);return qr(p,w,b).map(ge(Kr,p)).fold(()=>y.map(bd),T=>Vo(_,w,T).map(ge(iA,p,_,w,b,T)).filter(ge(sA,y))).filter(Yb)})(i,s,a,f,c))})(n,ge(ys,e),r,o).bind(i=>g1(e,t,i))})(e,t,n).isSome(),v1=(e,t,n)=>!!sl(t)&&((r,o)=>{const i=o.selection.getRng(),s=r?ye.fromRangeEnd(i):ye.fromRangeStart(i);return!!P(o.selection.getSel().modify)&&(r&&vu(s)?Jb(!0,o.selection,s):!(r||!_u(s))&&Jb(!1,o.selection,s))})(e,t),_A=ge(v1,!0),yA=ge(v1,!1),kd=(e,t,n)=>{if(sl(e)){const r=lp(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?ye.fromRangeEnd(o):ye.fromRangeStart(o)});return Vo(ge(ys,e),e.getBody(),r).exists(o=>{const i=bd(o);return np(n,i).exists(s=>(Cd(e,s),!0))})}return!1},_1=(e,t)=>n=>np(t,n).map(r=>()=>Cd(e,r)),y1=(e,t,n,r)=>{const o=e.getBody(),i=ge(ys,e);e.undoManager.ignore(()=>{e.selection.setRng(((s,a)=>{const c=document.createRange();return c.setStart(s.container(),s.offset()),c.setEnd(a.container(),a.offset()),c})(n,r)),Yh(e),Vo(i,o,ye.fromRangeStart(e.selection.getRng())).map(op).bind(_1(e,t)).each(ue)}),e.nodeChanged()},cp=(e,t,n)=>{if(e.selection.isCollapsed()&&sl(e)){const r=ye.fromRangeStart(e.selection.getRng());return((o,i,s,a)=>{const c=(p=o.getBody(),_=a.container(),Di(_,p)||p),d=ge(ys,o),f=Vo(d,c,a);var p,_;return f.bind(p=>s?p.fold(J(O.some(op(p))),O.none,J(O.some(bd(p))),O.none):p.fold(O.none,J(O.some(bd(p))),O.none,J(O.some(op(p))))).map(_1(o,i)).getOrThunk(()=>{const p=ea(s,c,a),_=p.bind(w=>Vo(d,c,w));return Xn(f,_,()=>zi(d,c,a).bind(w=>{return Xn(ar(y=w),fo(y),(S,b)=>{const T=Kr(!0,S),j=Kr(!1,b);return yr(y,T).forall(D=>D.isEqual(j))}).getOr(!0)?O.some(()=>{_s(o,s,X(w))}):O.none();var y})).getOrThunk(()=>_.bind(()=>p.map(w=>()=>{s?y1(o,i,a,w):y1(o,i,w,a)})))})})(e,t,n,r)}return O.none()},b1=(e,t)=>{const n=X(e.getBody()),r=X(e.selection.getStart()),o=li(r,n);return Ee(o,t).fold(J(o),i=>o.slice(0,i))},bA=e=>1===ao(e),w1=(e,t)=>{const n=ge(F0,e);return We(t,r=>n(r)?[r.dom]:[])},x1=e=>{const t=b1(e,$r);return w1(e,t)},C1=(e,t)=>{const n=e.selection.getStart(),r=((o,i)=>{const s=i.parentElement;return hn(i)&&!k(s)&&o.dom.isEmpty(s)})(e,n)||$0(X(n))?z0(n,t):((o,i)=>{const{caretContainer:s,caretPosition:a}=I0(i);return o.insertNode(s.dom),a})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},k1=e=>Me(e.startContainer),dp=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=ot(b1(e,o=>$r(o)||ao(o)>1),bA);return Zr(n).bind(r=>{const o=ye.fromRangeStart(e.selection.getRng());return h0(t,o,r.dom)&&!$0(r)?O.some(()=>((i,s,a,c)=>{const d=w1(s,c);if(0===d.length)_s(s,i,a);else{const f=z0(a.dom,d);s.selection.setRng(f.toRange())}})(t,e,r,n)):O.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&k1(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!k(o)&&F0(n,X(o))})(e,t)&&(n=>{return(o=>{const i=o.startContainer.parentNode,s=o.endContainer.parentNode;return!k(i)&&!k(s)&&i.isEqualNode(s)})(r=n)&&(o=>{const i=o.endContainer;return o.endOffset===(Me(i)?i.length:i.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(t);var n})(n)){const r=x1(n);return O.some(()=>{Yh(n),((o,i)=>{const s=Ze(i,x1(o));s.length>0&&C1(o,s)})(n,r)})}return O.none()})(e),Pl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(k1(n)||t.dom.isEmpty(n.startContainer))&&!(e=>or(e,o=>po(o.dom),$r).isSome())(X(t.selection.getStart()))})(e)&&C1(e,[]),!0),up=(e,t,n)=>N(n)?O.some(()=>{e._selectionOverrides.hideFakeCaret(),_s(e,t,X(n))}):O.none(),hp=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=r?yl:bl,s=hl(r?$n.Forwards:$n.Backwards,n.getBody(),n.selection.getRng());return o(s)?up(n,r,s.getNode(!r)):O.from(Kr(r,s)).filter(a=>o(a)&&Pc(s,a)).bind(a=>up(n,r,a.getNode(!r)))})(e,t):((n,r)=>{const o=n.selection.getNode();return Mo(o)?up(n,r,o):O.none()})(e,t),fp=e=>Vi(e??"").getOr(0),S1=(e,t)=>(e||"table"===Yt(t)?"margin":"padding")+("rtl"===G(t,"direction")?"-right":"-left"),E1=e=>{const t=N1(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,tt(t,o=>{const i=S1(zm(n),o),s=Se(o,i).map(fp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&s>0})));var n},T1=e=>mu(e)||qa(e),N1=e=>ot(Nn(e.selection.getSelectedBlocks()),t=>!T1(t)&&!rr(t).exists(T1)&&Bo(t,n=>xo(n.dom)||tn(n.dom)).exists(n=>xo(n.dom))),A1=(e,t)=>{var n,r;const{dom:o}=e,i=aS(e),s=null!==(r=null===(n=/[a-z%]+$/i.exec(i))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",a=fp(i),c=zm(e);ke(N1(e),d=>{((f,p,_,w,y,S)=>{const b=S1(_,X(S)),T=fp(f.getStyle(S,b));if("outdent"===p){const j=Math.max(0,T-w);f.setStyle(S,b,j?j+y:"")}else f.setStyle(S,b,T+w+y)})(o,t,c,a,s,d.dom)})},O1=e=>A1(e,"outdent"),R1=e=>{if(e.selection.isCollapsed()&&E1(e)){const t=e.dom,n=e.selection.getRng(),r=ye.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(null!==o&&Hh(X(o),r))return O.some(()=>O1(e))}return O.none()},j1=(e,t,n)=>Kn([R1,ep,Jf,(r,o)=>cp(r,t,o),Xf,of,tp,hp,Yf,dp],r=>r(e,n)).filter(r=>e.selection.isEditable()),D1=e=>void 0===e.touches||1!==e.touches.length?O.none():O.some(e.touches[0]),pp=(e,t)=>ut(e,t.nodeName),SA=(e,t)=>!!Me(t)||!!Ye(t)&&!pp(e.getBlockElements(),t)&&!Ur(t)&&!ns(e,t),EA=(e,t)=>!(!Me(t)||0!==t.data.length&&(!/^\s+$/.test(t.data)||t.nextSibling&&!pp(e,t.nextSibling))),P1=e=>e.dom.create(sr(e),il(e)),TA=e=>{const t=e.dom,n=e.selection,r=e.schema,o=r.getBlockElements(),i=n.getStart(),s=e.getBody();let a,c,d=!1;const f=sr(e);if(!i||!Ye(i))return;const p=s.nodeName.toLowerCase();if(!r.isValidChild(p,f.toLowerCase())||(D=o,F=s,Ht(q_(X(i),X(F)),Y=>pp(D,Y.dom))))return;var D,F;const _=n.getRng(),{startContainer:w,startOffset:y,endContainer:S,endOffset:b}=_,T=vs(e);let j=s.firstChild;for(;j;)if(Ye(j)&&yk(r,j),SA(r,j)){if(EA(o,j)){c=j,j=j.nextSibling,t.remove(c);continue}a||(a=P1(e),s.insertBefore(a,j),d=!0),c=j,j=j.nextSibling,a.appendChild(c)}else a=null,j=j.nextSibling;d&&T&&(_.setStart(w,y),_.setEnd(S,b),n.setRng(_),e.nodeChanged())},B1=(e,t,n)=>{const r=X(P1(e)),o=Wa();Qe(r,o),n(t,r);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},L1=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),NA=(e,t,n)=>function(r){const o=arguments,i=o[o.length-2],s=i>0?t.charAt(i-1):"";if('"'===s)return r;if(">"===s){const a=t.lastIndexOf("<",i);if(-1!==a&&-1!==t.substring(a,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},M1=(e,t)=>{t.hasAttribute("data-mce-caret")&&(yu(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},AA=(e,t)=>{const n=Lo(X(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void M1(e,n)):void(bg(n)&&(M1(e,n),e.undoManager.add()))},I1=tn,z1=(e,t,n)=>{const r=$o(e.getBody()),o=ge(nh,1===t?r.next:r.prev);if(n.collapsed){const i=e.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!o(ye.fromRangeStart(n))){const s=X((a=>{const c=a.dom.create(sr(a));return c.innerHTML='<br data-mce-bogus="1">',c})(e));1===t?it(X(i),s):nt(X(i),s),e.selection.select(s.dom,!0),e.selection.collapse()}}},F1=(e,t)=>((n,r)=>{const o=r?$n.Forwards:$n.Backwards,i=n.selection.getRng();return(s=o,a=n,c=i,u1(a,s,c,Mi,Ii,I1)).orThunk(()=>(z1(n,o,i),O.none()));var s,a,c})(e,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return l0(o)?!r:r})(e.selection,t)).exists(n=>(di(e,n),!0)),$1=(e,t)=>((n,r)=>{const o=r?1:-1,i=n.selection.getRng();return(s=o,a=n,c=i,h1(a,s,c,d=>Mi(d)||$_(d),d=>Ii(d)||H_(d),I1)).orThunk(()=>(z1(n,o,i),O.none()));var s,a,c})(e,t).exists(n=>(di(e,n),!0)),H1=(e,t)=>f1(e,t,t?Ii:Mi),Sd=(e,t)=>Qf(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(di(e,n),!0)),OA=e=>Oe(["figcaption"],Yt(e)),q1=(e,t)=>!!e.selection.isCollapsed()&&((n,r)=>{const o=X(n.getBody()),i=ye.fromRangeStart(n.selection.getRng());return((s,a)=>{const c=ge(Dt,a);return Bo(X(s.container()),$r,c).filter(OA)})(i,o).exists(()=>{if(s=o,c=i,r?r1(s.dom,c):n1(s.dom,c)){const s=B1(n,o,r?Qe:bt);return n.selection.setRng(s),!0}var s,c;return!1})})(e,t),U1=(e,t)=>{return n=e,t?O.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((i,s)=>{const a=i.selection.getRng(),c=ye.fromRangeStart(a);return!(i.getBody().lastChild!==s||!r1(s,c)||(i.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):O.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>O.from(n.dom.getParent(o,"details")).map(i=>((s,a,c)=>{const d=s.selection.getRng(),f=ye.fromRangeStart(d);return!(s.getBody().firstChild!==a||!n1(c,f)||(s.execCommand("InsertNewBlockBefore"),0))})(n,i,o))).getOr(!1);var n},W1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},V1=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,lt=(e,...t)=>()=>e.apply(null,t),Bl=(e,t)=>{return Z((r=t,We(pt(e,i=>({...W1,...i})),o=>V1(o,r)?[o]:[])),n=>n.action());var r},K1=(e,t)=>{return Kn((r=t,We(pt(e,i=>({...W1,...i})),o=>V1(o,r)?[o]:[])),n=>n.action());var r},X1=(e,t)=>{const n=t?$n.Forwards:$n.Backwards,r=e.selection.getRng();return u1(e,n,r,yl,bl,Mo).exists(o=>(di(e,o),!0))},Y1=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return h1(e,n,r,yl,bl,Mo).exists(o=>(di(e,o),!0))},G1=(e,t)=>f1(e,t,t?bl:yl),J1=Io([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ll={...J1,none:e=>J1.none(e)},Q1=(e,t,n)=>We(Qt(e),r=>on(r,t)?n(r)?[r]:[]:Q1(r,t,n)),Z1=(e,t)=>co(e,"table",t),gp=(e,t,n,r,o=ft)=>{const i=1===r;if(!i&&n<=0)return Ll.first(e[0]);if(i&&n>=e.length-1)return Ll.last(e[e.length-1]);{const s=n+r,a=e[s];return o(a)?Ll.middle(t,a):gp(e,t,s,r,o)}},ew=(e,t)=>Z1(e,t).bind(n=>{const r=Q1(n,"th,td",ft);return Ee(r,o=>Dt(e,o)).map(o=>({index:o,all:r}))}),tw=(e,t,n,r,o)=>{const i=Qn(X(n),"td,th,caption").map(a=>a.dom);var a;return((a,c,d)=>et(a,(f,p)=>f.fold(()=>O.some(p),_=>{const w=Math.sqrt(Math.abs(_.x-c)+Math.abs(_.y-d)),y=Math.sqrt(Math.abs(p.x-c)+Math.abs(p.y-d));return O.some(y<w?p:_)}),O.none()))(ot((a=e,We(i,d=>{const f={left:(p=ls(d.getBoundingClientRect())).left- -1,top:p.top- -1,right:p.right+-2,bottom:p.bottom+-2,width:p.width+-1,height:p.height+-1};var p;return[{x:f.left,y:a(f),cell:d},{x:f.right,y:a(f),cell:d}]})),a=>t(a,o)),r,o).map(a=>a.cell)},RA=ge(tw,e=>e.bottom,(e,t)=>e.y<t),jA=ge(tw,e=>e.top,(e,t)=>e.y>t),nw=(e,t,n)=>{const r=e(t,n);return(o=r).breakType===Ko.Wrap&&0===o.positions.length||!hn(n.getNode())&&(o=>o.breakType===Ko.Br&&1===o.positions.length)(r)?!((o,i,s)=>s.breakAt.exists(a=>o(i,a).breakAt.isSome()))(e,t,r):r.breakAt.isNone();var o},DA=ge(nw,Rl),PA=ge(nw,jl),BA=(e,t,n,r)=>{const o=e.selection.getRng(),i=t?1:-1;return!(!ev()||!((s,a,c)=>{const d=ye.fromRangeStart(a);return ta(!s,c).exists(f=>f.isEqual(d))})(t,o,n)||(ci(i,e,n,!t,!1).each(s=>{di(e,s)}),0))},rw=(e,t,n)=>{const r=((i,s)=>{const a=s.getNode(i);return oi(a)?O.some(a):O.none()})(!!t,n),o=!1===t;r.fold(()=>di(e,n.toRange()),i=>ta(o,e.getBody()).filter(s=>s.isEqual(n)).fold(()=>di(e,n.toRange()),s=>{return a=t,d=i,void(c=e).undoManager.transact(()=>{const f=a?it:nt,p=B1(c,X(d),f);di(c,p)});var a,c,d}))},LA=(e,t,n,r)=>{const o=e.selection.getRng(),i=ye.fromRangeStart(o),s=e.getBody();if(!t&&DA(r,i)){const a=(c=s,(p=d=n,_=f=i,jn(_.getClientRects()).bind(w=>RA(p,w.left,w.top)).bind(w=>{return xd(fo(y=w).map(S=>Rl(y,S).positions.concat(S)).getOr([]),_);var y})).orThunk(()=>jn(f.getClientRects()).bind(p=>ip(e1(c,ye.before(d)),p.left))).getOr(ye.before(d)));return rw(e,t,a),!0}var c,d,f,p,_;if(t&&PA(r,i)){const a=((c,d,f)=>((p,_)=>Zr(_.getClientRects()).bind(w=>jA(p,w.left,w.top)).bind(w=>{return xd(ar(y=w).map(S=>[S].concat(jl(y,S).positions)).getOr([]),_);var y}))(d,f).orThunk(()=>jn(f.getClientRects()).bind(p=>ip(t1(c,ye.after(d)),p.left))).getOr(ye.after(d)))(s,n,i);return rw(e,t,a),!0}return!1},ow=(e,t,n)=>O.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>O.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),iw=(e,t)=>ow(e,t,BA),mp=(e,t)=>ow(e,t,LA),sw=(e,t,n)=>n.fold(O.none,O.none,(r,o)=>{return(i=o,((s,a)=>{const c=d=>{for(let f=0;f<d.childNodes.length;f++){const p=X(d.childNodes[f]);if(a(p))return O.some(p);const _=c(d.childNodes[f]);if(_.isSome())return _}return O.none()};return c(s.dom)})(i,E_)).map(s=>{return(e=>{const t=sa.getWin(e).dom,n=(o,i,s,a)=>xh(t,o,i,s,a),r=e.match({domRange:i=>{const s=X(i.startContainer),a=X(i.endContainer);return t_(s,i.startOffset,a,i.endOffset)},relative:DE,exact:t_});return((o,i)=>{var a;return((a,c)=>{const d=c.ltr();return d.collapsed?c.rtl().filter(f=>!1===f.collapsed).map(f=>vl.rtl(X(f.endContainer),f.endOffset,X(f.startContainer),f.startOffset)).getOrThunk(()=>Zv(0,vl.ltr,d)):Zv(0,vl.ltr,d)})(0,(a=o,i.match({domRange:d=>({ltr:J(d),rtl:O.none}),relative:(d,f)=>({ltr:Jo(()=>Qv(a,d,f)),rtl:Jo(()=>O.some(Qv(a,f,d)))}),exact:(d,f,p,_)=>({ltr:Jo(()=>xh(a,d,f,p,_)),rtl:Jo(()=>O.some(xh(a,p,_,d,f)))})})))})(t,r).match({ltr:n,rtl:n})})(sa.exact(a=s,0,a,0));var a});var i},r=>(e.execCommand("mceTableInsertRowAfter"),aw(e,t,r))),aw=(e,t,n)=>{return sw(e,t,(o=bo,ew(r=n,void 0).fold(()=>Ll.none(r),i=>gp(i.all,r,i.index,1,o))));var r,o},MA=(e,t,n)=>{return sw(e,t,(o=bo,ew(r=n,void 0).fold(()=>Ll.none(),i=>gp(i.all,r,i.index,-1,o))));var r,o},lw=(e,t)=>{const n=["table","li","dl"],r=X(e.getBody()),o=s=>{const a=Yt(s);return Dt(s,r)||Oe(n,a)},i=e.selection.getRng();return(s=X(t?i.endContainer:i.startContainer),a=o,((c,d,f=Et)=>f(d)?O.none():Oe(c,Yt(d))?O.some(d):yo(d,c.join(","),p=>on(p,"table")||f(p)))(["td","th"],s,a)).map(s=>(Z1(s,o).each(a=>{e.model.table.clearSelectedCells(a.dom)}),e.selection.collapse(!t),(t?aw:MA)(e,o,s).each(a=>{e.selection.setRng(a)}),!0)).getOr(!1);var s,a},Ao=(e,t)=>({container:e,offset:t}),Ed=Gt.DOM,Td=e=>t=>e===t?-1:0,vp=(e,t,n)=>{if(Me(e)&&t>=0)return O.some(Ao(e,t));{const r=as(Ed);return O.from(r.backwards(e,t,Td(e),n)).map(o=>Ao(o.container,o.container.data.length))}},_p=(e,t,n)=>{if(!Me(e))return O.none();if(t>=0&&t<=e.data.length)return O.some(Ao(e,t));{const o=as(Ed);return O.from(o.backwards(e,t,Td(e),n)).bind(i=>_p(i.container,t+i.container.data.length,n))}},cw=(e,t,n)=>{if(!Me(e))return O.none();const r=e.data;if(t<=r.length)return O.some(Ao(e,t));{const o=as(Ed);return O.from(o.forwards(e,t,Td(e),n)).bind(i=>cw(i.container,t-r.length,n))}},yp=(e,t,n,r,o)=>{const i=as(e,(s=e,a=>s.isBlock(a)||Oe(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===s.getContentEditable(a)));var s;return O.from(i.backwards(t,n,r,o))},dw=e=>ii(e.toString().replace(/\u00A0/g," ")),uw=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),bp=(e,t)=>e.substring(t.length),hw=(e,t,n,r=0)=>{return(o=X(t.startContainer),co(o,T_)).fold(()=>((i,s,a,c=0)=>{if(!(d=s).collapsed||!Me(d.startContainer))return O.none();var d;const f={text:"",offset:0},p=i.getParent(s.startContainer,i.isBlock)||i.getRoot();return yp(i,s.startContainer,s.startOffset,(_,w,y)=>(f.text=y+f.text,f.offset+=w,((S,b,T)=>{let j;const D=T.charAt(0);for(j=b-1;j>=0;j--){const F=S.charAt(j);if(uw(F))return O.none();if(D===F&&yn(S,T,j,b))break}return O.some(j)})(f.text,f.offset,a).getOr(w)),p).bind(_=>{const w=s.cloneRange();if(w.setStart(_.container,_.offset),w.setEnd(s.endContainer,s.endOffset),w.collapsed)return O.none();const y=dw(w);return 0!==y.lastIndexOf(a)||bp(y,a).length<c?O.none():O.some({text:bp(y,a),range:w,trigger:a})})})(e,t,n,r),i=>{const s=e.createRng();s.selectNode(i.dom);const a=dw(s);return O.some({range:s,text:bp(a,n),trigger:n})});var o},fw=e=>{if(3===e.nodeType)return Ao(e,e.data.length);{const t=e.childNodes;return t.length>0?fw(t[t.length-1]):Ao(e,t.length)}},pw=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?pw(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?fw(n[n.length-1]):Ao(e,t)},gw=(e,t,n,r={})=>{var o;const i=t(),s=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",a=ot(i.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return f=e.dom,p=>{const _=pw(p.startContainer,p.startOffset);return!((w,y)=>{var S;const b=null!==(S=w.getParent(y.container,w.isBlock))&&void 0!==S?S:w.getRoot();return yp(w,y.container,y.offset,(T,j)=>0===j?-1:j,b).filter(T=>{const j=T.container.data.charAt(T.offset-1);return!uw(j)}).isSome()})(f,_)};var f})(n.range,s,n.text));if(0===a.length)return O.none();const c=Promise.all(pt(a,d=>d.fetch(n.text,d.maxResults,r).then(f=>({matchText:n.text,items:f,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return O.some({lookupData:c,context:n})};var Xo;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Xo||(Xo={}));const wp=(e,t,n)=>e.stype===Xo.Error?t(e.serror):n(e.svalue),pa=e=>({stype:Xo.Value,svalue:e}),Ml=e=>({stype:Xo.Error,serror:e}),IA=wp,xp=e=>M(e)&&_n(e).length>100?" removed due to size":JSON.stringify(e,null,2),Nd=(e,t)=>Ml([{path:e,getErrorInfo:t}]),mw=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const i in o)ut(o,i)&&(n[i]=e(n[i],o[i]))}return n},Cp=mw((e,t)=>ae(e)&&ae(t)?Cp(e,t):t),vw=(mw((e,t)=>t),e=>({tag:"defaultedThunk",process:J(e)})),_w=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},kp=e=>({extract:(t,n)=>{return(r=e(n)).stype===Xo.Error?Nd(t,J(r.serror)):r;var r},toString:J("val")}),$A=kp(pa),yw=(e,t,n,r)=>r(qt(e,t).getOrThunk(()=>n(e))),HA=(e,t,n,r,o)=>{const i=a=>o.extract(t.concat([r]),a),s=a=>a.fold(()=>pa(O.none()),c=>{return(f=o.extract(t.concat([r]),c)).stype===Xo.Value?{stype:Xo.Value,svalue:(0,O.some)(f.svalue)}:f;var f});switch(e.tag){case"required":return a=t,f=i,qt(c=n,d=r).fold(()=>{return _=d,w=c,Nd(a,()=>'Could not find valid *required* value for "'+_+'" in '+xp(w));var _,w},f);case"defaultedThunk":return yw(n,r,e.process,i);case"option":return((a,c,d)=>d(qt(a,c)))(n,r,s);case"defaultedOptionThunk":return((a,c,d,f)=>f(qt(a,c).map(p=>!0===p?d(a):p)))(n,r,e.process,s);case"mergeWithThunk":return yw(n,r,J({}),a=>{const c=Cp(e.process(n),a);return i(c)})}var a,c,d,f},Sp=e=>({extract:(t,n)=>((r,o,i)=>{const s={},a=[];for(const c of i)_w(c,(d,f,p,_)=>{const w=HA(p,r,o,d,_);IA(w,y=>{a.push(...y)},y=>{s[f]=y})},(d,f)=>{s[d]=f(o)});return a.length>0?Ml(a):pa(s)})(t,n,e),toString:()=>"obj{\n"+pt(e,n=>_w(n,(r,o,i,s)=>r+" -> "+s.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),bw=e=>({extract:(t,n)=>(e=>{const t=(r=>{const o=[],i=[];return ke(r,s=>{wp(s,a=>i.push(a),a=>o.push(a))}),{values:o,errors:i}})(e);return t.errors.length>0?(n=t.errors,B(Ml,qe)(n)):pa(t.values);var n})(pt(n,(o,i)=>e.extract(t.concat(["["+i+"]"]),o))),toString:()=>"array("+e.toString()+")"}),ww=(e,t)=>((e,t)=>({extract:(n,r)=>qt(r,e).fold(()=>{return i=e,Nd(n,()=>'Choice schema did not contain choice key: "'+i+'"');var i},o=>{return i=n,s=r,qt(a=t,c=o).fold(()=>{return f=a,p=c,Nd(i,()=>'The chosen schema: "'+p+'" did not exist in branches: '+xp(f));var f,p},d=>d.extract(i.concat(["branch: "+c]),s));var i,s,a,c}),toString:()=>"chooseOn("+e+"). Possible values: "+_n(t)}))(e,eo(t,Sp)),UA=J($A),Ad=(e,t)=>kp(n=>{const r=typeof n;return e(n)?pa(n):Ml(`Expected type: ${t} but got: ${r}`)}),WA=Ad(m,"number"),Od=Ad(W,"string"),VA=Ad(g,"boolean"),Ep=Ad(P,"function"),Il=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),xw=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Cw=(e,t)=>Il(e,e,{tag:"required",process:{}},t),kw=e=>Cw(e,Od),Sw=e=>Cw(e,Ep),Tp=(e,t)=>Il(e,e,{tag:"option",process:{}},t),Rd=e=>Tp(e,Od),ga=(e,t,n)=>Il(e,e,vw(t),n),Ew=(e,t)=>ga(e,t,WA),Tw=(e,t,n)=>{return ga(e,t,(r=n,o=i=>Oe(r,i)?_r.value(i):_r.error(`Unsupported value: "${i}", choose one of "${r.join(", ")}".`),kp(i=>o(i).fold(Ml,pa))));var r,o},Np=(e,t)=>ga(e,t,VA),Ap=(e,t)=>ga(e,t,Ep),KA=kw("type"),XA=Sw("fetch"),Op=Sw("onAction"),YA=Ap("onSetup",()=>I),GA=Rd("text"),JA=Rd("icon"),QA=Rd("tooltip"),ZA=Rd("label"),eO=Np("active",!1),tO=Np("enabled",!0),Nw=Np("primary",!1),zl=e=>ga("type",e,Od),nO=Sp([KA,kw("trigger"),Ew("minChars",1),((e,t)=>Il(e,e,vw(1),UA()))("columns"),Ew("maxResults",10),Tp("matches",Ep),XA,Op,(Aw=Od,ga("highlightOn",[],bw(Aw)))]);var Aw;const Rp=[tO,QA,JA,GA,YA],Ow=[eO].concat(Rp),rO=[Ap("predicate",Et),Tw("scope","node",["node","editor"]),Tw("position","selection",["node","selection","line"])],oO=Rp.concat([zl("contextformbutton"),Nw,Op,xw("original",K)]),iO=Ow.concat([zl("contextformbutton"),Nw,Op,xw("original",K)]),sO=Rp.concat([zl("contextformbutton")]),aO=Ow.concat([zl("contextformtogglebutton")]),lO=ww("type",{contextformbutton:oO,contextformtogglebutton:iO});Sp([zl("contextform"),Ap("initValue",J("")),ZA,((e,t)=>Il(e,e,{tag:"required",process:{}},bw(t)))("commands",lO),Tp("launch",ww("type",{contextformbutton:sO,contextformtogglebutton:aO}))].concat(rO));const dO=e=>{const t=Oi(),n=Fn(!1),r=t.isSet,o=()=>{r()&&(wn(e).autocompleter.removeDecoration(),e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},i=Jo(()=>(e=>{const t=e.ui.registry.getAll().popups,n=eo(t,i=>{return(s=i,((e,t,n)=>{return r=(a=t.extract([e],s=n)).stype===Xo.Error?{stype:Xo.Error,serror:(a=>({input:s,errors:a}))(a.serror)}:a,wp(r,_r.error,_r.value);var s,a,r})("Autocompleter",nO,{trigger:s.ch,...s})).fold(a=>{throw new Error("Errors: \n"+(d=>{const f=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):d;return pt(f,p=>"Failed path: ("+p.path.join(" > ")+")\n"+p.getErrorInfo())})((c=a).errors).join("\n")+"\n\nInput object: "+xp(c.input));var c},K);var s}),r=Xt(fr(n,i=>i.trigger)),o=rn(n);return{dataset:n,triggers:r,lookupByTrigger:i=>ot(o,s=>s.trigger===i)}})(e)),s=a=>{var c;(c=a,t.get().map(d=>hw(e.dom,e.selection.getRng(),d.trigger).bind(f=>gw(e,i,f,c))).getOrThunk(()=>((d,f)=>{const p=f(),_=d.selection.getRng();return(w=d.dom,y=_,S=p,Kn(S.triggers,b=>hw(w,y,b))).bind(w=>gw(d,f,w));var w,y,S})(e,i))).fold(o,c=>{var d,p;d=c.context,r()||(p=d.range,wn(e).autocompleter.addDecoration(p),t.set({trigger:d.trigger,matchLength:d.text.length})),c.lookupData.then(d=>{t.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(p.text.length-f.matchLength>=10?o():(t.set({...f,matchLength:p.text.length}),n.get()?e.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),e.dispatch("AutocompleterStart",{lookupData:d}))))})})})};e.addCommand("mceAutocompleterReload",(a,c)=>{const d=M(c)?c.fetchOptions:{};s(d)}),e.addCommand("mceAutocompleterClose",o),((a,c)=>{const d=Iu(c.load,50);a.on("keypress compositionend",f=>{27!==f.which&&d.throttle()}),a.on("keydown",f=>{const p=f.which;8===p?d.throttle():27===p&&c.cancelIfNecessary()}),a.on("remove",d.cancel)})(e,{cancelIfNecessary:o,load:s})},uO=tr().browser.isSafari(),Rw=e=>Si(X(e)),jw=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},jd=(e,t)=>O.from(e.getParent(t.container(),"details")),Dw=(e,t)=>jd(e,t).isSome(),Pw=(e,t)=>{const n=t.getNode();x(n)||e.selection.setCursorLocation(n,t.offset())},Bw=(e,t,n)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const o=e.dom.select("summary",r)[0];o&&(n?ar(o):fo(o)).each(i=>Pw(e,i))}else Pw(e,t)},Lw=(e,t,n)=>{const{dom:r,selection:o}=e,i=e.getBody();if("character"===n){const s=ye.fromRangeStart(o.getRng()),a=r.getParent(s.container(),r.isBlock),c=jd(r,s),d=a&&r.isEmpty(a),f=k(a?.previousSibling),p=k(a?.nextSibling);return!!(d&&(t?p:f)&&ea(!t,i,s).exists(_=>Dw(r,_)&&!Ms(c,jd(r,_))))||ea(t,i,s).fold(Et,_=>{const w=jd(r,_);if(Dw(r,_)&&!Ms(c,w)){if(t||Bw(e,_,!1),a&&d){if(t&&f||!t&&p)return!0;Bw(e,_,t),e.dom.remove(a)}return!0}return!1})}return!1},Ss=(e,t,n)=>{return o=t,i=n,((s,a)=>{const c=O.from(s.getParent(a.startContainer,"details")),d=O.from(s.getParent(a.endContainer,"details"));if(c.isSome()||d.isSome()){const f=c.bind(p=>O.from(s.select("summary",p)[0]));return O.some({startSummary:f,startDetails:c,endDetails:d})}return O.none()})((r=e).dom,r.selection.getRng()).fold(()=>Lw(r,o,i),s=>((e,t,n,r)=>{const o=e.selection.getRng(),i=ye.fromRangeStart(o),s=e.getBody();return"selection"===r?((a,c)=>{const d=c.startSummary.exists(_=>_.contains(a.startContainer)),f=c.startSummary.exists(_=>_.contains(a.endContainer)),p=c.startDetails.forall(_=>c.endDetails.forall(w=>_!==w));return(d||f)&&!(d&&f)||p})(o,t):n?(a=i,t.startSummary.exists(d=>{return f=a,fo(p=d).exists(_=>hn(_.getNode())&&Tr(p,_).exists(w=>w.isEqual(f))||_.isEqual(f));var f,p})||((a,c,d)=>d.startDetails.exists(f=>yr(a,c).forall(p=>!f.contains(p.container()))))(s,i,t)):((a,c)=>c.startSummary.exists(d=>{return f=a,ar(d).exists(_=>_.isEqual(f));var f}))(i,t)||((a,c)=>c.startDetails.exists(d=>Tr(d,a).forall(f=>c.startSummary.exists(p=>!p.contains(a.container())&&p.contains(f.container())))))(i,t);var a})(r,s,o,i)||Lw(r,o,i))||uO&&((r,o,i)=>{const s=r.selection,a=s.getNode(),c=s.getRng(),d=ye.fromRangeStart(c);return!!ek(a)&&("selection"===i&&jw(c,a)||h0(o,d,a)?Rw(a):r.undoManager.transact(()=>{const f=s.getSel();let{anchorNode:p,anchorOffset:_,focusNode:w,focusOffset:y}=f??{};const S=()=>{N(p)&&N(_)&&N(w)&&N(y)&&f?.setBaseAndExtent(p,_,w,y)},b=(j,D)=>{ke(j.childNodes,F=>{pl(F)&&D.appendChild(F)})},T=r.dom.create("span",{"data-mce-bogus":"1"});b(a,T),a.appendChild(T),S(),"word"!==i&&"line"!==i||null==f||f.modify("extend",o?"right":"left",i),!s.isCollapsed()&&jw(s.getRng(),T)?Rw(a):(r.execCommand(o?"ForwardDelete":"Delete"),p=f?.anchorNode,_=f?.anchorOffset,w=f?.focusNode,y=f?.focusOffset,b(T,a),S()),r.dom.remove(T)}),!0)})(e,t,n)?O.some(I):O.none();var r,o,i},Mw=e=>(t,n,r={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:I,inputType:n},s=qg(new InputEvent(e));return t.dispatch(e,{...s,...i,...r})},Fl=Mw("input"),Dd=Mw("beforeinput"),Iw=tr(),zw=Iw.os,Fw=zw.isMacOS()||zw.isiOS(),fO=Iw.browser.isFirefox(),ma=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const i=(s=>{for(;s;){if(Ye(s)||Me(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(t.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(n.doc.createTextNode(zn),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const i=new Pn(t,t);let s,a=t;for(;s=i.current();){if(Me(s)){o.setStart(s,0),o.setEnd(s,0);break}if(r[s.nodeName.toLowerCase()]){o.setStartBefore(s),o.setEndBefore(s);break}a=s,s=i.next()}s||(o.setStart(a,0),o.setEnd(a,0))}else hn(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),_l(e,o)},$l=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},jp=e=>O.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Dp=e=>{e.innerHTML='<br data-mce-bogus="1">'},Hl=(e,t)=>{sr(e).toLowerCase()===t.tagName.toLowerCase()&&((n,r,o)=>{const i=n.dom;O.from(o.style).map(i.parseStyle).each(f=>{const p={...Re(X(r)),...f};i.setStyles(r,p)});const s=O.from(o.class).map(f=>f.split(/\s+/)),a=O.from(r.className).map(f=>ot(f.split(/\s+/),p=>""!==p));Xn(s,a,(f,p)=>{const _=ot(p,y=>!Oe(f,y)),w=[...f,..._];i.setAttrib(r,"class",w.join(" "))});const c=["style","class"],d=un(o,(f,p)=>!Oe(c,p));i.setAttribs(r,d)})(e,t,il(e))},$w=(e,t,n,r,o=!0,i)=>{const s=e.dom,a=e.schema,c=sr(e),d=n?n.nodeName.toUpperCase():"";let f=t;const p=a.getTextInlineElements();let _;_=i||"TABLE"===d||"HR"===d?s.create(i||c):n.cloneNode(!1);let w=_;if(o){do{if(p[f.nodeName]){if(po(f)||Ur(f))continue;const y=f.cloneNode(!1);s.setAttrib(y,"id",""),_.hasChildNodes()?(y.appendChild(_.firstChild),_.appendChild(y)):(w=y,_.appendChild(y))}}while((f=f.parentNode)&&f!==r)}else s.setAttrib(_,"style",null),s.setAttrib(_,"class",null);return Hl(e,_),Dp(w),_},Hw=(e,t)=>{const n=e?.parentNode;return N(n)&&n.nodeName===t},qw=e=>N(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Pd=e=>{const t=e.parentNode;return N(n=t)&&/^(LI|DT|DD)$/.test(n.nodeName)?t:e;var n},Bd=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!Ye(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},pO=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Pp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Bp=(e,t)=>N(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Lp=(e,t,n)=>Me(t)?e?1===n&&t.data.charAt(n-1)===ir?0:n:n===t.data.length-1&&t.data.charAt(n)===ir?t.data.length:n:n,Uw={insert:(e,t)=>{let n,r,o,i,s=!1;const a=e.dom,c=e.schema.getNonEmptyElements(),d=e.selection.getRng(),f=sr(e),p=X(d.startContainer),_=bn(p,d.startOffset),w=_.exists(ce=>Ji(ce)&&!bo(ce)),y=d.collapsed&&w,S=ce=>$w(e,n,z,F,Jk(e),ce),b=ce=>{const me=Lp(ce,n,r);if(Me(n)&&(ce?me>0:me<n.data.length))return!1;if(n.parentNode===z&&s&&!ce||ce&&Ye(n)&&n===z.firstChild)return!0;if(Pp(n,"TABLE")||Pp(n,"HR"))return s&&!ce||!s&&ce;const Q=new Pn(n,z);let ee;for(Me(n)&&(ce&&0===me?Q.prev():ce||me!==n.data.length||Q.next());ee=Q.current();){if(Ye(ee)){if(!ee.getAttribute("data-mce-bogus")){const he=ee.nodeName.toLowerCase();if(c[he]&&"br"!==he)return!1}}else if(Me(ee)&&!Ti(ee.data))return!1;ce?Q.prev():Q.next()}return!0},T=()=>{let ce;return ce=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==Y?S(f):S(),((me,Q)=>{const ee=Qk(me);return!C(Q)&&(W(ee)?Oe(Ie.explode(ee),Q.nodeName.toLowerCase()):ee)})(e,i)&&Bp(a,i)&&a.isEmpty(z,void 0,{includeZwsp:!0})?ce=a.split(i,z):a.insertAfter(ce,z),ma(e,ce),ce};Vc(a,d).each(ce=>{d.setStart(ce.startContainer,ce.startOffset),d.setEnd(ce.endContainer,ce.endOffset)}),n=d.startContainer,r=d.startOffset;const j=!(!t||!t.shiftKey),D=!(!t||!t.ctrlKey);Ye(n)&&n.hasChildNodes()&&!y&&(s=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=s&&Me(n)?n.data.length:0);const F=$l(a,n);if(!F||((ce,me)=>{const Q=ce.dom.getParent(me,"ol,ul,dl");return null!==Q&&"false"===ce.dom.getContentEditableParent(Q)})(e,n))return;j||(n=((ce,me,Q,ee,he)=>{var we,Ve;const Be=ce.dom,rt=null!==(we=$l(Be,ee))&&void 0!==we?we:Be.getRoot();let Je=Be.getParent(ee,Be.isBlock);if(!Je||!Bp(Be,Je)){if(Je=Je||rt,!Je.hasChildNodes()){const dt=Be.create(me);return Hl(ce,dt),Je.appendChild(dt),Q.setStart(dt,0),Q.setEnd(dt,0),dt}let gt,vt=ee;for(;vt&&vt.parentNode!==Je;)vt=vt.parentNode;for(;vt&&!Be.isBlock(vt);)gt=vt,vt=vt.previousSibling;const Xe=null===(Ve=gt?.parentElement)||void 0===Ve?void 0:Ve.nodeName;if(gt&&Xe&&ce.schema.isValidChild(Xe,me.toLowerCase())){const dt=gt.parentNode,yt=Be.create(me);for(Hl(ce,yt),dt.insertBefore(yt,gt),vt=gt;vt&&!Be.isBlock(vt);){const te=vt.nextSibling;yt.appendChild(vt),vt=te}Q.setStart(ee,he),Q.setEnd(ee,he)}}return ee})(e,f,d,n,r));let z=a.getParent(n,a.isBlock)||a.getRoot();i=N(z?.parentNode)?a.getParent(z.parentNode,a.isBlock):null,o=z?z.nodeName.toUpperCase():"";const Y=i?i.nodeName.toUpperCase():"";if("LI"!==Y||D||(z=i,i=i.parentNode,o=Y),Ye(i)&&(ce=e,Q=z,!j&&Q.nodeName.toLowerCase()===sr(ce)&&ce.dom.isEmpty(Q)&&((ee,he,we)=>{let Ve=he;for(;Ve&&Ve!==ee&&k(Ve.nextSibling);){const rt=Ve.parentElement;if(!rt||(Be=rt,!ut(ce.schema.getTextBlockElements(),Be.nodeName.toLowerCase())))return vg(rt);Ve=rt}var Be;return!1})(ce.getBody(),Q)))return((ce,me,Q)=>{var ee,he,we;const Ve=me(sr(ce)),Be=ce.dom.getParent(Q,vg);Be&&(ce.dom.insertAfter(Ve,Be),ma(ce,Ve),(null!==(we=null===(he=null===(ee=Q.parentElement)||void 0===ee?void 0:ee.childNodes)||void 0===he?void 0:he.length)&&void 0!==we?we:0)>1&&ce.dom.remove(Q))})(e,S,z);var ce,Q;if(/^(LI|DT|DD)$/.test(o)&&Ye(i)&&a.isEmpty(z))return void((ce,me,Q,ee,he)=>{const we=ce.dom,Ve=ce.selection.getRng(),Be=Q.parentNode;if(Q===ce.getBody()||!Be)return;var rt;qw(rt=Q)&&qw(rt.parentNode)&&(he="LI");let Je=me(he);if(Bd(Q,ee,!0)&&Bd(Q,ee,!1))if(Hw(Q,"LI")){const gt=Pd(Q);we.insertAfter(Je,gt),(null===(Xe=(vt=Q).parentNode)||void 0===Xe?void 0:Xe.firstChild)===vt?we.remove(gt):we.remove(Q)}else we.replace(Je,Q);else if(Bd(Q,ee,!0))Hw(Q,"LI")?(we.insertAfter(Je,Pd(Q)),Je.appendChild(we.doc.createTextNode(" ")),Je.appendChild(Q)):Be.insertBefore(Je,Q),we.remove(ee);else if(Bd(Q,ee,!1))we.insertAfter(Je,Pd(Q)),we.remove(ee);else{Q=Pd(Q);const gt=Ve.cloneRange();gt.setStartAfter(ee),gt.setEndAfter(Q);const vt=gt.extractContents();"LI"===he&&((Xe,dt)=>Xe.firstChild&&"LI"===Xe.firstChild.nodeName)(vt)?(Je=vt.firstChild,we.insertAfter(vt,Q)):(we.insertAfter(vt,Q),we.insertAfter(Je,Q)),we.remove(ee)}var vt,Xe;ma(ce,Je)})(e,S,i,z,f);if(!(y||z!==e.getBody()&&Bp(a,z)))return;const re=z.parentNode;let ie;if(y)ie=S(f),_.fold(()=>{Qe(p,X(ie))},ce=>{nt(ce,X(ie))}),e.selection.setCursorLocation(ie,0);else if(Ks(z))ie=yu(z),a.isEmpty(z)&&Dp(z),Hl(e,ie),ma(e,ie);else if(b(!1))ie=T();else if(b(!0)&&re){ie=re.insertBefore(S(),z);const ce=X(d.startContainer).dom.hasChildNodes()&&d.collapsed;ma(e,Pp(z,"HR")||ce?ie:z)}else{const ce=(Q=>{const ee=Q.cloneRange();return ee.setStart(Q.startContainer,Lp(!0,Q.startContainer,Q.startOffset)),ee.setEnd(Q.endContainer,Lp(!1,Q.endContainer,Q.endOffset)),ee})(d).cloneRange();ce.setEndAfter(z);const me=ce.extractContents();(Q=>{ke(hg(X(Q),mr),ee=>{const he=ee.dom;he.nodeValue=ii(he.data)})})(me),(Q=>{let ee=Q;do{Me(ee)&&(ee.data=ee.data.replace(/^[\r\n]+/,"")),ee=ee.firstChild}while(ee)})(me),ie=me.firstChild,a.insertAfter(me,z),((Q,ee,he)=>{var we;const Ve=[];if(!he)return;let Be=he;for(;Be=Be.firstChild;){if(Q.isBlock(Be))return;Ye(Be)&&!ee[Be.nodeName.toLowerCase()]&&Ve.push(Be)}let rt=Ve.length;for(;rt--;)Be=Ve[rt],(!Be.hasChildNodes()||Be.firstChild===Be.lastChild&&""===(null===(we=Be.firstChild)||void 0===we?void 0:we.nodeValue)||pO(Q,Be))&&Q.remove(Be)})(a,c,ie),((Q,ee)=>{ee.normalize();const he=ee.lastChild;(!he||Ye(he)&&/^(left|right)$/gi.test(Q.getStyle(he,"float",!0)))&&Q.add(ee,"br")})(a,z),a.isEmpty(z)&&Dp(z),ie.normalize(),a.isEmpty(ie)?(a.remove(ie),T()):(Hl(e,ie),ma(e,ie))}a.setAttrib(ie,"id",""),e.dispatch("NewBlock",{newBlock:ie})},fakeEventName:"insertParagraph"},Ww=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),_l(e,r)},gO=(e,t)=>{const n=je("br");nt(X(t),n),e.undoManager.add()},mO=(e,t)=>{vO(e.getBody(),t)||it(X(t),je("br"));const n=je("br");it(X(t),n),Ww(e,n.dom,!1),e.undoManager.add()},vO=(e,t)=>{return n=ye.after(t),!!hn(n.getNode())||yr(e,ye.after(t)).map(r=>hn(r.getNode())).getOr(!1);var n},Vw=e=>e&&"A"===e.nodeName&&"href"in e,_O=e=>e.fold(Et,Vw,Vw,Et),yO=(e,t)=>{t.fold(I,ge(gO,e),ge(mO,e),I)},Kw={insert:(e,t)=>{const n=(r=>{const o=ge(ys,r),i=ye.fromRangeStart(r.selection.getRng());return Vo(o,r.getBody(),i).filter(_O)})(e);n.isSome()?n.each(ge(yO,e)):((r,o)=>{const s=r.dom,a=r.selection.getRng();let c,d=!1;Vc(s,a).each(b=>{a.setStart(b.startContainer,b.startOffset),a.setEnd(b.endContainer,b.endOffset)});let f=a.startOffset,p=a.startContainer;if(Ye(p)&&p.hasChildNodes()){const b=f>p.childNodes.length-1;p=p.childNodes[Math.min(f,p.childNodes.length-1)]||p,f=b&&Me(p)?p.data.length:0}let _=s.getParent(p,s.isBlock);const w=_&&_.parentNode?s.getParent(_.parentNode,s.isBlock):null;"LI"!==(w?w.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(_=w),Me(p)&&f>=p.data.length&&(((b,T,j)=>{const D=new Pn(T,j);let F;const z=b.getNonEmptyElements();for(;F=D.next();)if(z[F.nodeName.toLowerCase()]||Me(F)&&F.length>0)return!0;return!1})(r.schema,p,_||s.getRoot())||(c=s.create("br"),a.insertNode(c),a.setStartAfter(c),a.setEndAfter(c),d=!0)),c=s.create("br"),qu(s,a,c),Ww(r,c,d),r.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},Xw=(e,t)=>jp(e).filter(n=>t.length>0&&on(X(n),t)).isSome(),Br=Io([{br:[]},{block:[]},{none:[]}]),bO=(e,t)=>{return Xw(n=e,Gk(n));var n},Yw=e=>(t,n)=>jp(t).filter(o=>qa(X(o))).isSome()===e,Gw=(e,t)=>(n,r)=>jp(n).fold(J(""),s=>s.nodeName.toUpperCase())===e.toUpperCase()===t,wO=e=>{const t=$l(e.dom,e.selection.getStart());return C(t)},ql=e=>Gw("pre",e),Ld=e=>(t,n)=>Kk(t)===e,xO=(e,t)=>{return Xw(n=e,Yk(n));var n},Md=(e,t)=>t,CO=e=>{const t=sr(e),n=$l(e.dom,e.selection.getStart());return N(n)&&e.schema.isValidChild(n.nodeName,t)},kO=e=>{const t=e.selection.getRng(),n=X(t.startContainer),r=bn(n,t.startOffset).map(o=>Ji(o)&&!bo(o));return t.collapsed&&r.getOr(!0)},Gr=(e,t)=>(n,r)=>et(e,(o,i)=>o&&i(n,r),!0)?O.some(t):O.none(),Id=(e,t,n)=>{t.selection.isCollapsed()||t.execCommand("delete"),N(n)&&Dd(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),N(n)&&Fl(t,e.fakeEventName))},Jw=(e,t)=>{const n=()=>Id(Kw,e,t),r=()=>Id(Uw,e,t),o=(i=e,s=t,Vb([Gr([bO],Br.none()),Gr([ql(!0),wO],Br.none()),Gr([Gw("summary",!0)],Br.br()),Gr([ql(!0),Ld(!1),Md],Br.br()),Gr([ql(!0),Ld(!1)],Br.block()),Gr([ql(!0),Ld(!0),Md],Br.block()),Gr([ql(!0),Ld(!0)],Br.br()),Gr([Yw(!0),Md],Br.br()),Gr([Yw(!0)],Br.block()),Gr([xO],Br.br()),Gr([Md],Br.br()),Gr([CO],Br.block()),Gr([kO],Br.block())],[i,!(!s||!s.shiftKey)]).getOr(Br.none()));var i,s;switch(Xk(e)){case"linebreak":o.fold(n,n,I);break;case"block":o.fold(r,r,I);break;case"invert":o.fold(r,n,I);break;default:o.fold(n,r,I)}},Qw=tr(),SO=Qw.os.isiOS()&&Qw.browser.isSafari(),Zw=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{Jw(e,t)}))},EO=tr(),ex=e=>e.stopImmediatePropagation(),tx=e=>e.keyCode===Ke.PAGE_UP||e.keyCode===Ke.PAGE_DOWN,nx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",ex,!0):!n&&e.get()&&t.off("NodeChange",ex),e.set(n)},rx=(e,t)=>{const n=t.container(),r=t.offset();return Me(n)?(n.insertData(r,e),O.some(ye(n,r+e.length))):Dc(t).map(o=>{const i=mt(e);return t.isAtEnd()?it(o,i):nt(o,i),ye(i.dom,e.length)})},ox=ge(rx,zn),ix=ge(rx," "),sx=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},TO=e=>{const t=ye.fromRangeStart(e.selection.getRng()),n=X(e.getBody());if(e.selection.isCollapsed()){const r=ge(ys,e),o=ye.fromRangeStart(e.selection.getRng());return Vo(r,e.getBody(),o).bind((i=n,s=>s.fold(a=>Tr(i.dom,ye.before(a)),a=>ar(a),a=>fo(a),a=>yr(i.dom,ye.after(a))))).map(i=>()=>{return(s=n,a=t,c=>Z_(s,c)?ox(a):ix(a))(i).each(sx(e));var s,a})}var i;return O.none()},NO=e=>{return bi(Bt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const r=X(e.getBody());var o,i;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(o=r,i=ye.fromRangeStart(e.selection.getRng()),Z_(o,i)?ox(i):ix(i)).each(sx(e))});var t,n},AO=e=>oE(e)?[{keyCode:Ke.TAB,action:lt(lw,e,!0)},{keyCode:Ke.TAB,shiftKey:!0,action:lt(lw,e,!1)}]:[],OO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),dO(e),Wo(e))return Fn(null);{const t=(e=>{const t=Fn(null),n=ge(ys,e);return e.on("NodeChange",r=>{sl(e)&&(((o,i,s)=>{const a=pt(Qn(X(i.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ot(a,o),d=ot(s,o);ke(Ze(c,d),ge(p1,!1)),ke(Ze(d,c),ge(p1,!0))})(n,e.dom,r.parents),((o,i)=>{const s=i.get();if(o.selection.isCollapsed()&&!o.composing&&s){const a=ye.fromRangeStart(o.selection.getRng());ye.isTextPosition(a)&&!vu(c=a)&&!_u(c)&&(Cd(o,((e,t)=>{return ye.isTextPosition(t)?(r=t,Xm(n=e)&&r.container()===n?((o,i)=>{const s=Gm(o.data.substr(0,i.offset())),a=Gm(o.data.substr(i.offset()));return(s.text+a.text).length>0?(Jm(o),ye(o,i.offset()-s.count)):i})(n,r):Qm(n,r)):((n,r)=>r.container()===n.parentNode?((o,i)=>{const s=i.container(),a=((c,d)=>{const f=Wn(c,d);return-1===f?O.none():O.some(f)})(vn(s.childNodes),o).map(c=>c<i.offset()?ye(s,i.offset()-1):i).getOr(i);return ds(o),a})(n,r):Qm(n,r))(e,t);var n,r})(s,a)),i.set(null))}var c})(e,t),((o,i,s,a)=>{if(i.selection.isCollapsed()){const c=ot(a,o);ke(c,d=>{const f=ye.fromRangeStart(i.selection.getRng());Vo(o,i.getBody(),f).bind(p=>g1(i,s,p))})}})(n,e,t,r.parents))}),t})(e);return(n=e).on("keyup compositionstart",ge(AA,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,s,a)=>{const c=Bt.os.isMacOS()||Bt.os.isiOS();Bl([{keyCode:Ke.RIGHT,action:lt(F1,i,!0)},{keyCode:Ke.LEFT,action:lt(F1,i,!1)},{keyCode:Ke.UP,action:lt($1,i,!1)},{keyCode:Ke.DOWN,action:lt($1,i,!0)},...c?[{keyCode:Ke.UP,action:lt(Sd,i,!1),metaKey:!0,shiftKey:!0},{keyCode:Ke.DOWN,action:lt(Sd,i,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ke.RIGHT,action:lt(iw,i,!0)},{keyCode:Ke.LEFT,action:lt(iw,i,!1)},{keyCode:Ke.UP,action:lt(mp,i,!1)},{keyCode:Ke.DOWN,action:lt(mp,i,!0)},{keyCode:Ke.UP,action:lt(mp,i,!1)},{keyCode:Ke.UP,action:lt(U1,i,!1)},{keyCode:Ke.DOWN,action:lt(U1,i,!0)},{keyCode:Ke.RIGHT,action:lt(X1,i,!0)},{keyCode:Ke.LEFT,action:lt(X1,i,!1)},{keyCode:Ke.UP,action:lt(Y1,i,!1)},{keyCode:Ke.DOWN,action:lt(Y1,i,!0)},{keyCode:Ke.RIGHT,action:lt(m1,i,s,!0)},{keyCode:Ke.LEFT,action:lt(m1,i,s,!1)},{keyCode:Ke.RIGHT,ctrlKey:!c,altKey:c,action:lt(_A,i,s)},{keyCode:Ke.LEFT,ctrlKey:!c,altKey:c,action:lt(yA,i,s)},{keyCode:Ke.UP,action:lt(q1,i,!1)},{keyCode:Ke.DOWN,action:lt(q1,i,!0)}],a).each(d=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{let o=!1;n.on("keydown",i=>{o=i.keyCode===Ke.BACKSPACE,i.isDefaultPrevented()||((s,a,c)=>{const d=c.keyCode===Ke.BACKSPACE?"deleteContentBackward":"deleteContentForward",f=s.selection.isCollapsed(),p=f?"character":"selection",_=w=>f?w?"word":"line":"selection";K1([{keyCode:Ke.BACKSPACE,action:lt(R1,s)},{keyCode:Ke.BACKSPACE,action:lt(ep,s,!1)},{keyCode:Ke.DELETE,action:lt(ep,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(Jf,s,!1)},{keyCode:Ke.DELETE,action:lt(Jf,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(cp,s,a,!1)},{keyCode:Ke.DELETE,action:lt(cp,s,a,!0)},{keyCode:Ke.BACKSPACE,action:lt(of,s,!1)},{keyCode:Ke.DELETE,action:lt(of,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(Ss,s,!1,p)},{keyCode:Ke.DELETE,action:lt(Ss,s,!0,p)},...Fw?[{keyCode:Ke.BACKSPACE,altKey:!0,action:lt(Ss,s,!1,_(!0))},{keyCode:Ke.DELETE,altKey:!0,action:lt(Ss,s,!0,_(!0))},{keyCode:Ke.BACKSPACE,metaKey:!0,action:lt(Ss,s,!1,_(!1))}]:[{keyCode:Ke.BACKSPACE,ctrlKey:!0,action:lt(Ss,s,!1,_(!0))},{keyCode:Ke.DELETE,ctrlKey:!0,action:lt(Ss,s,!0,_(!0))}],{keyCode:Ke.BACKSPACE,action:lt(tp,s,!1)},{keyCode:Ke.DELETE,action:lt(tp,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(hp,s,!1)},{keyCode:Ke.DELETE,action:lt(hp,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(Yf,s,!1)},{keyCode:Ke.DELETE,action:lt(Yf,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(Xf,s,!1)},{keyCode:Ke.DELETE,action:lt(Xf,s,!0)},{keyCode:Ke.BACKSPACE,action:lt(dp,s,!1)},{keyCode:Ke.DELETE,action:lt(dp,s,!0)}],c).filter(w=>s.selection.isEditable()).each(w=>{c.preventDefault(),Dd(s,d).isDefaultPrevented()||(w(),Fl(s,d))})})(n,r,i)}),n.on("keyup",i=>{var s,a,c;i.isDefaultPrevented()||(a=i,c=o,Bl([{keyCode:Ke.BACKSPACE,action:lt(Fb,s=n)},{keyCode:Ke.DELETE,action:lt(Fb,s)},...Fw?[{keyCode:Ke.BACKSPACE,altKey:!0,action:lt(Pl,s)},{keyCode:Ke.DELETE,altKey:!0,action:lt(Pl,s)},...c?[{keyCode:fO?224:91,action:lt(Pl,s)}]:[]]:[{keyCode:Ke.BACKSPACE,ctrlKey:!0,action:lt(Pl,s)},{keyCode:Ke.DELETE,ctrlKey:!0,action:lt(Pl,s)}]],a)),o=!1})})(e,t),(n=>{let r=O.none();n.on("keydown",o=>{var i;o.keyCode===Ke.ENTER&&(SO&&(i=>{if(!i.collapsed)return!1;const s=i.startContainer;if(Me(s)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,c=s.data.charAt(i.startOffset-1);return a.test(c)}return!1})(n.selection.getRng())?(r=O.some((i=n).selection.getBookmark()),i.undoManager.add()):Zw(n,o))}),n.on("keyup",o=>{o.keyCode===Ke.ENTER&&r.each(()=>{return s=o,(i=n).undoManager.undo(),r.fold(I,a=>i.selection.moveToBookmark(a)),Zw(i,s),void(r=O.none());var i,s})})})(e),(n=>{n.on("keydown",r=>{var o,i;r.isDefaultPrevented()||(i=r,K1([{keyCode:Ke.SPACEBAR,action:lt(TO,o=n)},{keyCode:Ke.SPACEBAR,action:lt(NO,o)}],i).each(s=>{i.preventDefault(),Dd(o,"insertText",{data:" "}).isDefaultPrevented()||(s(),Fl(o,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",r=>{r.isComposing||(o=>{const i=X(o.getBody());o.selection.isCollapsed()&&((e,t)=>{const n=t.container();if(!Me(n))return O.none();if((r=>{const o=r.container();return Me(o)&&yn(o.data,zn)})(t)){const r=n0(e,n,!1)||(o=>{const i=o.data,s=(a=>{const c=a.split("");return pt(c,(d,f)=>Mc(d)&&f>0&&f<c.length-1&&ah(c[f-1])&&ah(c[f+1])?" ":d).join("")})(i);return s!==i&&(o.data=s,!0)})(n)||r0(e,n,!1);return bi(r,t)}if(Vh(e,t)){const r=n0(e,n,!0)||r0(e,n,!0);return bi(r,t)}return O.none()})(i,ye.fromRangeStart(o.selection.getRng())).each(s=>{o.selection.setRng(s.toRange())})})(n)})})(e),(n=>{n.on("keydown",r=>{var i;r.isDefaultPrevented()||(i=r,Bl([...AO(n)],i).each(s=>{i.preventDefault()}))})})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,s,a)=>{const c=Bt.os.isMacOS()||Bt.os.isiOS();Bl([{keyCode:Ke.END,action:lt(H1,i,!0)},{keyCode:Ke.HOME,action:lt(H1,i,!1)},...c?[]:[{keyCode:Ke.HOME,action:lt(Sd,i,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ke.END,action:lt(Sd,i,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ke.END,action:lt(G1,i,!0)},{keyCode:Ke.HOME,action:lt(G1,i,!1)},{keyCode:Ke.END,action:lt(kd,i,!0,s)},{keyCode:Ke.HOME,action:lt(kd,i,!1,s)}],a).each(d=>{a.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{if(EO.os.isMacOS())return;const o=Fn(!1);n.on("keydown",i=>{tx(i)&&nx(o,n,!0)}),n.on("keyup",i=>{var s,a,c;i.isDefaultPrevented()||(c=i,Bl([{keyCode:Ke.PAGE_UP,action:lt(kd,s=n,!1,a=r)},{keyCode:Ke.PAGE_DOWN,action:lt(kd,s,!0,a)}],c)),tx(i)&&o.get()&&(nx(o,n,!1),n.nodeChanged())})})(e,t),t}var n};class RO{constructor(t){let n;this.lastPath=[],this.editor=t;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const i=t.selection.getRng(),s={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==o.type&&Sh(s,n)||t.dispatch("SelectionChange"),n=s}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&zc(t)&&!r.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&zc(t)&&("IMG"===t.selection.getNode().nodeName?Vr.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!TS(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const i=[];this.editor.dom.getParent(r,s=>s===o||(i.push(s),!1)),this.editor.dispatch("NodeChange",{...t,element:r,parents:i})}}isSameElementPath(t){let n;const r=this.editor,o=Pt(r.dom.getParents(t,ft,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const ax=el("image"),Mp=el("event"),zd=e=>t=>{t[Mp]=e},lx=zd(0),jO=zd(2),DO=zd(1),Ip=el("mode"),Fd=e=>t=>{t[Ip]=e},cx=(e,t)=>Fd(t)(e),dx=Fd(0),zp=Fd(2),BO=Fd(1),ux=e=>t=>O.from(t[Ip]).exists(r=>r===e),va=ux(0),hx=ux(1),LO=["none","copy","link","move"],MO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Fp=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(o){Oe(LO,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){(e=>O.from(e[Mp]).exists(n=>0===n))(r)&&Oe(MO,o)&&(n=o)},get items(){return o=r,i=e.items,{...i,get length(){return i.length},add:(s,a)=>{if(va(o)){if(!W(s))return i.add(s);if(!x(a))return i.add(s,a)}return null},remove:s=>{va(o)&&i.remove(s)},clear:()=>{va(o)&&i.clear()}};var o,i},get files(){return hx(r)?Object.freeze({length:0,item:o=>null}):e.files},get types(){return e.types},setDragImage:(o,i,s)=>{va(r)&&(r[ax]={image:o,x:i,y:s},e.setDragImage(o,i,s))},getData:o=>hx(r)?"":e.getData(o),setData:(o,i)=>{va(r)&&e.setData(o,i)},clearData:o=>{va(r)&&e.clearData(o)}};return dx(r),r},fx=(e,t)=>e.setData("text/html",t),px="x-tinymce/html",$d=J(px),$p="\x3c!-- "+px+" --\x3e",IO=e=>$p+e,gx=e=>-1!==e.indexOf($p),mx="%MCEPASTEBIN%",Hp=e=>e.dom.get("mcepastebin"),zO=e=>N(e)&&"mcepastebin"===e.id,vx=e=>e===mx,_x=(e,t)=>(Ie.each(t,n=>{e=H(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),yx=e=>_x(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,r)=>n||r?zn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),bx=(e,t)=>({content:e,cancelled:t}),qp=(e,t)=>(e.insertContent(t,{merge:VS(e),paste:!0}),!0),Up=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),FO=(e,t,n)=>{return!(e.selection.isCollapsed()||!Up(t)||(r=e,o=t,i=n,r.undoManager.extra(()=>{i(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,i},$O=(e,t,n)=>{return r=e,!(!Up(o=t)||!Ht(Km(r),i=>Ui(o.toLowerCase(),`.${i.toLowerCase()}`)))&&((r,o,i)=>(r.undoManager.extra(()=>{i(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(e,t,n);var r,o},HO=(e=>{let t=0;return()=>"mceclip"+t++})(),qO=e=>{const t=Fp();return fx(t,e),zp(t),t},wx=(e,t,n,r,o)=>{const i=((d,f,p)=>{const _=d.dispatch("PastePreProcess",{content:f,internal:p}),w=((y,S)=>{const b=ca({sanitize:Qu(y)},y.schema);b.addNodeFilter("meta",j=>{Ie.each(j,D=>{D.remove()})});const T=b.parse(S,{forced_root_block:!1,isRootContent:!0});return Bi({validate:!0},y.schema).serialize(T)})(d,_.content);return d.hasEventListeners("PastePostProcess")&&!_.isDefaultPrevented()?((y,S,b)=>{const T=y.dom.create("div",{style:"display:none"},S),j=y.dispatch("PastePostProcess",{node:T,internal:b});return bx(j.node.innerHTML,j.isDefaultPrevented())})(d,w,p):bx(w,_.isDefaultPrevented())})(e,t,n);if(!i.cancelled){const s=i.content,a=()=>{return c=e,d=s,void(r||!KS(c)?qp(c,d):(p=c,_=d,Ie.each([FO,$O,qp],w=>!w(p,_,qp))));var c,d,p,_};o?Dd(e,"insertFromPaste",{dataTransfer:qO(s)}).isDefaultPrevented()||(a(),Fl(e,"insertFromPaste")):a()}},Hd=(e,t,n,r)=>{const o=n||gx(t);wx(e,t.replace($p,""),o,!1,r)},Wp=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((i,s,a)=>{const c=i.split(/\n\n/),d=((_,w)=>{let y="<"+_;const S=fr(w,(b,T)=>T+'="'+Ni.encodeAllRaw(b)+'"');return S.length&&(y+=" "+S.join(" ")),y+">"})(s,a),f="</"+s+">",p=pt(c,_=>_.split(/\n/).join("<br />"));return 1===p.length?p[0]:pt(p,_=>d+_+f).join("")})(Eg(r,YS(e)),sr(e),il(e));wx(e,o,!1,!0,n)},xx=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},$i=(e,t)=>t in e&&e[t].length>0,Cx=e=>$i(e,"text/html")||$i(e,"text/plain"),kx=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var o;if(Rc(e)&&r){const i=((s,a)=>{const c=a.items?We(vn(a.items),f=>"file"===f.kind?[f.getAsFile()]:[]):[],d=a.files?vn(a.files):[];return ot(c.length>0?c:d,(f=>{const p=Km(f);return _=>Dn(_.type,"image/")&&Ht(p,w=>(y=>{const S=y.toLowerCase(),b={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ie.hasOwn(b,S)?"image/"+b[S]:"image/"+S})(w)===_.type)})(s))})(e,r);if(i.length>0)return t.preventDefault(),(o=i,Promise.all(pt(o,s=>xy(s).then(a=>({file:s,uri:a}))))).then(s=>{n&&e.selection.setRng(n),ke(s,a=>{var c,d;c=e,Ef((d=a).uri).each(({data:f,type:p,base64Encoded:_})=>{const w=_?f:btoa(f),y=d.file,S=c.editorUpload.blobCache,T=S.getByData(w,p)??((j,D,F,z)=>{const Y=HO(),re=Lm(j)&&N(F.name),ie=re?((Q,ee)=>{const he=ee.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return N(he)?Q.dom.encode(he[1]):void 0})(j,F.name):Y,me=D.create(Y,F,z,ie,re?F.name:void 0);return D.add(me),me})(c,S,y,w);Hd(c,`<img src="${T.blobUri()}">`,!1,!0)})})}),!0}return!1},Vp=(e,t,n,r,o)=>{let i=yx(n);const s=$i(t,$d())||gx(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(i),c=Up(i);(vx(i)||!i.length||a&&!c)&&(r=!0),(r||c)&&(i=$i(t,"text/plain")&&a?t["text/plain"]:(d=>{const f=Ai(),p=ca({},f);let _="";const w=f.getVoidElements(),y=Ie.makeMap("script noscript style textarea video audio iframe object"," "),S=f.getBlockElements(),b=T=>{const j=T.name,D=T;if("br"!==j){if("wbr"!==j)if(w[j]&&(_+=" "),y[j])_+=" ";else{if(3===T.type&&(_+=T.value),!(T.name in f.getVoidElements())){let F=T.firstChild;if(F)do{b(F)}while(F=F.next)}S[j]&&D.next&&(_+="\n","p"===j&&(_+="\n"))}}else _+="\n"};return d=_x(d,[/<!\[[^\]]+\]>/g]),b(p.parse(d)),_})(i)),vx(i)||(r?Wp(e,i,o):Hd(e,i,s,o))},Sx=(e,t,n,r)=>{((o,i,s)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",i),o.setData("text/plain",s),o.setData($d(),i),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},Ex=e=>(t,n)=>{const{dom:r,selection:o}=e,i=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=r.create("div",{contenteditable:"true"},t);r.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(s),r.add(e.getBody(),i);const a=o.getRng();s.focus();const c=r.createRng();c.selectNodeContents(s),o.setRng(c),Vr.setEditorTimeout(e,()=>{o.setRng(a),r.remove(i),n()},0)},Tx=e=>({html:IO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Nx=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},Ax=(e,t)=>{var n,r;return ms.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},Ox=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},WO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Rx=e=>Ie.trim(e).replace(WO,Ic).toLowerCase(),VO=(e,t,n)=>{const r=US(e);if(n||"all"===r||!WS(e))return t;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const i=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,c,d,f)=>{const p=i.parseStyle(i.decode(d)),_={};for(let y=0;y<o.length;y++){const S=p[o[y]];let b=S,T=i.getStyle(s,o[y],!0);/color/.test(o[y])&&(b=Rx(b),T=Rx(T)),T!==b&&(_[o[y]]=S)}const w=i.serializeStyle(_,"span");return w?c+' style="'+w+'"'+f:c+f})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(i,s,a,c)=>s+' style="'+a+'"'+c)},XO=hn,jx=Me,YO=e=>tn(e.dom),Dx=e=>t=>Dt(X(e),t),Px=(e,t)=>Bo(X(e),YO,Dx(t)),Bx=(e,t,n)=>{const r=new Pn(e,t),o=n?r.next.bind(r):r.prev.bind(r);let i=e;for(let s=n?e:o();s&&!XO(s);s=o())ho(s)&&(i=s);return i};var _a;!function(e){e.Before="before",e.After="after"}(_a||(_a={}));const JO=(e,t)=>Math.abs(e.left-t),QO=(e,t)=>Math.abs(e.right-t),eR=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Kp=(e,t,n)=>{const r=d=>ho(d.node)?O.some(d):Ye(d.node)?Kp(vn(d.node.childNodes),t,n):O.none(),o=(d,f)=>{const p=Mt(d,(_,w)=>f(_,t,n)-f(w,t,n));return((_,w)=>{if(_.length>=2){const y=r(_[0]).getOr(_[0]),S=r(_[1]).getOr(_[1]);if(Math.abs(w(y,t,n)-w(S,t,n))<2){if(Me(y.node))return O.some(y);if(Me(S.node))return O.some(S)}}return O.none()})(p,f).orThunk(()=>Kn(p,r))},[i,s]=((e,t)=>{return(n=ot(e,n=>{return(r=t)>=(o=n).top&&r<=o.bottom;var r,o}),et(n,(r,o)=>r.fold(()=>O.some(o),i=>{const s=Math.min(o.left,i.left),a=Math.min(o.top,i.top),c=Math.max(o.right,i.right),d=Math.max(o.bottom,i.bottom);return O.some({top:a,right:c,bottom:d,left:s,width:c-s,height:d-a})}),O.none())).fold(()=>[[],e],n=>{const{pass:r,fail:o}=er(e,i=>((s,a)=>{const c=(d=s,f=a,Math.max(0,Math.min(d.bottom,f.bottom)-Math.max(d.top,f.top))/Math.min(s.height,a.height));var d,f;return((d,f)=>d.top<f.bottom&&d.bottom>f.top)(s,a)&&c>.5})(i,n));return[r,o]});var n})(a1(e),n),{pass:a,fail:c}=er(s,d=>d.top<n);return o(i,eR).orThunk(()=>o(c,im)).orThunk(()=>o(a,im))},Lx=(e,t,n)=>((r,o,i)=>{const s=X(r),c=((e,t,n)=>O.from(e.dom.elementFromPoint(t,n)).map(Pe))(It(s),o,i).filter(d=>Lt(s,d)).getOr(s);return((d,f,p,_)=>{const w=(y,S)=>{const b=ot(y.dom.childNodes,kt(T=>Ye(T)&&T.classList.contains("mce-drag-container")));return S.fold(()=>Kp(b,p,_),T=>{const j=ot(b,D=>D!==T.dom);return Kp(j,p,_)}).orThunk(()=>(Dt(y,d)?O.none():wi(y)).bind(T=>w(T,O.some(y))))};return w(f,O.none())})(s,c,o,i)})(e,t,n).filter(r=>ll(r.node)).map(r=>{return{node:(o=r).node,position:JO(o,i=t)<QO(o,i)?_a.Before:_a.After};var o,i}),Mx=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,i=o.documentElement,s=o.defaultView;return{top:r.top+(null!==(t=s?.scrollY)&&void 0!==t?t:0)-i.clientTop,left:r.left+(null!==(n=s?.scrollX)&&void 0!==n?n:0)-i.clientLeft}},Ix=e=>({target:e,srcElement:e}),zx=tn,nR=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(zx,xo),rR=(e,t,n,r)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);const s=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),s.appendChild(i),s},qd=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},Fx=qd("left",-32),$x=qd("left",32),Hx=qd("top",-32),qx=qd("top",32),Ux=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Ul=(e,t,n,r,o)=>{"dragstart"===t&&fx(r,e.dom.getOuterHTML(n));const i=((e,t,n,r)=>{const o=((i,s)=>{const a=(c=>{const d=Fp(),f=O.from(c[Ip]);return zp(c),lx(d),d.dropEffect=c.dropEffect,d.effectAllowed=c.effectAllowed,(p=c,O.from(p[ax])).each(p=>d.setDragImage(p.image,p.x,p.y)),ke(c.types,p=>{"Files"!==p&&d.setData(p,c.getData(p))}),ke(c.files,p=>d.items.add(p)),(p=>O.from(p[Mp]))(c).each(p=>{var _;_=d,zd(p)(_)}),f.each(p=>{cx(c,p),cx(d,p)}),d;var p})(i);return"dragstart"===s?(lx(a),dx(a)):"drop"===s?(jO(a),zp(a)):(DO(a),BO(a)),a})(n,e);return x(r)?((i,s,a)=>{const c=l("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:i,composedPath:c,initEvent:c,preventDefault:I,stopImmediatePropagation:I,stopPropagation:I,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:c,initMouseEvent:c,getModifierState:c,dataTransfer:a,...Ix(s)}})(e,t,o):(i=e,s=r,a=t,c=o,{...s,dataTransfer:c,type:i,...Ix(a)});var i,s,a,c})(t,n,r,o);return e.dispatch(t,i)},Wx=(e,t,n)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Ul(t,"dragend",r.element,r.dataTransfer),o=>Ul(t,"dragend",r.element,r.dataTransfer,o))}),Vx(e)},Vx=e=>{e.on(t=>{t.intervalId.clear(),Ux(t.ghost)}),e.clear()},Wl=tn,Kx=(e,t)=>bs(e.getBody(),t),sR=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=((e,t,n,r)=>{const o=Oi();let i,s;const a=sr(e),c=e.dom,d=()=>{(f=>{var p,_;const w=Qn(X(f),"*[contentEditable=false],video,audio,embed,object");for(let y=0;y<w.length;y++){const S=w[y].dom;let b=S.previousSibling;if(_c(b)){const T=b.data;1===T.length?null===(p=b.parentNode)||void 0===p||p.removeChild(b):b.deleteData(T.length-1,1)}b=S.nextSibling,vc(b)&&(1===b.data.length?null===(_=b.parentNode)||void 0===_||_.removeChild(b):b.deleteData(0,1))}})(t),s&&(ds(s),s=null),o.on(f=>{c.remove(f.caret),o.clear()}),i&&(clearInterval(i),i=void 0)};return{show:(f,p)=>{let _;if(d(),uE(p))return null;if(!n(p))return s=((w,y)=>{var S;const b=(null!==(S=w.ownerDocument)&&void 0!==S?S:document).createTextNode(ir),T=w.parentNode;if(y){const j=w.previousSibling;if(Vs(j)){if(Hr(j))return j;if(_c(j))return j.splitText(j.data.length-1)}T?.insertBefore(b,w)}else{const j=w.nextSibling;if(Vs(j)){if(Hr(j))return j;if(vc(j))return j.splitText(1),j}w.nextSibling?T?.insertBefore(b,w.nextSibling):T?.appendChild(b)}return b})(p,f),_=p.ownerDocument.createRange(),al(s.nextSibling)?(_.setStart(s,0),_.setEnd(s,0)):(_.setStart(s,1),_.setEnd(s,1)),_;{const w=((b,T,j)=>{var D;const F=(null!==(D=T.ownerDocument)&&void 0!==D?D:document).createElement(b);F.setAttribute("data-mce-caret",j?"before":"after"),F.setAttribute("data-mce-bogus","all"),F.appendChild(Wa().dom);const z=T.parentNode;return j?z?.insertBefore(F,T):T.nextSibling?z?.insertBefore(F,T.nextSibling):z?.appendChild(F),F})(a,p,f),y=Zm(t,p,f);c.setStyle(w,"top",y.top),s=w;const S=c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});c.setStyles(S,{...y}),c.add(t,S),o.set({caret:S,element:p,before:f}),f&&c.addClass(S,"mce-visual-caret-before"),i=setInterval(()=>{o.on(b=>{r()?c.toggleClass(b.caret,"mce-visual-caret-hidden"):c.addClass(b.caret,"mce-visual-caret-hidden")})},500),_=p.ownerDocument.createRange(),_.setStart(w,0),_.setEnd(w,0)}return _},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(f=>{const p=Zm(t,f.element,f.before);c.setStyles(f.caret,{...p})})},destroy:()=>clearInterval(i)}})(e,r,n.isBlock,()=>vs(e)),i="sel-"+n.uniqueId(),s="data-mce-selected";let a;const c=b=>b!==r&&(Wl(b)||Mo(b))&&n.isChildOf(b,r)&&n.isEditable(b.parentNode),d=(b,T,j,D=!0)=>e.dispatch("ShowCaret",{target:T,direction:b,before:j}).isDefaultPrevented()?null:(D&&t.scrollIntoView(T,-1===b),o.show(j,T)),f=b=>Hr(b)||vc(b)||_c(b),p=b=>f(b.startContainer)||f(b.endContainer),w=(b,T)=>{if(!b)return null;if(b.collapsed){if(!p(b)){const z=T?1:-1,Y=hl(z,r,b),re=Y.getNode(!T);if(N(re)){if(ll(re))return d(z,re,!!T&&!Y.isAtEnd(),!1);if(Ei(re)&&tn(re.nextSibling)){const ce=n.createRng();return ce.setStart(re,0),ce.setEnd(re,0),ce}}const ie=Y.getNode(T);if(N(ie)){if(ll(ie))return d(z,ie,!T&&!Y.isAtEnd(),!1);if(Ei(ie)&&tn(ie.previousSibling)){const ce=n.createRng();return ce.setStart(ie,1),ce.setEnd(ie,1),ce}}}return null}let j=b.startContainer,D=b.startOffset;const F=b.endOffset;if(Me(j)&&0===D&&Wl(j.parentNode)&&(j=j.parentNode,D=n.nodeIndex(j),j=j.parentNode),!Ye(j))return null;if(F===D+1&&j===b.endContainer){const z=j.childNodes[D];if(c(z))return(Y=>{const re=Y.cloneNode(!0),ie=e.dispatch("ObjectSelected",{target:Y,targetClone:re});if(ie.isDefaultPrevented())return null;const ce=((Q,ee)=>{const he=X(e.getBody()),we=e.getDoc(),Ve=Lo(he,"#"+i).getOrThunk(()=>{const Je=xe('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',we);return En(Je,"id",i),Qe(he,Je),Je}),Be=n.createRng();Rt(Ve),Ot(Ve,[mt(zn,we),X(ee),mt(zn,we)]),Be.setStart(Ve.dom.firstChild,1),Be.setEnd(Ve.dom.lastChild,0),Qi(Ve,{top:n.getPos(Q,e.getBody()).y+"px"}),g_(Ve);const rt=t.getSel();return rt&&(rt.removeAllRanges(),rt.addRange(Be)),Be})(Y,ie.targetClone),me=X(Y);return ke(Qn(X(e.getBody()),`*[${s}]`),Q=>{Dt(me,Q)||h(Q,s)}),n.getAttrib(Y,s)||Y.setAttribute(s,"1"),a=Y,S(),ce})(z)}return null},y=()=>{a&&a.removeAttribute(s),Lo(X(e.getBody()),"#"+i).each(_t),a=null},S=()=>{o.hide()};return Wo(e)||(e.on("click",b=>{n.isEditable(b.target)||(b.preventDefault(),e.focus())}),e.on("blur NewBlock",y),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",b=>{const T=b.target,j=Kx(e,T);Wl(j)?(b.preventDefault(),Ol(e,j).each(w)):c(T)&&Ol(e,T).each(w)},!0),e.on("mousedown",b=>{const T=b.target;if(T!==r&&"HTML"!==T.nodeName&&!n.isChildOf(T,r)||!((D,F,z)=>{const Y=X(D.getBody()),re=D.inline?Y:X(It(Y).dom.documentElement),ie=((ce,me,Q,ee)=>{const he=me.dom.getBoundingClientRect();return{x:Q-(ce?he.left+me.dom.clientLeft+BN(me):0),y:ee-(ce?he.top+me.dom.clientTop+PN(me):0)}})(D.inline,re,F,z);return((ce,me,Q)=>{const ee=jN(ce),he=DN(ce);return me>=0&&Q>=0&&me<=ee&&Q<=he})(re,ie.x,ie.y)})(e,b.clientX,b.clientY))return;y(),S();const j=Kx(e,T);Wl(j)?(b.preventDefault(),Ol(e,j).each(w)):Lx(r,b.clientX,b.clientY).each(D=>{var F;b.preventDefault(),(F=d(1,D.node,D.position===_a.Before,!1))&&t.setRng(F),Ye(j)?j.focus():e.getBody().focus()})}),e.on("keypress",b=>{Ke.modifierPressed(b)||Wl(t.getNode())&&b.preventDefault()}),e.on("GetSelectionRange",b=>{let T=b.range;if(a){if(!a.parentNode)return void(a=null);T=T.cloneRange(),T.selectNode(a),b.range=T}}),e.on("SetSelectionRange",b=>{b.range=(b=>{const T=e.schema.getVoidElements(),j=n.createRng(),D=b.startContainer,F=b.startOffset,z=b.endContainer,Y=b.endOffset;return ut(T,D.nodeName.toLowerCase())?0===F?j.setStartBefore(D):j.setStartAfter(D):j.setStart(D,F),ut(T,z.nodeName.toLowerCase())?0===Y?j.setEndBefore(z):j.setEndAfter(z):j.setEnd(z,Y),j})(b.range);const T=w(b.range,b.forward);T&&(b.range=T)}),e.on("AfterSetSelectionRange",b=>{const T=b.range,j=T.startContainer.parentElement;var D,F;p(T)||Ye(D=j)&&"mcepastebin"===D.id||S(),N(F=j)&&n.hasClass(F,"mce-offscreen-selection")||y()}),(e=>{const t=Oi(),n=Gt.DOM,r=document,o=(c=t,d=e,f=>{if(0===f.button){const p=Z(d.dom.getParents(f.target),nR).getOr(null);if(N(p)&&(_=d.dom,w=d.getBody(),zx(y=p)&&y!==w&&_.isEditable(y.parentElement))){const _=d.dom.getPos(p),w=d.getBody(),y=d.getDoc().documentElement;c.set({element:p,dataTransfer:Fp(),dragging:!1,screenX:f.screenX,screenY:f.screenY,maxX:(d.inline?w.scrollWidth:y.offsetWidth)-2,maxY:(d.inline?w.scrollHeight:y.offsetHeight)-2,relX:f.pageX-_.x,relY:f.pageY-_.y,width:p.offsetWidth,height:p.offsetHeight,ghost:rR(d,p,p.offsetWidth,p.offsetHeight),intervalId:Dk(100)})}}var _,w,y}),i=((e,t)=>{const n=Sc((o,i)=>{return a=o,c=i,(s=t)._selectionOverrides.hideFakeCaret(),void Lx(s.getBody(),a,c).fold(()=>s.selection.placeCaretAt(a,c),d=>{const f=s._selectionOverrides.showCaret(1,d.node,d.position===_a.Before,!1);f?s.selection.setRng(f):s.selection.placeCaretAt(a,c)});var s,a,c},0);t.on("remove",n.cancel);const r=e;return o=>e.on(i=>{const s=Math.max(Math.abs(o.screenX-i.screenX),Math.abs(o.screenY-i.screenY));if(!i.dragging&&s>10){const d=Ul(t,"dragstart",i.element,i.dataTransfer,o);if(N(d.dataTransfer)&&(i.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;i.dragging=!0,t.focus()}if(i.dragging){const d=o.currentTarget===t.getDoc().documentElement,f=((p,_)=>({pageX:_.pageX-p.relX,pageY:_.pageY+5}))(i,(_=o,w=(b=p=t).inline?Mx(b.getBody()):{left:0,top:0},y=(b=>{const T=b.getBody();return b.inline?{left:T.scrollLeft,top:T.scrollTop}:{left:0,top:0}})(p),S=((b,T)=>{if(T.target.ownerDocument!==b.getDoc()){const j=Mx(b.getContentAreaContainer()),D=(F=>{const z=F.getBody(),Y=F.getDoc().documentElement;return F.inline?{left:z.scrollLeft,top:z.scrollTop}:{left:z.scrollLeft||Y.scrollLeft,top:z.scrollTop||Y.scrollTop}})(b);return{left:T.pageX-j.left+D.left,top:T.pageY-j.top+D.top}}return{left:T.pageX,top:T.pageY}})(p,_),{pageX:S.left-w.left+y.left,pageY:S.top-w.top+y.top}));a=i.ghost,c=t.getBody(),a.parentNode!==c&&c.appendChild(a),((p,_,w,y,S,b,T,j,D,F,z,Y)=>{let re=0,ie=0;p.style.left=_.pageX+"px",p.style.top=_.pageY+"px",_.pageX+w>S&&(re=_.pageX+w-S),_.pageY+y>b&&(ie=_.pageY+y-b),p.style.width=w-re+"px",p.style.height=y-ie+"px";const ce=D.clientHeight,me=D.clientWidth,Q=T+D.getBoundingClientRect().top,ee=j+D.getBoundingClientRect().left;z.on(he=>{he.intervalId.clear(),he.dragging&&Y&&(T+8>=ce?he.intervalId.set(qx(F)):T-8<=0?he.intervalId.set(Hx(F)):j+8>=me?he.intervalId.set($x(F)):j-8<=0?he.intervalId.set(Fx(F)):Q+16>=window.innerHeight?he.intervalId.set(qx(window)):Q-16<=0?he.intervalId.set(Hx(window)):ee+16>=window.innerWidth?he.intervalId.set($x(window)):ee-16<=0&&he.intervalId.set(Fx(window)))})})(i.ghost,f,i.width,i.height,i.maxX,i.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,d),n.throttle(o.clientX,o.clientY)}var p,_,b,w,y,S,a,c})})(t,e),s=((c,d)=>f=>{c.on(p=>{var _,w,y,S;if(p.intervalId.clear(),p.dragging){if(w=d,y=(w=>{const y=w.getSel();if(N(y)){const S=y.getRangeAt(0).startContainer;return Me(S)?S.parentNode:S}return null})(d.selection),S=p.element,!C(y)&&y!==S&&!w.dom.isChildOf(y,S)&&w.dom.isEditable(y)){const w=null!==(_=d.getDoc().elementFromPoint(f.clientX,f.clientY))&&void 0!==_?_:d.getBody();Ul(d,"drop",w,p.dataTransfer,f).isDefaultPrevented()||d.undoManager.transact(()=>{((y,S)=>{const b=y.getParent(S.parentNode,y.isBlock);Ux(S),b&&b!==y.getRoot()&&y.isEmpty(b)&&Si(X(b))})(d.dom,p.element),(y=>{const S=y.getData("text/html");return""===S?O.none():O.some(S)})(p.dataTransfer).each(y=>d.insertContent(y)),d._selectionOverrides.hideFakeCaret()})}Ul(d,"dragend",d.getBody(),p.dataTransfer,f)}}),Vx(c)})(t,e),a=((c,d)=>f=>Wx(c,d,O.some(f)))(t,e);var c,d;e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",s),n.bind(r,"mousemove",i),n.bind(r,"mouseup",a),e.on("remove",()=>{n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",a)}),e.on("keydown",c=>{c.keyCode===Ke.ESC&&Wx(t,e,O.none())})})(b=e),OS(b)&&(T=>{const j=z=>{if(!z.isDefaultPrevented()){const Y=z.dataTransfer;Y&&(Oe(Y.types,"Files")||Y.files.length>0)&&(z.preventDefault(),"drop"===z.type&&md(T,"Dropped file type is not supported"))}},D=z=>{Yc(T,z.target)&&j(z)},F=()=>{const z=Gt.DOM,Y=T.dom,re=document,ie=T.inline?T.getBody():T.getDoc(),ce=["drop","dragover"];ke(ce,me=>{z.bind(re,me,D),Y.bind(ie,me,j)}),T.on("remove",()=>{ke(ce,me=>{z.unbind(re,me,D),Y.unbind(ie,me,j)})})};T.on("init",()=>{Vr.setEditorTimeout(T,F,0)})})(b),(b=>{const T=Sc(()=>{if(!b.removed&&b.getBody().contains(document.activeElement)){const j=b.selection.getRng();if(j.collapsed){const D=Gf(b,j,!1);b.selection.setRng(D)}}},0);b.on("focus",()=>{T.throttle()}),b.on("blur",()=>{T.cancel()})})(e),(b=>{b.on("init",()=>{b.on("focusin",T=>{const j=T.target;if(Mo(j)){const D=bs(b.getBody(),j),F=tn(D)?D:j;b.selection.getNode()!==F&&Ol(b,F).each(z=>b.selection.setRng(z))}})})})(e)),{showCaret:d,showBlockCaretContainer:b=>{b.hasAttribute("data-mce-caret")&&(yu(b),t.scrollIntoView(b))},hideFakeCaret:S,destroy:()=>{o.destroy(),a=null}};var b},aR=(e,t)=>{let n=t;for(let r=e.previousSibling;Me(r);r=r.previousSibling)n+=r.data.length;return n},Xx=(e,t,n,r,o)=>{if(Me(n)&&(r<0||r>n.data.length))return[];const i=o&&Me(n)?[aR(n,r)]:[r];let s=n;for(;s!==t&&s.parentNode;)i.push(e.nodeIndex(s,o)),s=s.parentNode;return s===t?i.reverse():[]},Xp=(e,t,n,r,o,i,s=!1)=>({start:Xx(e,t,n,r,s),end:Xx(e,t,o,i,s)}),Yx=(e,t)=>{const n=t.slice(),r=n.pop();return m(r)?et(n,(o,i)=>o.bind(s=>O.from(s.childNodes[i])),O.some(e)).bind(o=>Me(o)&&(r<0||r>o.data.length)?O.none():O.some({node:o,offset:r})):O.none()},Gx=(e,t)=>Yx(e,t.start).bind(({node:n,offset:r})=>Yx(e,t.end).map(({node:o,offset:i})=>{const s=document.createRange();return s.setStart(n,r),s.setEnd(o,i),s})),ya=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t,Me(t.firstChild)&&Ti(t.firstChild.data)),ya(e,r,n)}},Ud=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(Me(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Me(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),ya(e,o,n),o!==i&&ya(e,i,n))},Yp=(e,t)=>O.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Jx=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Nm(r).concat(e.blockPatterns),inlinePatterns:Am(r).concat(e.inlinePatterns)}},Qx=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},Zx=(e,t,n)=>{((r,o,i)=>{if(Me(r)&&0>=r.length)return O.some(Ao(r,0));{const s=as(Ed);return O.from(s.forwards(r,0,Td(r),i)).map(a=>Ao(a.container,0))}})(t,0,t).each(r=>{const o=r.container;cw(o,n.start.length,t).each(a=>{const c=e.createRng();c.setStart(o,0),c.setEnd(a.container,a.offset),Ud(e,c,d=>d===t)});const i=X(o),s=fc(i);var a,c;/^\s[^\s]/.test(s)&&(a=i,c=s.slice(1),gu.set(a,c))})},eC=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Wd=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},tC=(e,t,n)=>{const r=Gx(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,s=0===r.endOffset?i:i.splitText(r.endOffset),a=0===r.startOffset?o:o.splitText(r.startOffset),c=a.parentNode;return{prefix:t,end:s.parentNode.insertBefore(eC(e,t+"-end"),s),start:c.insertBefore(eC(e,t+"-start"),a)}},nC=(e,t,n)=>{ya(e,e.get(t.prefix+"-end"),n),ya(e,e.get(t.prefix+"-start"),n)},Gp=e=>0===e.start.length,rC=(e,t,n,r)=>{const o=t.start;var i;return yp(e,r.container,r.offset,(i=o,(s,a)=>{const c=s.data.substring(0,a),d=c.lastIndexOf(i.charAt(i.length-1)),f=c.lastIndexOf(i);return-1!==f?f+i.length:-1!==d?d+1:-1}),n).bind(s=>{var a,c;const d=null!==(c=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(o))&&void 0!==c?c:-1;if(-1!==d&&s.offset>=d+o.length){const f=e.createRng();return f.setStart(s.container,s.offset-o.length),f.setEnd(s.container,s.offset),O.some(f)}return _p(s.container,s.offset-o.length,n).map(p=>{const _=e.createRng();return _.setStart(p.container,p.offset),_.setEnd(s.container,s.offset),_}).filter(p=>p.toString()===o).orThunk(()=>rC(e,t,n,Ao(s.container,0)))})},lR=(e,t,n,r)=>{const o=e.dom,i=o.getRoot(),s=n.pattern,a=n.position.container,c=n.position.offset;return _p(a,c-n.pattern.end.length,t).bind(d=>{const f=Xp(o,i,d.container,d.offset,a,c,r);if(Gp(s))return O.some({matches:[{pattern:s,startRng:f,endRng:f}],position:d});{const p=Vd(e,n.remainingPatterns,d.container,d.offset,t,r),_=p.getOr({matches:[],position:d}),w=_.position;return((S,b,T,j,D,F=!1)=>{if(0===b.start.length&&!F){const z=S.createRng();return z.setStart(T,j),z.setEnd(T,j),O.some(z)}return vp(T,j,D).bind(z=>rC(S,b,D,z).bind(Y=>{var re;return F&&(Y.endContainer===z.container&&Y.endOffset===z.offset||0===z.offset&&(null===(re=Y.endContainer.textContent)||void 0===re?void 0:re.length)===Y.endOffset)?O.none():O.some(Y)}))})(o,s,w.container,w.offset,t,p.isNone()).map(S=>{const b=((T,j,D,F=!1)=>Xp(T,j,D.startContainer,D.startOffset,D.endContainer,D.endOffset,F))(o,i,S,r);return{matches:_.matches.concat([{pattern:s,startRng:b,endRng:f}]),position:Ao(S.startContainer,S.startOffset)}})}})},Vd=(e,t,n,r,o,i)=>{const s=e.dom;return vp(n,r,s.getRoot()).bind(a=>{const c=Qx(s,o,n,r);for(let d=0;d<t.length;d++){const f=t[d];if(!Ui(c,f.end))continue;const p=t.slice();p.splice(d,1);const _=lR(e,o,{pattern:f,remainingPatterns:p,position:a},i);if(_.isNone()&&r>0)return Vd(e,t,n,r-1,o,i);if(_.isSome())return _}return O.none()})},oC=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?ke(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},iC=(e,t,n,r,o,i)=>{var s;return((a,c)=>{const d=tt(a,f=>Ht(c,p=>f.pattern.start===p.pattern.start&&f.pattern.end===p.pattern.end));return a.length===c.length?d?a:c:a.length>c.length?a:c})(Vd(e,o.inlinePatterns,n,r,t,i).fold(()=>[],a=>a.matches),Vd(e,(s=o.inlinePatterns,Mt(s,(a,c)=>c.end.length-a.end.length)),n,r,t,i).fold(()=>[],a=>a.matches))},sC=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),o=((i,s)=>{const a=el("mce_textpattern"),c=Mn(s,(d,f)=>{const p=tC(i,a+`_end${d.length}`,f.endRng);return d.concat([{...f,endMarker:p}])},[]);return Mn(c,(d,f)=>{const p=c.length-d.length-1,_=Gp(f.pattern)?f.endMarker:tC(i,a+`_start${p}`,f.startRng);return d.concat([{...f,startMarker:_}])},[])})(n,t);ke(o,i=>{const s=n.getParent(i.startMarker.start,n.isBlock),a=c=>c===s;Gp(i.pattern)?((c,d,f,p)=>{const _=Wd(c.dom,f);Ud(c.dom,_,p),oC(c,d,_)})(e,i.pattern,i.endMarker,a):((c,d,f,p,_)=>{const w=c.dom,y=Wd(w,p),S=Wd(w,f);Ud(w,S,_),Ud(w,y,_);const T=Wd(w,{prefix:f.prefix,start:f.end,end:p.start});oC(c,d,T)})(e,i.pattern,i.startMarker,i.endMarker,a),nC(n,i.endMarker,a),nC(n,i.startMarker,a)}),e.selection.moveToBookmark(r)},aC=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},Jp=Gt.DOM,uR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Qp=e=>un(e,t=>!1===x(t)),lC=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Qp({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:uR(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},cC=e=>{const t=e.options.get;return Qp({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},dC=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,uC=e=>{const t=dC(e),n=Fm(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},i=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let c="";Ie.each(e.contentStyles,d=>{c+=d+"\r\n"}),e.dom.addStyle(c)}const s=Promise.all(((c,d,f)=>{const p=[dC(c).loadAll(d)];return c.inline?p:p.concat([c.ui.styleSheetLoader.loadAll(f)])})(e,r,n)).then(i).catch(i),a=cS(e);return a&&((c,d)=>{const f=X(c.getBody()),p=an(sn(f)),_=je("style");En(_,"type","text/css"),Qe(_,mt(d)),Qe(p,_),c.on("remove",()=>{_t(_)})})(e,a),s},Zp=e=>{var t;!0!==e.removed&&(Wo(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||zc(r)&&r.selection.getStart(!0)!==o||ar(o).each(i=>{const s=i.getNode(),a=oi(s)?ar(s).getOr(i):i;r.selection.setRng(a.toRange())})})(t),t.nodeChanged({initial:!0});const n=BS(t);P(n)&&n.call(t,t),(r=>{const o=MS(r);o&&Vr.setEditorTimeout(r,()=>{let i;i=!0===o?r:r.editorManager.get(o),i&&!i.destroyed&&(i.focus(),i.selection.scrollIntoView())},100)})(t)})(e))},hC=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Jp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();var s,a;r.disabled=!0,e.readonly=qm(e),e._editableRoot=NS(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===Jp.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let S=[];const b=D=>{if(!D.blob||!D.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const F=D.id||"blobid"+MN+++(()=>{const ie=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+ie()+ie()+ie()})(),z=D.name||F,Y=D.blob;var re;return{id:J(F),name:J(z),filename:J(D.filename||z+"."+(re=Y.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[re.toLowerCase()]||"dat")),blob:J(Y),base64:J(D.base64),blobUri:J(D.blobUri||URL.createObjectURL(Y)),uri:J(D.uri)}},T=D=>Z(S,D).getOrUndefined(),j=D=>T(F=>F.id()===D);return{create:(D,F,z,Y,re)=>{if(W(D))return b({id:D,name:Y,filename:re,blob:F,base64:z});if(M(D))return b(D);throw new Error("Unknown input type")},add:D=>{j(D.id())||S.push(D)},get:j,getByUri:D=>T(F=>F.blobUri()===D),getByData:(D,F)=>T(z=>z.base64()===D&&z.blob().type===F),findFirst:T,removeByUri:D=>{S=ot(S,F=>F.blobUri()!==D||(URL.revokeObjectURL(F.blobUri()),!1))},destroy:()=>{ke(S,D=>{URL.revokeObjectURL(D.blobUri())}),S=[]}}})();let n,r;const o=yb(),i=[],s=S=>b=>e.selection?S(b):[],a=(S,b,T)=>{let j=0;do{j=S.indexOf(b,j),-1!==j&&(S=S.substring(0,j)+T+S.substr(j+b.length),j+=T.length-b.length+1)}while(-1!==j);return S},c=(S,b,T)=>(S=a(S,`src="${b}"`,`src="${T}"${T===Bt.transparentSrc?' data-mce-placeholder="1"':""}`),a(S,'data-mce-src="'+b+'"','data-mce-src="'+T+'"')),d=(S,b)=>{ke(e.undoManager.data,T=>{"fragmented"===T.type?T.fragments=pt(T.fragments,j=>c(j,S,b)):T.content=c(T.content,S,b)})},f=()=>(n||(n=wb(e,o)),w().then(s(S=>{const b=pt(S,T=>T.blobInfo);return n.upload(b,bb(e)).then(s(T=>{const j=[];let D=!1;const F=pt(T,(z,Y)=>{const{blobInfo:re,image:ie}=S[Y];let ce=!1;return z.status&&Zk(e)?(z.url&&!yn(ie.src,z.url)&&(D=!0),t.removeByUri(ie.src),Wo(e)||((me,Q)=>{const ee=e.convertURL(Q,"src");var he;d(me.src,Q),so(X(me),{src:Lm(e)?(he=Q,he+(-1===he.indexOf("?")?"?":"&")+(new Date).getTime()):Q,"data-mce-src":ee})})(ie,z.url)):z.error&&(z.error.remove&&(d(ie.src,Bt.transparentSrc),j.push(ie),ce=!0),md(e,ko.translate(["Failed to upload image: {0}",z.error.message]))),{element:ie,status:z.status,uploadUri:z.url,blobInfo:re,removed:ce}});return j.length>0&&!Wo(e)?e.undoManager.transact(()=>{ke(Nn(j),z=>{const Y=rr(z);var re;_t(z),Y.each((re=e,ie=>{var ce,me;(ce=re).dom.isEmpty((me=ie).dom)&&N(ce.schema.getTextBlockElements()[Yt(me)])&&Qe(ie,xe('<br data-mce-bogus="1" />'))})),t.removeByUri(z.dom.src)})}):D&&e.undoManager.dispatchChange(),F}))}))),p=()=>Bm(e)?f():Promise.resolve([]),_=S=>tt(i,b=>b(S)),w=()=>(r||(r=((e,t)=>{const n={};return{findAll:(r,o=ft)=>{const i=ot((a=r)?vn(a.getElementsByTagName("img")):[],a=>{const c=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!c||c===Bt.transparentSrc)&&(Dn(c,"blob:")?!e.isUploaded(c)&&o(a):!!Dn(c,"data:")&&o(a))}),s=pt(i,a=>{const c=a.src;if(ut(n,c))return n[c].then(d=>W(d)?d:{image:a,blobInfo:d.blobInfo});{const d=((f,p)=>{const _=()=>Promise.reject("Invalid data URI");if(Dn(p,"blob:")){const S=f.getByUri(p);return N(S)?Promise.resolve(S):(w=p,Dn(w,"blob:")?(b=w,fetch(b).then(T=>T.ok?T.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${b} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Dn(w,"data:")?(y=w,new Promise((b,T)=>{Ef(y).bind(({type:j,data:D,base64Encoded:F})=>wy(j,D,F)).fold(()=>T("Invalid data URI"),b)})):Promise.reject("Unknown URI format")).then(b=>xy(b).then(T=>Cy(T,!1,j=>O.some(ky(f,b,j))).getOrThunk(_)))}var b,w,y;return Dn(p,"data:")?Sy(f,p).fold(_,S=>Promise.resolve(S)):Promise.reject("Unknown image data format")})(t,c).then(f=>(delete n[c],{image:a,blobInfo:f})).catch(f=>(delete n[c],f));return n[c]=d,d}});var a;return Promise.all(s)}}})(o,t)),r.findAll(e.getBody(),_).then(s(S=>{const b=ot(S,T=>W(T)?(md(e,T),!1):"blob"!==T.uriType);return Wo(e)||ke(b,T=>{d(T.image.src,T.blobInfo.blobUri()),T.image.src=T.blobInfo.blobUri(),T.image.removeAttribute("data-mce-src")}),b}))),y=S=>S.replace(/src="(blob:[^"]+)"/g,(b,T)=>{const j=o.getResultUri(T);if(j)return'src="'+j+'"';let D=t.getByUri(T);return D||(D=et(e.editorManager.get(),(F,z)=>F||z.editorUpload&&z.editorUpload.blobCache.getByUri(T),void 0)),D?'src="data:'+D.blob().type+";base64,"+D.base64()+'"':b});return e.on("SetContent",()=>{Bm(e)?p():w()}),e.on("RawSaveContent",S=>{S.content=y(S.content)}),e.on("GetContent",S=>{S.source_view||"raw"===S.format||"tree"===S.format||(S.content=y(S.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",S=>{ke(S,b=>{const T=b.attr("src");if(!T||t.getByUri(T))return;const j=o.getResultUri(T);j&&b.attr("src",j)})})}),{blobCache:t,addFilter:S=>{i.push(S)},uploadImages:f,uploadImagesAuto:p,scanForImages:w,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}})(e),e.schema=Ai(cC(e)),e.dom=Gt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:iS(e),referrerPolicy:Yu(e),onSetAttrib:s=>{e.dispatch("SetAttrib",s)}}),e.parser=(s=>{const a=ca(lC(s),s.schema);return a.addAttributeFilter("src,href,style,tabindex",(c,d)=>{const f=s.dom,p="data-mce-"+d;let _=c.length;for(;_--;){const w=c[_];let y=w.attr(d);if(y&&!w.attr(p)){if(0===y.indexOf("data:")||0===y.indexOf("blob:"))continue;"style"===d?(y=f.serializeStyle(f.parseStyle(y),w.name),y.length||(y=null),w.attr(p,y),w.attr(d,y)):"tabindex"===d?(w.attr(p,y),w.attr(d,null)):w.attr(p,s.convertURL(y,d,w.name))}}}),a.addNodeFilter("script",c=>{let d=c.length;for(;d--;){const f=c[d],p=f.attr("type")||"no/type";0!==p.indexOf("mce-")&&f.attr("type","mce-"+p)}}),tE(s)&&a.addNodeFilter("#cdata",c=>{var d;let f=c.length;for(;f--;){const p=c[f];p.type=8,p.name="#comment",p.value="[CDATA["+s.dom.encode(null!==(d=p.value)&&void 0!==d?d:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",c=>{let d=c.length;const f=s.schema.getNonEmptyElements();for(;d--;){const p=c[d];p.isEmpty(f)&&0===p.getAll("br").length&&p.append(new br("br",1))}}),a})(e),e.serializer=cb((s=>{const a=s.options.get;return{...lC(s),...cC(s),...Qp({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(e),e),e.selection=lb(e.dom,e.getWin(),e.serializer,e),e.annotator=Hv(e),e.formatter=kb(e),e.undoManager=Eb(e),e._nodeChangeDispatcher=new RO(e),e._selectionOverrides=sR(e),(s=>{const a=Oi(),c=Fn(!1),d=Iu(f=>{s.dispatch("longpress",{...f,type:"longpress"}),c.set(!0)},400);s.on("touchstart",f=>{D1(f).each(p=>{d.cancel();const _={x:p.clientX,y:p.clientY,target:f.target};d.throttle(f),c.set(!1),a.set(_)})},!0),s.on("touchmove",f=>{d.cancel(),D1(f).each(p=>{a.on(_=>{((w,y)=>{const S=Math.abs(w.clientX-y.x),b=Math.abs(w.clientY-y.y);return S>5||b>5})(p,_)&&(a.clear(),c.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",f=>{d.cancel(),"touchcancel"!==f.type&&a.get().filter(p=>p.target.isEqualNode(f.target)).each(()=>{c.get()?f.preventDefault():s.dispatch("tap",{...f,type:"tap"})})},!0)})(e),(a=s=e).on("click",c=>{a.dom.getParent(c.target,"details")&&c.preventDefault()}),(a=>{a.parser.addNodeFilter("details",c=>{const d=iE(a);ke(c,f=>{"expanded"===d?f.attr("open","open"):"collapsed"===d&&f.attr("open",null)})}),a.serializer.addNodeFilter("details",c=>{const d=sE(a);ke(c,f=>{"expanded"===d?f.attr("open","open"):"collapsed"===d&&f.attr("open",null)})})})(s),(s=>{const a="contenteditable",c=" "+Ie.trim(ZS(s))+" ",d=" "+Ie.trim(Vm(s))+" ",f=L1(c),p=L1(d),_=eE(s);_.length>0&&s.on("BeforeSetContent",w=>{((y,S,b)=>{let T=S.length,j=b.content;if("raw"!==b.format){for(;T--;)j=j.replace(S[T],NA(y,j,Vm(y)));b.content=j}})(s,_,w)}),s.parser.addAttributeFilter("class",w=>{let y=w.length;for(;y--;){const S=w[y];f(S)?S.attr(a,"true"):p(S)&&S.attr(a,"false")}}),s.serializer.addAttributeFilter(a,w=>{let y=w.length;for(;y--;){const S=w[y];(f(S)||p(S))&&(_.length>0&&S.attr("data-mce-content")?(S.name="#text",S.type=3,S.raw=!0,S.value=S.attr("data-mce-content")):S.attr(a,null))}})})(e),Wo(e)||((s=>{s.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(e=>{const t=((n,r)=>{const o=ye.fromRangeStart(n).getNode(),i=(f=r,Bo(X(o),p=>xo(p.dom)||$r(p),Dx(f)).getOr(X(f)).dom),s=Bx(o,i,!1),a=Bx(o,i,!0),c=document.createRange();var f;return Px(s,i).fold(()=>{jx(s)?c.setStart(s,0):c.setStartBefore(s)},d=>c.setStartBefore(d.dom)),Px(a,i).fold(()=>{jx(a)?c.setEnd(a,a.data.length):c.setEndAfter(a)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody());e.selection.setRng(df(t))})(s))})})(e),(s=>{(a=>{const c=[",",".",";",":","!","?"],d=[32],f=()=>{return w=JS(a),y=QS(a),{inlinePatterns:Am(w),blockPatterns:Nm(w),dynamicPatternsLookup:y};var w,y},p=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",w=>{if(13===w.keyCode&&!Ke.modifierPressed(w)&&a.selection.isCollapsed()){const y=f();(y.inlinePatterns.length>0||y.blockPatterns.length>0||p())&&((e,t)=>{const n=e.selection.getRng();return Yp(e,n).map(r=>{var o;const i=Math.max(0,n.startOffset),s=Jx(t,r,null!==(o=r.textContent)&&void 0!==o?o:""),a=iC(e,r,n.startContainer,i,s,!0),c=((d,f,p,_)=>{var w;const y=d.dom,S=sr(d);if(!y.is(f,S))return[];const b=null!==(w=f.textContent)&&void 0!==w?w:"";return((T,j)=>{const D=Mt(T,(Y,re)=>re.start.length-Y.start.length),F=j.replace(zn," ");return Z(D,z=>0===j.indexOf(z.start)||0===F.indexOf(z.start))})(p.blockPatterns,b).map(T=>Ie.trim(b).length===T.start.length?[]:[{pattern:T,range:Xp(y,y.getRoot(),f,0,f,0,!0)}]).getOr([])})(e,r,s);return(c.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent("\ufeff"),sC(e,a),((p,_)=>{if(0===_.length)return;const w=p.selection.getBookmark();ke(_,y=>((S,b)=>{const j=b.pattern,D=Gx(S.dom.getRoot(),b.range).getOrDie("Unable to resolve path range");return Yp(S,D).each(F=>{"block-format"===j.type?((z,Y)=>{const re=Y.get(z);return u(re)&&jn(re).exists(ie=>ut(ie,"block"))})(j.format,S.formatter)&&S.undoManager.transact(()=>{Zx(S.dom,F,j),S.formatter.apply(j.format)}):"block-command"===j.type&&S.undoManager.transact(()=>{Zx(S.dom,F,j),S.execCommand(j.cmd,!1,j.value)})}),!0})(p,y)),p.selection.moveToBookmark(w)})(e,c);const d=e.selection.getRng(),f=vp(d.startContainer,d.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),f.each(p=>{const _=p.container;"\ufeff"===_.data.charAt(p.offset-1)&&(_.deleteData(p.offset-1,1),ya(e.dom,_.parentNode,w=>w===e.dom.getRoot()))})}),!0)}).getOr(!1)})(a,y)&&w.preventDefault()}},!0);const _=()=>{if(a.selection.isCollapsed()){const w=f();(w.inlinePatterns.length>0||p())&&((y,S)=>{const b=y.selection.getRng();Yp(y,b).map(T=>{const j=Math.max(0,b.startOffset-1),D=Qx(y.dom,T,b.startContainer,j),F=Jx(S,T,D),z=iC(y,T,b.startContainer,j,F,!1);z.length>0&&y.undoManager.transact(()=>{sC(y,z)})})})(a,w)}};a.on("keyup",w=>{aC(d,w,(y,S)=>y===S.keyCode&&!Ke.modifierPressed(S))&&_()}),a.on("keypress",w=>{aC(c,w,(y,S)=>y.charCodeAt(0)===S.charCode)&&Vr.setEditorTimeout(a,_)})})(s)})(e));const o=OO(e);((e,t)=>{e.addCommand("delete",()=>{var n;j1(n=e,t,!1).fold(()=>{Yh(n),Gh(n)},ue)}),e.addCommand("forwardDelete",()=>{var n;j1(n=e,t,!0).fold(()=>u0(n,"ForwardDelete"),ue)})})(e,o),(s=>{s.on("NodeChange",ge(TA,s))})(e),(s=>{var a;const c=s.dom,d=sr(s),f=null!==(a=fS(s))&&void 0!==a?a:"",p=(_,w)=>{if((b=>{if(Nb(b)){const T=b.keyCode;return!Ab(b)&&(Ke.metaKeyPressed(b)||b.altKey||T>=112&&T<=123||Oe(UN,T))}return!1})(_))return;const y=s.getBody(),S=!(Nb(b=_)&&!(Ab(b)||"keyup"===b.type&&229===b.keyCode))&&((b,T,j)=>{if(Sn(X(T),!1)){const D=T.firstElementChild;return!D||!b.getStyle(T.firstElementChild,"padding-left")&&!b.getStyle(T.firstElementChild,"padding-right")&&j===D.nodeName.toLowerCase()}return!1})(c,y,d);var b;(""!==c.getAttrib(y,Tb)!==S||w)&&(c.setAttrib(y,Tb,S?f:null),c.setAttrib(y,"aria-placeholder",S?f:null),((b,T)=>{b.dispatch("PlaceholderToggle",{state:T})})(s,S),s.on(S?"keydown":"keyup",p),s.off(S?"keyup":"keydown",p))};pr(f)&&s.on("init",_=>{p(_,!0),s.on("change SetContent ExecCommand",p),s.on("paste",w=>Vr.setEditorTimeout(s,()=>p(w)))})})(e),(e=>{const t=Fn(!1),n=Fn(XS(e)?"text":"html"),r=(o=>{const i=Fn(null);return{create:()=>((s,a)=>{const{dom:c,selection:d}=s,f=s.getBody();a.set(d.getRng());const p=c.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},mx);Bt.browser.isFirefox()&&c.setStyle(p,"left","rtl"===c.getStyle(f,"direction",!0)?65535:-65535),c.bind(p,"beforedeactivate focusin focusout",_=>{_.stopPropagation()}),p.focus(),d.select(p,!0)})(o,i),remove:()=>((s,a)=>{const c=s.dom;if(Hp(s)){let d;const f=a.get();for(;d=Hp(s);)c.remove(d),c.unbind(d);f&&s.selection.setRng(f)}a.set(null)})(o,i),getEl:()=>Hp(o),getHtml:()=>(s=>{const a=s.dom,c=(_,w)=>{_.appendChild(w),a.remove(w,!0)},[d,...f]=ot(s.getBody().childNodes,zO);ke(f,_=>{c(d,_)});const p=a.select("div[id=mcepastebin]",d);for(let _=p.length-1;_>=0;_--){const w=a.create("div");d.insertBefore(w,p[_]),c(w,p[_])}return d?d.innerHTML:""})(o),getLastRng:i.get}})(e);var o,i,s;o=e,(Bt.browser.isChromium()||Bt.browser.isSafari())&&(s=VO,(i=o).on("PastePreProcess",a=>{a.content=s(i,a.content,a.internal)})),((o,i)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((s,a)=>{"text"===a.get()?(a.set("html"),Yv(s,!1)):(a.set("text"),Yv(s,!0)),s.focus()})(o,i)}),o.addCommand("mceInsertClipboardContent",(s,a)=>{a.html&&Hd(o,a.html,a.internal,!1),a.text&&Wp(o,a.text,!1)})})(e,n),(o=>{const i=c=>d=>{c(o,d)},s=$S(o);P(s)&&o.on("PastePreProcess",i(s));const a=HS(o);P(a)&&o.on("PastePostProcess",i(a))})(e),e.on("PreInit",()=>{(o=>{o.on("cut",(i=>s=>{!s.isDefaultPrevented()&&Nx(i)&&Sx(s,Tx(i),Ex(i),()=>{if(Bt.browser.isChromium()||Bt.browser.isFirefox()){const a=i.selection.getRng();Vr.setEditorTimeout(i,()=>{i.selection.setRng(a),i.execCommand("Delete")},0)}else i.execCommand("Delete")})})(o)),o.on("copy",(i=>s=>{!s.isDefaultPrevented()&&Nx(i)&&Sx(s,Tx(i),Ex(i),I)})(o))})(e),((o,i)=>{FS(o)&&o.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Rc(o)||o.on("drop",s=>{const a=s.dataTransfer;a&&Ht(a.files,d=>/^image\//.test(d.type))&&s.preventDefault()}),o.on("drop",s=>{if(s.isDefaultPrevented())return;const a=Ax(o,s);if(C(a))return;const c=xx(s.dataTransfer),d=$i(c,$d());if((!Cx(c)||(y=>{const S=y["text/plain"];return!!S&&0===S.indexOf("file://")})(c))&&kx(o,s,a))return;const f=c[$d()],p=f||c["text/html"]||c["text/plain"],_=((y,S,b,T)=>{const j=y.getParent(b,D=>ns(S,D));if(!k(y.getParent(b,"summary")))return!0;if(j&&ut(T,"text/html")){const D=(new DOMParser).parseFromString(T["text/html"],"text/html").body;return!k(D.querySelector(j.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,a.startContainer,c),w=i.get();w&&!_||p&&(s.preventDefault(),Vr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(f||w&&_)&&o.execCommand("Delete"),Ox(o,a);const y=yx(p);c["text/html"]?Hd(o,y,d,!0):Wp(o,y,!0)})}))}),o.on("dragstart",s=>{i.set(!0)}),o.on("dragover dragend",s=>{Rc(o)&&!i.get()&&(s.preventDefault(),Ox(o,Ax(o,s))),"dragend"===s.type&&i.set(!1)}),(s=>{s.on("input",a=>{const c=d=>k(d.querySelector("summary"));if("deleteByDrag"===a.inputType){const d=ot(s.dom.select("details"),c);ke(d,f=>{hn(f.firstChild)&&f.firstChild.remove();const p=s.dom.create("summary");p.appendChild(Wa().dom),f.prepend(p)})}})})(o)})(e,t),((e,t,n)=>{((r,o,i)=>{let s;r.on("keydown",a=>{var c;(Ke.metaKeyPressed(c=a)&&86===c.keyCode||c.shiftKey&&45===c.keyCode)&&!a.isDefaultPrevented()&&(s=a.shiftKey&&86===a.keyCode)}),r.on("paste",a=>{if(a.isDefaultPrevented()||(f=a,Bt.os.isAndroid()&&0===(null===(_=null===(p=f.clipboardData)||void 0===p?void 0:p.items)||void 0===_?void 0:_.length)))return;var f,p,_;const c="text"===i.get()||s;s=!1;const d=xx(a.clipboardData);!Cx(d)&&kx(r,a,o.getLastRng()||r.selection.getRng())||($i(d,"text/html")?(a.preventDefault(),Vp(r,d,d["text/html"],c,!0)):$i(d,"text/plain")&&$i(d,"text/uri-list")?(a.preventDefault(),Vp(r,d,d["text/plain"],c,!0)):(o.create(),Vr.setEditorTimeout(r,()=>{const f=o.getHtml();o.remove(),Vp(r,d,f,c,!1)},0)))})})(e,t,n),(r=>{const o=s=>Dn(s,"webkit-fake-url"),i=s=>Dn(s,"data:");r.parser.addNodeFilter("img",(s,a,c)=>{if(!Rc(r)&&!0===(null===(f=c.data)||void 0===f?void 0:f.paste))for(const d of s){const f=d.attr("src");W(f)&&!d.attr("data-mce-object")&&f!==Bt.transparentSrc&&(o(f)||!GS(r)&&i(f))&&d.remove()}var f})})(e)})(e,r,n)})})(e);const i=(s=>{const a=s;return(c=s,qt(c.plugins,"rtc").bind(d=>O.from(d.setup))).fold(()=>(a.rtcInstance=nb(s),O.none()),c=>(a.rtcInstance=(()=>{const d=J(null),f=J("");return{init:{bindEvents:I},undoManager:{beforeChange:I,add:d,undo:d,redo:d,clear:I,reset:I,hasUndo:Et,hasRedo:Et,transact:d,ignore:I,extra:I},formatter:{match:Et,matchAll:J([]),matchNode:J(void 0),canApply:Et,closest:f,apply:I,remove:I,toggle:I,formatChanged:J({unbind:I})},editor:{getContent:f,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:I},selection:{getContent:f},autocompleter:{addDecoration:I,removeDecoration:I},raw:{getModel:J(O.none())}}})(),O.some(()=>c().then(d=>(a.rtcInstance=(f=>{const p=D=>M(D)?D:{},{init:_,undoManager:w,formatter:y,editor:S,selection:b,autocompleter:T,raw:j}=f;return{init:{bindEvents:_.bindEvents},undoManager:{beforeChange:w.beforeChange,add:w.add,undo:w.undo,redo:w.redo,clear:w.clear,reset:w.reset,hasUndo:w.hasUndo,hasRedo:w.hasRedo,transact:(D,F,z)=>w.transact(z),ignore:(D,F)=>w.ignore(F),extra:(D,F,z,Y)=>w.extra(z,Y)},formatter:{match:(D,F,z,Y)=>y.match(D,p(F),Y),matchAll:y.matchAll,matchNode:y.matchNode,canApply:D=>y.canApply(D),closest:D=>y.closest(D),apply:(D,F,z)=>y.apply(D,p(F)),remove:(D,F,z,Y)=>y.remove(D,p(F)),toggle:(D,F,z)=>y.toggle(D,p(F)),formatChanged:(D,F,z,Y,re)=>y.formatChanged(F,z,Y,re)},editor:{getContent:D=>S.getContent(D),setContent:(D,F)=>({content:S.setContent(D,F),html:""}),insertContent:(D,F)=>(S.insertContent(D),""),addVisual:S.addVisual},selection:{getContent:(D,F)=>b.getContent(F)},autocompleter:{addDecoration:T.addDecoration,removeDecoration:T.removeDecoration},raw:{getModel:()=>O.some(j.getRawModel())}}})(d),d.rtc.isRemote)))));var c})(e);(s=>{const a=s.getDoc(),c=s.getBody();s.dispatch("PreInit"),IS(s)||(a.body.spellcheck=!1,Jp.setAttrib(c,"spellcheck","false")),s.quirks=(e=>{const t=Ie.each,n=Ke.BACKSPACE,r=Ke.DELETE,o=e.dom,i=e.selection,s=e.parser,a=Bt.browser,c=a.isFirefox(),d=a.isChromium()||a.isSafari(),f=Bt.deviceType.isiPhone()||Bt.deviceType.isiPad(),p=Bt.os.isMacOS()||Bt.os.isiOS(),_=(Q,ee)=>{try{e.getDoc().execCommand(Q,!1,String(ee))}catch{}},w=Q=>Q.isDefaultPrevented(),y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",Q=>{let ee;if(Q.target===e.getDoc().documentElement)if(ee=i.getRng(),e.getBody().focus(),"mousedown"===Q.type){if(Hr(ee.startContainer))return;i.placeCaretAt(Q.clientX,Q.clientY)}else i.setRng(ee)})},b=()=>{Range.prototype.getClientRects||e.on("mousedown",Q=>{if(!w(Q)&&"HTML"===Q.target.nodeName){const ee=e.getBody();ee.blur(),Vr.setEditorTimeout(e,()=>{ee.focus()})}})},T=()=>{const Q=Wm(e);e.on("click",ee=>{const he=ee.target;/^(IMG|HR)$/.test(he.nodeName)&&o.isEditable(he.parentNode)&&(ee.preventDefault(),e.selection.select(he),e.nodeChanged()),"A"===he.nodeName&&o.hasClass(he,Q)&&0===he.childNodes.length&&o.isEditable(he.parentNode)&&(ee.preventDefault(),i.select(he))})},j=()=>{e.on("keydown",Q=>{if(!w(Q)&&Q.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){const ee=i.getNode().previousSibling;if(ee&&ee.nodeName&&"table"===ee.nodeName.toLowerCase())return Q.preventDefault(),!1}return!0})},D=()=>{qm(e)||e.on("BeforeExecCommand mousedown",()=>{_("StyleWithCSS",!1),_("enableInlineTableEditing",!1),$m(e)||_("enableObjectResizing",!1)})},F=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},z=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Y=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Q=>{let ee;"HTML"===Q.target.nodeName&&(ee=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(ee),e.selection.normalize(),e.nodeChanged())}))},re=()=>{p&&e.on("keydown",Q=>{!Ke.metaKeyPressed(Q)||Q.shiftKey||37!==Q.keyCode&&39!==Q.keyCode||(Q.preventDefault(),e.selection.getSel().modify("move",37===Q.keyCode?"backward":"forward","lineboundary"))})},ie=()=>{e.on("click",Q=>{let ee=Q.target;do{if("A"===ee.tagName)return void Q.preventDefault()}while(ee=ee.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ce=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Q=>{Q.preventDefault()})})},me=I;return Wo(e)?(d&&(S(),T(),ce(),y(),f&&(z(),Y(),ie())),c&&(b(),D(),F(),re())):(e.on("keydown",Q=>{if(w(Q)||Q.keyCode!==Ke.BACKSPACE)return;let ee=i.getRng();const he=ee.startContainer,we=ee.startOffset,Ve=o.getRoot();let Be=he;if(ee.collapsed&&0===we){for(;Be.parentNode&&Be.parentNode.firstChild===Be&&Be.parentNode!==Ve;)Be=Be.parentNode;"BLOCKQUOTE"===Be.nodeName&&(e.formatter.toggle("blockquote",void 0,Be),ee=o.createRng(),ee.setStart(he,0),ee.setEnd(he,0),i.setRng(ee))}}),(()=>{const Q=ee=>{const he=o.create("body"),we=ee.cloneContents();return he.appendChild(we),i.serializer.serialize(he,{format:"html"})};e.on("keydown",ee=>{const he=ee.keyCode;if(!w(ee)&&(he===r||he===n)&&e.selection.isEditable()){const we=e.selection.isCollapsed(),Ve=e.getBody();if(we&&(!o.isEmpty(Ve)||(Be=>{const rt=X(Be);return Ht(Qn(rt,'[contenteditable="true"]'),Je=>wi(Je).exists(gt=>!bo(gt)))})(Ve))||!we&&!(Be=>{const rt=Q(Be),Je=o.createRng();return Je.selectNode(e.getBody()),rt===Q(Je)})(e.selection.getRng()))return;ee.preventDefault(),e.setContent(""),Ve.firstChild&&o.isBlock(Ve.firstChild)?e.selection.setCursorLocation(Ve.firstChild,0):e.selection.setCursorLocation(Ve,0),e.nodeChanged()}})})(),Bt.windowsPhone||e.on("keyup focusin mouseup",Q=>{Ke.modifierPressed(Q)||(ee=>{const he=ee.getBody(),we=ee.selection.getRng();return we.startContainer===we.endContainer&&we.startContainer===he&&0===we.startOffset&&we.endOffset===he.childNodes.length})(e)||i.normalize()},!0),d&&(S(),T(),e.on("init",()=>{_("DefaultParagraphSeparator",sr(e))}),ce(),j(),s.addNodeFilter("br",Q=>{let ee=Q.length;for(;ee--;)"Apple-interchange-newline"===Q[ee].attr("class")&&Q[ee].remove()}),f?(z(),Y(),ie()):y()),c&&(e.on("keydown",Q=>{if(!w(Q)&&Q.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){const ee=i.getNode(),he=ee.previousSibling;if("HR"===ee.nodeName)return o.remove(ee),void Q.preventDefault();he&&he.nodeName&&"hr"===he.nodeName.toLowerCase()&&(o.remove(he),Q.preventDefault())}}}),b(),(()=>{const Q=()=>{const he=o.getAttribs(i.getStart().cloneNode(!1));return()=>{const we=i.getStart();we!==e.getBody()&&(o.setAttrib(we,"style",null),t(he,Ve=>{we.setAttributeNode(Ve.cloneNode(!0))}))}},ee=()=>!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock);e.on("keypress",he=>{let we;return!(!(w(he)||8!==he.keyCode&&46!==he.keyCode)&&ee()&&(we=Q(),e.getDoc().execCommand("delete",!1),we(),he.preventDefault(),1))}),o.bind(e.getDoc(),"cut",he=>{if(!w(he)&&ee()){const we=Q();Vr.setEditorTimeout(e,()=>{we()})}})})(),D(),e.on("SetContent ExecCommand",Q=>{"setcontent"!==Q.type&&"mceInsertLink"!==Q.command||t(o.select("a:not([data-mce-block])"),ee=>{var he;let we=ee.parentNode;const Ve=o.getRoot();if(we?.lastChild===ee){for(;we&&!o.isBlock(we);){if((null===(he=we.parentNode)||void 0===he?void 0:he.lastChild)!==we||we===Ve)return;we=we.parentNode}o.add(we,"br",{"data-mce-bogus":1})}})}),F(),re(),j(),e.on("drop",Q=>{var ee;const he=null===(ee=Q.dataTransfer)||void 0===ee?void 0:ee.getData("text/html");W(he)&&/^<img[^>]*>$/.test(he)&&e.dispatch("dragend",new window.DragEvent("dragend",Q))}))),{refreshContentEditable:me,isHidden:()=>{if(!c||e.removed)return!1;const Q=e.selection.getSel();return!Q||!Q.rangeCount||0===Q.rangeCount}}})(s),s.dispatch("PostRender");const d=dS(s);void 0!==d&&(c.dir=d);const f=zS(s);f&&s.on("BeforeSetContent",p=>{Ie.each(f,_=>{p.content=p.content.replace(_,w=>"\x3c!--mce:protected "+escape(w)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",p=>{s.composing="compositionstart"===p.type})})(e),i.fold(()=>{const s=(a=>{let c=!1;const d=setTimeout(()=>{c||a.setProgressState(!0)},500);return()=>{clearTimeout(d),c=!0,a.setProgressState(!1)}})(e);uC(e).then(()=>{Zp(e),s()})},s=>{e.setProgressState(!0),uC(e).then(()=>{s().then(a=>{e.setProgressState(!1),Zp(e),rb(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Zp(e),rb(e)})})})},hR=ft,eg=Gt.DOM,fC=Gt.DOM,pC=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),gC=e=>{const t=e.getElement();return e.inline?pC(null):(n=>{const r=fC.create("div");return fC.insertAfter(r,n),pC(r,r)})(t)},fR=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const r=Ie.trim(Mm(n)),o=n.ui.registry.getAll().icons,i={...gd.get("default").icons,...gd.get(r).icons};Ft(i,(s,a)=>{ut(o,a)||n.ui.registry.addIcon(a,s)})})(e),(n=>{const r=Js(n);if(W(r)){const o=ks.get(r);n.theme=o(n,ks.urls[r])||{},P(n.theme.init)&&n.theme.init(n,ks.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const r=Gu(n),o=da.get(r);n.model=o(n,da.urls[r])})(e),(n=>{const r=[];ke(Oc(n),o=>{((i,s,a)=>{const c=ua.get(a),d=ua.urls[a]||i.documentBaseUrl.replace(/\/$/,"");if(a=Ie.trim(a),c&&-1===Ie.inArray(s,a)){if(i.plugins[a])return;try{const f=c(i,d)||{};i.plugins[a]=f,P(f.init)&&(f.init(i,d),s.push(a))}catch(f){((p,_,w)=>{const y=ko.translate(["Failed to initialize plugin: {0}",_]);Uv(p,"PluginLoadError",{message:y}),vd(y,w),md(p,y)})(i,a,f)}}})(n,r,o.replace(/^\-/,""))})})(e);const t=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,W(Js(n))?(o=>{const i=o.theme.renderUI;return i?i():gC(o)})(n):P(Js(n))?(o=>{const i=o.getElement(),s=Js(o)(o,i);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||o.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||o.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:i.offsetHeight,s})(n):gC(n)})(e);var n,r;((n,r)=>{const o={show:O.from(r.show).getOr(I),hide:O.from(r.hide).getOr(I),isEnabled:O.from(r.isEnabled).getOr(ft),setEnabled:i=>{n.mode.isReadOnly()||O.from(r.setEnabled).each(s=>s(i))}};n.ui={...n.ui,...o}})(e,O.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(_b(r=n,lS(r)),(r=>_b(r,Fm(r)))(n)),e.inline?hC(e):((n,r)=>{((o,i)=>{const s=o.translate("Rich Text Area"),a=vo(X(o.getElement()),"tabindex").bind(Vi),c=((d,f,p,_)=>{const w=je("iframe");return _.each(y=>En(w,"tabindex",y)),so(w,p),so(w,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),le(w,"tox-edit-area__iframe"),w})(o.id,s,qk(o),a).dom;c.onload=()=>{c.onload=null,o.dispatch("load")},o.contentAreaContainer=i.iframeContainer,o.iframeElement=c,o.iframeHTML=(d=>{let f=Uk(d)+"<html><head>";Dm(d)!==d.documentBaseUrl&&(f+='<base href="'+d.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const p=Wk(d),_=Vk(d),w=d.translate(DS(d));return Pm(d)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+Pm(d)+'" />'),f+=`</head><body id="${p}" class="mce-content-body ${_}" data-id="${d.id}" aria-label="${w}"><br></body></html>`,f})(o),eg.add(i.iframeContainer,c)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=eg.isHidden(r.editorContainer)),n.getElement().style.display="none",eg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const i=o.iframeElement,s=()=>{o.contentDocument=i.contentDocument,hC(o)};if(rE(o)||Bt.browser.isFirefox()){const c=o.getDoc();c.open(),c.write(o.iframeHTML),c.close(),s()}else{const c=((e,t,n,r)=>((o,i,s,a,c)=>{const d=(f=s,p=a,_=>{f(_)&&p((w=>{const y=X(ni(w).getOr(w.target)),S=()=>w.stopPropagation(),b=()=>w.preventDefault(),T=B(b,S);return{target:y,x:w.clientX,y:w.clientY,stop:S,prevent:b,kill:T,raw:w}})(_))});var f,p;return o.dom.addEventListener(i,d,!1),{unbind:ge(Sr,o,i,d,!1)}})(e,"load",n,()=>{c.unbind(),s()}))(X(i),0,hR);i.srcdoc=o.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Es=Gt.DOM,mC=e=>"-"===e.charAt(0),vC=(e,t,n)=>O.from(t).filter(r=>pr(r)&&!gd.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:O.some(r)})),_C=tr().deviceType,yC=_C.isPhone(),gR=_C.isTablet(),Vl=e=>{if(C(e))return[];{const t=u(e)?e:e.split(/[ ,]/),n=pt(t,mo);return ot(n,pr)}},tg=(e,t)=>ut(e.sections(),t),vR=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:qt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),_R=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Ie.extend({},e.external_plugins,r):r},wR=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((o,i,s)=>{const a=X(o.getRoot());return s=wl(a,ye.fromRangeStart(i))?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),xl(a,ye.fromRangeEnd(i))?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t):t},Kd=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const i=Ie.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:i}}return{content:o,details:{}}})(t);Mf(e,{...r,content:wR(e,n),format:"html",set:!1,selection:!0}).each(o=>{const i=(a=o.content,c=r,Uf(e).editor.insertContent(a,c));var a,c;If(e,i,o),e.addVisual()})}},xR={"font-size":"size","font-family":"face"},CR=ei("font"),bC=e=>(t,n)=>O.from(n).map(X).filter(nr).bind(r=>{return(o=e,i=t,s=r.dom,pf(X(s),a=>{return Se(c=a,o).orThunk(()=>CR(c)?qt(xR,o).bind(d=>vo(c,d)):O.none());var c},a=>Dt(X(i),a))).or(((o,i)=>O.from(Gt.DOM.getStyle(i,o,!0)))(e,r.dom));var o,i,s}).getOr(""),kR=bC("font-size"),SR=B(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),bC("font-family")),ER=e=>ar(e.getBody()).bind(t=>{const n=t.container();return O.from(Me(n)?n.parentNode:n)}),ng=(e,t)=>{return n=e,r=ne(O.some,t),(o=n,O.from(o.selection.getRng()).bind(i=>{const s=o.getBody();return i.startContainer===s&&0===i.startOffset?O.none():O.from(o.selection.getStart(!0))})).orThunk(ge(ER,n)).map(X).filter(nr).bind(r);var n,r,o},wC=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=Ie.explode(e.options.get("font_size_style_values")),o=Ie.explode(e.options.get("font_size_classes"));return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},TR=e=>{const t=e.split(/\s*,\s*/);return pt(t,n=>-1===n.indexOf(" ")||Dn(n,'"')||Dn(n,"'")?n:`'${n}'`).join(",")},xC=(e,t)=>{const n=e.dom,r=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),i=t?r.startContainer:r.endContainer,s=$l(n,i);if(!s||!s.isContentEditable)return;const a=t?nt:it,c=sr(e);((d,f,p,_)=>{const w=d.dom,y=b=>w.isBlock(b)&&b.parentElement===p,S=y(f)?f:w.getParent(_,y,p);return O.from(S).map(X)})(e,o,s,i).each(d=>{const f=$w(e,i,d.dom,s,!1,c);a(d,X(f)),e.selection.setCursorLocation(f,0),e.dispatch("NewBlock",{newBlock:f}),Fl(e,"insertParagraph")})},AR=["toggleview"],CC=e=>Oe(AR,e.toLowerCase());class kC{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,r,o){const i=this.editor,s=t.toLowerCase(),a=o?.skip_focus;if(i.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||a?Rh(d=i).each(f=>d.selection.setRng(f)):i.focus()),i.dispatch("BeforeExecCommand",{command:t,ui:n,value:r}).isDefaultPrevented()))return!1;var d;const c=this.commands.exec[s];return!!P(c)&&(c(s,n,r),i.dispatch("ExecCommand",{command:t,ui:n,value:r}),!0)}queryCommandState(t){if(!CC(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),r=this.commands.state[n];return!!P(r)&&r(n)}queryCommandValue(t){if(!CC(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),r=this.commands.value[n];return P(r)?r(n):""}addCommands(t,n="exec"){const r=this.commands;Ft(t,(o,i)=>{ke(i.toLowerCase().split(","),s=>{r[n][s]=o})})}addCommand(t,n,r){const o=t.toLowerCase();this.commands.exec[o]=(i,s,a)=>n.call(r??this.editor,s,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,r){this.commands.state[t.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(t,n,r){this.commands.value[t.toLowerCase()]=()=>n.call(r??this.editor)}}const Ts="data-mce-contenteditable",rg=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Xd=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Ns=e=>e.readonly,SC=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Ns(e)&&ke(t,n=>{n.attr(Ts,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Ts,t=>{Ns(e)&&ke(t,n=>{n.attr("contenteditable",n.attr(Ts))})}),e.serializer.addTempAttr(Ts)},RR=["copy"],jR=Ie.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class og{static isNative(t){return!!jR[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Et}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const r=t.toLowerCase(),o=Du(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const i=this.bindings[r];if(i)for(let s=0,a=i.length;s<a;s++){const c=i[s];if(!c.removed){if(c.once&&this.off(r,c.func),o.isImmediatePropagationStopped())return o;if(!1===c.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,n,r,o){if(!1===n&&(n=Et),n){const i={func:n,removed:!1};o&&Ie.extend(i,o);const s=t.toLowerCase().split(" ");let a=s.length;for(;a--;){const c=s[a];let d=this.bindings[c];d||(d=[],this.toggleEvent(c,!0)),d=r?[i,...d]:[...d,i],this.bindings[c]=d}}return this}off(t,n){if(t){const r=t.toLowerCase().split(" ");let o=r.length;for(;o--;){const i=r[o];let s=this.bindings[i];if(!i)return Ft(this.bindings,(a,c)=>{this.toggleEvent(c,!1),delete this.bindings[c]}),this;if(s){if(n){const a=er(s,c=>c.func===n);s=a.fail,this.bindings[i]=s,ke(a.pass,c=>{c.removed=!0})}else s.length=0;s.length||(this.toggleEvent(t,!1),delete this.bindings[i])}}}else Ft(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,r){return this.on(t,n,r,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const Kl=e=>(e._eventDispatcher||(e._eventDispatcher=new og({scope:e,toggleEvent:(t,n)=>{og.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),ig={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return Du(e.toLowerCase(),t??{},r);const o=Kl(r).dispatch(e,t);if(!1!==n&&r.parent){let i=r.parent();for(;i&&!o.isPropagationStopped();)i.dispatch(e,o,!1),i=i.parent?i.parent():void 0}return o},on(e,t,n){return Kl(this).on(e,t,n)},off(e,t){return Kl(this).off(e,t)},once(e,t){return Kl(this).once(e,t)},hasEventListeners(e){return Kl(this).has(e)}},Yd=Gt.DOM;let As;const Gd=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Hm(e);return n?(e.eventRoot||(e.eventRoot=Yd.select(n)[0]),e.eventRoot):e.getBody()},EC=(e,t,n)=>{var r;(r=e).hidden||Ns(r)?Ns(e)&&((r,o)=>{if("click"!==o.type||Ke.metaKeyPressed(o))Oe(RR,o.type)&&r.dispatch(o.type,o);else{const i=X(o.target);(s=r,a=i,co(a,"a",c=>Dt(c,X(s.getBody()))).bind(c=>vo(c,"href"))).each(s=>{if(o.preventDefault(),/^#/.test(s)){const a=r.dom.select(`${s},[name="${Ta(s,"#")}"]`);a.length&&r.selection.scrollIntoView(a[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,a})(e,n):e.dispatch(t,n)},TC=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Gd(e,t);if(Hm(e)){if(As||(As={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||As&&(Ft(As,(o,i)=>{e.dom.unbind(Gd(e,i))}),As=null)})),As[t])return;const r=o=>{const i=o.target,s=e.editorManager.get();let a=s.length;for(;a--;){const c=s[a].getBody();(c===i||Yd.isChildOf(i,c))&&EC(s[a],t,o)}};As[t]=r,Yd.bind(n,t,r)}else{const r=o=>{EC(e,t,o)};Yd.bind(n,t,r),e.delegates[t]=r}},NC={...ig,bindPendingEventDelegates(){const e=this;Ie.each(e._pendingNativeEvents,t=>{TC(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?TC(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Gd(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ft(e.delegates,(r,o)=>{e.dom.unbind(Gd(e,o),o,r)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},DR=e=>W(e)?{value:e.split(/[ ,]/),valid:!0}:q(e,W)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},AC=(e,t)=>e+(vi(t.message)?"":`. ${t.message}`),OC=e=>e.valid,sg=(e,t,n="")=>{const r=t(e);return g(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},PR=["design","readonly"],RC=(e,t,n,r)=>{const o=n[t.get()],i=n[r];try{i.activate()}catch(s){return void console.error(`problem while activating editor mode ${r}:`,s)}var s;o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&((e,t)=>{const n=X(e.getBody());var r,o,i;i=t,Te(r=n,o="mce-content-readonly")&&!i?_e(r,o):i&&le(r,o),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(r=>{O.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,Xd(n,!1),ke(Qn(n,'*[contenteditable="true"]'),r=>{En(r,Ts,"true"),Xd(r,!1)})):(e.readonly=!1,e.hasEditableRoot()&&Xd(n,!0),ke(Qn(n,`*[${Ts}="true"]`),r=>{h(r,Ts),Xd(r,!0)}),rg(e,"StyleWithCSS",!1),rg(e,"enableInlineTableEditing",!1),rg(e,"enableObjectResizing",!1),(r=>vs(r)||(o=>{const i=sn(X(o.getElement()));return Ah(i).filter(s=>!Dh(s.dom)&&Yc(o,s.dom)).isSome()})(r))(e)&&e.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(e),e.nodeChanged())})(e,i.editorReadOnly),t.set(r),(s=e).dispatch("SwitchMode",{mode:r})},ag=Ie.each,lg=Ie.explode,BR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},jC=Ie.makeMap("alt,ctrl,shift,meta,access"),LR=e=>{const t={},n=Bt.os.isMacOS()||Bt.os.isiOS();ag(lg(e.toLowerCase(),"+"),i=>{i in jC?t[i]=!0:/^[0-9]{2,}$/.test(i)?t.keyCode=parseInt(i,10):(t.charCode=i.charCodeAt(0),t.keyCode=BR[i]||i.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in jC)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class DC{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(ag(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,r,o){const i=this,s=i.normalizeCommandFunc(r);return ag(lg(Ie.trim(t)),a=>{const c=i.createShortcut(a,n,s,o);i.shortcuts[c.id]=c}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,r=t;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:Ie.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,n,r,o){const i=Ie.map(lg(t,">"),LR);return i[i.length-1]=Ie.extend(i[i.length-1],{func:r,scope:o||this.editor}),Ie.extend(i[0],{desc:this.editor.translate(n),subpatterns:i.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const MR=()=>{const e=(()=>{const t={},n={},r={},o={},i={},s={},a={},c={},d=(f,p)=>(_,w)=>{f[_.toLowerCase()]={...w,type:p}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(r,"autocompleter"),addContextMenu:d(i,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(a,"sidebar"),addView:d(c,"views"),addIcon:(f,p)=>o[f.toLowerCase()]=p,getAll:()=>({buttons:t,menuItems:n,icons:o,popups:r,contextMenus:i,contextToolbars:s,sidebars:a,views:c})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Os=Gt.DOM,PC=Ie.extend,IR=Ie.each;class Jd{constructor(t,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,PC(this,NC);const o=this;this.id=t,this.hidden=!1;const i=((e,t,n,r,o)=>{var i;const s=e?{mobile:vR(null!==(i=o.mobile)&&void 0!==i?i:{},t)}:{},a=((e,t)=>{const n=((i,s)=>{const a={},c={};return $t(i,(d,f)=>Oe(e,f),Nt(a),Nt(c)),{t:a,f:c}})(t);return o=n.f,{sections:J(n.t),options:J(o)};var o})(["mobile"],Cp(s,o)),c=Ie.extend(n,r,a.options(),e&&tg(a,"mobile")?((d,f,p={})=>{const _=d.sections(),w=qt(_,f).getOr({});return Ie.extend({},p,w)})(a,"mobile"):{},{external_plugins:_R(r,a.options())});return((d,f,p,_)=>{const w=Vl(p.forced_plugins),y=Vl(_.plugins),S=tg(j=f,"mobile")?j.sections().mobile:{},b=((j,D,F,z)=>j&&tg(D,"mobile")?z:F)(d,f,y,S.plugins?Vl(S.plugins):y),T=((j,D)=>[...Vl(j),...Vl(D)])(w,b);var j;return Ie.extend(_,{forced_plugins:w,plugins:T})})(e,a,r,c)})(yC||gR,yC,y=n,r.defaultOptions,y);var y;this.options=((w,y)=>{const S={},b={},T=(D,F,z)=>{const Y=sg(F,z);return OC(Y)?(b[D]=Y.value,!0):(console.warn(AC(`Invalid value passed for the ${D} option`,Y)),!1)},j=D=>ut(S,D);return{register:(D,F)=>{const z=W(F.processor)?(re=>{const ie=(()=>{switch(re){case"array":return u;case"boolean":return g;case"function":return P;case"number":return m;case"object":return M;case"string":return W;case"string[]":return DR;case"object[]":return ce=>q(ce,M);case"regexp":return ce=>H(ce,RegExp);default:return ft}})();return ce=>sg(ce,ie,`The value must be a ${re}.`)})(F.processor):F.processor,Y=((re,ie,ce)=>{if(!x(ie)){const me=sg(ie,ce);if(OC(me))return me.value;console.error(AC(`Invalid default value passed for the "${re}" option`,me))}})(D,F.default,z);S[D]={...F,default:Y,processor:z},qt(b,D).orThunk(()=>qt(y,D)).each(re=>T(D,re,z))},isRegistered:j,get:D=>qt(b,D).orThunk(()=>qt(S,D).map(F=>F.default)).getOrUndefined(),set:(D,F)=>{if(j(D)){const z=S[D];return z.immutable?(console.error(`"${D}" is an immutable option and cannot be updated`),!1):T(D,F,z.processor)}return console.warn(`"${D}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:D=>{const F=j(D);return F&&delete b[D],F},isSet:D=>ut(b,D)}})(0,i),(w=>{const y=w.options.register;y("id",{processor:"string",default:w.id}),y("selector",{processor:"string"}),y("target",{processor:"object"}),y("suffix",{processor:"string"}),y("cache_suffix",{processor:"string"}),y("base_url",{processor:"string"}),y("referrer_policy",{processor:"string",default:""}),y("language_load",{processor:"boolean",default:!0}),y("inline",{processor:"boolean",default:!1}),y("iframe_attrs",{processor:"object",default:{}}),y("doctype",{processor:"string",default:"<!DOCTYPE html>"}),y("document_base_url",{processor:"string",default:w.documentBaseUrl}),y("body_id",{processor:jm(w,"tinymce"),default:"tinymce"}),y("body_class",{processor:jm(w),default:""}),y("content_security_policy",{processor:"string",default:""}),y("br_in_pre",{processor:"boolean",default:!0}),y("forced_root_block",{processor:S=>{const b=W(S)&&pr(S);return b?{value:S,valid:b}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),y("forced_root_block_attrs",{processor:"object",default:{}}),y("newline_behavior",{processor:S=>{const b=Oe(["block","linebreak","invert","default"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),y("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),y("no_newline_selector",{processor:"string",default:""}),y("keep_styles",{processor:"boolean",default:!0}),y("end_container_on_empty_block",{processor:S=>g(S)||W(S)?{valid:!0,value:S}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),y("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),y("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),y("font_size_classes",{processor:"string",default:""}),y("automatic_uploads",{processor:"boolean",default:!0}),y("images_reuse_filename",{processor:"boolean",default:!1}),y("images_replace_blob_uris",{processor:"boolean",default:!0}),y("icons",{processor:"string",default:""}),y("icons_url",{processor:"string",default:""}),y("images_upload_url",{processor:"string",default:""}),y("images_upload_base_path",{processor:"string",default:""}),y("images_upload_credentials",{processor:"boolean",default:!1}),y("images_upload_handler",{processor:"function"}),y("language",{processor:"string",default:"en"}),y("language_url",{processor:"string",default:""}),y("entity_encoding",{processor:"string",default:"named"}),y("indent",{processor:"boolean",default:!0}),y("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),y("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),y("indent_use_margin",{processor:"boolean",default:!1}),y("indentation",{processor:"string",default:"40px"}),y("content_css",{processor:S=>{const b=!1===S||W(S)||q(S,W);return b?W(S)?{value:pt(S.split(","),mo),valid:b}:u(S)?{value:S,valid:b}:!1===S?{value:[],valid:b}:{value:S,valid:b}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ju(w)?[]:["default"]}),y("content_style",{processor:"string"}),y("content_css_cors",{processor:"boolean",default:!1}),y("font_css",{processor:S=>{const b=W(S)||q(S,W);return b?{value:u(S)?S:pt(S.split(","),mo),valid:b}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),y("inline_boundaries",{processor:"boolean",default:!0}),y("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),y("object_resizing",{processor:S=>{const b=g(S)||W(S);return b?!1===S||Ku.isiPhone()||Ku.isiPad()?{value:"",valid:b}:{value:!0===S?"table,img,figure.image,div,video,iframe":S,valid:b}:{valid:!1,message:"Must be boolean or a string"}},default:!$k}),y("resize_img_proportional",{processor:"boolean",default:!0}),y("event_root",{processor:"object"}),y("service_message",{processor:"string"}),y("theme",{processor:S=>!1===S||W(S)||P(S),default:"silver"}),y("theme_url",{processor:"string"}),y("formats",{processor:"object"}),y("format_empty_lines",{processor:"boolean",default:!1}),y("format_noneditable_selector",{processor:"string",default:""}),y("preview_styles",{processor:S=>{const b=!1===S||W(S);return b?{value:!1===S?"":S,valid:b}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),y("custom_ui_selector",{processor:"string",default:""}),y("hidden_input",{processor:"boolean",default:!0}),y("submit_patch",{processor:"boolean",default:!0}),y("encoding",{processor:"string"}),y("add_form_submit_trigger",{processor:"boolean",default:!0}),y("add_unload_trigger",{processor:"boolean",default:!0}),y("custom_undo_redo_levels",{processor:"number",default:0}),y("disable_nodechange",{processor:"boolean",default:!1}),y("readonly",{processor:"boolean",default:!1}),y("editable_root",{processor:"boolean",default:!0}),y("plugins",{processor:"string[]",default:[]}),y("external_plugins",{processor:"object"}),y("forced_plugins",{processor:"string[]"}),y("model",{processor:"string",default:w.hasPlugin("rtc")?"plugin":"dom"}),y("model_url",{processor:"string"}),y("block_unsupported_drop",{processor:"boolean",default:!0}),y("visual",{processor:"boolean",default:!0}),y("visual_table_class",{processor:"string",default:"mce-item-table"}),y("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),y("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),y("setup",{processor:"function"}),y("init_instance_callback",{processor:"function"}),y("url_converter",{processor:"function",default:w.convertURL}),y("url_converter_scope",{processor:"object",default:w}),y("urlconverter_callback",{processor:"function"}),y("allow_conditional_comments",{processor:"boolean",default:!1}),y("allow_html_data_urls",{processor:"boolean",default:!1}),y("allow_svg_data_urls",{processor:"boolean"}),y("allow_html_in_named_anchor",{processor:"boolean",default:!1}),y("allow_script_urls",{processor:"boolean",default:!1}),y("allow_unsafe_link_target",{processor:"boolean",default:!1}),y("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),y("fix_list_elements",{processor:"boolean",default:!1}),y("preserve_cdata",{processor:"boolean",default:!1}),y("remove_trailing_brs",{processor:"boolean",default:!0}),y("pad_empty_with_br",{processor:"boolean",default:!1}),y("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),y("element_format",{processor:"string",default:"html"}),y("entities",{processor:"string"}),y("schema",{processor:"string",default:"html5"}),y("convert_urls",{processor:"boolean",default:!0}),y("relative_urls",{processor:"boolean",default:!0}),y("remove_script_host",{processor:"boolean",default:!0}),y("custom_elements",{processor:"string"}),y("extended_valid_elements",{processor:"string"}),y("invalid_elements",{processor:"string"}),y("invalid_styles",{processor:Xu}),y("valid_children",{processor:"string"}),y("valid_classes",{processor:Xu}),y("valid_elements",{processor:"string"}),y("valid_styles",{processor:Xu}),y("verify_html",{processor:"boolean",default:!0}),y("auto_focus",{processor:S=>W(S)||!0===S}),y("browser_spellcheck",{processor:"boolean",default:!1}),y("protect",{processor:"array"}),y("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),y("deprecation_warnings",{processor:"boolean",default:!0}),y("a11y_advanced_options",{processor:"boolean",default:!1}),y("api_key",{processor:"string"}),y("paste_block_drop",{processor:"boolean",default:!1}),y("paste_data_images",{processor:"boolean",default:!0}),y("paste_preprocess",{processor:"function"}),y("paste_postprocess",{processor:"function"}),y("paste_webkit_styles",{processor:"string",default:"none"}),y("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),y("paste_merge_formats",{processor:"boolean",default:!0}),y("smart_paste",{processor:"boolean",default:!0}),y("paste_as_text",{processor:"boolean",default:!1}),y("paste_tab_spaces",{processor:"number",default:4}),y("text_patterns",{processor:S=>q(S,M)||!1===S?{value:Om(!1===S?[]:S),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),y("text_patterns_lookup",{processor:S=>{return P(S)?{value:(b=S,T=>{const j=b(T);return Om(j)}),valid:!0}:{valid:!1,message:"Must be a single function"};var b},default:S=>[]}),y("noneditable_class",{processor:"string",default:"mceNonEditable"}),y("editable_class",{processor:"string",default:"mceEditable"}),y("noneditable_regexp",{processor:S=>q(S,Rm)?{value:S,valid:!0}:Rm(S)?{value:[S],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),y("table_tab_navigation",{processor:"boolean",default:!0}),y("highlight_on_focus",{processor:"boolean",default:!1}),y("xss_sanitization",{processor:"boolean",default:!0}),y("details_initial_state",{processor:S=>{const b=Oe(["inherited","collapsed","expanded"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),y("details_serialized_state",{processor:S=>{const b=Oe(["inherited","collapsed","expanded"],S);return b?{value:S,valid:b}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),y("init_content_sync",{processor:"boolean",default:!1}),y("newdocument_content",{processor:"string",default:""}),w.on("ScriptsLoaded",()=>{y("directionality",{processor:"string",default:ko.isRtl()?"rtl":void 0}),y("placeholder",{processor:"string",default:Hk.getAttrib(w.getElement(),"placeholder")})})})(o);const s=this.options.get;s("deprecation_warnings")&&((w,y)=>{((S,b)=>{const T=(e=>{const t=ub(e,kN),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Mt(t)})(S),j=(e=>hb(e,EN))(b),D=j.length>0,F=T.length>0,z="mobile"===b.theme;if(D||F||z){const Y="\n- ",re=z?`\n\nThemes:${Y}mobile`:"",ie=D?`\n\nPlugins:${Y}${j.join(Y)}`:"",ce=F?`\n\nOptions:${Y}${T.join(Y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+re+ie+ce)}})(w,y),((S,b)=>{const T=(e=>ub(e,SN))(S),j=(e=>hb(e,db.map(t=>t.name)))(b),D=j.length>0,F=T.length>0;if(D||F){const z="\n- ",Y=D?`\n\nPlugins:${z}${j.map(RN).join(z)}`:"",re=F?`\n\nOptions:${z}${T.join(z)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+Y+re)}})(w,y)})(n,i);const a=s("suffix");a&&(r.suffix=a),this.suffix=r.suffix;const c=s("base_url");c&&r._setBaseUrl(c),this.baseUri=r.baseURI;const d=Yu(o);d&&(si.ScriptLoader._setReferrerPolicy(d),Gt.DOM.styleSheetLoader._setReferrerPolicy(d));const f=Um(o);N(f)&&Gt.DOM.styleSheetLoader._setContentCssCors(f),cr.languageLoad=s("language_load"),cr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new No(Dm(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ju(o),this.hasVisual=RS(o),this.shortcuts=new DC(this),this.editorCommands=new kC(this),(e=>{var t;(e=>{(t=>{const n=r=>()=>{ke("left,center,right,justify".split(","),o=>{r!==o&&t.formatter.remove("align"+o)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=r=>()=>{const o=t.selection,i=o.isCollapsed()?[t.dom.getParent(o.getNode(),t.dom.isBlock)]:o.getSelectedBlocks();return Ht(i,s=>N(t.formatter.matchNode(s,r)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=t.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let i=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Bt.os.isMacOS()||Bt.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:i,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let i=0;t.dom.getParent(t.selection.getNode(),s=>!Ye(s)||i++!==o||(t.selection.select(s),!1),t.getBody())},mceSelectNode:(n,r,o)=>{t.selection.select(o)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),xo);if(n){const r=t.dom.createRng();r.selectNodeContents(n),t.selection.setRng(r)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Kd(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Kd(t,t.dom.encode(o))},insertHTML:(n,r,o)=>{Kd(t,o)},mceInsertContent:(n,r,o)=>{Kd(t,o)},mceSetContent:(n,r,o)=>{t.setContent(o)},mceReplaceContent:(n,r,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(qS(t))}})})(e),(t=>{const n=(r,o,i)=>{const s=W(i)?{href:i}:i,a=t.dom.getParent(t.selection.getNode(),"a");M(s)&&W(s.href)&&(s.href=s.href.replace(/ /g,"%20"),a&&s.href||t.formatter.remove("link"),s.href&&t.formatter.apply("link",s,a))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{A1(t,"indent")},Outdent:()=>{O1(t)}}),t.editorCommands.addCommands({Outdent:()=>E1(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{xC(t,!0)},InsertNewBlockAfter:()=>{xC(t,!1)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Id(Uw,t)},mceInsertNewLine:(n,r,o)=>{Jw(t,o)},InsertLineBreak:(n,r,o)=>{Id(Kw,t)}})})(e),(t=>{var n;(n=t).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const i=o.parentNode;if(i&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){const s=n.selection.getBookmark();n.dom.split(i,o),n.selection.moveToBookmark(s)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(t)})(e),(t=>{(n=>{const r=(o,i)=>{n.formatter.toggle(o,i),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,i,s)=>{r(o,{value:s})},BackColor:(o,i,s)=>{r("hilitecolor",{value:s})},FontName:(o,i,s)=>{((a,c)=>{const d=wC(a,c);a.formatter.toggle("fontname",{value:TR(d)}),a.nodeChanged()})(n,s)},FontSize:(o,i,s)=>{var a;(a=n).formatter.toggle("fontsize",{value:wC(a,s)}),a.nodeChanged()},LineHeight:(o,i,s)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(s)}),a.nodeChanged()},Lang:(o,i,s)=>{var a;r(o,{value:s.code,customValue:null!==(a=s.customCode)&&void 0!==a?a:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,i,s)=>{r(W(s)?s:"p")},mceToggleFormat:(o,i,s)=>{r(s)}})})(t),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return ng(o=n,i=>SR(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return ng(o=n,i=>kR(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return ng(o=n,i=>{const s=X(o.getBody());return pf(i,c=>Se(c,"line-height"),ge(Dt,s)).getOrThunk(()=>{const c=parseFloat(G(i,"line-height")),d=parseFloat(G(i,"font-size"));return String(c/d)})}).getOr("");var o})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const i=o??t.selection.getNode();if(i!==t.getBody()){const s=t.selection.getBookmark();t.dom.remove(i,!0),t.selection.moveToBookmark(s)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,r,o)=>{var i;(i=t).removed||(!0===o?Lh(i):(a=>{const c=a.selection,d=a.getBody();let f=c.getRng();a.quirks.refreshContentEditable(),N(a.bookmark)&&!vs(a)&&Rh(a).each(_=>{a.selection.setRng(_),f=_});const p=(_=a,w=c.getNode(),_.dom.getParent(w,y=>"true"===_.dom.getContentEditable(y)));var _,w;if(p&&a.dom.isChildOf(p,d))return Bh(p),w_(a,f),void Lh(a);a.inline||(Bt.browser.isOpera()||Bh(d),a.getWin().focus()),(Bt.browser.isFirefox()||a.inline)&&(Bh(d),w_(a,f)),Lh(a)})(i))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const p=s("cache_suffix");p&&(Bt.cacheSuffix=p.replace(/^[\?\&]+/,"")),this.ui={registry:MR(),styleSheetLoader:void 0,show:I,hide:I,setEnabled:I,isEnabled:ft},this.mode=(w=>{const y=Fn("design"),S=Fn({design:{activate:I,deactivate:I,editorReadOnly:!1},readonly:{activate:I,deactivate:I,editorReadOnly:!0}});return(b=w).serializer?SC(b):b.on("PreInit",()=>{SC(b)}),(b=>{b.on("ShowCaret",T=>{Ns(b)&&T.preventDefault()}),b.on("ObjectSelected",T=>{Ns(b)&&T.preventDefault()})})(w),{isReadOnly:()=>Ns(w),set:b=>((T,j,D,F)=>{if(F!==D.get()){if(!ut(j,F))throw new Error(`Editor mode '${F}' is invalid`);T.initialized?RC(T,D,j,F):T.on("init",()=>RC(T,D,j,F))}})(w,S.get(),y,b),get:()=>y.get(),register:(b,T)=>{S.set(((j,D,F)=>{if(Oe(PR,D))throw new Error(`Cannot override default mode ${D}`);return{...j,[D]:{...F,deactivate:()=>{try{F.deactivate()}catch(z){console.error(`problem while deactivating editor mode ${D}:`,z)}}}}})(S.get(),b,T))}};var b})(o),r.dispatch("SetupEditor",{editor:this});const _=PS(o);P(_)&&_.call(o,o)}render(){(t=>{const n=t.id;ko.setCode(Im(t));const r=()=>{Es.unbind(window,"ready",r),t.render()};if(!os.Event.domLoaded)return void Es.bind(window,"ready",r);if(!t.getElement())return;const o=X(t.getElement()),i=v(o);var c;t.on("remove",()=>{Ct(o.dom.attributes,a=>h(o,a.name)),so(o,i)}),t.ui.styleSheetLoader=Dg.forElement(o,{contentCssCors:Um(c=t),referrerPolicy:Yu(c)}),Ju(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const s=t.getElement().form||Es.getParent(n,"form");s&&(t.formElement=s,xS(t)&&!hu(t.getElement())&&(Es.insertAfter(Es.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=a=>{t.dispatch(a.type,a)},Es.bind(s,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!CS(t)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),s._mceOldSubmit(s)))),t.windowManager=mb(t),t.notificationManager=gb(t),"xml"===t.options.get("encoding")&&t.on("GetContent",a=>{a.save&&(a.content=Es.encode(a.content))}),kS(t)&&t.on("submit",()=>{t.initialized&&t.save()}),SS(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=si.ScriptLoader,r=()=>{!e.removed&&(o=>{const i=Js(o);return!W(i)||N(ks.get(i))})(e)&&(o=>{const i=Gu(o);return N(da.get(i))})(e)&&fR(e)};((o,i)=>{const s=Js(o);if(W(s)&&!mC(s)&&!ut(ks.urls,s)){const a=gS(o),c=a?o.documentBaseURI.toAbsolute(a):`themes/${s}/theme${i}.js`;ks.load(s,c).catch(()=>{Nl(o,"ThemeLoadError",Al("theme",c,s))})}})(e,t),((o,i)=>{const s=Gu(o);if("plugin"!==s&&!ut(da.urls,s)){const a=mS(o),c=W(a)?o.documentBaseURI.toAbsolute(a):`models/${s}/model${i}.js`;da.load(s,c).catch(()=>{Nl(o,"ModelLoadError",Al("model",c,s))})}})(e,t),((o,i)=>{const s=Im(i),a=sS(i);if(!ko.hasCode(s)&&"en"!==s){const c=pr(a)?a:`${i.editorManager.baseURL}/langs/${s}.js`;o.add(c).catch(()=>{Nl(i,"LanguageLoadError",Al("language",c,s))})}})(n,e),((o,i,s)=>{const a=vC(i,"default",s),c=(d=i,O.from(eS(d)).filter(pr).map(f=>({url:f,name:O.none()}))).orThunk(()=>vC(i,Mm(i),""));var d;ke((d=>{const f=[],p=_=>{f.push(_)};for(let _=0;_<d.length;_++)d[_].each(p);return f})([a,c]),d=>{o.add(d.url).catch(()=>{var f,p,_;f=i,p=d.url,_=d.name.getOrUndefined(),Nl(f,"IconsLoadError",Al("icons",p,_))})})})(n,e,t),((o,i)=>{const s=(a,c)=>{ua.load(a,c).catch(()=>{Nl(o,"PluginLoadError",Al("plugin",c,a))})};Ft(AS(o),(a,c)=>{s(c,a),o.options.set("plugins",Oc(o).concat(c))}),ke(Oc(o),a=>{!(a=Ie.trim(a))||ua.urls[a]||mC(a)||s(a,`plugins/${a}/plugin${i}.js`)})})(e,t),n.loadQueue().then(r,r)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return vs(this)}translate(t){return ko.translate(t)}getParam(t,n,r){const o=this.options;return o.isRegistered(t)||(N(r)?o.register(t,{processor:r,default:n}):o.register(t,{processor:ft,default:n})),o.isSet(t)||x(n)?o.get(t):n}hasPlugin(t,n){return!(!Oe(Oc(this),t)||n&&void 0===ua.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,r){this.editorCommands.addCommand(t,n,r)}addQueryStateHandler(t,n,r){this.editorCommands.addQueryStateHandler(t,n,r)}addQueryValueHandler(t,n,r){this.editorCommands.addQueryValueHandler(t,n,r)}addShortcut(t,n,r,o){this.shortcuts.add(t,n,r,o)}execCommand(t,n,r,o){return this.editorCommands.execCommand(t,n,r,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Os.show(t.getContainer()),Os.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Os.hide(t.getContainer()),Os.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...t,load:!0},i=hu(r)?r.value:r.innerHTML,s=n.setContent(i,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),s}return""}save(t={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...t,save:!0,element:r};let i=n.getContent(o);const s={...o,content:i};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),i=s.content,hu(r))r.value=i;else{!t.is_removing&&n.inline||(r.innerHTML=i);const a=Os.getParent(n.id,"form");a&&IR(a.elements,c=>c.name!==n.id||(c.value=i,!1))}return s.element=o.element=r=null,!1!==s.set_dirty&&n.setDirty(!1),i}setContent(t,n){return Wf(this,t,n)}getContent(t){return((n,r={})=>{const o=(i=r,s=r.format?r.format:"html",{...i,format:s,get:!0,getInner:!0});var i,s;return Uy(n,o).fold(K,i=>{const s=(c=i,Uf(n).editor.getContent(c));var c;return Wy(n,s,i)})})(this,t)}insertContent(t,n){n&&(t=PC({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Wf(this,this.startContent,{format:"raw"}):Wf(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Os.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Os.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const r=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:r?.body)&&void 0!==n?n:null}convertURL(t,n,r){const o=this,i=o.options.get,s=LS(o);return P(s)?s.call(o,t,r,!0,n):!i("convert_urls")||"link"===r||M(r)&&"LINK"===r.nodeName||0===t.indexOf("file:")||0===t.length?t:i("relative_urls")?o.documentBaseURI.toRelative(t):t=o.documentBaseURI.toAbsolute(t,i("remove_script_host"))}addVisual(t){((n,r)=>{var i;i=r,wn(this).editor.addVisual(i)})(0,t)}setEditableRoot(t){var n,r;(n=this)._editableRoot!==(r=t)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:r}=t,o=t.getBody(),i=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&N(i?.nextSibling)&&fd.remove(i.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&o&&fd.setStyle((s=t).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(t),fd.remove(t.getContainer()),pd(n),pd(r),t.destroy()}var s})(this)}destroy(t){((n,r)=>{const{selection:o,dom:i}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pd(o),pd(i)),(s=>{const a=s.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),fd.unbind(a,"submit reset",s.formEventDelegate))})(n),(s=>{const a=s;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const c=s.selection;c&&(a.selection=c.win=c.dom=c.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ba=Gt.DOM,Qd=Ie.each;let Zd,BC=!1,wr=[];const eu=e=>{const t=e.type;Qd(Hi.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},LC=e=>{if(e!==BC){const t=Gt.DOM;e?(t.bind(window,"resize",eu),t.bind(window,"scroll",eu)):(t.unbind(window,"resize",eu),t.unbind(window,"scroll",eu)),BC=e}},MC=e=>{const t=wr;return wr=ot(wr,n=>e!==n),Hi.activeEditor===e&&(Hi.activeEditor=wr.length>0?wr[0]:null),Hi.focusedEditor===e&&(Hi.focusedEditor=null),t.length!==wr.length},zR="CSS1Compat"!==document.compatMode,Hi={...ig,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:ko,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=No.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const s=document.getElementsByTagName("script");for(let a=0;a<s.length;a++){const c=s[a].src||"";if(""===c)continue;const d=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){-1!==d.indexOf(".min")&&(n=".min"),t=c.substring(0,c.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}var i;e.baseURL=new No(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new No(e.baseURL),e.suffix=n,(i=e).on("AddEditor",ge(XE,i)),i.on("RemoveEditor",ge(YE,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&Ft(r,(o,i)=>{cr.PluginManager.urls[i]=o})},init(e){const t=this;let n;const r=Ie.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=s=>{n=s};const i=()=>{let s=0;const a=[];let c;var d;ba.unbind(window,"ready",i),(d=>{const f=e.onpageload;f&&f.apply(t,[])})(),c=((d,f)=>{const p=[],_=P(f)?w=>Ht(p,y=>f(y,w)):w=>Oe(p,w);for(let w=0,y=d.length;w<y;w++){const S=d[w];_(S)||p.push(S)}return p})((d=e,Bt.browser.isIE()||Bt.browser.isEdge()?(vd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):zR?(vd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):W(d.selector)?ba.select(d.selector):N(d.target)?[d.target]:[])),Ie.each(c,d=>{var f;(f=t.get(d.id))&&f.initialized&&!(f.getContainer()||f.getBody()).parentNode&&(MC(f),f.unbindAllNativeEvents(),f.destroy(!0),f.removed=!0)}),c=Ie.grep(c,d=>!t.get(d.id)),0===c.length?o([]):Qd(c,d=>{e.inline&&d.tagName.toLowerCase()in r?vd("Could not initialize inline editor on invalid inline target element",d):((f,p,_)=>{const w=new Jd(f,p,t);a.push(w),w.on("init",()=>{++s===c.length&&o(a)}),w.targetElm=w.targetElm||_,w.render()})((f=>{let p=f.id;return p||(p=qt(f,"name").filter(_=>!ba.get(_)).getOrThunk(ba.uniqueId),f.setAttribute("id",p)),p})(d),e,d)})};return ba.bind(window,"ready",i),new Promise(s=>{n?s(n):o=a=>{s(a)}})},get(e){return 0===arguments.length?wr.slice(0):W(e)?Z(wr,t=>t.id===e).getOr(null):m(e)&&wr[e]?wr[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&wr.push(e),LC(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Zd||(Zd=r=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Zd))),e},createEditor(e,t){return this.add(new Jd(e,t,this))},remove(e){const t=this;let n;if(e){if(!W(e))return n=e,k(t.get(n.id))?null:(MC(n)&&t.dispatch("RemoveEditor",{editor:n}),0===wr.length&&window.removeEventListener("beforeunload",Zd),n.remove(),LC(wr.length>0),n);Qd(ba.select(e),r=>{n=t.get(r.id),n&&t.remove(n)})}else for(let r=wr.length-1;r>=0;r--)t.remove(wr[r])},execCommand(e,t,n){var r;const o=this,i=M(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":return o.get(i)||new Jd(i,n.options,o).render(),!0;case"mceRemoveEditor":{const s=o.get(i);return s&&s.remove(),!0}case"mceToggleEditor":{const s=o.get(i);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Qd(wr,e=>{e.save()})},addI18n:(e,t)=>{ko.add(e,t)},translate:e=>ko.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new No(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new No(this.baseURL)}};Hi.setup();const FR=(()=>{const e=Oi();return{FakeClipboardItem:t=>({items:t,types:_n(t),getType:n=>qt(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),IC=Math.min,wa=Math.max,tu=Math.round,zC=(e,t,n)=>{let r=t.x,o=t.y;const i=e.w,s=e.h,a=t.w,c=t.h,d=(n||"").split("");return"b"===d[0]&&(o+=c),"r"===d[1]&&(r+=a),"c"===d[0]&&(o+=tu(c/2)),"c"===d[1]&&(r+=tu(a/2)),"b"===d[3]&&(o-=s),"r"===d[4]&&(r-=i),"c"===d[3]&&(o-=tu(s/2)),"c"===d[4]&&(r-=tu(i/2)),xa(r,o,i,s)},xa=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),$R={inflate:(e,t,n)=>xa(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:zC,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const i=zC(e,t,r[o]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=wa(e.x,t.x),r=wa(e.y,t.y),o=IC(e.x+e.w,t.x+t.w),i=IC(e.y+e.h,t.y+t.h);return o-n<0||i-r<0?null:xa(n,r,o-n,i-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,i=e.x+e.w,s=e.y+e.h;const a=t.x+t.w,c=t.y+t.h,d=wa(0,t.x-r),f=wa(0,t.y-o),p=wa(0,i-a),_=wa(0,s-c);return r+=d,o+=f,n&&(i+=d,s+=f,r-=p,o-=_),i-=p,s-=_,xa(r,o,i-r,s-o)},create:xa,fromClientRect:e=>xa(e.left,e.top,e.width,e.height)},HR=(()=>{const e={},t={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const s=new Promise((a,c)=>{const d=((f,p,_=1e3)=>{let w=!1,y=null;const S=j=>(...D)=>{w||(w=!0,null!==y&&(clearTimeout(y),y=null),j.apply(null,D))},b=S(f),T=S(p);return{start:(...j)=>{w||null!==y||(y=setTimeout(()=>T.apply(null,j),_))},resolve:b,reject:T}})(a,c);t[n]=d.resolve,si.ScriptLoader.loadScript(r).then(()=>d.start(i),()=>d.reject(o))});return e[n]=s,s}},add:(n,r)=>{void 0!==t[n]&&(t[n](r),delete t[n]),e[n]=Promise.resolve(r)},unload:n=>{delete e[n]}}})();let Xl;try{const e="__storage_test__";Xl=window.localStorage,Xl.setItem(e,e),Xl.removeItem(e)}catch{Xl=(()=>{let t={},n=[];const r={getItem:o=>t[o]||null,setItem:(o,i)=>{n.push(o),t[o]=String(i)},key:o=>n[o],removeItem:o=>{n=n.filter(i=>i===o),delete t[o]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const qR={geom:{Rect:$R},util:{Delay:Vr,Tools:Ie,VK:Ke,URI:No,EventDispatcher:og,Observable:ig,I18n:ko,LocalStorage:Xl,ImageUploader:e=>{const t=yb(),n=wb(e,t);return{upload:(r,o=!0)=>n.upload(r,o?bb(e):void 0)}}},dom:{EventUtils:os,TreeWalker:Pn,TextSeeker:as,DOMUtils:Gt,ScriptLoader:si,RangeUtils:ms,Serializer:cb,StyleSheetLoader:jg,ControlSelection:Jv,BookmarkManager:ml,Selection:lb,Event:os.Event},html:{Styles:ju,Entities:Ni,Node:br,Schema:Ai,DomParser:ca,Writer:B_,Serializer:Bi},Env:Bt,AddOnManager:cr,Annotator:Hv,Formatter:kb,UndoManager:Eb,EditorCommands:kC,WindowManager:mb,NotificationManager:gb,EditorObservable:NC,Shortcuts:DC,Editor:Jd,FocusManager:b_,EditorManager:Hi,DOM:Gt.DOM,ScriptLoader:si.ScriptLoader,PluginManager:ua,ThemeManager:ks,ModelManager:da,IconManager:gd,Resource:HR,FakeClipboard:FR,trim:Ie.trim,isArray:Ie.isArray,is:Ie.is,toArray:Ie.toArray,makeMap:Ie.makeMap,each:Ie.each,map:Ie.map,grep:Ie.grep,inArray:Ie.inArray,extend:Ie.extend,walk:Ie.walk,resolve:Ie.resolve,explode:Ie.explode,_addCacheSuffix:Ie._addCacheSuffix},FC=Ie.extend(Hi,qR);(e=>{window.tinymce=e,window.tinyMCE=e})(FC),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})(FC)}();